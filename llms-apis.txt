# Defold API Reference

This document contains the Defold API reference, grouped by language.

## C++ APIs

- [dmDDF (Ddf)](#apis:engine-ddf-src-dmsdk-ddf-ddf-h) - SDK DDF (Defold Data Format) API documentation
- [Align](#apis:engine-dlib-src-dmsdk-dlib-align-h) - Alignment macros
- [dmAndroid (Android)](#apis:engine-dlib-src-dmsdk-dlib-android-h) - Android utility functions
- [Array](#apis:engine-dlib-src-dmsdk-dlib-array-h) - Templatized array with bounds checking
- [Atomic](#apis:engine-dlib-src-dmsdk-dlib-atomic-h) - Atomic functions
- [dmBuffer (Buffer)](#apis:engine-dlib-src-dmsdk-dlib-buffer-h) - Buffer API for data buffers as the main way to communicate between systems
- [dmConditionVariable (Condition Variable)](#apis:engine-dlib-src-dmsdk-dlib-condition_variable-h) - API for platform independent mutex synchronization primitive
- [dmConfigFile (ConfigFile)](#apis:engine-dlib-src-dmsdk-dlib-configfile-h) - Configuration file access functions
- [dmConfigFile (ConfigFile)](#apis:engine-dlib-src-dmsdk-dlib-configfile_gen-hpp) - Configuration file access functions
- [dmConnectionPool (Connection Pool)](#apis:engine-dlib-src-dmsdk-dlib-connection_pool-h) - Connection pool
- [dmCrypt (Crypt)](#apis:engine-dlib-src-dmsdk-dlib-crypt-h) - Various hash and encode/decode functions
- [dmDoubleLinkedList (Double linked list structs and functions)](#apis:engine-dlib-src-dmsdk-dlib-double_linked_list-h) - Double linked list structs and functions
- [DStrings](#apis:engine-dlib-src-dmsdk-dlib-dstrings-h) - SDK Defold String Utils API documentation
- [dmFileDescriptor (FileDescriptor)](#apis:engine-dlib-src-dmsdk-dlib-file_descriptor-h) - File Descriptor functions
- [Hash](#apis:engine-dlib-src-dmsdk-dlib-hash-h) - Hash functions
- [Hashtable](#apis:engine-dlib-src-dmsdk-dlib-hashtable-h) - Hash table
- [dmHttpClient (Http Client)](#apis:engine-dlib-src-dmsdk-dlib-http_client-h) - Http client functions
- [dmImage (Image)](#apis:engine-dlib-src-dmsdk-dlib-image-h) - Image API functions
- [dmIntersection (Intersection structs and functions)](#apis:engine-dlib-src-dmsdk-dlib-intersection-h) - Intersection math structs and functions
- [Log](#apis:engine-dlib-src-dmsdk-dlib-log-h) - Logging functions
- [dmMath (Math)](#apis:engine-dlib-src-dmsdk-dlib-math-h) - Math functions
- [dmMemory (Memory)](#apis:engine-dlib-src-dmsdk-dlib-memory-h) - Memory allocation functions
- [dmMessage (Message)](#apis:engine-dlib-src-dmsdk-dlib-message-h) - Api for sending messages
- [dmMutex (Mutex)](#apis:engine-dlib-src-dmsdk-dlib-mutex-h) - API for platform independent mutex synchronization primitive
- [ObjectPool](#apis:engine-dlib-src-dmsdk-dlib-object_pool-h) - SDK Object Pool API documentation
- [dmProfile (Profile)](#apis:engine-dlib-src-dmsdk-dlib-profile-h) - Profiling macros
- [SharedLibrary (Shared Library)](#apis:engine-dlib-src-dmsdk-dlib-shared_library-h) - Utility functions for shared library export/import
- [dmSocket (Socket)](#apis:engine-dlib-src-dmsdk-dlib-socket-h) - Socket functions
- [dmSpinlock (Spinlock)](#apis:engine-dlib-src-dmsdk-dlib-spinlock-h) - API for platform independent spinlock synchronization primitive
- [dmSSLSocket (SSLSocket)](#apis:engine-dlib-src-dmsdk-dlib-sslsocket-h) - Secure socket functions
- [dmStaticAssert (Static Assert)](#apis:engine-dlib-src-dmsdk-dlib-static_assert-h) - ```cpp void test() { DM_STATIC_ASSERT(sizeof(int) == 4, Invalid_int_size); } ```
- [dmSys (Sys)](#apis:engine-dlib-src-dmsdk-dlib-sys-h) - Sys allocation functions
- [dmThread (Thread)](#apis:engine-dlib-src-dmsdk-dlib-thread-h) - Thread functions
- [dmTime (Time)](#apis:engine-dlib-src-dmsdk-dlib-time-h) - Time functions
- [dmTransform (Transform)](#apis:engine-dlib-src-dmsdk-dlib-transform-h) - Api for transforms with rotation, scale and translation
- [dmURI (URI)](#apis:engine-dlib-src-dmsdk-dlib-uri-h) - URI functions
- [dmUtf8 (Utf8)](#apis:engine-dlib-src-dmsdk-dlib-utf8-h) - SDK Utf8 API documentation
- [dmVMath (Vector Math)](#apis:engine-dlib-src-dmsdk-dlib-vmath-h) - Vector Math functions
- [dmWebServer (WebServer)](#apis:engine-dlib-src-dmsdk-dlib-webserver-h) - Simple high-level single-threaded Web server based on dmHttpServer The web-server has a handler concept similar to servlets in Java
- [dmEngine (Engine)](#apis:engine-engine-src-dmsdk-engine-extension-hpp) - SDK Engine extension API documentation
- [engine (Engine runtime)](#apis:engine-engine-src-engine_doc-h) - Engine runtime documentation
- [Extension](#apis:engine-extension-src-dmsdk-extension-extension-h) - Functions for creating and controlling engine native extension libraries
- [dmExtension (Extension)](#apis:engine-extension-src-dmsdk-extension-extension_gen-hpp) - Functions for creating and controlling engine native extension libraries
- [Font](#apis:engine-font-src-dmsdk-font-font-h) - Font API for loading a font (truetype), getting glyph metrics and bitmap/sdf data
- [FontCollection](#apis:engine-font-src-dmsdk-font-fontcollection-h) - Font API for grouping multiple fonts into a collection
- [TextLayout](#apis:engine-font-src-dmsdk-font-text_layout-h) - API for laying out complex text into format ready for display
- [dmGameObject (Component)](#apis:engine-gameobject-src-dmsdk-gameobject-component-h) - Api for manipulating game object components (WIP)
- [dmGameObject (Gameobject)](#apis:engine-gameobject-src-dmsdk-gameobject-gameobject-h) - API for manipulating game objects
- [dmGameObject (PropertyContainer)](#apis:engine-gameobject-src-dmsdk-gameobject-gameobject_props-h) - API for game object property container
- [dmGameObject (Script)](#apis:engine-gameobject-src-dmsdk-gameobject-script-h) - SDK GameObject script API documentation
- [dmGameSystem (Collection factory)](#apis:engine-gamesys-src-dmsdk-gamesys-components-comp_collection_factory-h) - API for spawning collections from a collection factory component
- [dmGameSystem (Factory)](#apis:engine-gamesys-src-dmsdk-gamesys-components-comp_factory-h) - API for spawning gameobject instances from a factory component
- [dmGameSystem (GameSystem Gui)](#apis:engine-gamesys-src-dmsdk-gamesys-gui-h) - Built-in scripting functions
- [dmGameSystem (Property)](#apis:engine-gamesys-src-dmsdk-gamesys-property-h) - Property functions
- [dmGameSystem (Component Render Constants)](#apis:engine-gamesys-src-dmsdk-gamesys-render_constants-h) - Api for setting and updating component render constants
- [dmGameSystem (Font Resource)](#apis:engine-gamesys-src-dmsdk-gamesys-resources-res_font-h) - Font resource functions
- [dmScript (Script)](#apis:engine-gamesys-src-dmsdk-gamesys-script-h) - Built-in scripting functions
- [dmGraphics (Graphics)](#apis:engine-graphics-src-dmsdk-graphics-graphics-h) - Graphics API
- [dmGraphics (Graphics)](#apis:engine-graphics-src-dmsdk-graphics-graphics_native-h) - Platform specific native graphics functions
- [dmGraphics (Graphics OpenGL)](#apis:engine-graphics-src-dmsdk-graphics-graphics_opengl-h) - Graphics OpenGL API
- [dmGraphics (Graphics Vulkan)](#apis:engine-graphics-src-dmsdk-graphics-graphics_vulkan-h) - Graphics Vulkan API
- [dmGui (Gui)](#apis:engine-gui-src-dmsdk-gui-gui-h) - Defold GUI system
- [dmPhysics (Physics)](#apis:engine-physics-src-dmsdk-physics-physics-h) - Physics related structs and functions
- [dmRender (Render)](#apis:engine-render-src-dmsdk-render-render-h) - Api for render specific data
- [Resource](#apis:engine-resource-src-dmsdk-resource-resource-h) - Functions for managing resource types
- [dmResource (Resource)](#apis:engine-resource-src-dmsdk-resource-resource-hpp) - Functions for managing resource types
- [dmResource (Resource)](#apis:engine-resource-src-dmsdk-resource-resource_gen-hpp) - Functions for managing resource types
- [dmScript (Script)](#apis:engine-script-src-dmsdk-script-script-h) - Built-in scripting functions
- [dmSound (Sound)](#apis:engine-sound-src-dmsdk-sound-sound-h) - Functions for controlling the engine sound mixer from native extensions

## Lua APIs

- [b2d](#apis:b2d-lua) - Functions for interacting with Box2D
- [b2d.body](#apis:b2d.body-lua) - Functions for interacting with Box2D bodies
- [base (Base)](#apis:base-lua) - Documentation for the Lua base standard library
- [bit (BitOp)](#apis:bit-lua) - [Lua BitOp](http://bitop
- [buffer (Buffer)](#apis:buffer-lua) - Functions for manipulating buffers and streams
- [builtins (Built-ins)](#apis:builtins-lua) - Built-in scripting functions
- [camera (Camera)](#apis:camera-lua) - Messages to control camera components and camera focus
- [collectionfactory (Collection factory)](#apis:collectionfactory-lua) - Functions for controlling collection factory components which are used to dynamically spawn collections into the runtime
- [collectionproxy (Collection proxy)](#apis:collectionproxy-lua) - Messages for controlling and interacting with collection proxies which are used to dynamically load collections into the runtime
- [coroutine (Coroutine)](#apis:coroutine-lua) - Documentation for the Lua coroutine standard library
- [crash (Crash)](#apis:crash-lua) - Native crash logging functions and constants
- [debug (Debug)](#apis:debug-lua) - Documentation for the Lua debug standard library
- [editor (Editor)](#apis:editor-lua) - Editor scripting documentation
- [factory (Factory)](#apis:factory-lua) - Functions for controlling factory components which are used to dynamically spawn game objects into the runtime
- [font (Font)](#apis:font-lua) - Functions, messages and properties used to manipulate font resources
- [go (Game object)](#apis:go-lua) - Functions, core hooks, messages and constants for manipulation of game objects
- [graphics (Graphics)](#apis:graphics-lua) - Graphics functions and constants
- [gui (GUI)](#apis:gui-lua) - GUI core hooks, functions, messages, properties and constants for creation and manipulation of GUI nodes
- [html5 (HTML5)](#apis:html5-lua) - HTML5 platform specific functions
- [http (HTTP)](#apis:http-lua) - Functions for performing HTTP and HTTPS requests
- [image (Image)](#apis:image-lua) - Functions for creating image objects
- [io (Io)](#apis:io-lua) - Documentation for the Lua io standard library
- [json (JSON)](#apis:json-lua) - Manipulation of JSON data strings
- [label (Label)](#apis:label-lua) - Functions to manipulate a label component
- [liveupdate (LiveUpdate)](#apis:liveupdate-lua) - Functions and constants to access resources
- [math (Math)](#apis:math-lua) - Documentation for the Lua math standard library
- [model (Model)](#apis:model-lua) - Model API documentation
- [msg (Message)](#apis:msg-lua) - Functions for passing messages and constructing URL objects
- [os (Os)](#apis:os-lua) - Documentation for the Lua os standard library
- [package (Package)](#apis:package-lua) - Documentation for the Lua package standard library
- [particlefx (Particle effects)](#apis:particlefx-lua) - Functions for controlling particle effect component playback and shader constants
- [physics (Collision object)](#apis:physics-lua) - Collision object physics API documentation
- [profiler (Profiler)](#apis:profiler-lua) - Functions for getting profiling data in runtime
- [render (Render)](#apis:render-lua) - Rendering API documentation
- [resource (Resource)](#apis:resource-lua) - Functions and constants to access resources
- [socket (LuaSocket)](#apis:socket-lua) - [LuaSocket](https://github
- [sound (Sound)](#apis:sound-lua) - Functions and messages for controlling sound components and mixer groups
- [sprite (Sprite)](#apis:sprite-lua) - Sprite API documentation
- [string (String)](#apis:string-lua) - Documentation for the Lua string standard library
- [sys (System)](#apis:sys-lua) - Functions and messages for using system resources, controlling the engine, error handling and debugging
- [table (Table)](#apis:table-lua) - Documentation for the Lua table standard library
- [tilemap (Tilemap)](#apis:tilemap-lua) - Functions and messages used to manipulate tile map components
- [timer (Timer)](#apis:timer-lua) - Timers allow you to set a delay and a callback to be called when the timer completes
- [types (Types)](#apis:types-lua) - Functions for checking Defold userdata types
- [vmath (Vector math)](#apis:vmath-lua) - Functions for mathematical operations on vectors, matrices and quaternions
- [window (Window)](#apis:window-lua) - Functions and constants to access the window, window event listeners and screen dimming
- [zlib (Zlib)](#apis:zlib-lua) - Functions for compression and decompression of string buffers

## Extension APIs

- [adinfo (extension-adinfo)](#apis:extension-adinfo_adinfo) - Provides functionality to get the advertising id and tracking status
- [admob (extension-admob)](#apis:extension-admob_admob) - Functions and constants for interacting with [Google AdMob APIs](https://developers
- [adpf (extension-adpf)](#apis:extension-adpf_adpf) - Functions and constants for interacting with the Android Device Performance Framework
- [camera (extension-camera)](#apis:extension-camera_camera) - Provides functionality to capture images using the camera
- [crazygames (extension-crazygames)](#apis:extension-crazygames_crazygames) - Functions and constants for interacting with the CrazyGames SDK APIs
- [crypt (extension-crypt)](#apis:extension-crypt_crypt) - Functions and constants for interacting with various hash and encode/decode algorithms
- [facebook (extension-facebook)](#apis:extension-facebook_facebook) - Functions and constants for interacting with Facebook APIs
- [firebase (extension-firebase-analytics)](#apis:extension-firebase-analytics_firebase) - Functions and constants for interacting with Firebase
- [firebase (extension-firebase-remoteconfig)](#apis:extension-firebase-remoteconfig_firebase) - Functions and constants for interacting with Firebase
- [firebase (extension-firebase)](#apis:extension-firebase_firebase) - Functions and constants for interacting with Firebase
- [fmod (extension-fmod)](#apis:extension-fmod_fmod) - FMOD Low Level API for audio playback and manipulation
- [fontgen (extension-fontgen)](#apis:extension-fontgen_fontgen) - Functions to generate glyphs for fonts at runtime
- [instantapp (extension-googleplayinstant)](#apis:extension-googleplayinstant_instantapp) - Functions and constants for interacting with InstantApp APIs
- [gpgs (extension-gpgs)](#apis:extension-gpgs_gpgs) - Functions and constants for interacting with Google Play Game Services (GPGS) APIs
- [iac (extension-iac)](#apis:extension-iac_iac) - Functions and constants for doing inter-app communication
- [iap (extension-iap)](#apis:extension-iap_iap) - Functions and constants for doing in-app purchases
- [ironsource (extension-ironsource)](#apis:extension-ironsource_ironsource) - Functions and constants for interacting with IronSource API
- [networkinfo (extension-network-info)](#apis:extension-network-info_networkinfo) - Functions to get information about the network configuration of the device
- [odin (extension-odin)](#apis:extension-odin_odin) - Functions and constants for interacting with ODIN Voice
- [pad (extension-pad)](#apis:extension-pad_pad) - Functionality to work with Play Asset Delivery and the AssetPackManager
- [permissions (extension-permissions)](#apis:extension-permissions_permissions) - Functions and constants for interacting with permissions related APIs
- [realtime (extension-photon-realtime)](#apis:extension-photon-realtime_realtime) - Functions and constants for interacting with Photon Realtime
- [poki_sdk (extension-poki-sdk)](#apis:extension-poki-sdk_poki_sdk) - Functions and constants for interacting with Poki SDK APIs
- [push (extension-push)](#apis:extension-push_push) - Functions and constants for interacting with local, as well as Apple''s and Google''s push notification services
- [review (extension-review)](#apis:extension-review_review) - Functions and constants for interacting with review APIs
- [rive (extension-rive)](#apis:extension-rive_rive) - Functions and constants for interacting with Rive models
- [safearea (extension-safearea)](#apis:extension-safearea_safearea) - Defold native extension that will change the view/render of a game to fit into the safe area on iPhones and Android(API 28+) with notch
- [siwa (extension-siwa)](#apis:extension-siwa_siwa) - Functions and constants for interacting Sign in with Apple
- [gui (extension-spine)](#apis:extension-spine_gui) - Functions and constants for interacting with Spine models in GUI
- [spine (extension-spine)](#apis:extension-spine_spine) - Functions and constants for interacting with Spine models
- [steam (extension-steam)](#apis:extension-steam_steam) - Functions and constants for interacting with Steamworks
- [websocket (extension-websocket)](#apis:extension-websocket_websocket) - Functions and constants for using websockets
- [webview (extension-webview)](#apis:extension-webview_webview) - Functions and constants for interacting with webview APIs
- [shop (extension-xsolla)](#apis:extension-xsolla_shop) - Functions to use the Xsolla Shop Builder API
- [zendesk (extension-zendesk)](#apis:extension-zendesk_zendesk) - Defold native extension to interact with the Zendesk SDK

<!-- engine-ddf-src-dmsdk-ddf-ddf-h -->

# Ddf {#apis:engine-ddf-src-dmsdk-ddf-ddf-h}

**Namespace:** `dmDDF`
**Language:** C++
**Type:** Defold C++
**File:** `ddf.h`
**Source:** `engine/ddf/src/dmsdk/ddf/ddf.h`
**Include:** `dmsdk/ddf/ddf.h`

SDK DDF (Defold Data Format) API documentation

## API

### Descriptor
*Type:* TYPEDEF
Opaque pointer that holds info about a message type.

### FreeMessage
*Type:* FUNCTION
Free message

**Parameters**

- `message` (void*) - The message

### GetDescriptorFromHash
*Type:* FUNCTION
Get Descriptor from hash name

**Parameters**

- `hash` (dmhash_t) - hash of type name

**Returns**

- `descriptor` (dmDDF::Descriptor*) - 0 if not found

### LoadMessage
*Type:* FUNCTION
Load/decode a DDF message from buffer

**Parameters**

- `buffer` (const void*) - Input buffer
- `buffer_size` (uint32_t) - Input buffer size in bytes
- `desc` (dmDDF::Descriptor*) - DDF descriptor
- `message` (void**) - (out) Destination pointer to message

**Returns**

- `RESULT_OK` - on success

### LoadMessage
*Type:* FUNCTION
Load/decode a DDF message from buffer

**Parameters**

- `buffer` (const void*) - Input buffer
- `buffer_size` (uint32_t) - Input buffer size in bytes
- `desc` (dmDDF::Descriptor*) - DDF descriptor
- `message` (void**) - (out) Destination pointer to message
- `options` (uint32_t) - options, eg dmDDF::OPTION_OFFSET_POINTERS
- `size` (uint32_t*) - (out) loaded message size

**Returns**

- `RESULT_OK` - on success

### LoadMessage<T>
*Type:* FUNCTION
Load/decode a DDF message from buffer. Template variant

**Template Parameters**

- `T`

**Parameters**

- `buffer` (const void*) - Input buffer
- `buffer_size` (uint32_t) - Input buffer size in bytes
- `message` (T**) - (out) Destination pointer to message

**Returns**

- `RESULT_OK` - on success

### LoadMessageFromFile
*Type:* FUNCTION
Load/decode a DDF message from file

**Parameters**

- `file_name` (const char*) - File name
- `desc` (dmDDF::Descriptor*) - DDF descriptor
- `message` (void**) - (out) Destination pointer to message

**Returns**

- `RESULT_OK` - on success

### OPTION_OFFSET_POINTERS
*Type:* CONSTANT
Store pointers as offset from base address. Needed when serializing entire messages (copy). Value (1 << 0)

### ResolvePointers
*Type:* FUNCTION
If the message was loaded with the flag dmDDF::OPTION_OFFSET_POINTERS, all pointers have their offset stored.
This function resolves those offsets into actual pointers

**Parameters**

- `desc` (dmDDF::Descriptor*) - DDF descriptor
- `message` (void*) - (int/out) The message to patch pointers in

**Returns**

- `RESULT_OK` - on success

### Result
*Type:* ENUM
Result enumeration.

**Members**

- `dmDDF::RESULT_OK` - = 0,
- `dmDDF::RESULT_FIELDTYPE_MISMATCH` - = 1,
- `dmDDF::RESULT_WIRE_FORMAT_ERROR` - = 2,
- `dmDDF::RESULT_IO_ERROR` - = 3,
- `dmDDF::RESULT_VERSION_MISMATCH` - = 4,
- `dmDDF::RESULT_MISSING_REQUIRED` - = 5,
- `dmDDF::RESULT_INTERNAL_ERROR` - = 1000,

### SaveMessageToArray
*Type:* FUNCTION
Save message to array

**Parameters**

- `message` (const void*) - Message
- `desc` (dmDDF::Descriptor*) - DDF descriptor
- `buffer` (dmArray<uint8_t>&) - Buffer to save to

**Returns**

- `RESULT_OK` - on success

<!-- engine-dlib-src-dmsdk-dlib-align-h -->

# Align {#apis:engine-dlib-src-dmsdk-dlib-align-h}

**Namespace:** `Align`
**Language:** C++
**Type:** Defold C++
**File:** `align.h`
**Source:** `engine/dlib/src/dmsdk/dlib/align.h`
**Include:** `dmsdk/dlib/align.h`

Alignment macros. Use for compiler compatibility

## API

### DM_ALIGN
*Type:* MACRO
Align a value to a boundary

**Parameters**

- `x` (int) - value to align
- `a` (int) - alignment boundary

**Examples**

Align 24 to 16 alignment boundary. results is 32:
```
int result = DM_ALIGN(24, 16);

```

### DM_ALIGNED
*Type:* MACRO
Data structure alignment

**Parameters**

- `a` (int) - number of bytes to align to

**Examples**

Align m_Data to 16 bytes alignment boundary:
```
int DM_ALIGNED(16) m_Data;

```

<!-- engine-dlib-src-dmsdk-dlib-android-h -->

# Android {#apis:engine-dlib-src-dmsdk-dlib-android-h}

**Namespace:** `dmAndroid`
**Language:** C++
**Type:** Defold C++
**File:** `android.h`
**Source:** `engine/dlib/src/dmsdk/dlib/android.h`
**Include:** `dmsdk/dlib/android.h`

Android utility functions

## API

### Detach
*Type:* FUNCTION
Detaches the jni environment

**Returns**

- `ok` (bool) - true if there was no java exceptions. False if there was an exception.

### GetActivity
*Type:* FUNCTION
Gets the app native activity

**Returns**

- `activity` (ANativeActivity*) - the app native activity

### GetEnv
*Type:* FUNCTION
Gets the JNI environment

**Returns**

- `env` (JNIENV*) - the attached environment

### IsAttached
*Type:* FUNCTION
Is the environment attached and valid?

**Returns**

- `isattached` (bool) - true if the environment is valid

**Examples**

```
Result SomeFunc() {
  ThreadAttacher thread;
  JNIEnv* env = thread.GetEnv();
  if (!env)
    return RESULT_ATTACH_FAILED;
  ... calls using jni
  return thread.Detach() ? RESULT_OK : RESULT_JNI_CALLS_FAILED;
}

```

### LoadClass
*Type:* FUNCTION
Load a class

**Parameters**

- `env` (JNIEnv*)
- `class_name` (const char*)

**Returns**

- `class` (jclass) - the activity class loader

### LoadClass
*Type:* FUNCTION
Load a class

**Parameters**

- `env` (JNIEnv*)
- `activity` (jobject)
- `class_name` (const char*)

**Returns**

- `class` (jclass) - the activity class loader

### OnActivityCreate
*Type:* TYPEDEF
onCreate callback function type.
Used with RegisterOnActivityCreateListener() and UnregisterOnActivityCreateListener()

**Parameters**

- `env` (JNIEnv*)
- `activity` (jobject)

### OnActivityResult
*Type:* TYPEDEF
Activity result callback function type. Monitors events from the main activity.
Used with RegisterOnActivityResultListener() and UnregisterOnActivityResultListener()

**Parameters**

- `env` (JNIEnv*)
- `activity` (jobject)
- `request_code` (int32_t)
- `result_code` (int32_t)
- `result` (void*)

### RegisterOnActivityCreateListener
*Type:* FUNCTION
Registers an onCreate callback. Multiple listeners are allowed.

**Notes**

- [icon:android] Only available on Android

**Parameters**

- `listener` (dmAndroid::OnActivityCreate)

### RegisterOnActivityResultListener
*Type:* FUNCTION
Registers an activity result callback. Multiple listeners are allowed.

**Notes**

- [icon:android] Only available on Android

**Parameters**

- `listener` (dmAndroid::OnActivityResult)

### ThreadAttacher
*Type:* CLASS
Struct attaching the JNI environment. Detaches the

### ThreadAttacher
*Type:* FUNCTION
constructor

**Examples**

```
{
  ThreadAttacher thread;
  SomeFunction( thread.GetEnv() );
  // Automatically detaches
}

```

```
{
  ThreadAttacher thread;
  JNIEnv* env = thread.GetEnv();
  if (!env)
    return;
  ...
}

```

### UnregisterOnActivityCreateListener
*Type:* FUNCTION
Unregisters an onCreate callback

**Notes**

- [icon:android] Only available on Android

**Parameters**

- `listener` (dmAndroid::OnActivityCreate)

### UnregisterOnActivityResultListener
*Type:* FUNCTION
Unregisters an activity result callback

**Notes**

- [icon:android] Only available on Android

**Parameters**

- `listener` (dmAndroid::OnActivityResult)

<!-- engine-dlib-src-dmsdk-dlib-array-h -->

# Array {#apis:engine-dlib-src-dmsdk-dlib-array-h}

**Namespace:** `Array`
**Language:** C++
**Type:** Defold C++
**File:** `array.h`
**Source:** `engine/dlib/src/dmsdk/dlib/array.h`
**Include:** `dmsdk/dlib/array.h`

Templatized array with bounds checking.

The backing storage is either auto-allocated (dynamically allocated) or user-allocated (supplied by user).
With exception of changing the size and capacity, all operations are guaranteed to be O(1).

```cpp
dmArray a;
a.SetCapacity(1);
a.Push(1);
int b = a[0];
```

## API

### Back
*Type:* FUNCTION
Last element of the array

**Returns**

- `reference` (T&) - reference to the last element

### Back
*Type:* FUNCTION
Last element of the array (const)

**Returns**

- `reference` (const T&) - const-reference to the last element

### Begin
*Type:* FUNCTION
Pointer to the start of the backing storage

**Returns**

- `pointer` (T*) - pointer to start of memory

### Begin
*Type:* FUNCTION
Pointer to the start of the backing storage

**Returns**

- `pointer` (const T*) - pointer to start of memory

### Capacity
*Type:* FUNCTION
Capacity is currently allocated storage.

**Returns**

- `number` (uint32_t) - array capacity

### DM_ARRAY_SIZE
*Type:* MACRO
get number of elements in C array

**Parameters**

- `A` (T) - C array to count

**Returns**

- `Number` - of elements

### dmArray
*Type:* CLASS
The backing storage is either auto-allocated (dynamically allocated) or user-allocated (supplied by user).
With exception of changing the size and capacity, all operations are guaranteed to be O(1).

**Template Parameters**

- `T` - Contained type, must obey memcpy semantics

### dmArray
*Type:* FUNCTION
constructor. empty auto-allocated memory

**Examples**

```
dmArray a;
a.Push(1);

```

### dmArray
*Type:* FUNCTION
user-allocated array with initial size and capacity

**Parameters**

- `user_array` (T*) - User-allocated array to be used as storage.
- `size` (uint32_t) - Initial size
- `capacity` (uint32_t) - Initial capacity

### dmArray
*Type:* FUNCTION
user-allocated array with initial size and capacity

**Parameters**

- `user_array` (T*) - User-allocated array to be used as storage.
- `size` (uint32_t) - Initial size
- `capacity` (uint32_t) - Initial capacity
- `user_allocated` (bool) - If false, the ownership is transferred to the dmArray

### Empty
*Type:* FUNCTION
Check if the array is empty.
The array is empty when the size is zero.

**Returns**

- `boolean` (bool) - true if the array is empty

### End
*Type:* FUNCTION
Pointer to the end of the backing storage
The end is essentially outside of the used storage.

**Returns**

- `pointer` (T*) - pointer to end of memory

### End
*Type:* FUNCTION
Pointer to the end of the backing storage
The end is essentially outside of the used storage.

**Returns**

- `pointer` (const T*) - pointer to end of memory

### EraseSwap
*Type:* FUNCTION
Remove the element at the specified index.
The removed element is replaced by the element at the end (if any), thus potentially altering the order.
While operation changes the array size, it is guaranteed to be O(1).

**Parameters**

- `index` (uint32_t) - index of the element to remove

**Returns**

- `reference` (T&) - reference to the new element at index

### EraseSwapRef
*Type:* FUNCTION
Remove the element by reference
The removed element is replaced by the element at the end (if any), thus potentially altering the order.
While operation changes the array size, it is guaranteed to be O(1).

**Parameters**

- `element` (T&) - reference to the element to remove.

**Returns**

- `reference` (T&) - reference to the new referenced element

### Front
*Type:* FUNCTION
First element of the array

**Returns**

- `reference` (T&) - reference to the first element

### Front
*Type:* FUNCTION
First element of the array (const)

**Returns**

- `reference` (const T&) - const-reference to the first element

### Full
*Type:* FUNCTION
Check if the array is full.
The array is full when the size is equal to the capacity.

**Returns**

- `boolean` (bool) - true if the array is full

### Map
*Type:* FUNCTION
map a function on all values

**Parameters**

- `fn` (void*) - function that will be called for each element
- `ctx` (void*) - user defined context that will be passed in with each callback

### OffsetCapacity
*Type:* FUNCTION
Relative change of capacity
Equivalent to SetCapacity(Capacity() + offset).
Only allowed for auto-allocated arrays and will result in a new dynamic allocation followed by memcpy of the elements.

**Parameters**

- `offset` (uint32_t) - relative amount of elements to change the capacity

### operator[]
*Type:* FUNCTION
Retrieve an element by index

**Parameters**

- `index` (uint32_t) - array index

**Returns**

- `reference` (T&) - reference to the element at the specified index

### operator[]
*Type:* FUNCTION
Retrieve an element by index (const)

**Parameters**

- `index` (uint32_t) - array index

**Returns**

- `reference` (const T&) - const-reference to the element at the specified index

### Pop
*Type:* FUNCTION
Remove the last element of the array
Only allowed when the size is larger than zero.

### Push
*Type:* FUNCTION
Add an element to the end of the array
Only allowed when the capacity is larger than size.

**Parameters**

- `element` (const T&) - element element to add

### PushArray
*Type:* FUNCTION
Add an array of elements to the end of the array
Only allowed when the capacity is larger than size + count

**Parameters**

- `array` (const T*) - array of elements to add
- `count` (uint32_t) - amount of elements in the array

### Remaining
*Type:* FUNCTION
Amount of additional elements that can be stored

**Returns**

- `number` (uint32_t) - amount of additional elements that can be stored

### SetCapacity
*Type:* FUNCTION
Set the capacity of the array.
If the size is less than the capacity, the array is truncated.
If it is larger, the array is extended.
Only allowed for auto-allocated arrays and will result in a new dynamic allocation followed by memcpy of the elements.

**Parameters**

- `capacity` (uint32_t) - capacity of the array

### SetSize
*Type:* FUNCTION
Set size of the array

**Parameters**

- `size` (uint32_t) - size of the array, must be less or equal to the capacity

### Size
*Type:* FUNCTION
Size of the array in elements

**Returns**

- `number` (uint32_t) - array size

### Swap
*Type:* FUNCTION
Swap the content of two arrays

**Parameters**

- `rhs` (dmArray<T>&) - reference to array to swap content with

### ~dmArray
*Type:* FUNCTION
Only frees memory when auto-allocated.

<!-- engine-dlib-src-dmsdk-dlib-atomic-h -->

# Atomic {#apis:engine-dlib-src-dmsdk-dlib-atomic-h}

**Namespace:** `Atomic`
**Language:** C++
**Type:** Defold C++
**File:** `atomic.h`
**Source:** `engine/dlib/src/dmsdk/dlib/atomic.h`
**Include:** `dmsdk/dlib/atomic.h`

Atomic functions

## API

### dmAtomicAdd32
*Type:* FUNCTION
Atomic addition of an int32_atomic_t.

**Parameters**

- `ptr` (int32_atomic_t*) - Pointer to an int32_atomic_t to add to.
- `value` (int32_t) - Value to add.

**Returns**

- `prev` (int32_t) - Previous value

### dmAtomicCompareStore32
*Type:* FUNCTION
Atomic set (or exchange) of an int32_atomic_t if comparand is equal to the value of ptr.

**Parameters**

- `ptr` (int32_atomic_t*) - Pointer to an int32_atomic_t to store into.
- `value` (int32_t) - Value to set.
- `comparand` (int32_t) - Value to compare to.

**Returns**

- `prev` (int32_t) - Previous value

### dmAtomicDecrement32
*Type:* FUNCTION
Atomic decrement of an int32_atomic_t.

**Parameters**

- `ptr` (int32_atomic_t*) - Pointer to an int32_atomic_t to decrement.

**Returns**

- `prev` (int32_t) - Previous value

### dmAtomicGet32
*Type:* FUNCTION
Atomic get of an int32_atomic_t

**Notes**

- Retrieves the current value by adding 0

**Parameters**

- `ptr` (int32_atomic_t*) - Pointer to an int32_atomic_t to get from.

**Returns**

- `value` (int32_t) - Current value

### dmAtomicIncrement32
*Type:* FUNCTION
Atomic increment of an int32_atomic_t.

**Parameters**

- `ptr` (int32_atomic_t*) - Pointer to an int32_atomic_t to increment.

**Returns**

- `prev` (int32_t) - Previous value

### dmAtomicStore32
*Type:* FUNCTION
Atomic set (or exchange) of an int32_atomic_t.

**Parameters**

- `ptr` (int32_atomic_t*) - Pointer to an int32_atomic_t to store into.
- `value` (int32_t) - Value to set.

**Returns**

- `prev` (int32_t) - Previous value

### dmAtomicSub32
*Type:* FUNCTION
Atomic subtraction of an int32_atomic_t.

**Parameters**

- `ptr` (int32_atomic_t*) - Pointer to an int32_atomic_t to subtract from.
- `value` (int32_t) - Value to subtract.

**Returns**

- `prev` (int32_t) - Previous value

### int32_atomic_t
*Type:* TYPEDEF
32 bit signed integer atomic

<!-- engine-dlib-src-dmsdk-dlib-buffer-h -->

# Buffer {#apis:engine-dlib-src-dmsdk-dlib-buffer-h}

**Namespace:** `dmBuffer`
**Language:** C++
**Type:** Defold C++
**File:** `buffer.h`
**Source:** `engine/dlib/src/dmsdk/dlib/buffer.h`
**Include:** `dmsdk/dlib/buffer.h`

Buffer API for data buffers as the main way to communicate between systems.

## API

### dmBuffer::Copy
*Type:* FUNCTION
Copies the data from one buffer to another buffer. The stream declaration needs to be the same in both buffers.

**Parameters**

- `dst_buffer_handle` (dmBuffer::HBuffer*) - Pointer to HBuffer from where to copy buffer data.
- `src_buffer_handle` (dmBuffer::HBuffer*) - Pointer to HBuffer where to copy the buffer data.

**Returns**

- `result` (dmBuffer::Result) - BUFFER_OK if buffer was copied successfully

**Examples**

```
dmBuffer::Result r = dmBuffer::Copy(buffer_a, buffer_b);

if (r == dmBuffer::RESULT_OK) {
    // success
} else {
    // handle error
}

```

### dmBuffer::Create
*Type:* FUNCTION
Creates a new HBuffer with a number of different streams.

**Parameters**

- `count` (uint32_t) - The number of "structs" the buffer should hold (e.g. vertex count)
- `streams_decl` (const dmBuffer::StreamDeclaration*) - Array of stream declarations
- `streams_decl_count` (uint8_t) - Number of stream declarations inside the decl array (max 256)
- `out_buffer` (dmBuffer::HBuffer*) - Pointer to HBuffer where to store the newly allocated buffer

**Returns**

- `result` (dmBuffer::Result) - BUFFER_OK if buffer was allocated successfully

**Examples**

```
const dmBuffer::StreamDeclaration streams_decl[] = {
    {dmHashString64("position"), dmBuffer::VALUE_TYPE_FLOAT32, 3},
    {dmHashString64("texcoord0"), dmBuffer::VALUE_TYPE_UINT16, 2},
    {dmHashString64("color"), dmBuffer::VALUE_TYPE_UINT8, 4},
};
dmBuffer::HBuffer buffer = 0x0;
dmBuffer::Result r = dmBuffer::Create(1024, streams_decl, 3, &buffer);

if (r == dmBuffer::RESULT_OK) {
    // success
} else {
    // handle error
}

```

### dmBuffer::Destroy
*Type:* FUNCTION
Destroys a HBuffer and it's streams.

**Parameters**

- `buffer` (dmBuffer::HBuffer) - Buffer handle to the buffer to free

**Examples**

```
const dmBuffer::StreamDeclaration streams_decl[] = {
    {dmHashString64("position"), dmBuffer::VALUE_TYPE_FLOAT32, 3},
};
dmBuffer::HBuffer buffer = 0x0;
dmBuffer::Result r = dmBuffer::Create(4, streams_decl, 1, &buffer);

if (r == dmBuffer::RESULT_OK) {
    dmBuffer::Destroy(buffer);
} else {
    // handle error
}

```

### dmBuffer::GetBytes
*Type:* FUNCTION
Gets the buffer as a byte array. If the buffer is interleaved (default), a pointer to the whole memory is returned.

**Parameters**

- `buffer` (dmBuffer::HBuffer) - buffer handle.
- `out_bytes` (void**) - Pointer to void* where to store the bytes
- `out_size` (uint32_t*) - Pointer to uint32_t where to store the array size

**Returns**

- `result` (dmBuffer::Result) - BUFFER_OK if the buffer was successfully accessed

**Examples**

```
uint8_t* bytes = 0x0;
uint32_t size = 0;

dmBuffer::Result r = dmBuffer::GetBytes(buffer, (void**)&bytes, &size);

if (r == dmBuffer::RESULT_OK) {
    for (int i = 0; i < size; ++i)
    {
        stream[i] = (uint8_t)(i & 0xFF);
    }
} else {
    // handle error
}

```

### dmBuffer::GetContentVersion
*Type:* FUNCTION
Gets the current update number

**Parameters**

- `type` (dmBuffer::HBuffer) - The value type
- `version` (uint32_t*) - The current version number

**Returns**

- `result` (dmBuffer::Result) - Returns BUFFER_OK if all went ok

### dmBuffer::GetCount
*Type:* FUNCTION
Get (struct) count for a buffer.

**Parameters**

- `buffer` (dmBuffer::HBuffer) - buffer handle.
- `count` (uint32_t*) - Pointer to uint32_t where to store the element count

**Returns**

- `result` (dmBuffer::Result) - BUFFER_OK if the element count was successfully accessed

**Examples**

```
uint32_t count = 0;
dmBuffer::Result r = dmBuffer::GetCount(buffer, &count);

if (r == dmBuffer::RESULT_OK) {
    printf("buffer %p has %d number of elements", buffer, count);
} else {
    // handle error
}

```

### dmBuffer::GetMetaData
*Type:* FUNCTION
Retrieve metadata entry information

**Parameters**

- `hbuffer` (dmBuffer::HBuffer) - A buffer handle
- `name_hash` (dmhash_t) - The entry name as a hash
- `data` (void**) - Gets the internal address of metadata values
- `count` (uint32_t) - Gets the number of metadata values stored
- `type` (dmBuffer::ValueType) - Gets the type of values of the metadata

### dmBuffer::GetResultString
*Type:* FUNCTION
Converts result to string

**Parameters**

- `result` (dmBuffer::Result) - The result

**Returns**

- `result` (const char*) - The result as a string

### dmBuffer::GetSizeForValueType
*Type:* FUNCTION
Gets the size of a value type

**Parameters**

- `type` (dmBuffer::ValueType) - The value type

**Returns**

- `size` (uint32_t) - The size in bytes

### dmBuffer::GetStream
*Type:* FUNCTION
Get a stream from a buffer. Output stream is 16 byte aligned.

**Parameters**

- `buffer` (dmBuffer::HBuffer) - buffer handle.
- `stream_name` (dmhash_t) - Hash of stream name to get
- `stream` (void**) - Where to store the stream
- `count` (uint32_t*) - Where to store the count (e.g. vertex count). May be null.
- `components` (uint32_t*) - Where to store the number of components (e.g. 3 for a Vector3). May be null.
- `stride` (uint32_t*) - Where to store the (struct) stride. The stride can be added to the value pointer. May be null.
E.g. for a float array, the stride is (sizeof(Struct) / sizeof(float))

**Returns**

- `result` (dmBuffer::Result) - BUFFER_OK if the stream was successfully accessed

**Examples**

```
float* positions = 0x0;
uint32_t size = 0;
uint32_t components = 0;
uint32_t stride = 0;
dmBuffer::Result r = dmBuffer::GetStream(buffer, dmHashString64("position"), (void**)&positions, &count, &components, &stride);

if (r == dmBuffer::RESULT_OK) {
    for (int i = 0; i < count; ++i)
    {
        for (int c = 0; c < components; ++c)
        {
             positions[c] *= 1.1f;
        }
        positions += stride;
    }
} else {
    // handle error
}

```

### dmBuffer::GetStreamType
*Type:* FUNCTION
Gets the stream type

**Parameters**

- `buffer` (dmBuffer::HBuffer) - Pointer to a buffer.
- `stream_name` (dmhash_t) - Hash of stream name to get
- `type` (dmBuffer::ValueType*) - The value type
- `components` (uint32_t*) - The number of values (E.g. 3 for a Vector3)

**Returns**

- `result` (dmBuffer::Result) - Returns BUFFER_OK if all went ok

### dmBuffer::GetValueTypeString
*Type:* FUNCTION
Converts a value type to string

**Parameters**

- `result` (dmBuffer::ValueType) - The value type

**Returns**

- `result` (const char*) - The value type as a string

### dmBuffer::HBuffer
*Type:* TYPEDEF
```
typedef uint32_t HBuffer;

```

### dmBuffer::IsBufferValid
*Type:* FUNCTION
Checks if a handle is still valid

**Parameters**

- `buffer` (dmBuffer::HBuffer) - The buffer

**Returns**

- `result` (bool) - True if the handle is valid

### dmBuffer::SetMetaData
*Type:* FUNCTION
Create or update a new metadata entry with a number of values of a specific type.
It will allocate space to store these values.

**Parameters**

- `hbuffer` (dmBuffer::HBuffer) - A buffer handle
- `name_hash` (dmhash_t) - The entry name as a hash
- `data` (void*) - A pointer to an array of the values
- `count` (uint32_t) - Number of values in the array
- `type` (dmBuffer::ValueType) - The type of the values

**Returns**

- `result` (dmBuffer::Result) - RESULT_OK if the metadata entry was successfully stored

### dmBuffer::StreamDeclaration
*Type:* STRUCT
Buffer stream declaration structure

**Members**

- `m_Name` (dmhash_t) - Hash of stream name
- `m_Type` (dmBuffer::ValueType) - Stream ValueType type
- `m_Count` (uint8_t) - Component count of stream type. E.g. 3 for a Vector3
- `m_Flags` (uint32_t) - Flags for a stream.
- `m_Reserved` (uint32_t) - Reserved for future use.

**Examples**

Declare a typical position stream:
```
const dmBuffer::StreamDeclaration streams_decl[] = {
    {dmHashString64("position"), dmBuffer::VALUE_TYPE_FLOAT32, 3}
};

```

### dmBuffer::UpdateContentVersion
*Type:* FUNCTION
Used to know if a buffer has been updated.

**Parameters**

- `type` (dmBuffer::HBuffer) - The value type

**Returns**

- `result` (dmBuffer::Result) - Returns BUFFER_OK if all went ok

### dmBuffer::ValidateBuffer
*Type:* FUNCTION
Validate a buffer and it's streams.

**Parameters**

- `buffer` (dmBuffer::HBuffer) - Buffer handle to the buffer to validate

**Examples**

```
// Pass buffer to third party library that does operations on the buffer or streams.
ThirdPartyLib::PerformOperation(buffer);

r = dmBuffer::ValidateBuffer(buffer);
if (r == dmBuffer::RESULT_OK) {
    // buffer and streams are valid
} else {
    // the third party lib made the buffer invalid
}

```

### Result
*Type:* ENUM
Result enumeration.

**Members**

- `dmBuffer::RESULT_OK`
- `dmBuffer::RESULT_GUARD_INVALID`
- `dmBuffer::RESULT_ALLOCATION_ERROR`
- `dmBuffer::RESULT_BUFFER_INVALID`
- `dmBuffer::RESULT_BUFFER_SIZE_ERROR`
- `dmBuffer::RESULT_STREAM_SIZE_ERROR`
- `dmBuffer::RESULT_STREAM_MISSING`
- `dmBuffer::RESULT_STREAM_TYPE_MISMATCH`
- `dmBuffer::RESULT_STREAM_COUNT_MISMATCH`
- `dmBuffer::RESULT_METADATA_INVALID`
- `dmBuffer::RESULT_METADATA_MISSING`

### ValueType
*Type:* ENUM
ValueType enumeration.

**Members**

- `dmBuffer::VALUE_TYPE_UINT8`
- `dmBuffer::VALUE_TYPE_UINT16`
- `dmBuffer::VALUE_TYPE_UINT32`
- `dmBuffer::VALUE_TYPE_UINT64`
- `dmBuffer::VALUE_TYPE_INT8`
- `dmBuffer::VALUE_TYPE_INT16`
- `dmBuffer::VALUE_TYPE_INT32`
- `dmBuffer::VALUE_TYPE_INT64`
- `dmBuffer::VALUE_TYPE_FLOAT32`
- `dmBuffer::MAX_VALUE_TYPE_COUNT`

<!-- engine-dlib-src-dmsdk-dlib-condition_variable-h -->

# Condition Variable {#apis:engine-dlib-src-dmsdk-dlib-condition_variable-h}

**Namespace:** `dmConditionVariable`
**Language:** C++
**Type:** Defold C++
**File:** `condition_variable.h`
**Source:** `engine/dlib/src/dmsdk/dlib/condition_variable.h`
**Include:** `dmsdk/dlib/condition_variable.h`

API for platform independent mutex synchronization primitive.

## API

### dmConditionVariable::Broadcast
*Type:* FUNCTION
Broadcast condition variable, effectively unblocks all of the waiting threads blocked
by the condition variable.

**Parameters**

- `condition` (dmConditionVariable::HConditionVariable) - ConditionVariable handle.

### dmConditionVariable::Delete
*Type:* FUNCTION
Deletes a HConditionVariable.

**Parameters**

- `mutex` (dmConditionVariable::HConditionVariable) - ConditionVariable handle to delete.

### dmConditionVariable::HConditionVariable
*Type:* TYPEDEF
```
typedef struct ConditionVariable* HConditionVariable;

```

### dmConditionVariable::New
*Type:* FUNCTION
Create a new HConditionVariable

**Returns**

- `condition_variable` (dmConditionVariable::HConditionVariable) - A new ConditionVariable handle.

### dmConditionVariable::Signal
*Type:* FUNCTION
Signal condition variable, effectively unblocks at least one of the waiting threads blocked
by the condition variable.

**Parameters**

- `condition` (dmConditionVariable::HConditionVariable) - ConditionVariable handle.

### dmConditionVariable::Wait
*Type:* FUNCTION
Wait for condition variable. This is a blocking function, and should be called with
the mutex being locked.

**Parameters**

- `condition` (dmConditionVariable::HConditionVariable) - ConditionVariable handle.
- `mutex` (dmMutex::HMutex) - Mutex handle.

<!-- engine-dlib-src-dmsdk-dlib-configfile-h -->

# ConfigFile {#apis:engine-dlib-src-dmsdk-dlib-configfile-h}

**Namespace:** `dmConfigFile`
**Language:** C++
**Type:** Defold C++
**File:** `configfile.h`
**Source:** `engine/dlib/src/dmsdk/dlib/configfile.h`
**Include:** `dmsdk/dlib/configfile.h`

Configuration file access functions.
The configuration file is compiled version of the [file:game.project] file.

## API

### ConfigFileExtensionDescBufferSize
*Type:* CONSTANT
It defines the minimum size of the description blob being registered.

### ConfigFileGetFloat
*Type:* FUNCTION
Get config value as float, returns default if the key isn't found

**Parameters**

- `config` (HConfigFile) - Config file handle
- `key` (const char*) - Key in format section.key (.key for no section)
- `default_value` (int32_t) - Default value to return if key isn't found

**Returns**

- `value` (int32_t) - found value or default value

**Examples**

```
static ExtensionResult AppInitialize(ExtensionAppParams* params)
{
    float gravity = ConfigFileGetFloat(params->m_ConfigFile, "physics.gravity_y", -9.8f);
}
``````cpp
static dmExtension::Result AppInitialize(dmExtension::AppParams* params)
{
    float gravity = dmConfigFile::GetFloat(params->m_ConfigFile, "physics.gravity_y", -9.8f);
}

```

### ConfigFileGetInt
*Type:* FUNCTION
Get config value as integer, returns default if the key isn't found

**Parameters**

- `config` (HConfigFile) - Config file handle
- `key` (const char*) - Key in format section.key (.key for no section)
- `default_value` (int32_t) - Default value to return if key isn't found

**Returns**

- `value` (int32_t) - found value or default value

**Examples**

```
static ExtensionResult AppInitialize(ExtensionAppParams* params)
{
    int32_t displayWidth = ConfigFileGetInt(params->m_ConfigFile, "display.width", 640);
}
``````cpp
static dmExtension::Result AppInitialize(dmExtension::AppParams* params)
{
    int32_t displayWidth = dmConfigFile::GetInt(params->m_ConfigFile, "display.width", 640);
}

```

### ConfigFileGetString
*Type:* FUNCTION
Get config value as string, returns default if the key isn't found

**Parameters**

- `config` (HConfigFile) - Config file handle
- `key` (const char*) - Key in format section.key (.key for no section)
- `default_value` (const char*) - Default value to return if key isn't found

**Returns**

- `value` (const char*) - found value or default value

**Examples**

```
static ExtensionResult AppInitialize(ExtensionAppParams* params)
{
    const char* projectTitle = ConfigFileGetString(params->m_ConfigFile, "project.title", "Untitled");
}
``````cpp
static dmExtension::Result AppInitialize(dmExtension::AppParams* params)
{
    const char* projectTitle = dmConfigFile::GetString(params->m_ConfigFile, "project.title", "Untitled");
}

```

### DM_DECLARE_CONFIGFILE_EXTENSION
*Type:* MACRO
Declare and register new config file extension to the engine.
Each get function should return true if it sets a proper value. Otherwise return false.

**Parameters**

- `symbol` (symbol) - external extension symbol description (no quotes).
- `name` (const char*) - extension name. Human readable.
- `init` (function(dmConfigFile::dmcfConfig*)) - init function. May be null.
- `get_string` (function(const char* section_plus_name, const char* default, const char** out)) - Gets a string property. May be null.
- `get_int` (function(const char* section_plus_name, int default, int* out)) - Gets an int property. May be null.
- `get_float` (function(const char* section_plus_name, float default, float* out)) - Gets a float property. May be null.

**Examples**

Register a new config file extension:
```
DM_DECLARE_CONFIGFILE_EXTENSION(MyConfigfileExtension, "MyConfigfileExtension", create, destroy, get_string, get_int, get_float);

```

### FConfigFileCreate
*Type:* TYPEDEF
Called when config file extension is created

**Parameters**

- `config` (HConfigFile) - Config file handle

### FConfigFileDestroy
*Type:* TYPEDEF
Called when config file extension is destroyed

**Parameters**

- `config` (HConfigFile) - Config file handle

### FConfigFileGetFloat
*Type:* TYPEDEF
Called when a float is requested from the config file extension

**Parameters**

- `config` (HConfigFile) - Config file handle
- `key` (const char*) - Key in format section.key (.key for no section)
- `default_value` (float) - Default value to return if key isn't found
- `out` (float*) - Out argument where result is stored if found.

**Returns**

- `result` (bool) - True if property was found

### FConfigFileGetFloat
*Type:* TYPEDEF
Called when a float is requested from the config file extension

**Parameters**

- `desc` (void*) - An opaque buffer of at least ConfigFileExtensionDescBufferSize bytes.
                         This will hold the meta data for the plugin.
- `desc_size` (uint32_t) - The size of the desc buffer. Must be &gt;ConfigFileExtensionDescBufferSize
- `name` (const char*) - Name of the extension.
- `create` (FConfigFileCreate) - Extension create function. May be null.
- `destroy` (FConfigFileDestroy) - Extension destroy function. May be null.
- `get_string` (FConfigFileGetString) - Getter for string properties. May be null.
- `get_int` (FConfigFileGetInt) - Getter for int properties. May be null.
- `get_float` (FConfigFileGetFloat) - Getter for float properties. May be null.

### FConfigFileGetInt
*Type:* TYPEDEF
Called when an integer is requested from the config file extension

**Parameters**

- `config` (HConfigFile) - Config file handle
- `key` (const char*) - Key in format section.key (.key for no section)
- `default_value` (int32_t) - Default value to return if key isn't found
- `out` (int32_t*) - Out argument where result is stored if found.

**Returns**

- `result` (bool) - True if property was found

### FConfigFileGetString
*Type:* TYPEDEF
Called when a string is requested from the config file extension

**Parameters**

- `config` (HConfigFile) - Config file handle
- `key` (const char*) - Key in format section.key (.key for no section)
- `default_value` (const char*) - Default value to return if key isn't found
- `out` (const char**) - Out argument where result is stored if found. Caller must free() this memory.

**Returns**

- `result` (bool) - True if property was found

### HConfigFile
*Type:* TYPEDEF
Each game session has a single config file that holds all parameters from game.project and any overridden values.

**Notes**

- Properties can be overridden on command line or via the config file extension system. (See [ref:DM_DECLARE_CONFIGFILE_EXTENSION])

<!-- engine-dlib-src-dmsdk-dlib-configfile_gen-hpp -->

# ConfigFile {#apis:engine-dlib-src-dmsdk-dlib-configfile_gen-hpp}

**Namespace:** `dmConfigFile`
**Language:** C++
**Type:** Defold C++
**File:** `configfile_gen.hpp`
**Source:** `engine/dlib/src/dmsdk/dlib/configfile_gen.hpp`
**Include:** `dmsdk/dlib/configfile_gen.hpp`

Configuration file access functions.
The configuration file is compiled version of the [file:game.project] file.

## API

### ConfigFileExtensionDescBufferSize
*Type:* FUNCTION
It defines the minimum size of the description blob being registered.

### ConfigFileGetFloat
*Type:* FUNCTION
Get config value as float, returns default if the key isn't found

**Parameters**

- `config` (HConfigFile) - Config file handle
- `key` (const char*) - Key in format section.key (.key for no section)
- `default_value` (int32_t) - Default value to return if key isn't found

**Returns**

- `value` (int32_t) - found value or default value

**Examples**

```
static ExtensionResult AppInitialize(ExtensionAppParams* params)
{
    float gravity = ConfigFileGetFloat(params->m_ConfigFile, "physics.gravity_y", -9.8f);
}
``````cpp
static dmExtension::Result AppInitialize(dmExtension::AppParams* params)
{
    float gravity = dmConfigFile::GetFloat(params->m_ConfigFile, "physics.gravity_y", -9.8f);
}

```

### ConfigFileGetInt
*Type:* FUNCTION
Get config value as integer, returns default if the key isn't found

**Parameters**

- `config` (HConfigFile) - Config file handle
- `key` (const char*) - Key in format section.key (.key for no section)
- `default_value` (int32_t) - Default value to return if key isn't found

**Returns**

- `value` (int32_t) - found value or default value

**Examples**

```
static ExtensionResult AppInitialize(ExtensionAppParams* params)
{
    int32_t displayWidth = ConfigFileGetInt(params->m_ConfigFile, "display.width", 640);
}
``````cpp
static dmExtension::Result AppInitialize(dmExtension::AppParams* params)
{
    int32_t displayWidth = dmConfigFile::GetInt(params->m_ConfigFile, "display.width", 640);
}

```

### ConfigFileGetString
*Type:* FUNCTION
Get config value as string, returns default if the key isn't found

**Parameters**

- `config` (HConfigFile) - Config file handle
- `key` (const char*) - Key in format section.key (.key for no section)
- `default_value` (const char*) - Default value to return if key isn't found

**Returns**

- `value` (const char*) - found value or default value

**Examples**

```
static ExtensionResult AppInitialize(ExtensionAppParams* params)
{
    const char* projectTitle = ConfigFileGetString(params->m_ConfigFile, "project.title", "Untitled");
}
``````cpp
static dmExtension::Result AppInitialize(dmExtension::AppParams* params)
{
    const char* projectTitle = dmConfigFile::GetString(params->m_ConfigFile, "project.title", "Untitled");
}

```

### DM_DECLARE_CONFIGFILE_EXTENSION
*Type:* MACRO
Declare and register new config file extension to the engine.
Each get function should return true if it sets a proper value. Otherwise return false.

**Examples**

Register a new config file extension:
```
DM_DECLARE_CONFIGFILE_EXTENSION(MyConfigfileExtension, "MyConfigfileExtension", create, destroy, get_string, get_int, get_float);

```

### FConfigFileCreate
*Type:* TYPEDEF
Called when config file extension is created

**Parameters**

- `config` (HConfigFile) - Config file handle

### FConfigFileDestroy
*Type:* TYPEDEF
Called when config file extension is destroyed

**Parameters**

- `config` (HConfigFile) - Config file handle

### FConfigFileGetFloat
*Type:* TYPEDEF
Called when a float is requested from the config file extension

**Parameters**

- `config` (HConfigFile) - Config file handle
- `key` (const char*) - Key in format section.key (.key for no section)
- `default_value` (float) - Default value to return if key isn't found
- `out` (float*) - Out argument where result is stored if found.

**Returns**

- `result` (bool) - True if property was found

### FConfigFileGetFloat
*Type:* TYPEDEF
Called when a float is requested from the config file extension

**Parameters**

- `config` (HConfigFile) - Config file handle
- `key` (const char*) - Key in format section.key (.key for no section)
- `default_value` (float) - Default value to return if key isn't found
- `out` (float*) - Out argument where result is stored if found.

**Returns**

- `result` (bool) - True if property was found

### FConfigFileGetInt
*Type:* TYPEDEF
Called when an integer is requested from the config file extension

**Parameters**

- `config` (HConfigFile) - Config file handle
- `key` (const char*) - Key in format section.key (.key for no section)
- `default_value` (int32_t) - Default value to return if key isn't found
- `out` (int32_t*) - Out argument where result is stored if found.

**Returns**

- `result` (bool) - True if property was found

### FConfigFileGetString
*Type:* TYPEDEF
Called when a string is requested from the config file extension

**Parameters**

- `config` (HConfigFile) - Config file handle
- `key` (const char*) - Key in format section.key (.key for no section)
- `default_value` (const char*) - Default value to return if key isn't found
- `out` (const char**) - Out argument where result is stored if found. Caller must free() this memory.

**Returns**

- `result` (bool) - True if property was found

### GetFloat
*Type:* FUNCTION
Get config value as float, returns default if the key isn't found

**Parameters**

- `config` (HConfigFile) - Config file handle
- `key` (const char*) - Key in format section.key (.key for no section)
- `default_value` (int32_t) - Default value to return if key isn't found

**Returns**

- `value` (int32_t) - found value or default value

**Examples**

```
static ExtensionResult AppInitialize(ExtensionAppParams* params)
{
    float gravity = ConfigFileGetFloat(params->m_ConfigFile, "physics.gravity_y", -9.8f);
}
``````cpp
static dmExtension::Result AppInitialize(dmExtension::AppParams* params)
{
    float gravity = dmConfigFile::GetFloat(params->m_ConfigFile, "physics.gravity_y", -9.8f);
}

```

### GetInt
*Type:* FUNCTION
Get config value as integer, returns default if the key isn't found

**Parameters**

- `config` (HConfigFile) - Config file handle
- `key` (const char*) - Key in format section.key (.key for no section)
- `default_value` (int32_t) - Default value to return if key isn't found

**Returns**

- `value` (int32_t) - found value or default value

**Examples**

```
static ExtensionResult AppInitialize(ExtensionAppParams* params)
{
    int32_t displayWidth = ConfigFileGetInt(params->m_ConfigFile, "display.width", 640);
}
``````cpp
static dmExtension::Result AppInitialize(dmExtension::AppParams* params)
{
    int32_t displayWidth = dmConfigFile::GetInt(params->m_ConfigFile, "display.width", 640);
}

```

### GetString
*Type:* FUNCTION
Get config value as string, returns default if the key isn't found

**Parameters**

- `config` (HConfigFile) - Config file handle
- `key` (const char*) - Key in format section.key (.key for no section)
- `default_value` (const char*) - Default value to return if key isn't found

**Returns**

- `value` (const char*) - found value or default value

**Examples**

```
static ExtensionResult AppInitialize(ExtensionAppParams* params)
{
    const char* projectTitle = ConfigFileGetString(params->m_ConfigFile, "project.title", "Untitled");
}
``````cpp
static dmExtension::Result AppInitialize(dmExtension::AppParams* params)
{
    const char* projectTitle = dmConfigFile::GetString(params->m_ConfigFile, "project.title", "Untitled");
}

```

### HConfig
*Type:* TYPEDEF
Each game session has a single config file that holds all parameters from game.project and any overridden values.

**Notes**

- Properties can be overridden on command line or via the config file extension system. (See [ref:DM_DECLARE_CONFIGFILE_EXTENSION])

### HConfigFile
*Type:* TYPEDEF
Each game session has a single config file that holds all parameters from game.project and any overridden values.

**Notes**

- Properties can be overridden on command line or via the config file extension system. (See [ref:DM_DECLARE_CONFIGFILE_EXTENSION])

<!-- engine-dlib-src-dmsdk-dlib-connection_pool-h -->

# Connection Pool {#apis:engine-dlib-src-dmsdk-dlib-connection_pool-h}

**Namespace:** `dmConnectionPool`
**Language:** C++
**Type:** Defold C++
**File:** `connection_pool.h`
**Source:** `engine/dlib/src/dmsdk/dlib/connection_pool.h`
**Include:** `dmsdk/dlib/connection_pool.h`

Connection pool

## API

### Close
*Type:* FUNCTION
Close connection. Use this function whenever an error occur in eg http.

**Parameters**

- `pool` (dmConnectionPool::HPool) - pool
- `connection` (dmConnectionPool::HConnection)

### Delete
*Type:* FUNCTION
Delete connnection pool

**Parameters**

- `pool` (dmConnectionPool::HPool) - pool

**Returns**

- `dmConnectionPool::RESULT_OK` - on success

### Dial
*Type:* FUNCTION
Connection to a host/port

**Parameters**

- `pool` (dmConnectionPool::HPool) - pool
- `host` (const char*) - host
- `port` (uint16_t) - port
- `ssl` (bool) - true for ssl connection
- `timeout` (int) - The timeout (micro seconds) for the connection and ssl handshake
- `connection` (dmConnectionPool::HConnection*) - connection (out)
- `sock_res` (dmSocket::Result*) - socket-result code on failure

**Returns**

- `dmConnectionPool::RESULT_OK` - on success

### Dial
*Type:* FUNCTION
Connection to a host/port

**Parameters**

- `pool` (dmConnectionPool::HPool) - pool
- `host` (const char*) - host
- `port` (uint16_t) - port
- `ssl` (bool) - true for ssl connection
- `timeout` (int) - The timeout (micro seconds) for the connection and ssl handshake
- `cancelflag` (int*) - If set and not null, will make the request early out
- `connection` (dmConnectionPool::HConnection*) - connection (out)
- `sock_res` (dmSocket::Result*) - socket-result code on failure

**Returns**

- `dmConnectionPool::RESULT_OK` - on success

### dmConnectionPool::Result
*Type:* ENUM
Result enumeration.

**Members**

- `dmConnectionPool::RESULT_OK` - 0
- `dmConnectionPool::RESULT_OUT_OF_RESOURCES` - -1
- `dmConnectionPool::RESULT_SOCKET_ERROR` - -2
- `dmConnectionPool::RESULT_HANDSHAKE_FAILED` - -3
- `dmConnectionPool::RESULT_SHUT_DOWN` - -4

### GetSocket
*Type:* FUNCTION
Get socket for connection

**Parameters**

- `pool` (dmConnectionPool::HPool) - pool
- `connection` (dmConnectionPool::HConnection)

**Returns**

- `return` (dmSocket::Socket) - on success

### GetSSLSocket
*Type:* FUNCTION
Get secure socket.

**Parameters**

- `pool` (dmConnectionPool::HPool) - pool
- `connection` (dmConnectionPool::HConnection)

**Returns**

- `return` (dmSSLSocket::Socket) - on success

### HConnection
*Type:* TYPEDEF
Connection handle

### HPool
*Type:* TYPEDEF
Connection pool handle

### New
*Type:* FUNCTION
Create a new connection pool

**Parameters**

- `params` (dmConnectionPool::Params*)
- `pool` (dmConnectionPool::HPool*) - pool (out)

**Returns**

- `dmConnectionPool::RESULT_OK` - on success

### Params
*Type:* STRUCT
Creation parameters

**Members**

- `m_MaxConnections` (int) - Max connection in pool
- `m_MaxKeepAlive` (int) - Default max-keep-alive time in seconds

### Return
*Type:* FUNCTION
Return connection to pool

**Parameters**

- `pool` (dmConnectionPool::HPool) - pool
- `connection` (dmConnectionPool::HConnection)

### Shutdown
*Type:* FUNCTION
Shuts down all open sockets in the pool and block new connection attempts. The function can be
called repeatedly on the same pool until it returns no more connections in use.

**Parameters**

- `pool` (dmConnectionPool::HPool) - pool
- `how` (dmSocket::ShutdownType) - shutdown type to pass to socket shutdown function

**Returns**

- `current` - number of connections in use

<!-- engine-dlib-src-dmsdk-dlib-crypt-h -->

# Crypt {#apis:engine-dlib-src-dmsdk-dlib-crypt-h}

**Namespace:** `dmCrypt`
**Language:** C++
**Type:** Defold C++
**File:** `crypt.h`
**Source:** `engine/dlib/src/dmsdk/dlib/crypt.h`
**Include:** `dmsdk/dlib/crypt.h`

Various hash and encode/decode functions.

## API

### Algorithm
*Type:* ENUM
encryption algorithm enumeration

**Members**

- `dmCrypt::ALGORITHM_XTEA`

### dmCrypt::Base64Decode
*Type:* FUNCTION
Base64 decode a buffer

**Notes**

- Call this function with *dst_len = 0 to obtain the required buffer size in *dst_len

**Parameters**

- `src` (const uint8_t*) - The source data to encode
- `src_len` (uint32_t) - key The length of source data in bytes
- `dst` (uint8_t*) - The destination buffer
- `dst_len[in,out]` (uint32_t*) - In: The length of the destination in bytes. Out: The length of the decoded string.

**Returns**

- `success` (bool) - true if the decoding went ok

### dmCrypt::Base64Encode
*Type:* FUNCTION
Base64 encode a buffer

**Notes**

- Call this function with *dst_len = 0 to obtain the required buffer size in *dst_len

**Parameters**

- `src` (const uint8_t*) - The source data to encode
- `src_len` (uint32_t) - key The length of source data in bytes
- `dst` (uint8_t*) - The destination buffer
- `dst_len[in,out]` (uint32_t*) - In: The length of the destination in bytes. Out: The length of the encoded string.

**Returns**

- `success` (bool) - true if the encoding went ok

### dmCrypt::Decrypt
*Type:* FUNCTION
Decrypt data in place

**Parameters**

- `algo` (dmCrypt::Algorithm) - algorithm
- `data` (const uint8_t*) - data
- `datalen` (uint32_t) - data length in bytes
- `key` (const uint8_t*) - key
- `keylen` (uint32_t) - key length

**Returns**

- `result` (dmCrypt::Result) - the decryption result

### dmCrypt::Encrypt
*Type:* FUNCTION
Encrypt data in place

**Parameters**

- `algo` (dmCrypt::Algorithm) - algorithm
- `data` (const uint8_t*) - data
- `datalen` (uint32_t) - data length in bytes
- `key` (const uint8_t*) - key
- `keylen` (uint32_t) - key length

**Returns**

- `result` (dmCrypt::Result) - the encryption result

### dmCrypt::HashMd5
*Type:* FUNCTION
Hash buffer using MD5

**Parameters**

- `buf` (const uint8_t*) - The source data to hash
- `buflen` (uint32_t) - key The length of source data in bytes
- `digest` (const uint8_t*) - The destination buffer (16 bytes)

### dmCrypt::HashSha1
*Type:* FUNCTION
Hash buffer using SHA1

**Parameters**

- `buf` (const uint8_t*) - The source data to hash
- `buflen` (uint32_t) - The length of source data in bytes
- `digest` (uint8_t*) - The destination buffer (20 bytes)

### dmCrypt::HashSha256
*Type:* FUNCTION
Hash buffer using SHA256

**Parameters**

- `buf` (const uint8_t*) - The source data to hash
- `buflen` (uint32_t) - key The length of source data in bytes
- `digest` (uint8_t*) - The destination buffer (32 bytes)

### dmCrypt::HashSha512
*Type:* FUNCTION
Hash buffer using SHA512

**Parameters**

- `buf` (const uint8_t*) - The source data to hash
- `buflen` (uint32_t) - key The length of source data in bytes
- `digest` (uint8_t*) - The destination buffer (64 bytes)

### Result
*Type:* ENUM
result enumeration

**Members**

- `dmCrypt::RESULT_OK` - = 0
- `dmCrypt::RESULT_ERROR` - = 1

<!-- engine-dlib-src-dmsdk-dlib-double_linked_list-h -->

# Double linked list structs and functions {#apis:engine-dlib-src-dmsdk-dlib-double_linked_list-h}

**Namespace:** `dmDoubleLinkedList`
**Language:** C++
**Type:** Defold C++
**File:** `double_linked_list.h`
**Source:** `engine/dlib/src/dmsdk/dlib/double_linked_list.h`
**Include:** `dmsdk/dlib/double_linked_list.h`

Double linked list structs and functions

## API

### dmDoubleLinkedList::ListAdd
*Type:* FUNCTION
Added new list element as a head of the list

**Parameters**

- `list` (dmDoubleLinkedList::List*) - the list
- `item` (dmDoubleLinkedList::ListNode*) - new list element

### dmDoubleLinkedList::ListGetFirst
*Type:* FUNCTION
Get the first element of the list. If the list is empty (tail == head) returns 0.

**Parameters**

- `list` (dmDoubleLinkedList::List*) - the list

**Returns**

- `first_element` (dmDoubleLinkedList::ListNode*) - the first element of the list.  If the list is empty (tail == head) returns 0

### dmDoubleLinkedList::ListGetLast
*Type:* FUNCTION
Get the last element of the list. If the list is empty (tail == head) returns 0.

**Parameters**

- `list` (dmDoubleLinkedList::List*) - the list

**Returns**

- `last_element` (dmDoubleLinkedList::ListNode*) - the last element of the list. If the list is empty (tail == head) returns 0

### dmDoubleLinkedList::ListInit
*Type:* FUNCTION
Initialize empty double linked list

**Parameters**

- `list` (dmDoubleLinkedList::List*) - the list

### dmDoubleLinkedList::ListRemove
*Type:* FUNCTION
Remove item from the list. Doesn't deallocate memory allocated for the item.
If element is not in the list function doesn't affect linked list.

**Parameters**

- `list` (dmDoubleLinkedList::List*) - the list
- `item` (dmDoubleLinkedList::ListNode*) - removed item

<!-- engine-dlib-src-dmsdk-dlib-dstrings-h -->

# DStrings {#apis:engine-dlib-src-dmsdk-dlib-dstrings-h}

**Namespace:** `DStrings`
**Language:** C++
**Type:** Defold C++
**File:** `dstrings.h`
**Source:** `engine/dlib/src/dmsdk/dlib/dstrings.h`
**Include:** `dmsdk/dlib/dstrings.h`

SDK Defold String Utils API documentation

## API

### dmSnPrintf
*Type:* FUNCTION
Size-bounded string formating. Resulting string is guaranteed to be 0-terminated. Unlike snprintf, which
always returns the untruncated string length, this function returns -1 if the string was truncated.

**Parameters**

- `buffer` (char*) - Buffer to write to
- `count` (size_t) - Size of the buffer
- `format` (const char*) - String format

**Returns**

- `Size` - of the resulting string (excl terminating 0) if it fits, -1 otherwise

**Examples**

```
char path[64];
dmSnPrintf(path, 64, PATH_FORMAT, filename);

```

### dmStrCaseCmp
*Type:* FUNCTION
Case-insensitive string comparison

**Parameters**

- `s1` (const char*) - First string to compare
- `s2` (const char*) - Second string to compare

**Returns**

- `an` - integer greater than, equal to, or less than 0 after lexicographically comparison of s1 and s2

**Examples**

```
dmStrCaseCmp("a", "b"); // 0
dmStrCaseCmp("a", "a"); // 0

```

### dmStrError
*Type:* FUNCTION
Error code to string representation. Wrapper for thread-safe strerror_s/r variants.
If the size of the buffer is too small, the message will be truncated to fit the buffer.
If the buffer is null, or if size is zero, nothing will happen.

**Parameters**

- `dst` (char*) - Destination string that carries the error message
- `size` (size_t) - Max size of destination string in bytes

**Returns**

- `a` - null-terminated error message

**Examples**

```
char buf[128];
dmStrError(buf, sizeof(buf), ENOENT); // buf => "No such file or directory"

```

### dmStrlCat
*Type:* FUNCTION
Size-bounded string concatenation. Same as OpenBSD 2.4 strlcat.
Appends src to string dst of size siz (unlike strncat, siz is the full size of dst, not space left).
At most siz-1 characters will be copied.  Always NUL terminates (unless siz == 0).
Returns strlen(dst) + strlen(src); if retval >= siz, truncation occurred.

**Parameters**

- `dst` (char*) - Destination string
- `src` (char*) - Source string
- `size` (size_t) - Max size

**Returns**

- `Total` - length of the created string

**Examples**

```
const char* src = "foo";
char dst[3] = { 0 };
dmStrlCat(dst, src, sizeof(dst)); // dst = "fo"

```

### dmStrlCpy
*Type:* FUNCTION
Size-bounded string copying. Same as OpenBSD 2.4 strlcpy.
Copy src to string dst of size siz.  At most siz-1 characters will be copied.
Always NUL terminates (unless siz == 0).Returns strlen(src); if retval >= siz, truncation occurred.

**Parameters**

- `dst` (char*) - Destination string
- `src` (const char*) - Source string
- `size` (size_t) - Max size

**Returns**

- `Total` - length of the created string

**Examples**

```
const char* src = "foo";
char dst[3];
dmStrlCpy(dst, src, sizeof(dst)); // dst = "fo"

```

### dmStrTok
*Type:* FUNCTION
Tokenize strings. Equivalent to BSD strsep_r. Thread-save version of strtok.

**Parameters**

- `string` (char*) - Pointer to string. For the first call string is the string to tokenize. Subsequent should pass NULL.
- `delim` (const char*) - Delimiter string
- `lasts` (char**) - Internal state pointer

**Returns**

- `Each` - call to dmStrTok() returns a pointer to a null-terminated string containing the next token. This string does not include the delimiting byte. If no more tokens are found, dmStrTok() returns NULL

**Examples**

```
char* string = strdup("a b c");
char* s, *last;
s = dmStrTok(string, " ", &last); // a
s = dmStrTok(0, " ", &last); // b
s = dmStrTok(0, " ", &last); // c

```

<!-- engine-dlib-src-dmsdk-dlib-file_descriptor-h -->

# FileDescriptor {#apis:engine-dlib-src-dmsdk-dlib-file_descriptor-h}

**Namespace:** `dmFileDescriptor`
**Language:** C++
**Type:** Defold C++
**File:** `file_descriptor.h`
**Source:** `engine/dlib/src/dmsdk/dlib/file_descriptor.h`
**Include:** `dmsdk/dlib/file_descriptor.h`

File Descriptor functions.

## API

### Poller
*Type:* STRUCT
Poller

### PollerClearEvent
*Type:* FUNCTION
Clear event from poller.

**Parameters**

- `poller` (dmFileDescriptor::Poller*) - Poller
- `event` (dmFileDescriptor::PollEvent) - Event to clear
- `fd` (int) - File descriptor to clear

**Returns**

- `return` (void)

### PollerHasEvent
*Type:* FUNCTION
Check if event exists for file descriptor

**Parameters**

- `poller` (dmFileDescriptor::Poller*) - Poller
- `event` (dmFileDescriptor::PollEvent) - Event to check
- `fd` (int) - File descriptor to clear

**Returns**

- `return` (bool) - True if event exists.

### PollerReset
*Type:* FUNCTION
Reset poller.

**Parameters**

- `spoller` (dmFileDescriptor::Poller*) - Poller

**Returns**

- `return` (void)

### PollerSetEvent
*Type:* FUNCTION
Set file descriptor event to poll for

**Parameters**

- `poller` (dmFileDescriptor::Poller*) - Poller
- `event` (dmFileDescriptor::PollEvent) - Event to set
- `fd` (int) - File descriptor to clear

**Returns**

- `return` (void)

### PollEvent
*Type:* ENUM
Poll events

**Members**

- `EVENT_READ`
- `EVENT_WRITE`
- `EVENT_ERROR`

### Wait
*Type:* FUNCTION
Wait for event

**Parameters**

- `poller` (dmFileDescriptor::Poller*) - Poller
- `timeout` (int) - Timeout. For blocking pass -1. (milliseconds)

**Returns**

- `return` (int) - Non-negative value on success, 0 on timeout and
-1 on error with errno set to indicate the error

<!-- engine-dlib-src-dmsdk-dlib-hash-h -->

# Hash {#apis:engine-dlib-src-dmsdk-dlib-hash-h}

**Namespace:** `Hash`
**Language:** C++
**Type:** Defold C++
**File:** `hash.h`
**Source:** `engine/dlib/src/dmsdk/dlib/hash.h`
**Include:** `dmsdk/dlib/hash.h`

Hash functions.

## API

### DM_HASH_REVERSE_MEM
*Type:* FUNCTION
Allocate stack memory context for safely reversing hash values into strings

**Parameters**

- `name` (symbol) - The name of the dmAllocator struct
- `size` (size_t) - The max size of the stack allocated context

### dmhash_t
*Type:* TYPEDEF
```
typedef uint64_t dmhash_t

```

### dmHashBuffer32
*Type:* FUNCTION
Calculate 32-bit hash value from buffer

**Parameters**

- `buffer` (const void*) - Buffer
- `buffer_len` (uint32_t) - Length of buffer

**Returns**

- `hash` (uint32_t) - hash value

### dmHashBuffer64
*Type:* FUNCTION
calculate 64-bit hash value from buffer

**Parameters**

- `buffer` (const void*) - Buffer
- `buffer_len` (uint32_t) - Length of buffer

**Returns**

- `hash` (uint64_t) - hash value

### dmHashClone32
*Type:* FUNCTION
Clone 32-bit incremental hash state

**Parameters**

- `hash_state` (HashState32*) - Hash state
- `source_hash_state` (HashState32*) - Source hash state
- `reverse_hash` (bool) - true to enable reverse hashing of buffers up to ::DMHASH_MAX_REVERSE_LENGTH. Ignored if source state reverse hashing is disabled.

### dmHashClone64
*Type:* FUNCTION
Clone 64-bit incremental hash state

**Parameters**

- `hash_state` (HashState64*) - Hash state
- `source_hash_state` (HashState64*) - Source hash state
- `reverse_hash` (bool) - true to enable reverse hashing of buffers up to ::DMHASH_MAX_REVERSE_LENGTH. Ignored if source state reverse hashing is disabled.

### dmHashFinal32
*Type:* FUNCTION
Finalize incremental hashing and release associated resources

**Parameters**

- `hash_state` (HashState32*) - Hash state

**Returns**

- `hash` (uint32_t) - the hash value

### dmHashFinal64
*Type:* FUNCTION
Finalize incremental hashing and release associated resources

**Parameters**

- `hash_state` (HashState64*) - Hash state

**Returns**

- `hash` (uint64_t) - The hash value

### dmHashInit32
*Type:* FUNCTION
Initialize hash-state for 32-bit incremental hashing

**Parameters**

- `hash_state` (HashState32*) - Hash state
- `reverse_hash` (bool) - true to enable reverse hashing of buffers up to ::DMHASH_MAX_REVERSE_LENGTH

### dmHashInit64
*Type:* FUNCTION
Initialize hash-state for 64-bit incremental hashing

**Parameters**

- `hash_state` (HashState64*) - Hash state
- `reverse_hash` (bool) - true to enable reverse hashing of buffers up to ::DMHASH_MAX_REVERSE_LENGTH

### dmHashRelease32
*Type:* FUNCTION
Release incremental hashing resources
Used to release assocciated resources for intermediate incremental hash states.

**Parameters**

- `hash_state` (HashState32*) - Hash state

### dmHashRelease64
*Type:* FUNCTION
Release incremental hashing resources
Used to release assocciated resources for intermediate incremental hash states.

**Parameters**

- `hash_state` (HashState64*) - Hash state

### dmHashReverseSafe32
*Type:* FUNCTION
Returns the original string used to produce a hash.
Always returns a null terminated string. Returns "" if the original string wasn't found.

**Notes**

- Do not store this pointer

**Parameters**

- `hash` (uint32_t) - hash value

**Returns**

- `return` (const char*) - Original string value or "<unknown>" if it wasn't found.

### dmHashReverseSafe32
*Type:* FUNCTION
Reverse hash lookup. Maps hash to original data. It is guaranteed that the returned
buffer is null-terminated. If the buffer contains a valid c-string
it can safely be used in printf and friends.

**Notes**

- Do not store this pointer

**Parameters**

- `hash` (uint32_t) - hash to lookup
- `length` (uint32_t*) - original data length. Optional argument and NULL-pointer is accepted.

**Returns**

- `return` (const char*) - pointer to buffer. 0 if no reverse exists or if reverse lookup is disabled

### dmHashReverseSafe32Alloc
*Type:* FUNCTION
Returns the original string used to produce a hash.

**Notes**

- This function is thread safe
- The pointer is valid during the scope of the allocator

**Parameters**

- `allocator` (dmAllocator*) - The reverse hash allocator
- `hash` (uint32_t) - hash value

**Returns**

- `return` (const char*) - Original string value or "<unknown:value>" if it wasn't found,
                           or "<unknown>" if the allocator failed to allocate more memory.
                           Always returns a null terminated string.

**Examples**

Get the string representaiton of a hash value
```
DM_HASH_REVERSE_MEM(hash_ctx, 128);
const char* reverse = (const char*) dmHashReverseSafe32Alloc(&hash_ctx, hash);

```

### dmHashReverseSafe64
*Type:* FUNCTION
Returns the original string used to produce a hash.
Always returns a null terminated string. Returns "" if the original string wasn't found.

**Notes**

- Do not store this pointer

**Parameters**

- `hash` (uint64_t) - hash value

**Returns**

- `return` (const char*) - Original string value or "<unknown>" if it wasn't found.

### dmHashReverseSafe64
*Type:* FUNCTION
Reverse hash lookup. Maps hash to original data. It is guaranteed that the returned
buffer is null-terminated. If the buffer contains a valid c-string
it can safely be used in printf and friends.

**Notes**

- Do not store this pointer

**Parameters**

- `hash` (uint64_t) - hash to lookup
- `length` (uint32_t*) - original data length. Optional argument and NULL-pointer is accepted.

**Returns**

- `return` (const char*) - pointer to buffer. 0 if no reverse exists or if reverse lookup is disabled

### dmHashReverseSafe64Alloc
*Type:* FUNCTION
Returns the original string used to produce a hash.

**Notes**

- This function is thread safe
- The pointer is valid during the scope of the allocator

**Parameters**

- `allocator` (dmAllocator*) - The reverse hash allocator
- `hash` (uint64_t) - hash value

**Returns**

- `return` (const char*) - Original string value or "<unknown:value>" if it wasn't found,
                           or "<unknown>" if the allocator failed to allocate more memory.
                           Always returns a null terminated string.

**Examples**

Get the string representaiton of a hash value
```
DM_HASH_REVERSE_MEM(hash_ctx, 128);
const char* reverse = dmHashReverseSafe64Alloc(&hash_ctx, hash);

```

### dmHashString32
*Type:* FUNCTION
Calculate 32-bit hash value from string

**Parameters**

- `string` (const char*) - Null terminated string

**Returns**

- `hash` (uint32_t) - hash value

### dmHashString64
*Type:* FUNCTION
calculate 64-bit hash value from string

**Parameters**

- `string` (const char*) - Null terminated string

**Returns**

- `hash` (uint64_t) - hash value

### dmHashUpdateBuffer32
*Type:* FUNCTION
Incremental hashing

**Parameters**

- `hash_state` (HashState32*) - Hash state
- `buffer` (const void*) - Buffer
- `buffer_len` (uint32_t) - Length of buffer

### dmHashUpdateBuffer64
*Type:* FUNCTION
Incremental hashing

**Parameters**

- `hash_state` (HashState64*) - Hash state
- `buffer` (const void*) - Buffer
- `buffer_len` (uint32_t) - Length of buffer

### HashState32
*Type:* STRUCT
Hash state used for 32-bit incremental hashing

### HashState64
*Type:* STRUCT
Hash state used for 64-bit incremental hashing

<!-- engine-dlib-src-dmsdk-dlib-hashtable-h -->

# Hashtable {#apis:engine-dlib-src-dmsdk-dlib-hashtable-h}

**Namespace:** `Hashtable`
**Language:** C++
**Type:** Defold C++
**File:** `hashtable.h`
**Source:** `engine/dlib/src/dmsdk/dlib/hashtable.h`
**Include:** `dmsdk/dlib/hashtable.h`

Hash table

## API

### Capacity
*Type:* FUNCTION
Hashtable capacity. Maximum number of entries possible to store in table

**Returns**

- `return` (uint32_t) - the capacity of the table

### Clear
*Type:* FUNCTION
Removes all the entries from the table.

### dmHashTable
*Type:* CLASS
Hashtable with chaining for collision resolution, memcpy-copy semantics (POD types) and 32-bit indicies instead of pointers. (NUMA-friendly)

**Notes**

- The key type needs to support == and % operators

**Template Parameters**

- `KEY`
- `T`

### dmHashTable
*Type:* FUNCTION
Constructor. Create an empty hashtable with zero capacity and zero hashtable (buckets)

### dmHashTable
*Type:* FUNCTION
Creates a hashtable array with user allocated memory.

**Notes**

- User allocated arrays can not change capacity.

**Parameters**

- `user_allocated` (void*) - Pointer to user allocated continous data-block ((table_size<em>sizeof(uint32_t)) + (capacity</em>sizeof(dmHashTable::Entry))
- `table_size` (uint32_t) - Hashtable size, ie number of buckets. table_size &lt; 0xffffffff
- `capacity` (uint32_t) - Capacity. capacity &lt; 0xffffffff

### dmHashTable16
*Type:* CLASS
Specialized hash table with uint16_t as keys

### dmHashTable32
*Type:* CLASS
Specialized hash table with uint32_t as keys

### dmHashTable64
*Type:* CLASS
Specialized hash table with uint64_t as keys

### Empty
*Type:* FUNCTION
Check if the table is empty

**Returns**

- `true` - if the table is empty

### Erase
*Type:* FUNCTION
Remove key/value pair.

**Notes**

- Only valid if key exists in table

**Parameters**

- `key` (KEY) - Key to remove

### Full
*Type:* FUNCTION
Check if the table is full

**Returns**

- `true` - if the table is full

### Get
*Type:* FUNCTION
Get pointer to value from key

**Parameters**

- `key` (KEY) - Key

**Returns**

- `value` (T*) - Pointer to value. NULL if the key/value pair doesn't exist.

### GetIterator
*Type:* FUNCTION
Get an iterator for the key/value pairs

**Returns**

- `iterator` (dmHashTable<T>::Iterator) - the iterator

**Examples**

```
dmHashTable::Iterator iter = ht.GetIterator();
while(iter.Next())
{
    printf("%s: %d\n", dmHashReverseSafe64(iter.GetKey()), iter.GetValue());
}

```

### Iterate
*Type:* FUNCTION
Iterate over all entries in table

**Template Parameters**

- `CONTEXT`

**Parameters**

- `call_back` (void*) - Call-back called for every entry
- `context` (CONTEXT*) - Context

### Iterator
*Type:* STRUCT
Iterator to the key/value pairs of a hash table

**Members**

- `GetKey()`
- `GetValue()`

### OffsetCapacity
*Type:* FUNCTION
Relative change of capacity
Equivalent to SetCapacity(Capacity() + offset).
Only allowed for auto-allocated hash tables and will result in a new dynamic allocation

**Parameters**

- `offset` (uint32_t) - relative amount of elements to change the capacity

### Put
*Type:* FUNCTION
Put key/value pair in hash table. NOTE: The method will "assert" if the hashtable is full.

**Parameters**

- `key` (KEY) - Key
- `value` (const T&) - Value

### SetCapacity
*Type:* FUNCTION
Set hashtable capacity. New capacity must be greater or equal to current capacity

**Parameters**

- `table_size` (uint32_t) - Hashtable size, ie number of buckets. table_size &lt; 0xffffffff
- `capacity` (uint32_t) - Capacity. capacity &lt; 0xffffffff

### Size
*Type:* FUNCTION
Number of entries stored in table. (not the actual hashtable size)

**Returns**

- `Number` - of entries.

### Swap
*Type:* FUNCTION
Swaps the contents of two hash tables

**Parameters**

- `other` (dmHashTable<KEY, T>&) - the other table

<!-- engine-dlib-src-dmsdk-dlib-http_client-h -->

# Http Client {#apis:engine-dlib-src-dmsdk-dlib-http_client-h}

**Namespace:** `dmHttpClient`
**Language:** C++
**Type:** Defold C++
**File:** `http_client.h`
**Source:** `engine/dlib/src/dmsdk/dlib/http_client.h`
**Include:** `dmsdk/dlib/http_client.h`

Http client functions.

## API

### ParseHeader
*Type:* FUNCTION
Parse the header data and make callbacks for each header/version entry and the start of the body.

**Notes**

- This function is destructive to the input data.

**Parameters**

- `header_str` (char*) - http response headers. Must be a null terminated string.
- `user_data` (const void*) - user data to the callbacks.
- `end_of_receive` (bool) - true if there is no more data
- `version_cbk` (function) - callback for the http version
    void (<em>version_cbk)(void</em> user_data, int major, int minor, int status, const char* status_str);
- `header_cbk` (function) - callback for each header/value pair
    void (<em>header_cbk)(void</em> user_data, const char<em> key, const char</em> value);
- `body_cbk` (function) - callback to note the start offset of the body data.
    void (<em>body_cbk)(void</em> user_data, int offset)

**Returns**

- `result` (dmHttpClient::ParseResult) - the parse result

### ParseResult
*Type:* ENUM
Header parse result enumeration.

**Members**

- `dmHttpClient::PARSE_RESULT_NEED_MORE_DATA` - = 1
- `dmHttpClient::PARSE_RESULT_OK` - = 0
- `dmHttpClient::PARSE_RESULT_SYNTAX_ERROR` - = -1

<!-- engine-dlib-src-dmsdk-dlib-image-h -->

# Image {#apis:engine-dlib-src-dmsdk-dlib-image-h}

**Namespace:** `dmImage`
**Language:** C++
**Type:** Defold C++
**File:** `image.h`
**Source:** `engine/dlib/src/dmsdk/dlib/image.h`
**Include:** `dmsdk/dlib/image.h`

Image API functions.

## API

### Result
*Type:* ENUM
result enumeration

**Members**

- `dmImage::RESULT_OK` - = 0
- `dmImage::RESULT_UNSUPPORTED_FORMAT` - = -1
- `dmImage::RESULT_IMAGE_ERROR` - = -2

### Type
*Type:* ENUM
type enumeration

**Members**

- `dmImage::TYPE_RGB` - = 0
- `dmImage::TYPE_RGBA` - = 1
- `dmImage::TYPE_LUMINANCE` - = 2
- `dmImage::TYPE_LUMINANCE_ALPHA` - = 3

<!-- engine-dlib-src-dmsdk-dlib-intersection-h -->

# Intersection structs and functions {#apis:engine-dlib-src-dmsdk-dlib-intersection-h}

**Namespace:** `dmIntersection`
**Language:** C++
**Type:** Defold C++
**File:** `intersection.h`
**Source:** `engine/dlib/src/dmsdk/dlib/intersection.h`
**Include:** `dmsdk/dlib/intersection.h`

Intersection math structs and functions

## API

### CreateFrustumFromMatrix
*Type:* FUNCTION
Constructs a dmIntersection::Frustum from a View*Projection matrix

**Parameters**

- `m` (dmVMath::Matrix4&) - The matrix. Usually a "ViewProj" matrix
- `normalize` (bool) - true if the normals should be normalized

**Returns**

- `frustum` (dmIntersection::Frustum&) - the frustum output

### DistanceToPlane
*Type:* FUNCTION
Returns the closest distance between a plane and a position

**Parameters**

- `plane` (dmIntersection::Plane) - plane equation
- `pos` (dmVMath::Point3) - position

**Returns**

- `distance` (float) - closest distance between plane and position

### Frustum
*Type:* STRUCT
Frustum

**Notes**

- The plane normals point inwards

**Members**

- `m_Planes` (dmIntersection::Plane[6) - ] plane equations: // left, right, bottom, top, near, far

### Plane
*Type:* TYPEDEF
Plane struct (currently an alias for dmVMath::Vector4)

### TestFrustumOBB
*Type:* FUNCTION
Tests intersection between a frustum and an oriented bounding box (OBB)

**Parameters**

- `frustum` (dmIntersection::Frustum&) - the frustum
- `world` (dmVMath::Matrix4&) - The world transform of the OBB
- `aabb_min` (dmVMath::Vector3&) - the minimum corner of the object. In local space.
- `aabb_max` (dmVMath::Vector3&) - the maximum corner of the object. In local space.
- `skip_near_far` (bool) - if true, the near+far planes of the frustum are ignored

**Returns**

- `intersects` (bool) - Returns true if the objects intersect

### TestFrustumPoint
*Type:* FUNCTION
Tests intersection between a frustum and a point

**Parameters**

- `frustum` (dmIntersection::Frustum&) - the frustum
- `pos` (dmVMath::Point3&) - the position
- `skip_near_far` (bool) - if true, the near+far planes of the frustum are ignored

**Returns**

- `intersects` (bool) - Returns true if the objects intersect

### TestFrustumSphere
*Type:* FUNCTION
Tests intersection between a frustum and a sphere

**Parameters**

- `frustum` (dmIntersection::Frustum&) - the frustum
- `pos` (dmVMath::Point3&) - the center position of the sphere
- `radius` (float) - the radius of the sphere
- `skip_near_far` (bool) - if true, the near+far planes of the frustum are ignored

**Returns**

- `intersects` (bool) - Returns true if the objects intersect

### TestFrustumSphere
*Type:* FUNCTION
Tests intersection between a frustum and a sphere

**Parameters**

- `frustum` (dmIntersection::Frustum&) - the frustum
- `pos` (dmVMath::Vector4&) - the center position of the sphere. The w component must be 1.
- `radius` (float) - the radius of the sphere
- `skip_near_far` (bool) - if true, the near+far planes of the frustum are ignored

**Returns**

- `intersects` (bool) - Returns true if the objects intersect

### TestFrustumSphereSq
*Type:* FUNCTION
Tests intersection between a frustum and a sphere

**Parameters**

- `frustum` (dmIntersection::Frustum&) - the frustum
- `pos` (dmVMath::Point3&) - the center position of the sphere
- `radius_sq` (float) - the squared radius of the sphere
- `skip_near_far` (bool) - if true, the near+far planes of the frustum are ignored

**Returns**

- `intersects` (bool) - Returns true if the objects intersect

### TestFrustumSphereSq
*Type:* FUNCTION
Tests intersection between a frustum and a sphere

**Parameters**

- `frustum` (dmIntersection::Frustum&) - the frustum
- `pos` (dmVMath::Vector4&) - the center position of the sphere. The w component must be 1.
- `radius_sq` (float) - the squared radius of the sphere
- `skip_near_far` (bool) - if true, the near+far planes of the frustum are ignored

**Returns**

- `intersects` (bool) - Returns true if the objects intersect

<!-- engine-dlib-src-dmsdk-dlib-log-h -->

# Log {#apis:engine-dlib-src-dmsdk-dlib-log-h}

**Namespace:** `Log`
**Language:** C++
**Type:** Defold C++
**File:** `log.h`
**Source:** `engine/dlib/src/dmsdk/dlib/log.h`
**Include:** `dmsdk/dlib/log.h`

Logging functions.

## Notes

- Log functions will be omitted (NOP) for release builds
- Prefer these functions over `printf` since these can print to the platform specific logs

## API

### DLIB_LOG_DOMAIN
*Type:* MACRO
If DLIB_LOG_DOMAIN is defined the value of the defined is printed after severity.
Otherwise DEFAULT will be printed.

**Notes**

- Extensions do not need to set this since they get their own logging domain automatically

**Examples**

```
#define DLIB_LOG_DOMAIN "MyOwnDomain"
#include

```

### dmLogDebug
*Type:* FUNCTION
Debug messages are temporary log instances used when debugging a certain behavior
Use dmLogOnceDebug for one-shot logging

**Parameters**

- `format` (const char*) - Format string
- `args` (...) - Format string args (variable arg list)

**Returns**

- `return` (void)

### dmLogError
*Type:* FUNCTION
Error messages are used in cases where an recoverable error has occurred.
Use dmLogOnceError for one-shot logging

**Parameters**

- `format` (const char*) - Format string
- `args` (...) - Format string args (variable arg list)

**Returns**

- `return` (void)

### dmLogFatal
*Type:* FUNCTION
Fatal messages are used in cases where an unrecoverable error has occurred.
Use dmLogOnceFatal for one-shot logging

**Parameters**

- `format` (const char*) - Format string
- `args` (...) - Format string args (variable arg list)

**Returns**

- `return` (void)

### dmLogGetLevel
*Type:* FUNCTION
Get log system severity level.

**Returns**

- `severity` (LogSeverity) - Current log system severity level

### dmLogInfo
*Type:* FUNCTION
Info messages are used to inform the developers of relevant information
Use dmLogOnceInfo for one-shot logging

**Parameters**

- `format` (const char*) - Format string
- `args` (...) - Format string args (variable arg list)

**Returns**

- `return` (void)

### dmLogRegisterListener
*Type:* FUNCTION
Registers a log listener.
This listener receive logs even in release bundle.

**Notes**

- Any calls to dmLogInfo et al from within the calllback will be ignored

**Parameters**

- `listener` (FLogListener)

### dmLogSetLevel
*Type:* FUNCTION
Set log system severity level.

**Parameters**

- `severity` (LogSeverity) - Log system severity level to set

### dmLogUnregisterListener
*Type:* FUNCTION
Unregisters a log listener.

**Parameters**

- `listener` (FLogListener)

### dmLogUserDebug
*Type:* FUNCTION
Debug messages are temporary log instances used when debugging a certain behavior
Use dmLogOnceUserDebug for one-shot logging

**Parameters**

- `format` (const char*) - Format string
- `args` (...) - Format string args (variable arg list)

**Returns**

- `return` (void)

### dmLogWarning
*Type:* FUNCTION
Warning messages are used to inform the developers about potential problems which can cause errors.
Use dmLogOnceWarning for one-shot logging

**Parameters**

- `format` (const char*) - Format string
- `args` (...) - Format string args (variable arg list)

**Returns**

- `return` (void)

### FLogListener
*Type:* TYPEDEF
dmLog listener function type. Provides all logs from dmLog* functions and print/pprint Lua functions.
Used with dmLogRegisterListener() and dmLogUnregisterListener()

**Parameters**

- `severity` (LogSeverity)
- `domain` (const char*)
- `formatted_string` (const char*) - null terminated string

### LogSeverity
*Type:* ENUM
Log severity

**Members**

- `LOG_SEVERITY_DEBUG`
- `LOG_SEVERITY_USER_DEBUG`
- `LOG_SEVERITY_INFO`
- `LOG_SEVERITY_WARNING`
- `LOG_SEVERITY_ERROR`
- `LOG_SEVERITY_FATAL`

<!-- engine-dlib-src-dmsdk-dlib-math-h -->

# Math {#apis:engine-dlib-src-dmsdk-dlib-math-h}

**Namespace:** `dmMath`
**Language:** C++
**Type:** Defold C++
**File:** `math.h`
**Source:** `engine/dlib/src/dmsdk/dlib/math.h`
**Include:** `dmsdk/dlib/math.h`

Math functions.

## API

### Abs
*Type:* FUNCTION
Abs function

**Template Parameters**

- `T`

**Parameters**

- `x` (T)

**Returns**

- `v` (T) - Absolute value of x

### Clamp
*Type:* FUNCTION
Clamp function

**Template Parameters**

- `T`

**Parameters**

- `v` (T) - Value to clamp
- `min` (T) - Lower bound
- `max` (T) - Upper bound

**Returns**

- `v` (T) - Value closest to v inside the range [min, max]

### Max
*Type:* FUNCTION
Max function

**Template Parameters**

- `T`

**Parameters**

- `a` (T) - Value a
- `b` (T) - Value b

**Returns**

- `v` (T) - Max of a and b

### Min
*Type:* FUNCTION
Min function

**Template Parameters**

- `T`

**Parameters**

- `a` (T) - Value a
- `b` (T) - Value b

**Returns**

- `v` (T) - Min of a and b

### Select
*Type:* FUNCTION
Select one of two values depending on the sign of another.

**Template Parameters**

- `T`

**Parameters**

- `x` (T) - Value to test for positiveness
- `a` (T) - Result if test succeeded
- `b` (T) - Result if test failed

**Returns**

- `v` (T) - a when x &gt;= 0, b otherwise

<!-- engine-dlib-src-dmsdk-dlib-memory-h -->

# Memory {#apis:engine-dlib-src-dmsdk-dlib-memory-h}

**Namespace:** `dmMemory`
**Language:** C++
**Type:** Defold C++
**File:** `memory.h`
**Source:** `engine/dlib/src/dmsdk/dlib/memory.h`
**Include:** `dmsdk/dlib/memory.h`

Memory allocation functions

## API

### AlignedFree
*Type:* FUNCTION
Frees a block of memory that was allocated with dmMemory::AlignedMalloc

**Parameters**

- `memptr` (void*) - A pointer to the memory block that was returned by dmMemory::AlignedMalloc

### AlignedMalloc
*Type:* FUNCTION
Allocate size bytes of uninitialized storage whose alignment is specified by alignment.

**Parameters**

- `memptr` (void**) - Pointer to a void* where the allocated pointer address should be stored.
- `alignment` (uint32_t) - The alignment value, which must be an integer power of 2.
- `size` (uint32_t) - Size of the requested memory allocation.

**Returns**

- `result` (Result) - Returns RESULT_OK on success, RESULT_INVAL if alignment is not a power of 2 and RESULT_NOMEM if out of memory.

### Result
*Type:* ENUM
Aligned memory allocation result

**Members**

- `dmMemory::RESULT_OK` - 0
- `dmMemory::RESULT_INVAL` - -1
- `dmMemory::RESULT_NOMEM` - -2

<!-- engine-dlib-src-dmsdk-dlib-message-h -->

# Message {#apis:engine-dlib-src-dmsdk-dlib-message-h}

**Namespace:** `dmMessage`
**Language:** C++
**Type:** Defold C++
**File:** `message.h`
**Source:** `engine/dlib/src/dmsdk/dlib/message.h`
**Include:** `dmsdk/dlib/message.h`

Api for sending messages

## API

### dmMessage::Result
*Type:* ENUM
Result enum

**Members**

- `RESULT_OK` - = 0
- `RESULT_SOCKET_EXISTS` - = -1
- `RESULT_SOCKET_NOT_FOUND` - = -2
- `RESULT_SOCKET_OUT_OF_RESOURCES` - = -3
- `RESULT_INVALID_SOCKET_NAME` - = -4
- `RESULT_MALFORMED_URL` - = -5
- `RESULT_NAME_OK_SOCKET_NOT_FOUND` - = -6

### dmMessage::StringURL
*Type:* STRUCT
Helper struct for parsing a string of the form "socket:path#fragment"

**Notes**

- The sizes do not include the null character. There is no null character since the dmMessage::ParseURL is non destructive.

**Members**

- `m_Socket` (const char*) - The socket
- `m_SocketSize` (uint32_t) - The socket length
- `m_Path` (const char*) - The path
- `m_PathSize` (uint32_t) - The path length
- `m_Fragment` (const char*) - The fragment
- `m_FragmentSize` (uint32_t) - The fragment length

### dmMessage::URL
*Type:* STRUCT
URL specifying a sender/receiver of messages

**Notes**

- Currently has a hard limit of 32 bytes
- This struct is a part of the save file APi (see script_table.cpp)

### dmMMessage::MessageDestroyCallback
*Type:* TYPEDEF
A callback for messages that needs cleanup after being dispatched. E.g. for freeing resources/memory.

### GetFragment
*Type:* FUNCTION
Get the message fragment

**Parameters**

- `url` (dmMessage::URL) - url

**Returns**

- `fragment` (dmhash_t)

### GetPath
*Type:* FUNCTION
Get the message path

**Parameters**

- `url` (dmMessage::URL) - url

**Returns**

- `path` (dmhash_t)

### GetSocket
*Type:* FUNCTION
Get the message socket

**Parameters**

- `url` (dmMessage::URL) - url

**Returns**

- `socket` (dmMessage::HSocket)

### GetSocketName
*Type:* FUNCTION
Get socket name

**Parameters**

- `socket` (dmMessage::HSocket) - Socket

**Returns**

- `name` (const char*) - socket name. 0 if it was not found

### GetSocketNameHash
*Type:* FUNCTION
Get socket name hash

**Parameters**

- `socket` (dmMessage::HSocket) - Socket

**Returns**

- `name_hash` (dmhash_t) - socket name hash. 0 if it was not found

### HSocket
*Type:* TYPEDEF
Socket handle

### IsSocketValid
*Type:* FUNCTION
Tests if a socket is valid (not deleted).

**Parameters**

- `socket` (dmMessage::HSocket) - Socket

**Returns**

- `result` (bool) - if the socket is valid or not

### Message
*Type:* STRUCT

### Message
*Type:* STRUCT
Message data desc used at dispatch callback. When a message is posted,
the actual object is copied into the sockets internal buffer.

**Members**

- `m_Sender` (dmMessage::URL) - Sender uri
- `m_Receiver` (dmMessage::URL) - Receiver uri
- `m_Id` (dmhash_t) - Unique id of message
- `m_UserData1` (uintptr_t) - User data pointer
- `m_UserData2` (uintptr_t) - User data pointer
- `m_Descriptor` (uintptr_t) - User specified descriptor of the message data
- `m_DataSize` (uint32_t) - Size of message data in bytes
- `m_Next` (dmMessage::Message*) - Ptr to next message (or 0 if last)
- `m_DestroyCallback` (dmMessage::MessageDestroyCallback) - If set, will be called after each dispatch
- `m_Data` (uint8_t*) - Payload

### ParseUrl
*Type:* FUNCTION
Convert a string to a URL struct

**Notes**

- No allocation occurs, thus no cleanup is needed.

**Parameters**

- `uri` (const char*) - string of the format <span class="socket">][path</span>[#fragment]
- `out` (dmMessage::StringUrl) - url in string format, must not be 0x0

**Returns**

- `-` - RESULT_OK on success
- RESULT_MALFORMED_URL if the uri could not be parsed

### ResetUrl
*Type:* FUNCTION
Resets the given URL to default values.

**Notes**

- Previously the URL wasn't reset in the constructor and certain calls to ResetURL might currently be redundant

**Parameters**

- `url` (dmMessage::URL) - URL to reset

### SetFragment
*Type:* FUNCTION
Set the message fragment

**Parameters**

- `url` (dmMessage::URL) - url
- `fragment` (dmhash_t)

### SetPath
*Type:* FUNCTION
Set the message path

**Parameters**

- `url` (dmMessage::URL) - url
- `path` (dmhash_t)

### SetSocket
*Type:* FUNCTION
Set the socket

**Parameters**

- `url` (dmMessage::URL) - url
- `socket` (dmMessage::HSocket)

<!-- engine-dlib-src-dmsdk-dlib-mutex-h -->

# Mutex {#apis:engine-dlib-src-dmsdk-dlib-mutex-h}

**Namespace:** `dmMutex`
**Language:** C++
**Type:** Defold C++
**File:** `mutex.h`
**Source:** `engine/dlib/src/dmsdk/dlib/mutex.h`
**Include:** `dmsdk/dlib/mutex.h`

API for platform independent mutex synchronization primitive.

## API

### DM_MUTEX_OPTIONAL_SCOPED_LOCK
*Type:* MACRO
If mutex is not null, Will lock the mutex and automatically unlock it at the end of the scope.
Since using threads is optional, we want to make it easy to switch on/off the mutex behavior

**Parameters**

- `mutex` (dmMutex::HMutex) - Mutex handle to lock, or null.

### DM_MUTEX_SCOPED_LOCK
*Type:* MACRO
Will lock a Mutex and automatically unlock it at the end of the scope.

**Parameters**

- `mutex` (dmMutex::HMutex) - Mutex handle to lock.

### dmMutex::Delete
*Type:* FUNCTION
Deletes a HMutex.

**Parameters**

- `mutex` (dmMutex::HMutex) - Mutex handle to delete.

### dmMutex::HMutex
*Type:* TYPEDEF
```
typedef struct Mutex* HMutex;

```

### dmMutex::Lock
*Type:* FUNCTION
Lock a HMutex, will block until mutex is unlocked if already locked elsewhere.

**Parameters**

- `mutex` (dmMutex::HMutex) - Mutex handle to lock.

### dmMutex::New
*Type:* FUNCTION
Creates a new HMutex.

**Returns**

- `mutex` (dmMutex::HMutex) - A new Mutex handle.

### dmMutex::TryLock
*Type:* FUNCTION
Tries to lock a HMutex, if mutex is already locked it will return false and
continue without locking the mutex.

**Parameters**

- `mutex` (dmMutex::HMutex) - Mutex handle to lock.

**Returns**

- `result` (bool) - True if mutex was successfully locked, false otherwise.

### dmMutex::Unlock
*Type:* FUNCTION
Unlock a HMutex.

**Parameters**

- `mutex` (dmMutex::HMutex) - Mutex handle to unlock.

<!-- engine-dlib-src-dmsdk-dlib-object_pool-h -->

# ObjectPool {#apis:engine-dlib-src-dmsdk-dlib-object_pool-h}

**Namespace:** `ObjectPool`
**Language:** C++
**Type:** Defold C++
**File:** `object_pool.h`
**Source:** `engine/dlib/src/dmsdk/dlib/object_pool.h`
**Include:** `dmsdk/dlib/object_pool.h`

SDK Object Pool API documentation

## API

### Alloc
*Type:* FUNCTION
Allocate a new object

**Returns**

- `index` (uint32_t) - logical index

### Capacity
*Type:* FUNCTION

**Returns**

- `capacity` (uint32_t) - maximum number of objects

### dmObjectPool
*Type:* STRUCT
Object pool data-structure with the following properties
- Mapping from logical index to physical index
- Logical index does not changes
- Allocated objects are contiguously laid out in memory
  Loop of m_Objects [0..Size()-1] times to iterate all objects
- Internal physical order is not preserved and a direct consequence of the
  contiguous property

**Template Parameters**

- `T`

### dmObjectPool
*Type:* FUNCTION
Constructor

### Free
*Type:* FUNCTION
Returns object index to the object pool

**Parameters**

- `index` (uint32_t) - index of object
- `clear` (bool) - If set, memset's the object memory

### Full
*Type:* FUNCTION
Checks if the pool is full

**Returns**

- `result` (bool) - returns true if the pool is full

### Get
*Type:* FUNCTION
Get object from logical index

**Parameters**

- `index` (uint32_t) - index of the object

**Returns**

- `object` (T&) - a reference to the object

### GetPtr
*Type:* FUNCTION
Get object pointer from logical index

**Parameters**

- `index` (uint32_t) - index of the object

**Returns**

- `object` (T*) - a pointer to the object. Null if the logical index wasn't valid

### GetRawObjects
*Type:* FUNCTION
Get the array of currently active objects

**Notes**

- The order of objects in this array may change if Alloc() or Free() has been called

**Returns**

- `object` (dmArray<T>&) - a reference to the array of objects

### OffsetCapacity
*Type:* FUNCTION
Grow by an amount.

**Parameters**

- `grow` (uint32_t) - number of items to grow

### Set
*Type:* FUNCTION
Set object from logical index

**Parameters**

- `index` (uint32_t) - index of object
- `object` (T&) - reference ot object. THe object stored is copied by value.

### SetCapacity
*Type:* FUNCTION
Set capacity. New capacity must be >= old_capacity

**Parameters**

- `capacity` (uint32_t) - max number of objects to store

### Size
*Type:* FUNCTION
Get number of objects currently stored

**Returns**

- `size` (uint32_t) - returns the number of objects currently stored

<!-- engine-dlib-src-dmsdk-dlib-profile-h -->

# Profile {#apis:engine-dlib-src-dmsdk-dlib-profile-h}

**Namespace:** `dmProfile`
**Language:** C++
**Type:** Defold C++
**File:** `profile.h`
**Source:** `engine/dlib/src/dmsdk/dlib/profile.h`
**Include:** `dmsdk/dlib/profile.h`

Profiling macros

## API

### DM_PROFILE
*Type:* MACRO
Adds a profiling scope. Excluded by default in release builds.

**Parameters**

- `a` (const char*) - A name for the scope

**Examples**

Profile a scope
```
{
    DM_PROFILE("DoWork");
    DoWork1();
    DoWork2();
}

```

### DM_PROFILE_DYN
*Type:* MACRO
Adds a profiling scope. Excluded by default in release builds.
Accepts a name cache value for performance.

**Parameters**

- `a` (const char*) - The scope name
- `a` (uint64_t*) - The scope name hash value pointer. May be 0.

**Examples**

Create a dynamic profiling scope
```
{
    DM_PROFILE_DYN(work->m_Name, &work->m_NameHash);
    work->DoWork();
}

```

### DM_PROFILE_TEXT
*Type:* MACRO
Send text to the profiler

**Notes**

- The max length of the text is DM_PROFILE_TEXT_LENGTH (1024)

**Parameters**

- `a` (const char*) - The format string
- `a` (va_list) - The variable argument list

**Examples**

Send a string to the profiler
```
DM_PROFILE_TEXT("Some value: %d", value);

```

### DM_PROPERTY_ADD_F32
*Type:* MACRO
Add a value to float property

**Parameters**

- `name` (symbol) - The property
- `value` (float) - The value

**Examples**

```
DM_PROPERTY_ADD_F32(rmtp_MyValue, 1.5);

```

### DM_PROPERTY_ADD_F64
*Type:* MACRO
Add a value to double property

**Parameters**

- `name` (symbol) - The property
- `value` (double) - The value

**Examples**

```
DM_PROPERTY_ADD_F64(rmtp_MyValue, 1.5);

```

### DM_PROPERTY_ADD_S32
*Type:* MACRO
Add a value to int32_t property

**Parameters**

- `name` (symbol) - The property
- `value` (int32_t) - The value

**Examples**

```
DM_PROPERTY_ADD_S32(rmtp_MyValue, -1);

```

### DM_PROPERTY_ADD_S64
*Type:* MACRO
Add a value to int64_t property

**Parameters**

- `name` (symbol) - The property
- `value` (int64_t) - The value

**Examples**

```
DM_PROPERTY_ADD_S64(rmtp_MyValue, -1);

```

### DM_PROPERTY_ADD_U32
*Type:* MACRO
Add a value to uint32_t property

**Parameters**

- `name` (symbol) - The property
- `value` (uint32_t) - The value

**Examples**

```
DM_PROPERTY_ADD_U32(rmtp_MyValue, 1);

```

### DM_PROPERTY_ADD_U64
*Type:* MACRO
Add a value to uint64_t property

**Parameters**

- `name` (symbol) - The property
- `value` (uint64_t) - The value

**Examples**

```
DM_PROPERTY_ADD_U64(rmtp_MyValue, 1);

```

### DM_PROPERTY_BOOL
*Type:* MACRO
Declare a property of type bool

**Parameters**

- `name` (symbol) - The property symbol/name
- `default` (bool) - The default value
- `flags` (uint32_t) - The flags. Either <code>PROFILE_PROPERTY_NONE</code> or <code>PROFILE_PROPERTY_FRAME_RESET</code>. <code>PROFILE_PROPERTY_FRAME_RESET</code> makes the value reset each frame.
- `desc` (const char*) - The description
- `group` (ProfileIdx*) - The parent group. May be 0.

**Examples**

```
DM_PROPERTY_BOOL(rmtp_MyBool, 0, PROFILE_PROPERTY_FRAME_RESET, "true or false", &rmtp_MyGroup);

```

### DM_PROPERTY_EXTERN
*Type:* MACRO
Declare an extern property

**Parameters**

- `name` (symbol) - The symbol name

**Examples**

Use a property declared elsewhere in the same library
```
DM_PROPERTY_EXTERN(rmtp_GameObject);
DM_PROPERTY_U32(rmtp_ComponentsAnim, 0, PROFILE_PROPERTY_FRAME_RESET, "#", &rmtp_GameObject);

```

### DM_PROPERTY_F32
*Type:* MACRO
Declare a property of type float

**Parameters**

- `name` (symbol) - The property symbol/name
- `default` (float) - The default value
- `flags` (uint32_t) - The flags. Either <code>PROFILE_PROPERTY_NONE</code> or <code>PROFILE_PROPERTY_FRAME_RESET</code>. <code>PROFILE_PROPERTY_FRAME_RESET</code> makes the value reset each frame.
- `desc` (const char*) - The description
- `group` (ProfileIdx*) - The parent group. May be 0.

**Examples**

```
DM_PROPERTY_F32(rmtp_MyValue, 0, PROFILE_PROPERTY_FRAME_RESET, "a value", &rmtp_MyGroup);

```

### DM_PROPERTY_F64
*Type:* MACRO
Declare a property of type double

**Parameters**

- `name` (symbol) - The property symbol/name
- `default` (double) - The default value
- `flags` (uint32_t) - The flags. Either <code>PROFILE_PROPERTY_NONE</code> or <code>PROFILE_PROPERTY_FRAME_RESET</code>. <code>PROFILE_PROPERTY_FRAME_RESET</code> makes the value reset each frame.
- `desc` (const char*) - The description
- `group` (ProfileIdx*) - The parent group. May be 0.

**Examples**

```
DM_PROPERTY_F64(rmtp_MyValue, 0, PROFILE_PROPERTY_FRAME_RESET, "a value", &rmtp_MyGroup);

```

### DM_PROPERTY_GROUP
*Type:* MACRO
Declare a property group

**Parameters**

- `name` (symbol) - The group name
- `desc` (const char*) - The description
- `parent` (ProfileIdx*) - pointer to parent property

**Examples**

```
DM_PROPERTY_GROUP(rmtp_GameObject, "My Group", 0);

```

### DM_PROPERTY_RESET
*Type:* MACRO
Reset a property to its default value

**Parameters**

- `name` (symbol) - The property

**Examples**

```
DM_PROPERTY_RESET(rmtp_MyValue);

```

### DM_PROPERTY_S32
*Type:* MACRO
Declare a property of type int32_t

**Parameters**

- `name` (symbol) - The property symbol/name
- `default` (int32_t) - The default value
- `flags` (uint32_t) - The flags. Either <code>PROFILE_PROPERTY_NONE</code> or <code>PROFILE_PROPERTY_FRAME_RESET</code>. <code>PROFILE_PROPERTY_FRAME_RESET</code> makes the value reset each frame.
- `desc` (const char*) - The description
- `group` (ProfileIdx*) - The parent group. May be 0.

**Examples**

```
DM_PROPERTY_S32(rmtp_MyValue, 0, PROFILE_PROPERTY_FRAME_RESET, "a value", &rmtp_MyGroup);

```

### DM_PROPERTY_S64
*Type:* MACRO
Declare a property of type int64_t

**Parameters**

- `name` (symbol) - The property symbol/name
- `default` (int64_t) - The default value
- `flags` (uint32_t) - The flags. Either <code>PROFILE_PROPERTY_NONE</code> or <code>PROFILE_PROPERTY_FRAME_RESET</code>. <code>PROFILE_PROPERTY_FRAME_RESET</code> makes the value reset each frame.
- `desc` (const char*) - The description
- `group` (ProfileIdx*) - The parent group. May be 0.

**Examples**

```
DM_PROPERTY_S64(rmtp_MyValue, 0, PROFILE_PROPERTY_FRAME_RESET, "a value", &rmtp_MyGroup);

```

### DM_PROPERTY_SET_BOOL
*Type:* MACRO
Set the value of a bool property

**Parameters**

- `name` (symbol) - The property
- `value` (bool) - The value

**Examples**

```
DM_PROPERTY_SET_BOOL(rmtp_MyBool, false);

```

### DM_PROPERTY_SET_F32
*Type:* MACRO
Set the value of a float property

**Parameters**

- `name` (symbol) - The property
- `value` (float) - The value

**Examples**

```
DM_PROPERTY_SET_F32(rmtp_MyValue, 1.5);

```

### DM_PROPERTY_SET_F64
*Type:* MACRO
Set the value of a double property

**Parameters**

- `name` (symbol) - The property
- `value` (double) - The value

**Examples**

```
DM_PROPERTY_SET_F64(rmtp_MyValue, 1.5);

```

### DM_PROPERTY_SET_S32
*Type:* MACRO
Set the value of a int32_t property

**Parameters**

- `name` (symbol) - The property
- `value` (int32_t) - The value

**Examples**

```
DM_PROPERTY_SET_S32(rmtp_MyValue, -1);

```

### DM_PROPERTY_SET_S64
*Type:* MACRO
Set the value of a int64_t property

**Parameters**

- `name` (symbol) - The property
- `value` (int64_t) - The value

**Examples**

```
DM_PROPERTY_SET_S64(rmtp_MyValue, -1);

```

### DM_PROPERTY_SET_U32
*Type:* MACRO
Set the value of a uint32_t property

**Parameters**

- `name` (symbol) - The property
- `value` (uint32_t) - The value

**Examples**

```
DM_PROPERTY_SET_U32(rmtp_MyValue, 1);

```

### DM_PROPERTY_SET_U64
*Type:* MACRO
Set the value of a uint64_t property

**Parameters**

- `name` (symbol) - The property
- `value` (uint64_t) - The value

**Examples**

```
DM_PROPERTY_SET_U64(rmtp_MyValue, 1);

```

### DM_PROPERTY_U32
*Type:* MACRO
Declare a property of type uint32_t

**Parameters**

- `name` (symbol) - The property symbol/name
- `default` (uint32_t) - The default value
- `flags` (uint32_t) - The flags. Either <code>PROFILE_PROPERTY_NONE</code> or <code>PROFILE_PROPERTY_FRAME_RESET</code>. <code>PROFILE_PROPERTY_FRAME_RESET</code> makes the value reset each frame.
- `desc` (const char*) - The description
- `group` (ProfileIdx*) - The parent group. May be 0.

**Examples**

```
DM_PROPERTY_U32(rmtp_MyValue, 0, PROFILE_PROPERTY_FRAME_RESET, "a value", &rmtp_MyGroup);

```

### DM_PROPERTY_U64
*Type:* MACRO
Declare a property of type uint64_t

**Parameters**

- `name` (symbol) - The property symbol/name
- `default` (uint64_t) - The default value
- `flags` (uint32_t) - The flags. Either <code>PROFILE_PROPERTY_NONE</code> or <code>PROFILE_PROPERTY_FRAME_RESET</code>. <code>PROFILE_PROPERTY_FRAME_RESET</code> makes the value reset each frame.
- `desc` (const char*) - The description
- `group` (ProfileIdx*) - The parent group. May be 0.

**Examples**

```
DM_PROPERTY_U64(rmtp_MyValue, 0, PROFILE_PROPERTY_FRAME_RESET, "a value", &rmtp_MyGroup);

```

### HProfile
*Type:* TYPEDEF
Handle to a an active profile frame

### PROFILE_PROPERTY_INVALID_IDX
*Type:* ENUM
Index constant to mark a a property as invalid

### ProfileFinalize
*Type:* FUNCTION
Finalize the profiling system

### ProfileFrameBegin
*Type:* FUNCTION
Begin profiling, eg start of frame

**Notes**

- NULL is returned if profiling is disabled

**Returns**

- `context` (HProfile) - The current profiling context. Must be released by #EndFrame

### ProfileFrameEnd
*Type:* FUNCTION
Release profile returned by #ProfileFrameBegin

**Parameters**

- `profile` (HProfile) - Profile to release

### ProfileIdx
*Type:* TYPEDEF
Index type to hold internal references of samplers and properties

### ProfileInitialize
*Type:* FUNCTION
Initialize the profiling system

### ProfileIsInitialized
*Type:* FUNCTION
Finalize the profiling system

**Returns**

- `initialized` (bool) - Returns non zero if the profiler is initialized

### ProfileListener
*Type:* STRUCT
Structure for registering a profile listener

### ProfileLogText
*Type:* FUNCTION
Log text via the registered profilers

**Parameters**

- `name` (const char*) - Name of the scope
- `...` - Arguments for internal logging function

### ProfilePropertyFlags
*Type:* ENUM
Set of bit flags to be used when declaring propertis

**Members**

- `PROFILE_PROPERTY_NONE`
- `PROFILE_PROPERTY_FRAME_RESET`

### ProfilePropertyType
*Type:* ENUM
Enum to describe type of a property

**Members**

- `PROFILE_PROPERTY_TYPE_GROUP`
- `PROFILE_PROPERTY_TYPE_BOOL`
- `PROFILE_PROPERTY_TYPE_S32`
- `PROFILE_PROPERTY_TYPE_U32`
- `PROFILE_PROPERTY_TYPE_F32`
- `PROFILE_PROPERTY_TYPE_S64`
- `PROFILE_PROPERTY_TYPE_U64`
- `PROFILE_PROPERTY_TYPE_F64`

### ProfilePropertyValue
*Type:* FUNCTION
Union to hold a property value

### ProfileRegisterProfiler
*Type:* FUNCTION
Register a new profiler. Can be done after the profiling has started.

**Parameters**

- `name` (const char*) - Name of the profiler

### ProfileScopeBegin
*Type:* FUNCTION
Start a new profile scope

**Parameters**

- `name` (const char*) - Name of the scope
- `name_hash` (uint64_t) - Hashed name of the scope

### ProfileScopeEnd
*Type:* FUNCTION
End the last added scope

**Parameters**

- `name` (const char*) - Name of the scope
- `name_hash` (uint64_t) - Hashed name of the scope

### ProfileSetThreadName
*Type:* FUNCTION
Set the current thread name to each registered profiler

**Parameters**

- `name` (const char*) - Name of the thread

### ProfileUnregisterProfiler
*Type:* FUNCTION
Unregister a profiler

**Parameters**

- `name` (const char*) - Name of the profiler

<!-- engine-dlib-src-dmsdk-dlib-shared_library-h -->

# Shared Library {#apis:engine-dlib-src-dmsdk-dlib-shared_library-h}

**Namespace:** `SharedLibrary`
**Language:** C++
**Type:** Defold C++
**File:** `shared_library.h`
**Source:** `engine/dlib/src/dmsdk/dlib/shared_library.h`
**Include:** `dmsdk/dlib/shared_library.h`

Utility functions for shared library export/import

## API

### DM_DLLEXPORT
*Type:* MACRO
Export and import functions, data, and objects to or from a DLL

**Examples**

```
DM_DLLEXPORT uint64_t dmHashBuffer64(const void* buffer, uint32_t buffer_len);

```

<!-- engine-dlib-src-dmsdk-dlib-socket-h -->

# Socket {#apis:engine-dlib-src-dmsdk-dlib-socket-h}

**Namespace:** `dmSocket`
**Language:** C++
**Type:** Defold C++
**File:** `socket.h`
**Source:** `engine/dlib/src/dmsdk/dlib/socket.h`
**Include:** `dmsdk/dlib/socket.h`

Socket functions.

## API

### Address
*Type:* STRUCT
Network addresses were previously represented as an uint32_t, but in
order to support IPv6 the internal representation was changed to a struct.

### Connect
*Type:* FUNCTION
Initiate a connection on a socket

**Parameters**

- `socket` (Socket) - Socket to initiate connection on
- `address` (Address) - Address to connect to
- `port` (int) - Port to connect to

**Returns**

- `return` (Result) - RESULT_OK on success

### Delete
*Type:* FUNCTION
Delete a socket. Corresponds to BSD socket function close()

**Parameters**

- `socket` (Socket) - Socket to close

**Returns**

- `return` (Result) - RESULT_OK on success

### Domain
*Type:* ENUM
Domain type

**Members**

- `DOMAIN_MISSING`
- `DOMAIN_IPV4`
- `DOMAIN_IPV6`
- `DOMAIN_UNKNOWN`

### GetFD
*Type:* FUNCTION
Get underlying file descriptor

**Parameters**

- `socket` (Socket) - socket to get fd for

**Returns**

- `return` (int) - file-descriptor

### GetHostByName
*Type:* FUNCTION
Get host by name

**Parameters**

- `name` (const char*) - Hostname to resolve
- `address` (Address*) - Host address result
- `ipv4` (bool) - Whether or not to search for IPv4 addresses
- `ipv6` (bool) - Whether or not to search for IPv6 addresses

**Returns**

- `return` (Result) - RESULT_OK on success

### GetHostByName
*Type:* FUNCTION
Get host by name with timeout and cancelability

**Notes**

- On HTML5, this function is a wrapper for dmSocket::GetHostByName

**Parameters**

- `name` (const char*) - Hostname to resolve
- `address` (Address*) - Host address result
- `timeout` (uint64_t) - Timeout in microseconds
- `cancelflag` (int*) - if non null and set, will abort the call
- `ipv4` (bool) - Whether or not to search for IPv4 addresses
- `ipv6` (bool) - Whether or not to search for IPv6 addresses

**Returns**

- `return` (Result) - RESULT_OK on success

### INVALID_SOCKET_HANDLE
*Type:* CONSTANT
Invalid socket handle

### New
*Type:* FUNCTION
Create a new socket. Corresponds to BSD socket function socket().

**Notes**

- SIGPIPE is disabled on applicable platforms. This has the implication
that Receive can return zero bytes when the connection is closed by remote peer.

**Parameters**

- `type` (Type) - Socket type
- `protocol` (Protocol) - Protocol
- `socket` (Socket*) - Pointer to socket

**Returns**

- `return` (Result) - RESULT_OK on succcess

### Protocol
*Type:* ENUM
Network protocol

**Members**

- `PROTOCOL_TCP`
- `PROTOCOL_UDP`

### Receive
*Type:* FUNCTION
Receive data on a socket

**Notes**

- For dmSocket::Recv() and dmSocket::Send() function ETIMEDOUT is translated to EWOULDBLOCK
on win32 for compatibility with BSD sockets.

**Parameters**

- `socket` (Socket) - Socket to receive data on
- `buffer[out]` (void*) - Buffer to receive to
- `length` (int) - Receive buffer length
- `received_bytes[out]` (int*) - Number of received bytes (result)

**Returns**

- `return` (Result) - RESULT_OK on success

### Result
*Type:* ENUM
Socket result

**Members**

- `RESULT_OK` - 0
- `RESULT_ACCES` - -1
- `RESULT_AFNOSUPPORT` - -2
- `RESULT_WOULDBLOCK` - -3
- `RESULT_BADF` - -4
- `RESULT_CONNRESET` - -5
- `RESULT_DESTADDRREQ` - -6
- `RESULT_FAULT` - -7
- `RESULT_HOSTUNREACH` - -8
- `RESULT_INTR` - -9
- `RESULT_INVAL` - -10
- `RESULT_ISCONN` - -11
- `RESULT_MFILE` - -12
- `RESULT_MSGSIZE` - -13
- `RESULT_NETDOWN` - -14
- `RESULT_NETUNREACH` - -15
- `RESULT_NOBUFS` - -17
- `RESULT_NOTCONN` - -20
- `RESULT_NOTSOCK` - -22
- `RESULT_OPNOTSUPP` - -23
- `RESULT_PIPE` - -24
- `RESULT_PROTONOSUPPORT` - -25
- `RESULT_PROTOTYPE` - -26
- `RESULT_TIMEDOUT` - -27
- `RESULT_ADDRNOTAVAIL` - -28
- `RESULT_CONNREFUSED` - -29
- `RESULT_ADDRINUSE` - -30
- `RESULT_CONNABORTED` - -31
- `RESULT_INPROGRESS` - -32
- `RESULT_HOST_NOT_FOUND` - -100
- `RESULT_TRY_AGAIN` - -101
- `RESULT_NO_RECOVERY` - -102
- `RESULT_NO_DATA` - -103
- `RESULT_UNKNOWN` - -1000

### ResultToString
*Type:* FUNCTION
Convert result value to string

**Parameters**

- `result` (Result) - Result to convert

**Returns**

- `return` (const char*) - Result as string

### Select
*Type:* FUNCTION
Select for pending data

**Parameters**

- `selector` (Selector*) - Selector
- `timeout` (int) - Timeout. For blocking pass -1. (microseconds)

**Returns**

- `return` (Result) - RESULT_OK on success

### Selector
*Type:* STRUCT
Selector

### SelectorClear
*Type:* FUNCTION
Clear selector for socket. Similar to FD_CLR

**Parameters**

- `selector` (Selector*) - Selector
- `selector_kind` (SelectorKind) - Kind to clear
- `socket` (Socket) - Socket to clear

**Returns**

- `return` (void)

### SelectorIsSet
*Type:* FUNCTION
Check if selector is set. Similar to FD_ISSET

**Parameters**

- `selector` (Selector*) - Selector
- `selector_kind` (SelectorKind) - Selector kind
- `socket` (Socket) - Socket to check for

**Returns**

- `return` (bool) - True if set.

### SelectorKind
*Type:* ENUM
Selector kind

**Members**

- `SELECTOR_KIND_READ`
- `SELECTOR_KIND_WRITE`
- `SELECTOR_KIND_EXCEPT`

### SelectorSet
*Type:* FUNCTION
Set selector for socket. Similar to FD_SET

**Parameters**

- `selector` (Selector*) - Selector
- `selector_kind` (SelectorKind) - Kind to clear
- `socket` (Socket) - Socket to set

**Returns**

- `return` (void)

### SelectorZero
*Type:* FUNCTION
Clear selector (all kinds). Similar to FD_ZERO

**Parameters**

- `selector` (Selector*) - Selector

**Returns**

- `return` (void)

### Send
*Type:* FUNCTION
Send a message on a socket

**Notes**

- For dmSocket::Recv() and dmSocket::Send() function ETIMEDOUT is translated to EWOULDBLOCK
on win32 for compatibility with BSD sockets.

**Parameters**

- `socket` (Socket) - Socket to send a message on
- `buffer` (void*) - Buffer to send
- `length` (int) - Length of buffer to send
- `sent_bytes[out]` (int*) - Number of bytes sent (result)

**Returns**

- `return` (Result) - RESULT_OK on success

### SetBlocking
*Type:* FUNCTION
Set blocking option on a socket

**Parameters**

- `socket` (Socket) - Socket to set blocking on
- `blocking` (bool) - True to block

**Returns**

- `return` (Result) - RESULT_OK on success

### SetBroadcast
*Type:* FUNCTION
Set broadcast address option on socket. Socket option SO_BROADCAST on most platforms.

**Parameters**

- `socket` (Socket) - Socket to set reuse address to
- `broadcast` (bool) - True if broadcast

**Returns**

- `return` (Result) - RESULT_OK on success

### SetNoDelay
*Type:* FUNCTION
Set TCP_NODELAY on socket

**Parameters**

- `socket` (Socket) - Socket to set TCP_NODELAY on
- `no_delay` (bool) - True for no delay

**Returns**

- `return` (Result) - RESULT_OK on success

### SetQuickAck
*Type:* FUNCTION
Set TCP_QUICKACK on socket

**Notes**

- This is a no op on platforms that doesn't support it

**Parameters**

- `socket` (Socket) - Socket to set TCP_QUICKACK on
- `use_quick_ack` (bool) - False to disable quick ack

**Returns**

- `return` (Result) - RESULT_OK on success

### SetReceiveTimeout
*Type:* FUNCTION
Set socket receive timeout

**Notes**

- Timeout resolution might be in milliseconds, e.g. windows. Use values
      larger than or equal to 1000

**Parameters**

- `socket` (Socket) - socket
- `timeout` (uint64_t) - timeout in microseconds

**Returns**

- `return` (Result) - RESULT_OK on success

### SetReuseAddress
*Type:* FUNCTION
Set reuse socket address option on socket. Socket option SO_REUSEADDR on most platforms

**Parameters**

- `socket` (Socket) - Socket to set reuse address to
- `reuse` (bool) - True if reuse

**Returns**

- `return` (Result) - RESULT_OK on success

### SetSendTimeout
*Type:* FUNCTION
Set socket send timeout

**Notes**

- Timeout resolution might be in milliseconds, e.g. windows. Use values
      larger than or equal to 1000.

**Parameters**

- `socket` (Socket) - socket
- `timeout` (uint64_t) - timeout in microseconds

**Returns**

- `return` (Result) - RESULT_OK on success

### Shutdown
*Type:* FUNCTION
Shutdown part of a socket connection

**Parameters**

- `socket` (Socket) - Socket to shutdown connection ow
- `how` (ShutdownType) - Shutdown type

**Returns**

- `return` (Result) - RESULT_OK on success

### ShutdownType
*Type:* ENUM
Socket shutdown type

**Members**

- `SHUTDOWNTYPE_READ`
- `SHUTDOWNTYPE_WRITE`
- `SHUTDOWNTYPE_READWRITE`

### Socket
*Type:* TYPEDEF
Socket type definition

**Notes**

- Use dmSocket::INVALID_SOCKET_HANDLE instead of zero for unset values. This is an exception
from all other handles.

### SOCKET_TIMEOUT
*Type:* CONSTANT
Socket default timeout value

### Type
*Type:* ENUM
Socket type

**Members**

- `TYPE_STREAM`
- `TYPE_DGRAM`

<!-- engine-dlib-src-dmsdk-dlib-spinlock-h -->

# Spinlock {#apis:engine-dlib-src-dmsdk-dlib-spinlock-h}

**Namespace:** `dmSpinlock`
**Language:** C++
**Type:** Defold C++
**File:** `spinlock.h`
**Source:** `engine/dlib/src/dmsdk/dlib/spinlock.h`
**Include:** `dmsdk/dlib/spinlock.h`

API for platform independent spinlock synchronization primitive.

## API

### DM_SPINLOCK_SCOPED_LOCK
*Type:* MACRO
Will lock a Spinlock and automatically unlock it at the end of the scope.

**Parameters**

- `mutex` (dmSpinlock::Spinlock) - Spinlock reference to lock.

### dmSpinlock::Init
*Type:* FUNCTION
Initialize a Spinlock

**Parameters**

- `spinlock` (dmSpinlock::Spinlock*) - spinlock to initialize.

### dmSpinlock::Lock
*Type:* FUNCTION
Lock a Spinlock

**Parameters**

- `spinlock` (dmSpinlock::Spinlock*) - spinlock to lock.

### dmSpinlock::Spinlock
*Type:* TYPEDEF
```
typedef  Spinlock;

```

### dmSpinlock::Unlock
*Type:* FUNCTION
Unlock a Spinlock

**Parameters**

- `spinlock` (dmSpinlock::Spinlock*) - spinlock to unlock.

<!-- engine-dlib-src-dmsdk-dlib-sslsocket-h -->

# SSLSocket {#apis:engine-dlib-src-dmsdk-dlib-sslsocket-h}

**Namespace:** `dmSSLSocket`
**Language:** C++
**Type:** Defold C++
**File:** `sslsocket.h`
**Source:** `engine/dlib/src/dmsdk/dlib/sslsocket.h`
**Include:** `dmsdk/dlib/sslsocket.h`

Secure socket functions.

## API

### Delete
*Type:* FUNCTION
Delete a secure socket. Does not close the underlying socket

**Parameters**

- `socket` (Socket) - Secure socket to close

**Returns**

- `result` (Result) - RESULT_OK on success

**Examples**

```
dmSSLSocket::Delete(sslsocket);

```

### dmSocket::SetReceiveTimeout
*Type:* FUNCTION
Set socket receive timeout

**Notes**

- Timeout resolution might be in milliseconds, e.g. windows. Use values
      larger than or equal to 1000

**Parameters**

- `socket` (Socket) - socket
- `timeout` (uint64_t) - timeout in microseconds

**Returns**

- `result` (dmSocket::Result) - RESULT_OK on success

### INVALID_SOCKET_HANDLE
*Type:* CONSTANT
SSLSocket socket handle

### New
*Type:* FUNCTION
Create a new secure socket

**Parameters**

- `socket` (dmSocket::Socket) - The socket to wrap
- `host` (const char*) - The name of the host (e.g. "httpbin.org")
- `timeout` (uint64_t) - The timeout for the handshake procedure. (microseconds)
- `sslsocket` (Socket*) - Pointer to a secure socket

**Returns**

- `result` (Result) - RESULT_OK on success

**Examples**

```
dmSSLSocket::Result result;
dmSSLSocket::Socket sslsocket;
result = dmSSLSocket::New(socket, "httpbin.org", 500*1000, &sslsocket);
if (dmSSLSocket::RESULT_OK == result)
{
    // ...
} else {
    // ...
}

```

### Receive
*Type:* FUNCTION
Receive data on a secure socket

**Parameters**

- `socket` (Socket) - Socket to receive data on
- `buffer` (void*) - Buffer to receive to
- `length` (int) - Receive buffer length
- `received_bytes` (int*) - Number of received bytes (result)

**Returns**

- `result` (dmSocket::Result) - RESULT_OK on success

### Result
*Type:* ENUM
Result enumeration.

**Members**

- `dmSSLSocket::RESULT_OK` - (0)
- `dmSSLSocket::RESULT_SSL_INIT_FAILED` - (-2000)
- `dmSSLSocket::RESULT_HANDSHAKE_FAILED` - (-2001)
- `dmSSLSocket::RESULT_WOULDBLOCK` - (-2002)
- `dmSSLSocket::RESULT_CONNREFUSED` - (-2003)

### Send
*Type:* FUNCTION
Send a message on a secure socket

**Parameters**

- `socket` (Socket) - SSL socket to send a message on
- `buffer` (void*) - Buffer to send
- `length` (int) - Length of buffer to send
- `sent_bytes` (int*) - Number of bytes sent (result)

**Returns**

- `result` (dmSocket::Result) - RESULT_OK on success

### Socket
*Type:* TYPEDEF
Socket type definition

<!-- engine-dlib-src-dmsdk-dlib-static_assert-h -->

# Static Assert {#apis:engine-dlib-src-dmsdk-dlib-static_assert-h}

**Namespace:** `dmStaticAssert`
**Language:** C++
**Type:** Defold C++
**File:** `static_assert.h`
**Source:** `engine/dlib/src/dmsdk/dlib/static_assert.h`
**Include:** `dmsdk/dlib/static_assert.h`

```cpp
void test() {
    DM_STATIC_ASSERT(sizeof(int) == 4, Invalid_int_size);
}
```

## API

### DM_STATIC_ASSERT
*Type:* MACRO
This is using C++11 static_assert on platforms that support it and use c++11. Otherwise
it's using a c construct to check the condition.
As such, it is currently required to be used whithin a function scope.

**Parameters**

- `x` (bool) - expression
- `xmsg` (string) - expression

**Examples**

Verify the size of a struct is within a limit
```
DM_STATIC_ASSERT(sizeof(MyStruct) <= 32, Invalid_Struct_Size);

```

<!-- engine-dlib-src-dmsdk-dlib-sys-h -->

# Sys {#apis:engine-dlib-src-dmsdk-dlib-sys-h}

**Namespace:** `dmSys`
**Language:** C++
**Type:** Defold C++
**File:** `sys.h`
**Source:** `engine/dlib/src/dmsdk/dlib/sys.h`
**Include:** `dmsdk/dlib/sys.h`

Sys allocation functions

## API

### Exists
*Type:* FUNCTION
Checks if a path exists

**Parameters**

- `path` (const char*) - path to directory to create

**Returns**

- `result` (bool) - true on success

### Rename
*Type:* FUNCTION
Move a file or directory

**Notes**

- This operation is atomic

**Parameters**

- `dst_path` (const char*) - the destination path. The file which contents is to be overwritten.
- `src_path` (const char*) - the source path. The contents will be written to the destination path and the file unlinked if successful.

**Returns**

- `RESULT_OK` - on success

### Result
*Type:* ENUM
Result code. Similar to standard posix result codes

**Members**

- `dmSys::RESULT_OK` -      0
- `dmSys::RESULT_PERM` -   -1
- `dmSys::RESULT_NOENT` -  -2
- `dmSys::RESULT_SRCH` -   -3
- `dmSys::RESULT_INTR` -   -4
- `dmSys::RESULT_IO` -     -5
- `dmSys::RESULT_NXIO` -   -6
- `dmSys::RESULT_2BIG` -   -7
- `dmSys::RESULT_NOEXEC` - -8
- `dmSys::RESULT_BADF` -   -9
- `dmSys::RESULT_CHILD` -  -10
- `dmSys::RESULT_DEADLK` - -11
- `dmSys::RESULT_NOMEM` -  -12
- `dmSys::RESULT_ACCES` -  -13
- `dmSys::RESULT_FAULT` -  -14
- `dmSys::RESULT_BUSY` -   -15
- `dmSys::RESULT_EXIST` -  -16
- `dmSys::RESULT_XDEV` -   -17
- `dmSys::RESULT_NODEV` -  -18
- `dmSys::RESULT_NOTDIR` - -19
- `dmSys::RESULT_ISDIR` -  -20
- `dmSys::RESULT_INVAL` -  -21
- `dmSys::RESULT_NFILE` -  -22
- `dmSys::RESULT_MFILE` -  -23
- `dmSys::RESULT_NOTTY` -  -24
- `dmSys::RESULT_TXTBSY` - -25
- `dmSys::RESULT_FBIG` -   -26
- `dmSys::RESULT_NOSPC` -  -27
- `dmSys::RESULT_SPIPE` -  -28
- `dmSys::RESULT_ROFS` -   -29
- `dmSys::RESULT_MLINK` -  -30
- `dmSys::RESULT_PIPE` -   -31
- `dmSys::RESULT_NOTEMPTY` - -32
- `dmSys::RESULT_UNKNOWN` - -1000

### StatInfo
*Type:* STRUCT
Status info for a file or directory

**Members**

- `m_Size` (uint32_t) - the file size (if it's a file)
- `m_Mode` (uint32_t) - the flags of the path
- `m_AccessTime` (uint32_t) - the last access time
- `m_ModifiedTime` (uint32_t) - the last modified time

### Unlink
*Type:* FUNCTION
Remove file

**Parameters**

- `path` (const char*) - path to file to remove

**Returns**

- `result` (dmSys::Result) - RESULT_OK on success

<!-- engine-dlib-src-dmsdk-dlib-thread-h -->

# Thread {#apis:engine-dlib-src-dmsdk-dlib-thread-h}

**Namespace:** `dmThread`
**Language:** C++
**Type:** Defold C++
**File:** `thread.h`
**Source:** `engine/dlib/src/dmsdk/dlib/thread.h`
**Include:** `dmsdk/dlib/thread.h`

Thread functions.

## API

### AllocTls
*Type:* FUNCTION
Allocate thread local storage key

**Returns**

- `key` (dmThread::TlsKey) - Key

### Detach
*Type:* FUNCTION
Detach thread. When a detached thread terminates, its resources are
automatically released back to the system without the need for another
thread to join with the terminated thread.

**Parameters**

- `thread` (dmThread::Thread) - Thread to detach

### FreeTls
*Type:* FUNCTION
Free thread local storage key

**Parameters**

- `key` (dmThread::TlsKey) - Key

### GetCurrentThread
*Type:* FUNCTION
Gets the current thread

**Returns**

- `thread` (dmThread::Thread) - the current thread

### GetTlsValue
*Type:* FUNCTION
Get thread specific data

**Parameters**

- `key` (dmThread::TlsKey) - Key

### Join
*Type:* FUNCTION
Join thread. Waits for the thread specified by thread to terminate.  If
that thread has already terminated, then Join() returns immediately.  The
thread specified by thread must be joinable (see Detach()).

**Parameters**

- `thread` (dmThread::Thread) - Thread to join

### New
*Type:* FUNCTION
Create a new named thread

**Notes**

- thread name currently not supported on win32

**Parameters**

- `thread_start` (ThreadStart) - Thread entry function
- `stack_size` (uint32_t) - Stack size
- `arg` (void*) - Thread argument
- `name` (const char*) - Thread name

**Returns**

- `thread` (dmThread::Thread) - Thread handle

**Examples**

Create a thread
```
#include
#include

struct Context
{
    bool m_DoWork;
    int  m_Work;
};

static void Worker(void* _ctx)
{
    Context* ctx = (Context*)_ctx;
    while (ctx->m_DoWork)
    {
        ctx->m_Work++; // do work
        dmTime::Sleep(10*1000); // yield
    }
}

int StartThread()
{
    Context ctx;
    ctx.m_DoWork = true;
    ctx.m_Work = 0;
    dmThread::Thread thread = dmThread::New(Worker, 0x80000, (void*)&ctx, "my_thread");

    // do other work...
    // ..eventually stop the thread:
    ctx.m_DoWork = false;

    // wait for thread
    dmThread::Join(thread);

    printf("work done: %d\n", ctx.m_Work);
}

```

### SetThreadName
*Type:* FUNCTION
Sets the current thread name

**Notes**

- The thread argument is unused on Darwin (uses current thread)

**Parameters**

- `thread` (dmThread::Thread) - the thread
- `name` (const char*) - the thread name

### SetTlsValue
*Type:* FUNCTION
Set thread specific data

**Parameters**

- `key` (dmThread::TlsKey) - Key
- `value` (void*) - Value

### ThreadStart
*Type:* TYPEDEF

<!-- engine-dlib-src-dmsdk-dlib-time-h -->

# Time {#apis:engine-dlib-src-dmsdk-dlib-time-h}

**Namespace:** `dmTime`
**Language:** C++
**Type:** Defold C++
**File:** `time.h`
**Source:** `engine/dlib/src/dmsdk/dlib/time.h`
**Include:** `dmsdk/dlib/time.h`

Time functions.

## API

### dmTime::GetMonotonicTime
*Type:* FUNCTION
Get monotonic time in microseconds since some unspecified starting point.

**Returns**

- `result` (uint64_t) - Monotonic time in microseconds

### dmTime::GetTime
*Type:* FUNCTION
Get current time in microseconds since Jan. 1, 1970.

**Returns**

- `result` (uint64_t) - Current time in microseconds

### dmTime::Sleep
*Type:* FUNCTION
Sleep thread with low precision (~10 milliseconds).

**Parameters**

- `useconds` (uint32_t) - Time to sleep in microseconds

<!-- engine-dlib-src-dmsdk-dlib-transform-h -->

# Transform {#apis:engine-dlib-src-dmsdk-dlib-transform-h}

**Namespace:** `dmTransform`
**Language:** C++
**Type:** Defold C++
**File:** `transform.h`
**Source:** `engine/dlib/src/dmsdk/dlib/transform.h`
**Include:** `dmsdk/dlib/transform.h`

Api for transforms with rotation, scale and translation

## API

### Apply
*Type:* FUNCTION
Apply the transform on a point (includes the transform translation).

**Parameters**

- `t` (dmTransform::Transform&) - Transform
- `p` (dmVMath::Point3&) - Point

**Returns**

- `point` (dmVMath::Point3) - Transformed point

### Apply
*Type:* FUNCTION
Apply the transform on a vector (excludes the transform translation).

**Parameters**

- `t` (dmTransform::Transform&) - Transform
- `v` (dmVMath::Vector3&) - Vector

**Returns**

- `point` (dmVMath::Vector3) - Transformed vector

### ExtractScale
*Type:* FUNCTION
Extract the absolute values of the scale component from a matrix.

**Parameters**

- `mtx` (dmVMath::Matrix4) - Source matrix

**Returns**

- `Vector3` - with scale values for x,y,z

### GetRotation
*Type:* FUNCTION
get rotatiom

**Returns**

- `rotation` (dmVMath::Quat)

### GetScale
*Type:* FUNCTION
get scale

**Returns**

- `scale` (dmVMath::Vector3)

### GetTranslation
*Type:* FUNCTION
get translation

**Returns**

- `translation` (dmVMath::Vector3)

### GetUniformScale
*Type:* FUNCTION
Compute a 'uniform' scale for this transform. In the event that the
scale applied to this transform is not uniform then the value is arbitrary:
we make a selection that will not introduce any floating point rounding errors.

**Returns**

- `scale` (float) - the uniform scale associated with this transform.

### Inv
*Type:* FUNCTION
Invert a transform

**Parameters**

- `t` (const dmTransform::Transform&)

**Returns**

- `result` (dmTransform::Transform) - inverted transform

### Mul
*Type:* FUNCTION
Transforms the right-hand transform by the left-hand transform

**Parameters**

- `lhs` (const dmTransform::Transform&)
- `rhs` (const dmTransform::Transform&)

**Returns**

- `result` (dmTransform::Transform) - Transformed transform

### NormalizeZScale
*Type:* FUNCTION
Eliminate the z scaling components in a matrix

**Parameters**

- `mtx` (dmVMath::Matrix4) - Matrix to operate on

### NormalizeZScale
*Type:* FUNCTION
Eliminate the z scaling components in a matrix

**Parameters**

- `source` (const dmVMath::Matrix&) - Source matrix
- `target` (dmVMath::Matrix*) - Target matrix

### ResetScale
*Type:* FUNCTION
Eliminate the scaling components in a matrix

**Parameters**

- `mtx` (dmVMath::Matrix4) - Matrix to operate on

**Returns**

- `Vector` - containing the scaling by component

### SetIdentity
*Type:* FUNCTION
initialize to identity transform

### SetRotation
*Type:* FUNCTION
set rotatiom

**Parameters**

- `rotation` (dmVMath::Quat)

### SetScale
*Type:* FUNCTION
set scale

**Returns**

- `scale` (dmVMath::Vector3)

### SetScaleXY
*Type:* FUNCTION
set scale for x and y

**Parameters**

- `scale_x` (float)
- `scale_y` (float)

### SetTranslation
*Type:* FUNCTION
set translation

**Parameters**

- `translation` (dmVMath::Vector3)

### SetUniformScale
*Type:* FUNCTION
set uniform scale

**Parameters**

- `scale` (float)

### ToMatrix4
*Type:* FUNCTION
Convert a transform into a 4-dim matrix

**Parameters**

- `t` (Transform) - Transform to convert

**Returns**

- `Matrix` - representing the same transform

### ToTransform
*Type:* FUNCTION
Convert a matrix into a transform

**Parameters**

- `mtx` (dmVMath::Matrix4) - Matrix4 to convert

**Returns**

- `Transform` - representing the same transform

### Transform
*Type:* STRUCT
Transform with non-uniform (3-component) scale.
Transform applied as:
T(p) = translate(rotate(scale(p))) = p'
The scale is non-rotated to avoid shearing in the transform.
Two transforms are applied as:
T1(T2(p)) = t1(r1(t2(r2(s1(s2(p)))))) = p'
This means that the transform is not associative:
T1(T2(p)) != (T1*T2)(P)

### Transform
*Type:* FUNCTION
Constructor. Leaves the struct in an uninitialized state

### Transform
*Type:* FUNCTION
constructor

**Parameters**

- `translation` (dmVMath::Vector3)
- `rotation` (dmVMath::Quat)
- `scale` (dmVMath::Vector3)

### Transform
*Type:* FUNCTION
constructor

**Parameters**

- `translation` (dmVMath::Vector3)
- `rotation` (dmVMath::Quat)
- `scale` (dmVMath::Vector3)

<!-- engine-dlib-src-dmsdk-dlib-uri-h -->

# URI {#apis:engine-dlib-src-dmsdk-dlib-uri-h}

**Namespace:** `dmURI`
**Language:** C++
**Type:** Defold C++
**File:** `uri.h`
**Source:** `engine/dlib/src/dmsdk/dlib/uri.h`
**Include:** `dmsdk/dlib/uri.h`

URI functions.

## API

### dmURI::Decode
*Type:* FUNCTION
Decodes an URL encoded buffer

**Notes**

- The output will never be larger than the input.

**Parameters**

- `src` (const char*) - Input
- `dst` (char*) - Decoded output

### dmURI::Encode
*Type:* FUNCTION
Performs URL encoding of the supplied buffer

**Notes**

- If dst=0 the bytes_written will return the number of required bytes (including null character)

**Parameters**

- `src` (const char*) - string to encode
- `dst` (char*) - the destination buffer
- `dst_size` (uint32_t) - size of the provided out buffer
- `bytes_written[out]` (uint32_t) - number of bytes written

### dmURI::Parse
*Type:* FUNCTION
Parse URI and split in three parts. (scheme, location, path)

**Notes**

- This is a simplified URI parser and does not conform to rfc2396.
      Missing features are: parameters, query, fragment part of URI and support for escaped sequences
- For http m_Port is set to 80 if not specified in uri.

**Parameters**

- `uri` (const char*) - URI to parse
- `parts` (dmURI::Parts) - Result

**Returns**

- `RESULT_OK` - on success

### dmURI::Parts
*Type:* STRUCT
URI parsing result parts

### dmURI::Result
*Type:* FUNCTION
URI parsing result

<!-- engine-dlib-src-dmsdk-dlib-utf8-h -->

# Utf8 {#apis:engine-dlib-src-dmsdk-dlib-utf8-h}

**Namespace:** `dmUtf8`
**Language:** C++
**Type:** Defold C++
**File:** `utf8.h`
**Source:** `engine/dlib/src/dmsdk/dlib/utf8.h`
**Include:** `dmsdk/dlib/utf8.h`

SDK Utf8 API documentation

## API

### IsBreaking
*Type:* FUNCTION
Checks if a codepoint is a breaking whitespace

**Parameters**

- `c` (uint32_t) - the codepoint

**Returns**

- `result` (bool) - true if it's a breaking whitespace

### IsWhiteSpace
*Type:* FUNCTION
Checks if a codepoint is a whitespace

**Parameters**

- `c` (uint32_t) - the codepoint

**Returns**

- `result` (bool) - true if it's a whitespace

### NextChar
*Type:* FUNCTION
Get next unicode character in utf-8 string. Iteration terminates at '\0' and repeated invocations will return '\0'

**Parameters**

- `str` (const char**) - Pointer to string. The pointer value is updated

**Returns**

- `chr` (uint32_t) - Decoded unicode character

**Examples**

```
const char* s = "";
char* cursor = s;
uint32_t codepoint = 0;
while (codepoint = dmUtf8::NextChar(&cursor))
{
    // ...
}

```

### StrLen
*Type:* FUNCTION
Get number of unicode characters in utf-8 string

**Parameters**

- `str` (const char*) - Utf8 string

**Returns**

- `length` (uint32_t) - Number of characters

**Examples**

```
const char* s = "";
uint32_t count = dmUtf8::StrLen(s);

```

### ToUtf8
*Type:* FUNCTION
Convert a 16-bit unicode character to utf-8

**Notes**

- Buffer must be of at least 4 characters. The string is *not* NULL-terminated

**Parameters**

- `chr` (uint16_t) - Character to convert
- `buf` (char*) - output Buffer (at least 4 bytes)

**Returns**

- `length` (uint32_t) - Number of characters in buffer

<!-- engine-dlib-src-dmsdk-dlib-vmath-h -->

# Vector Math {#apis:engine-dlib-src-dmsdk-dlib-vmath-h}

**Namespace:** `dmVMath`
**Language:** C++
**Type:** Defold C++
**File:** `vmath.h`
**Source:** `engine/dlib/src/dmsdk/dlib/vmath.h`
**Include:** `dmsdk/dlib/vmath.h`

Vector Math functions.

## API

### AppendScale
*Type:* FUNCTION
post multiply scale

**Parameters**

- `m` (Matrix4) - the matrix
- `v` (Vector3) - the scale vector

**Returns**

- `r` (Matrix4) - the scaled vector

### Cross
*Type:* FUNCTION
cross product between two vectors

**Parameters**

- `a` (Vector3) - the operand
- `b` (Vector3) - the dividend

**Returns**

- `v` (Vector3) - the result vector

### DivPerElem
*Type:* FUNCTION
Divide two vectors per element: Vector3(a.x/b.x, a.y/b.y, a.z/b.z)

**Parameters**

- `a` (Vector3) - the operand
- `b` (Vector3) - the dividend

**Returns**

- `v` (Vector3) - the result vector

### DivPerElem
*Type:* FUNCTION
Divide two vectors per element: Vector3(a.x/b.x, a.y/b.y, a.z/b.z, a.w/b.w)

**Parameters**

- `a` (Vector4) - the operand
- `b` (Vector4) - the dividend

**Returns**

- `v` (Vector4) - the result vector

### Dot
*Type:* FUNCTION
dot product between two vectors

**Parameters**

- `a` (Vector3) - the first vector
- `b` (Vector3) - the second vector

**Returns**

- `dot_product` (float) - the dot product

### Dot
*Type:* FUNCTION
dot product between two vectors

**Parameters**

- `a` (Vector4) - the first vector
- `b` (Vector4) - the second vector

**Returns**

- `dot_product` (float) - the dot product

### Inverse
*Type:* FUNCTION
inverse matrix

**Parameters**

- `m` (Matrix3) - the rotation

**Returns**

- `r` (Matrix3) - the transposed matrix

### Inverse
*Type:* FUNCTION
inverse matrix

**Parameters**

- `m` (Matrix4) - the rotation

**Returns**

- `r` (Matrix4) - the transposed matrix

### Length
*Type:* FUNCTION
calculate length of a vector

**Parameters**

- `v` (Vector3) - the vector

**Returns**

- `length` (float) - the length

### Length
*Type:* FUNCTION
calculate length of a vector

**Parameters**

- `v` (Vector3) - the vector

**Returns**

- `length` (float) - the length

### Length
*Type:* FUNCTION
calculate length of a quaternion

**Parameters**

- `v` (Quat) - the quaternion

**Returns**

- `length` (float) - the length

### Length
*Type:* FUNCTION
calculate squared length of a vector

**Parameters**

- `v` (Vector3) - the vector

**Returns**

- `length` (float) - the squared length

### Length
*Type:* FUNCTION
calculate squared length of a vector

**Parameters**

- `v` (Vector4) - the vector

**Returns**

- `length` (float) - the squared length

### Length
*Type:* FUNCTION
calculate squared length of a quaternion

**Parameters**

- `v` (Quat) - the vector

**Returns**

- `length` (float) - the squared length

### Lerp
*Type:* FUNCTION
linear interpolate between two vectors

**Notes**

- Does not clamp t to between 0 and 1

**Parameters**

- `t` (float) - the unit time
- `a` (Vector3) - the start vector (t == 0)
- `b` (Vector3) - the end vector (t == 1)

**Returns**

- `v` (Vector3) - the result vector <code>v = a + (b - a) * t</code>

**Examples**

```
dmVMath::Vector3 v0 = dmVMath::Lerp(0.0f, a, b); // v0 == a
dmVMath::Vector3 v1 = dmVMath::Lerp(1.0f, a, b); // v1 == b
dmVMath::Vector3 v2 = dmVMath::Lerp(2.0f, a, b); // v2 == a + (b-a) * 2.0f

```

### Lerp
*Type:* FUNCTION
linear interpolate between two vectors

**Notes**

- Does not clamp t to between 0 and 1

**Parameters**

- `t` (float) - the unit time
- `a` (Vector4) - the start vector (t == 0)
- `b` (Vector4) - the end vector (t == 1)

**Returns**

- `v` (Vector4) - the result vector <code>v = a + (b - a) * t</code>

**Examples**

```
dmVMath::Vector4 v0 = dmVMath::Lerp(0.0f, a, b); // v0 == a
dmVMath::Vector4 v1 = dmVMath::Lerp(1.0f, a, b); // v1 == b
dmVMath::Vector4 v2 = dmVMath::Lerp(2.0f, a, b); // v2 == a + (b-a) * 2.0f

```

### Matrix3
*Type:* TYPEDEF
A 3x3 matrix

**Notes**

- 16 byte aligned
- Implemented as 3 x Vector3
- Column major
- Currently scalar implementation is used on most platforms

### Matrix4
*Type:* TYPEDEF
A 4x4 matrix

**Notes**

- 16 byte aligned
- Implemented as 4 x Vector4
- Column major
- Currently scalar implementation is used on most platforms

### MulPerElem
*Type:* FUNCTION
Multiply two vectors per element: Vector3(a.x * b.x, a.y * b.y, a.z * b.z)

**Parameters**

- `a` (Vector3) - the first vector
- `b` (Vector3) - the second vector

**Returns**

- `v` (Vector3) - the result vector

### MulPerElem
*Type:* FUNCTION
Multiply two vectors per element: Vector3(a.x * b.x, a.y * b.y, a.z * b.z, a.w * b.w)

**Parameters**

- `a` (Vector4) - the first vector
- `b` (Vector4) - the second vector

**Returns**

- `v` (Vector4) - the result vector

### MulPerElem
*Type:* FUNCTION
Return absolute value per element: Vector3(abs(v.x), abs(v.y), abs(v.z))

**Parameters**

- `v` (Vector3) - the vector

**Returns**

- `r` (Vector3) - the result vector

### MulPerElem
*Type:* FUNCTION
Returns the conjugate of the quaternion: conj = -q

**Parameters**

- `q` (Quat) - the quaternions

**Returns**

- `r` (Quat) - the result

### Normalize
*Type:* FUNCTION
normalize a vector to length 1

**Parameters**

- `v` (Vector3) - the vector

**Returns**

- `n` (Vector3) - the normalized vector

### Normalize
*Type:* FUNCTION
normalize a vector to length 1

**Parameters**

- `v` (Vector4) - the vector

**Returns**

- `n` (Vector4) - the normalized vector

### Normalize
*Type:* FUNCTION
normalize a quaternion to length 1

**Parameters**

- `v` (Quat) - the quaternion

**Returns**

- `n` (Quat) - the normalized quaternion

### OrthoInverse
*Type:* FUNCTION
Compute the inverse of a 4x4 matrix, which is expected to be an affine matrix with an orthogonal upper-left 3x3 submatrix

**Parameters**

- `m` (Matrix4) - the rotation

**Returns**

- `r` (Matrix4) - the transposed matrix

### Point3
*Type:* TYPEDEF
A 3-tuple (with 4-th element always set to 1)

**Notes**

- 16 byte aligned
- Always size of 4 float32
- Currently scalar implementation is used on most platforms

**Examples**

```
dmVMath::Point3 p = dmVMath::Point3(x, y, z); // Create new point
float length_squared = p.getX() * p.getX() + p.getY() * p.getY() + p.getZ() * p.getZ();

```

### Quat
*Type:* TYPEDEF
A 4-tuple representing a rotation rotation. The xyz represents the axis, and the w represents the angle.

**Notes**

- 16 byte aligned
- Always size of 4 float32
- Currently scalar implementation is used on most platforms

**Examples**

```
dmVMath::Quat p = dmVMath::Quat(x, y, z, w); // Create new rotation. W is the angle

```

### Rotate
*Type:* FUNCTION
rotate vector using quaternion

**Parameters**

- `q` (Quat) - the rotation
- `v` (Vector3) - the vector

**Returns**

- `r` (Vector3) - the rotated vector

### Slerp
*Type:* FUNCTION
spherical linear interpolate between two vectors

**Notes**

- Does not clamp t to between 0 and 1
- Unpredicatable results if a and b point in opposite direction

**Parameters**

- `t` (float) - the unit time
- `a` (Vector3) - the start vector (t == 0)
- `b` (Vector3) - the end vector (t == 1)

**Returns**

- `v` (Vector3) - the result vector

### Slerp
*Type:* FUNCTION
spherical linear interpolate between two vectors

**Notes**

- Does not clamp t to between 0 and 1
- Unpredicatable results if a and b point in opposite direction

**Parameters**

- `t` (float) - the unit time
- `a` (Vector4) - the start vector (t == 0)
- `b` (Vector4) - the end vector (t == 1)

**Returns**

- `v` (Vector4) - the result vector

### Slerp
*Type:* FUNCTION
Interpolates along the shortest path between two quaternions

**Notes**

- Does not clamp t to between 0 and 1

**Parameters**

- `t` (float) - the unit time
- `a` (Quat) - the start vector (t == 0)
- `b` (Quat) - the end vector (t == 1)

**Returns**

- `v` (Quat) - the result vector

### Transpose
*Type:* FUNCTION
transpose matrix

**Parameters**

- `m` (Matrix3) - the rotation

**Returns**

- `r` (Matrix3) - the transposed matrix

### Transpose
*Type:* FUNCTION
transpose matrix

**Parameters**

- `m` (Matrix4) - the rotation

**Returns**

- `r` (Matrix4) - the transposed matrix

### Vector3
*Type:* TYPEDEF
A 3-tuple (with 4-th element always set to 0)

**Notes**

- 16 byte aligned
- Always size of 4 float32
- Currently scalar implementation is used on most platforms

**Examples**

```
dmVMath::Vector3 p = dmVMath::Vector3(x, y, z); // Create new vector
float length_squared = p.getX() * p.getX() + p.getY() * p.getY() + p.getZ() * p.getZ();

```

### Vector4
*Type:* TYPEDEF
A 4-tuple

**Notes**

- 16 byte aligned
- Always size of 4 float32
- Currently scalar implementation is used on most platforms

**Examples**

```
dmVMath::Vector4 p = dmVMath::Vector4(x, y, z, w); // Create new vector
float length_squared = p.getX() * p.getX() + p.getY() * p.getY() + p.getZ() * p.getZ() + p.getW() * p.getW();

```

<!-- engine-dlib-src-dmsdk-dlib-webserver-h -->

# WebServer {#apis:engine-dlib-src-dmsdk-dlib-webserver-h}

**Namespace:** `dmWebServer`
**Language:** C++
**Type:** Defold C++
**File:** `webserver.h`
**Source:** `engine/dlib/src/dmsdk/dlib/webserver.h`
**Include:** `dmsdk/dlib/webserver.h`

Simple high-level single-threaded Web server based on dmHttpServer
The web-server has a handler concept similar to servlets in Java

## API

### AddHandler
*Type:* FUNCTION
Add a new handler

**Parameters**

- `server` (HServer) - Server handle
- `prefix` (const char*) - Location prefix for which locations this handler should handle
- `handler_params` (HandlerParams) - Handler parameters

**Returns**

- `return` (Result) - RESULT_OK on success

### GetHeader
*Type:* FUNCTION
Get http header value for key

**Parameters**

- `request` (Request*) - Request
- `name` (const char*) - Header key

**Returns**

- `return` (const char*) - Header value. NULL if the key doesn't exists

### Handler
*Type:* TYPEDEF
Web request handler callback

**Parameters**

- `user_data` (void*) - User  data
- `request` (Request*) - Request

**Returns**

- `return` (void)

### HandlerParams
*Type:* STRUCT
handler parameters

**Members**

- `m_UserData` (void*) - The user data
- `m_Handler` (Handler) - The callback

### HServer
*Type:* TYPEDEF
web server handle

### Receive
*Type:* FUNCTION
Receive data

**Parameters**

- `request` (Request*) - Request
- `buffer` (void*) - Data buffer to receive to
- `buffer_size` (uint32_t) - Buffer size
- `received_bytes` (uint32_t*) - Number of bytes received

**Returns**

- `return` (Result) - RESULT_OK on success

### RemoveHandler
*Type:* FUNCTION
Remove handle

**Parameters**

- `server` (HServer) - Server handle
- `prefix` (const char*) - Prefix for handle to remove

**Returns**

- `return` (Result) - RESULT_OK on success

### Request
*Type:* STRUCT
web server request

**Members**

- `m_Method` (const char*) - Request method
- `m_Method` (const char*) - Request resource
- `m_Method` (const char*) - Content-Length header
- `m_Method` (const char*) - Internal data

### Result
*Type:* ENUM
result codes

**Members**

- `RESULT_OK`
- `RESULT_SOCKET_ERROR`
- `RESULT_INVALID_REQUEST`
- `RESULT_ERROR_INVAL`
- `RESULT_HANDLER_ALREADY_REGISTRED`
- `RESULT_HANDLER_NOT_REGISTRED`
- `RESULT_INTERNAL_ERROR`
- `RESULT_UNKNOWN`

### Send
*Type:* FUNCTION
Send response data

**Parameters**

- `request` (Request) - Request handle
- `data` (void*) - Data to send
- `data_length` (uint32_t) - Data-lenght to send

**Returns**

- `return` (Result) - RESULT_OK on success

### SendAttribute
*Type:* FUNCTION
Sends a header attribute

**Parameters**

- `request` (Request*) - Request
- `key` (const char*) - the header name
- `value` (const char*) - the header value

**Returns**

- `return` (Result) - RESULT_OK on success

### SetStatusCode
*Type:* FUNCTION
Set response status code.

**Notes**

- Only valid to invoke before #Send is invoked

**Parameters**

- `request` (Request*) - Request
- `status_code` (int) - Status code to set

**Returns**

- `return` (Result) - RESULT_OK on success

<!-- engine-engine-src-dmsdk-engine-extension-hpp -->

# Engine {#apis:engine-engine-src-dmsdk-engine-extension-hpp}

**Namespace:** `dmEngine`
**Language:** C++
**Type:** Defold C++
**File:** `extension.hpp`
**Source:** `engine/engine/src/dmsdk/engine/extension.hpp`
**Include:** `dmsdk/engine/extension.hpp`

SDK Engine extension API documentation

## API

### DM_DEBUG
*Type:* MACRO
define for debug builds

**Examples**

Only enable code in debug builds
```
#if defined(DM_DEBUG)
    // ...
#endif

```

### DM_HEADLESS
*Type:* MACRO
define for headless builds

**Examples**

Only enable code in headless builds
```
#if defined(DM_HEADLESS)
    // ...
#endif

```

### DM_RELEASE
*Type:* MACRO
define for release builds

**Examples**

Only enable code in release builds
```
#if defined(DM_RELEASE)
    // ...
#endif

```

### GetConfigFile
*Type:* FUNCTION
get the config file

**Parameters**

- `app_params` (dmExtension::AppParams*) - The app params sent to the extension dmExtension::AppInitialize / dmExtension::AppInitialize

**Returns**

- `config` (dmConfigFile::HConfig) - The game project config file

### GetGameObjectRegister
*Type:* FUNCTION
get the game object register

**Parameters**

- `app_params` (dmExtension::AppParams*) - The app params sent to the extension dmExtension::AppInitialize / dmExtension::AppInitialize

**Returns**

- `register` (dmGameObject::HRegister) - The game object register

### GetHIDContext
*Type:* FUNCTION
get the hid context

**Parameters**

- `app_params` (dmExtension::AppParams*) - The app params sent to the extension dmExtension::AppInitialize / dmExtension::AppInitialize

**Returns**

- `context` (dmHID::HContext) - The hid context

### GetWebServer
*Type:* FUNCTION
get the web server handle

**Notes**

- Only valid in debug builds

**Parameters**

- `app_params` (dmExtension::AppParams*) - The app params sent to the extension dmExtension::AppInitialize / dmExtension::AppInitialize

**Returns**

- `server` (dmWebServer::HServer) - The web server handle

<!-- engine-engine-src-engine_doc-h -->

# Engine runtime {#apis:engine-engine-src-engine_doc-h}

**Namespace:** `engine`
**Language:** C++
**Type:** Defold C++
**File:** `engine_doc.h`
**Source:** `engine/engine/src/engine_doc.h`
**Include:** `engine/engine/src/engine_doc.h`

Engine runtime documentation

## API

### --config=
*Type:* MACRO
Override game properties with the format --config=section.key=value

**Examples**

```
$ ./dmengine --config=project.mode=TEST --config=project.server=http://testserver.com

```

### --verify-graphics-calls=
*Type:* MACRO
Disables OpenGL error checking.
This is especially beneficial for running debug builds in the Chrome browser,
in which the calls to glGetError() is notoriously slow.
Default value is "true" for debug builds, and "false" for release builds.

**Examples**

```
$ ./dmengine --verify-graphics-calls=false

```

### DM_LOG_PORT
*Type:* MACRO
Enables receiving the log on a designated port (e.g. using telnet)
Valid values are integers between [0, 65535]

### DM_QUIT_ON_ESC
*Type:* MACRO
Enables quitting the app directly by pressing the ESCAPE key.
Set to "1" to enable this feature.

### DM_SAVE_HOME
*Type:* MACRO
Overrides the save directory when using sys.get_save_file()

### DM_SERVICE_PORT
*Type:* MACRO
Overrides the engine service port, when creating the internal http server (e.g web profiler)
Valid values are integers between [0, 65535] and the string "dynamic" (which translates to 0).
Default value is 8001.

### launch_project
*Type:* MACRO
Launch the engine with a specific project file
If no project is specified, it will default to "./game.projectc", "build/default/game.projectc"

**Notes**

- It has to be the first argument

**Examples**

```
$ ./dmengine some/folder/game.projectc

```

<!-- engine-extension-src-dmsdk-extension-extension-h -->

# Extension {#apis:engine-extension-src-dmsdk-extension-extension-h}

**Namespace:** `Extension`
**Language:** C++
**Type:** Defold C++
**File:** `extension.h`
**Source:** `engine/extension/src/dmsdk/extension/extension.h`
**Include:** `dmsdk/extension/extension.h`

Functions for creating and controlling engine native extension libraries.

## API

### DM_DECLARE_EXTENSION
*Type:* MACRO
Declare and register new extension to the engine.
This macro is used to declare the extension callback functions used by the engine to communicate with the extension.

**Parameters**

- `symbol` (symbol) - external extension symbol description (no quotes).
- `name` (const char*) - extension name. Human readable.
- `app_init` (function(ExtensionAppParams* app_params)) - app-init function. May be null.
<dl>
<dt><code>app_params</code></dt>
<dd><span class="type">ExtensionAppParams*</span> Pointer to an <code>AppParams</code> structure.</dd>
</dl>
- `app_final` (function(ExtensionAppParams* app_params)) - app-final function. May be null.
<dl>
<dt><code>app_params</code></dt>
<dd><span class="type">ExtensionAppParams*</span> Pointer to an <code>AppParams</code> structure.</dd>
</dl>
- `init` (function(ExtensionParams* params)) - init function. May not be null.
<dl>
<dt><code>params</code></dt>
<dd><span class="type">ExtensionParams*</span> Pointer to a <code>Params</code> structure</dd>
</dl>
- `update` (function(ExtensionParams* params)) - update function. May be null.
<dl>
<dt><code>params</code></dt>
<dd><span class="type">ExtensionParams*</span> Pointer to a <code>Params</code> structure</dd>
</dl>
- `on_event` (function(ExtensionParams* params, const ExtensionEvent* event)) - event callback function. May be null.
<dl>
<dt><code>params</code></dt>
<dd><span class="type">ExtensionParams*</span> Pointer to a <code>Params</code> structure</dd>
<dt><code>event</code></dt>
<dd><span class="type">ExtensionEvent*</span> const Pointer to an <code>Event</code> structure</dd>
</dl>
- `final` (function(ExtensionParams* params)) - function. May not be null.
<dl>
<dt><code>params</code></dt>
<dd><span class="type">ExtensionParams*</span> Pointer to an <code>Params</code> structure.</dd>
</dl>

**Examples**

Register a new extension:
```
DM_DECLARE_EXTENSION(MyExt, "MyExt", AppInitializeMyExt, AppFinalizeMyExt, InitializeMyExt, UpdateMyExt, OnEventMyExt, FinalizeMyExt);

```

### DM_PLATFORM_ANDROID
*Type:* MACRO
Set if the platform is Android

### DM_PLATFORM_HTML5
*Type:* MACRO
Set if the platform is Html5

### DM_PLATFORM_IOS
*Type:* MACRO
Set if the platform is iPhoneOS

### DM_PLATFORM_LINUX
*Type:* MACRO
Set if the platform is Linux

### DM_PLATFORM_OSX
*Type:* MACRO
Set if the platform is OSX

### DM_PLATFORM_WINDOWS
*Type:* MACRO
Set if the platform is Windows  (on both x86 and x86_64)

### ExtensionAppExitCode
*Type:* ENUM
Engine exit code.

**Members**

- `EXTENSION_APP_EXIT_CODE_NONE`
- `EXTENSION_APP_EXIT_CODE_REBOOT`
- `EXTENSION_APP_EXIT_CODE_EXIT`

### ExtensionAppParams
*Type:* STRUCT
The extension app parameters

**Members**

- `m_ConfigFile` (HConfigFile) - Deprecated
- `m_ExitStatus` (ExtensionAppExitCode) - App exit code

### ExtensionAppParamsFinalize
*Type:* FUNCTION
Finalizes an extension app params struct (deallocates internal memory)

**Parameters**

- `app_params` (ExtensionAppParams*) - the params

### ExtensionAppParamsGetAppExitCode
*Type:* FUNCTION
get the app exit code

**Parameters**

- `app_params` (dmExtension::AppParams*) - The app params sent to the extension dmExtension::AppInitialize / dmExtension::AppInitialize

**Returns**

- `code` (ExtensionAppExitCode) - engine exit code

### ExtensionAppParamsGetContext
*Type:* FUNCTION
Gets a context using a specified name hash

**Parameters**

- `params` (ExtensionAppParams) - the params
- `name_hash` (dmhash_t) - the context name hash

**Returns**

- `context` (void*) - The context, if it exists

### ExtensionAppParamsGetContextByName
*Type:* FUNCTION
Gets a context using a specified name

**Parameters**

- `params` (ExtensionAppParams) - the params
- `name` (const char*) - the context name

**Returns**

- `context` (void*) - The context, if it exists

### ExtensionAppParamsInitialize
*Type:* FUNCTION
Initializes an extension app params struct
NOTE: this is an opaque struct, do not use it's members directly!

**Parameters**

- `app_params` (ExtensionAppParams*) - the params

### ExtensionAppParamsSetContext
*Type:* FUNCTION
Sets a context using a specified name

**Parameters**

- `params` (ExtensionAppParams) - the params
- `name` (const char*) - the context name
- `context` (void*) - the context

**Returns**

- `result` (int) - 0 if successful

### ExtensionCallbackType
*Type:* ENUM
Extra callback type for RegisterCallback function.

**Members**

- `EXTENSION_CALLBACK_PRE_RENDER`
- `EXTENSION_CALLBACK_POST_RENDER`

### ExtensionDescBufferSize
*Type:* CONSTANT
Used when registering new extensions

### ExtensionEvent
*Type:* STRUCT
Extension event

**Members**

- `m_Event` (ExtensionEventID)

### ExtensionEventID
*Type:* ENUM
Event id enumeration.
EVENT_ID_ICONIFYAPP and EVENT_ID_DEICONIFYAPP only available on

**Members**

- `EXTENSION_EVENT_ID_ACTIVATEAPP`
- `EXTENSION_EVENT_ID_DEACTIVATEAPP`
- `EXTENSION_EVENT_ID_ICONIFYAPP`
- `EXTENSION_EVENT_ID_DEICONIFYAPP`
- `EXTENSION_EVENT_ID_ENGINE_INITIALIZED`
- `EXTENSION_EVENT_ID_ENGINE_DELETE`

### ExtensionParams
*Type:* STRUCT
The global parameters avalable when registering and unregistering an extension

**Members**

- `m_ConfigFile` (HConfigFile) - The game project settings (including overrides and plugins)
- `m_ResourceFactory` (HResourceFactory) - The game resource factory / repository
- `m_L` (lua_State*) - The Lua state.

### ExtensionParamsFinalize
*Type:* FUNCTION
Finalizes an extension  params struct (deallocates internal memory)

**Parameters**

- `app_params` (ExtensionParams*) - the params

### ExtensionParamsGetContext
*Type:* FUNCTION
Gets a context using a specified name hash

**Parameters**

- `params` (ExtensionParams) - the params
- `name_hash` (dmhash_t) - the context name hash

**Returns**

- `context` (void*) - The context, if it exists

### ExtensionParamsGetContextByName
*Type:* FUNCTION
Gets a context using a specified name

**Parameters**

- `params` (ExtensionParams) - the params
- `name` (const char*) - the context name

**Returns**

- `context` (void*) - The context, if it exists

### ExtensionParamsInitialize
*Type:* FUNCTION
Initializes an extension params struct
NOTE: this is an opaque struct, do not use it's members directly!

**Parameters**

- `app_params` (ExtensionParams*) - the params

### ExtensionParamsSetContext
*Type:* FUNCTION
Sets a context using a specified name

**Parameters**

- `params` (ExtensionAppParams) - the params
- `name` (const char*) - the context name
- `context` (void*) - the context

**Returns**

- `result` (int) - 0 if successful

### ExtensionRegister
*Type:* FUNCTION
Extension declaration helper. Internal function. Use DM_DECLARE_EXTENSION

**Parameters**

- `desc` (void*) - A persistent buffer of at least 128 bytes.
- `desc_size` (const char*) - size of buffer holding desc. in bytes
- `name` (const char*) - extension name. human readble. max 16 characters long.
- `app_initialize` (FExtensionAppInitialize) - app-init function. May be null
- `app_finalize` (FExtensionAppFinalize) - app-final function. May be null
- `initialize` (FExtensionInitialize) - init function. May not be 0
- `finalize` (FExtensionFinalize) - finalize function. May not be 0
- `update` (FExtensionUpdate) - update function. May be null
- `on_event` (FExtensionOnEvent) - event callback function. May be null

### ExtensionRegisteriOSUIApplicationDelegate
*Type:* FUNCTION
Register an iOS application delegate to the engine. Multiple delegates are supported (Max 32)

**Notes**

- Note that the delegate needs to be registered before the UIApplicationMain in order to
handle any earlier callbacks.

This function is only available on iOS. [icon:ios]

**Parameters**

- `delegate` (void*) - An id<UIApplicationDelegate>, see: https://developer.apple.com/documentation/uikit/uiapplicationdelegate?language=objc

**Examples**

```
// myextension_ios.mm

id g_MyApplicationDelegate;

\@interface MyApplicationDelegate : NSObject

- (void) applicationDidBecomeActive:(UIApplication *) application;

\@end

\@implementation MyApplicationDelegate

- (void) applicationDidBecomeActive:(UIApplication *) application {
    dmLogWarning("applicationDidBecomeActive - MyAppDelegate");
}

\@end

struct MyAppDelegateRegister
{
    MyApplicationDelegate* m_Delegate;
    MyAppDelegateRegister() {
        m_Delegate = [[FacebookAppDelegate alloc] init];
        Extension::RegisteriOSUIApplicationDelegate(m_Delegate);
    }
    ~MyAppDelegateRegister() {
        Extension::UnregisteriOSUIApplicationDelegate(m_Delegate);
        [m_Delegate release];
    }
};

MyAppDelegateRegister g_FacebookDelegateRegister;

```

### ExtensionResult
*Type:* ENUM
Result enumeration.

**Members**

- `EXTENSION_RESULT_OK`
- `EXTENSION_RESULT_INIT_ERROR`

### ExtensionUnregisteriOSUIApplicationDelegate
*Type:* FUNCTION
Deregister a previously registered iOS application delegate
This function is only available on iOS.

**Parameters**

- `delegate` (void*) - an id<UIApplicationDelegate>

### FExtensionAppFinalize
*Type:* TYPEDEF
Callback when the app is being finalized

**Parameters**

- `params` (ExtensionAppParams)

**Returns**

- `result` (ExtensionResult) - EXTENSION_RESULT_OK if all went ok

### FExtensionAppInitialize
*Type:* TYPEDEF
Callback when the app is being initialized. Called before FExtensionInitialize

**Notes**

- There is no guarantuee of initialization order. If an extension requires another extension to be initialized,
      that should be handled in [ref:FExtensionInitialize].

**Parameters**

- `params` (ExtensionAppParams)

**Returns**

- `result` (ExtensionResult) - EXTENSION_RESULT_OK if all went ok

### FExtensionCallback
*Type:* TYPEDEF
Callback typedef for functions passed to RegisterCallback().

**Parameters**

- `params` (ExtensionParams)

**Returns**

- `return` (ExtensionResult)

### FExtensionFinalize
*Type:* TYPEDEF
Calls for the finalization of an extension

**Notes**

- All extensions will be called with `FExtensionFinalize` before moving on to the next step, the [ref:FExtensionAppFinalize]

**Parameters**

- `params` (ExtensionParams)

**Returns**

- `result` (ExtensionResult) - EXTENSION_RESULT_OK if all went ok

### FExtensionInitialize
*Type:* TYPEDEF
Callback after all extensions have been called with FExtensionAppInitialize

**Parameters**

- `params` (ExtensionParams)

**Returns**

- `result` (ExtensionResult) - EXTENSION_RESULT_OK if all went ok

### FExtensionOnEvent
*Type:* TYPEDEF
Receives an event from the engine

**Parameters**

- `params` (ExtensionParams)
- `event` (ExtensionEvent) - The current event

### FExtensionUpdate
*Type:* TYPEDEF
Updates an extension. Called for each game frame.

**Parameters**

- `params` (ExtensionParams)

**Returns**

- `result` (ExtensionResult) - EXTENSION_RESULT_OK if all went ok

<!-- engine-extension-src-dmsdk-extension-extension_gen-hpp -->

# Extension {#apis:engine-extension-src-dmsdk-extension-extension_gen-hpp}

**Namespace:** `dmExtension`
**Language:** C++
**Type:** Defold C++
**File:** `extension_gen.hpp`
**Source:** `engine/extension/src/dmsdk/extension/extension_gen.hpp`
**Include:** `dmsdk/extension/extension_gen.hpp`

Functions for creating and controlling engine native extension libraries.

## API

### AppExitCode
*Type:* ENUM
Engine exit code.

**Members**

- `EXTENSION_APP_EXIT_CODE_NONE`
- `EXTENSION_APP_EXIT_CODE_REBOOT`
- `EXTENSION_APP_EXIT_CODE_EXIT`

### AppParams
*Type:* STRUCT
The extension app parameters

**Members**

- `m_ConfigFile` (HConfigFile) - Deprecated
- `m_ExitStatus` (ExtensionAppExitCode) - App exit code

### AppParamsFinalize
*Type:* FUNCTION
Finalizes an extension app params struct (deallocates internal memory)

**Parameters**

- `app_params` (ExtensionAppParams*) - the params

### AppParamsGetAppExitCode
*Type:* FUNCTION
get the app exit code

**Parameters**

- `app_params` (dmExtension::AppParams*) - The app params sent to the extension dmExtension::AppInitialize / dmExtension::AppInitialize

**Returns**

- `code` (ExtensionAppExitCode) - engine exit code

### AppParamsGetContext
*Type:* FUNCTION
Gets a context using a specified name hash

**Parameters**

- `params` (ExtensionAppParams) - the params
- `name_hash` (dmhash_t) - the context name hash

**Returns**

- `context` (void*) - The context, if it exists

### AppParamsGetContextByName
*Type:* FUNCTION
Gets a context using a specified name

**Parameters**

- `params` (ExtensionAppParams) - the params
- `name` (const char*) - the context name

**Returns**

- `context` (void*) - The context, if it exists

### AppParamsInitialize
*Type:* FUNCTION
Initializes an extension app params struct
NOTE: this is an opaque struct, do not use it's members directly!

**Parameters**

- `app_params` (ExtensionAppParams*) - the params

### AppParamsSetContext
*Type:* FUNCTION
Sets a context using a specified name

**Parameters**

- `params` (ExtensionAppParams) - the params
- `name` (const char*) - the context name
- `context` (void*) - the context

**Returns**

- `result` (int) - 0 if successful

### CallbackType
*Type:* ENUM
Extra callback type for RegisterCallback function.

**Members**

- `EXTENSION_CALLBACK_PRE_RENDER`
- `EXTENSION_CALLBACK_POST_RENDER`

### DM_DECLARE_EXTENSION
*Type:* MACRO
Declare and register new extension to the engine.
This macro is used to declare the extension callback functions used by the engine to communicate with the extension.

**Examples**

Register a new extension:
```
DM_DECLARE_EXTENSION(MyExt, "MyExt", AppInitializeMyExt, AppFinalizeMyExt, InitializeMyExt, UpdateMyExt, OnEventMyExt, FinalizeMyExt);

```

### DM_PLATFORM_ANDROID
*Type:* MACRO
Set if the platform is Android

### DM_PLATFORM_HTML5
*Type:* MACRO
Set if the platform is Html5

### DM_PLATFORM_IOS
*Type:* MACRO
Set if the platform is iPhoneOS

### DM_PLATFORM_LINUX
*Type:* MACRO
Set if the platform is Linux

### DM_PLATFORM_OSX
*Type:* MACRO
Set if the platform is OSX

### DM_PLATFORM_WINDOWS
*Type:* MACRO
Set if the platform is Windows  (on both x86 and x86_64)

### Event
*Type:* STRUCT
Extension event

### EventID
*Type:* ENUM
Event id enumeration.
EVENT_ID_ICONIFYAPP and EVENT_ID_DEICONIFYAPP only available on

**Members**

- `EXTENSION_EVENT_ID_ACTIVATEAPP`
- `EXTENSION_EVENT_ID_DEACTIVATEAPP`
- `EXTENSION_EVENT_ID_ICONIFYAPP`
- `EXTENSION_EVENT_ID_DEICONIFYAPP`
- `EXTENSION_EVENT_ID_ENGINE_INITIALIZED`
- `EXTENSION_EVENT_ID_ENGINE_DELETE`

### ExtensionAppExitCode
*Type:* ENUM
Engine exit code.

**Members**

- `EXTENSION_APP_EXIT_CODE_NONE`
- `EXTENSION_APP_EXIT_CODE_REBOOT`
- `EXTENSION_APP_EXIT_CODE_EXIT`

### ExtensionAppParams
*Type:* STRUCT
The extension app parameters

**Members**

- `m_ConfigFile` (HConfigFile) - Deprecated
- `m_ExitStatus` (ExtensionAppExitCode) - App exit code

### ExtensionAppParamsFinalize
*Type:* FUNCTION
Finalizes an extension app params struct (deallocates internal memory)

**Parameters**

- `app_params` (ExtensionAppParams*) - the params

### ExtensionAppParamsGetAppExitCode
*Type:* FUNCTION
get the app exit code

**Parameters**

- `app_params` (dmExtension::AppParams*) - The app params sent to the extension dmExtension::AppInitialize / dmExtension::AppInitialize

**Returns**

- `code` (ExtensionAppExitCode) - engine exit code

### ExtensionAppParamsGetContext
*Type:* FUNCTION
Gets a context using a specified name hash

**Parameters**

- `params` (ExtensionAppParams) - the params
- `name_hash` (dmhash_t) - the context name hash

**Returns**

- `context` (void*) - The context, if it exists

### ExtensionAppParamsGetContextByName
*Type:* FUNCTION
Gets a context using a specified name

**Parameters**

- `params` (ExtensionAppParams) - the params
- `name` (const char*) - the context name

**Returns**

- `context` (void*) - The context, if it exists

### ExtensionAppParamsInitialize
*Type:* FUNCTION
Initializes an extension app params struct
NOTE: this is an opaque struct, do not use it's members directly!

**Parameters**

- `app_params` (ExtensionAppParams*) - the params

### ExtensionAppParamsSetContext
*Type:* FUNCTION
Sets a context using a specified name

**Parameters**

- `params` (ExtensionAppParams) - the params
- `name` (const char*) - the context name
- `context` (void*) - the context

**Returns**

- `result` (int) - 0 if successful

### ExtensionCallbackType
*Type:* ENUM
Extra callback type for RegisterCallback function.

**Members**

- `EXTENSION_CALLBACK_PRE_RENDER`
- `EXTENSION_CALLBACK_POST_RENDER`

### ExtensionDescBufferSize
*Type:* FUNCTION
Used when registering new extensions

### ExtensionEvent
*Type:* STRUCT
Extension event

### ExtensionEventID
*Type:* ENUM
Event id enumeration.
EVENT_ID_ICONIFYAPP and EVENT_ID_DEICONIFYAPP only available on

**Members**

- `EXTENSION_EVENT_ID_ACTIVATEAPP`
- `EXTENSION_EVENT_ID_DEACTIVATEAPP`
- `EXTENSION_EVENT_ID_ICONIFYAPP`
- `EXTENSION_EVENT_ID_DEICONIFYAPP`
- `EXTENSION_EVENT_ID_ENGINE_INITIALIZED`
- `EXTENSION_EVENT_ID_ENGINE_DELETE`

### ExtensionParams
*Type:* STRUCT
The global parameters avalable when registering and unregistering an extension

**Members**

- `m_ConfigFile` (HConfigFile) - The game project settings (including overrides and plugins)
- `m_ResourceFactory` (HResourceFactory) - The game resource factory / repository
- `m_L` (lua_State*) - The Lua state.

### ExtensionParamsFinalize
*Type:* FUNCTION
Finalizes an extension  params struct (deallocates internal memory)

**Parameters**

- `app_params` (ExtensionParams*) - the params

### ExtensionParamsGetContext
*Type:* FUNCTION
Gets a context using a specified name hash

**Parameters**

- `params` (ExtensionParams) - the params
- `name_hash` (dmhash_t) - the context name hash

**Returns**

- `context` (void*) - The context, if it exists

### ExtensionParamsGetContextByName
*Type:* FUNCTION
Gets a context using a specified name

**Parameters**

- `params` (ExtensionParams) - the params
- `name` (const char*) - the context name

**Returns**

- `context` (void*) - The context, if it exists

### ExtensionParamsInitialize
*Type:* FUNCTION
Initializes an extension params struct
NOTE: this is an opaque struct, do not use it's members directly!

**Parameters**

- `app_params` (ExtensionParams*) - the params

### ExtensionParamsSetContext
*Type:* FUNCTION
Sets a context using a specified name

**Parameters**

- `params` (ExtensionAppParams) - the params
- `name` (const char*) - the context name
- `context` (void*) - the context

**Returns**

- `result` (int) - 0 if successful

### ExtensionRegister
*Type:* FUNCTION
Extension declaration helper. Internal function. Use DM_DECLARE_EXTENSION

**Parameters**

- `desc` (void*) - A persistent buffer of at least 128 bytes.
- `desc_size` (const char*) - size of buffer holding desc. in bytes
- `name` (const char*) - extension name. human readble. max 16 characters long.
- `app_initialize` (FExtensionAppInitialize) - app-init function. May be null
- `app_finalize` (FExtensionAppFinalize) - app-final function. May be null
- `initialize` (FExtensionInitialize) - init function. May not be 0
- `finalize` (FExtensionFinalize) - finalize function. May not be 0
- `update` (FExtensionUpdate) - update function. May be null
- `on_event` (FExtensionOnEvent) - event callback function. May be null

### ExtensionRegisteriOSUIApplicationDelegate
*Type:* FUNCTION
Register an iOS application delegate to the engine. Multiple delegates are supported (Max 32)

**Notes**

- Note that the delegate needs to be registered before the UIApplicationMain in order to
handle any earlier callbacks.

This function is only available on iOS. [icon:ios]

**Parameters**

- `delegate` (void*) - An id<UIApplicationDelegate>, see: https://developer.apple.com/documentation/uikit/uiapplicationdelegate?language=objc

**Examples**

```objective-c
// myextension_ios.mm
id g_MyApplicationDelegate;

### ExtensionResult
*Type:* ENUM
Result enumeration.

**Members**

- `EXTENSION_RESULT_OK`
- `EXTENSION_RESULT_INIT_ERROR`

### ExtensionUnregisteriOSUIApplicationDelegate
*Type:* FUNCTION
Deregister a previously registered iOS application delegate
This function is only available on iOS.

**Parameters**

- `delegate` (void*) - an id<UIApplicationDelegate>

### FCallback
*Type:* TYPEDEF
Callback typedef for functions passed to RegisterCallback().

**Parameters**

- `params` (ExtensionParams)

**Returns**

- `return` (ExtensionResult)

### FExtensionAppFinalize
*Type:* TYPEDEF
Callback when the app is being finalized

**Parameters**

- `params` (ExtensionAppParams)

**Returns**

- `result` (ExtensionResult) - EXTENSION_RESULT_OK if all went ok

### FExtensionAppInitialize
*Type:* TYPEDEF
Callback when the app is being initialized. Called before FExtensionInitialize

**Notes**

- There is no guarantuee of initialization order. If an extension requires another extension to be initialized,
      that should be handled in [ref:FExtensionInitialize].

**Parameters**

- `params` (ExtensionAppParams)

**Returns**

- `result` (ExtensionResult) - EXTENSION_RESULT_OK if all went ok

### FExtensionCallback
*Type:* TYPEDEF
Callback typedef for functions passed to RegisterCallback().

**Parameters**

- `params` (ExtensionParams)

**Returns**

- `return` (ExtensionResult)

### FExtensionFinalize
*Type:* TYPEDEF
Calls for the finalization of an extension

**Notes**

- All extensions will be called with `FExtensionFinalize` before moving on to the next step, the [ref:FExtensionAppFinalize]

**Parameters**

- `params` (ExtensionParams)

**Returns**

- `result` (ExtensionResult) - EXTENSION_RESULT_OK if all went ok

### FExtensionInitialize
*Type:* TYPEDEF
Callback when the app is being finalized

**Parameters**

- `params` (ExtensionAppParams)

**Returns**

- `result` (ExtensionResult) - EXTENSION_RESULT_OK if all went ok

### FExtensionOnEvent
*Type:* TYPEDEF
Receives an event from the engine

**Parameters**

- `params` (ExtensionParams)
- `event` (ExtensionEvent) - The current event

### FExtensionUpdate
*Type:* TYPEDEF
Updates an extension. Called for each game frame.

**Parameters**

- `params` (ExtensionParams)

**Returns**

- `result` (ExtensionResult) - EXTENSION_RESULT_OK if all went ok

### Params
*Type:* STRUCT
The global parameters avalable when registering and unregistering an extension

**Members**

- `m_ConfigFile` (HConfigFile) - The game project settings (including overrides and plugins)
- `m_ResourceFactory` (HResourceFactory) - The game resource factory / repository
- `m_L` (lua_State*) - The Lua state.

### ParamsFinalize
*Type:* FUNCTION
Finalizes an extension  params struct (deallocates internal memory)

**Parameters**

- `app_params` (ExtensionParams*) - the params

### ParamsGetContext
*Type:* FUNCTION
Gets a context using a specified name hash

**Parameters**

- `params` (ExtensionParams) - the params
- `name_hash` (dmhash_t) - the context name hash

**Returns**

- `context` (void*) - The context, if it exists

### ParamsGetContextByName
*Type:* FUNCTION
Gets a context using a specified name

**Parameters**

- `params` (ExtensionParams) - the params
- `name` (const char*) - the context name

**Returns**

- `context` (void*) - The context, if it exists

### ParamsInitialize
*Type:* FUNCTION
Initializes an extension params struct
NOTE: this is an opaque struct, do not use it's members directly!

**Parameters**

- `app_params` (ExtensionParams*) - the params

### ParamsSetContext
*Type:* FUNCTION
Sets a context using a specified name

**Parameters**

- `params` (ExtensionAppParams) - the params
- `name` (const char*) - the context name
- `context` (void*) - the context

**Returns**

- `result` (int) - 0 if successful

### RegisteriOSUIApplicationDelegate
*Type:* FUNCTION
Register an iOS application delegate to the engine. Multiple delegates are supported (Max 32)

**Notes**

- Note that the delegate needs to be registered before the UIApplicationMain in order to
handle any earlier callbacks.

This function is only available on iOS. [icon:ios]

**Parameters**

- `delegate` (void*) - An id<UIApplicationDelegate>, see: https://developer.apple.com/documentation/uikit/uiapplicationdelegate?language=objc

**Examples**

```objective-c
// myextension_ios.mm
id g_MyApplicationDelegate;

### Result
*Type:* ENUM
Result enumeration.

**Members**

- `EXTENSION_RESULT_OK`
- `EXTENSION_RESULT_INIT_ERROR`

### UnregisteriOSUIApplicationDelegate
*Type:* FUNCTION
Deregister a previously registered iOS application delegate
This function is only available on iOS.

**Parameters**

- `delegate` (void*) - an id<UIApplicationDelegate>

<!-- engine-font-src-dmsdk-font-font-h -->

# Font {#apis:engine-font-src-dmsdk-font-font-h}

**Namespace:** `Font`
**Language:** C++
**Type:** Defold C++
**File:** `font.h`
**Source:** `engine/font/src/dmsdk/font/font.h`
**Include:** `dmsdk/font/font.h`

Font API for loading a font (truetype), getting glyph metrics and bitmap/sdf data

## API

### FontDestroy
*Type:* FUNCTION
Destroys a loaded font

**Parameters**

- `font` (HFont) - The font to deallocate

### FontFreeGlyph
*Type:* FUNCTION
Free the bitmap of the glyph

**Parameters**

- `font` (HFont) - The font
- `glyph` (dmFont::Glyph*) - The glyph

**Returns**

- `result` (dmFont::FontResult) - The result

### FontGetAscent
*Type:* FUNCTION
Get the max ascent of the font

**Parameters**

- `font` (HFont) - The font
- `scale` (float) - The scale factor

**Returns**

- `ascent` (float) - The max ascent

### FontGetDescent
*Type:* FUNCTION
Get the max descent of the font

**Parameters**

- `font` (HFont) - The font
- `scale` (float) - The scale factor

**Returns**

- `descent` (float) - The max descent

### FontGetGlyph
*Type:* FUNCTION
Get the metrics of a glyph

**Parameters**

- `font` (HFont) - The font
- `codepoint` (uint32_t) - The unicode code point
- `options` - (in) <span class="type"> FontGlyphOptions*</span> The glyph options
- `glyph` - (out) <span class="type"> FontGlyph*</span> The glyph

**Returns**

- `result` (FontFontResult) - If successful, user must call FreeGlyph() on the result to clear any image data.

### FontGetGlyphByIndex
*Type:* FUNCTION
Get the metrics of a glyph

**Parameters**

- `font` (HFont) - The font
- `glyph_index` (uint32_t) - The unicode code point
- `options` - (in) <span class="type"> FontGlyphOptions*</span> The glyph options
- `glyph` - (out) <span class="type"> FontGlyph*</span> The glyph

**Returns**

- `result` (FontFontResult) - If successful, user must call FreeGlyph() on the result to clear any image data.

### FontGetGlyphIndex
*Type:* FUNCTION
Get glyph index of a codepoint

**Parameters**

- `font` (HFont) - The font
- `codepoint` (uint32_t) - The unicode code point

**Returns**

- `glyph_index` (uint32_t) - 0 if no index was found

### FontGetLineGap
*Type:* FUNCTION
Get the line gap of the font

**Parameters**

- `font` (HFont) - The font
- `scale` (float) - The scale factor

**Returns**

- `line_gap` (float) - The line gap

### FontGetPath
*Type:* FUNCTION
Gets the path of the loaded font

**Parameters**

- `font` (HFont) - The font

**Returns**

- `path` (const char*) - The path

### FontGetPathHash
*Type:* FUNCTION
Gets the path hash of the loaded font

**Notes**

- We use a 32bit hash to make it easier to pair with a glyph index into a 64-bit key

**Parameters**

- `font` (HFont) - The font

**Returns**

- `path` (uint32_t) - The path

### FontGetResourceSize
*Type:* FUNCTION
Get the bytes used by this resource

**Parameters**

- `font` (HFont) - The font

**Returns**

- `size` (uint32_t) - The resource size

### FontGetScaleFromSize
*Type:* FUNCTION
Get the scale factor from a given pixel size.
Used to convert from points to pixel size

**Parameters**

- `font` (HFont) - The font
- `size` (float) - The font size (in pixel height)

**Returns**

- `scale` (float) - The scale factor

### FontGetType
*Type:* FUNCTION
Gets the specific implementation of the loaded font

**Parameters**

- `font` (HFont) - The font

**Returns**

- `type` (dmFont::FontType) - The type

### FontGlyph
*Type:* STRUCT
Represents a glyph.
If there's an associated image, it is of size width * height * channels.

**Notes**

- The baseline of a glyph bitmap is calculated: `base = glyph.bitmap.height - glyph.ascent`

**Members**

- `m_Bitmap` (FontGlyphBitmap) - The bitmap data of the glyph.
- `m_Codepoint` (uint32_t) - The unicode code point
- `m_Width` (float) - The glyph bounding width
- `m_Height` (float) - The glyph bounding height
- `m_Advance` (float) - The advance step of the glyph (in pixels)
- `m_LeftBearing` (float) - The left bearing of the glyph (in pixels)
- `m_Ascent` (float) - The ascent of the glyph. (in pixels)
- `m_Descent` (float) - The descent of the glyph. Positive! (in pixels)

### FontGlyphBitmap
*Type:* STRUCT
Holds the bitmap data of a glyph.
If there's an associated image, it is of size width * height * channels.

**Members**

- `m_Width` (uint16_t) - The glyph image width
- `m_Height` (uint16_t) - The glyph image height
- `m_Channels` (uint8_t) - The number of color channels
- `m_Flags` (uint8_t) - Flags describing the data. See #FontGlyphBitmapFlags.
- `m_Data` (uint8_t*) - The bitmap data, or null if no data available.
- `m_DataSize` (uint32_t) - The bitmap data size (e.g. if the data is compressed)

### FontGlyphBitmapFlags
*Type:* ENUM
FontGlyphBitmapFlags

**Members**

- `GLYPH_BM_FLAG_COMPRESSION_NONE` - = 0
- `GLYPH_BM_FLAG_COMPRESSION_DEFLATE` - = 1

### FontGlyphOptions
*Type:* STRUCT
Holds the bitmap data of a glyph.
If there's an associated image, it is of size width * height * channels.

**Members**

- `m_Scale` (float) - The font scale
- `m_GenerateImage` (bool) - If true, generates an SDF image, and fills out the glyph.m_Bitmap structure.
- `m_StbttSDFPadding` (int) - The sdk padding value (valid for FONT_TYPE_STBTTF fonts)
- `m_StbttSDFOnEdgeValue` (int) - Where the edge value is located (valid for FONT_TYPE_STBTTF fonts)

### FontLoadFromMemory
*Type:* FUNCTION
Loads a font from memory

**Parameters**

- `name` (const char*) - The name of the resource. For easier debugging
- `data` (void*) - The raw data
- `data_size` (uint32_t) - The length of the data (in bytes)
- `allocate` (bool) - If true, the font may allocate a copy of the data (if needed). If false, the caller will own the memory.

**Returns**

- `font` (HFont) - The loaded font, or null if it failed to load.

### FontLoadFromPath
*Type:* FUNCTION
Loads a font using a path

**Parameters**

- `path` (const char*) - The path to the resource

**Returns**

- `font` (HFont) - The loaded font, or null if it failed to load.

### FontResult
*Type:* ENUM
FontResult

**Members**

- `FONT_RESULT_OK`
- `FONT_RESULT_NOT_SUPPORTED`
- `FONT_RESULT_ERROR`

### FontType
*Type:* ENUM
FontType

**Members**

- `FONT_TYPE_STBTTF`
- `FONT_TYPE_STBOTF`
- `FONT_TYPE_UNKNOWN` - = 0xFFFFFFFF

<!-- engine-font-src-dmsdk-font-fontcollection-h -->

# FontCollection {#apis:engine-font-src-dmsdk-font-fontcollection-h}

**Namespace:** `FontCollection`
**Language:** C++
**Type:** Defold C++
**File:** `fontcollection.h`
**Source:** `engine/font/src/dmsdk/font/fontcollection.h`
**Include:** `dmsdk/font/fontcollection.h`

Font API for grouping multiple fonts into a collection

## API

### FontCollectionAddFont
*Type:* FUNCTION
add a font to the font collection

**Notes**

- No ownership transfer occurrs. HFont must be alive during the lifetime of the font collection

**Parameters**

- `coll` (HFontCollection) - the font collection
- `font` (HFont) - the font

**Returns**

- `result` (FontResult) - the result. FONT_RESULT_OK if successful

### FontCollectionCreate
*Type:* FUNCTION
Create a font collection

**Returns**

- `coll` (HFontCollection) - the font collection

### FontCollectionDestroy
*Type:* FUNCTION
destroy a font collection

**Parameters**

- `coll` (HFontCollection) - the font collection

### FontCollectionGetFont
*Type:* FUNCTION
return the font associated with the given index

**Parameters**

- `coll` (HFontCollection) - the font collection

**Returns**

- `font` (HFont) - the font at the given index

### FontCollectionGetFontCount
*Type:* FUNCTION
return number of fonts in the collection

**Parameters**

- `coll` (HFontCollection) - the font collection

**Returns**

- `count` (uint32_t) - the number of fonts

### FontCollectionRemoveFont
*Type:* FUNCTION
remove a font from the font collection

**Parameters**

- `coll` (HFontCollection) - the font collection
- `font` (HFont) - the font

**Returns**

- `result` (FontResult) - the result. FONT_RESULT_OK if successful

### HFontCollection
*Type:* TYPEDEF
Handle that holds a collection of fonts to use during text shaping

<!-- engine-font-src-dmsdk-font-text_layout-h -->

# TextLayout {#apis:engine-font-src-dmsdk-font-text_layout-h}

**Namespace:** `TextLayout`
**Language:** C++
**Type:** Defold C++
**File:** `text_layout.h`
**Source:** `engine/font/src/dmsdk/font/text_layout.h`
**Include:** `dmsdk/font/text_layout.h`

API for laying out complex text into format ready for display

## API

### HTextLayout
*Type:* TYPEDEF
A handle representing a text layout

### TextDirection
*Type:* ENUM
An enum representing text layout directions

**Members**

- `TEXT_DIRECTION_LTR` -   Left-to-right text direction
- `TEXT_DIRECTION_RTL` -   Right-to-left text direction

### TextGlyph
*Type:* STRUCT
Glyph representing the final position within a layout

**Members**

- `m_Font` (HFont) - The font used for this glyph
- `m_X` (float) - the final x position, relative the top-left corner of the layout
- `m_Y` (float) - the final y position, relative the top-left corner of the layout
- `m_Width` (float) - the width of the glyph
- `m_Height` (float) - the height of the glyph
- `m_Codepoint` (uint32_t) - original copdepoint (if available)
- `m_GlyphIndex` (uint16_t) - the glyph index in the font
- `m_Cluster` (uint16_t) - the index in the original text, that this glyph corresponds to

### TextLayoutCreate
*Type:* FUNCTION
Create a text layout using a font collection
if successful, the caller must call TextLayoutFree() on the layout

**Parameters**

- `collection` (HFontCollection) - the font collection
- `codepoints` (uint32_t*) - an array of codepoints
- `num_codepoints` (uint32_t) - number of codepoints in the array
- `settings` (TextLayoutSettings*) - the settings used for rendering
- `layout` (HTextLayout*) - (out) the output text layout

**Returns**

- `result` (TextResult) - the result. TEXT_RESULT_OK if successful

### TextLayoutFree
*Type:* FUNCTION
Frees a previously created layout

**Parameters**

- `layout` (HTextLayout) - the text layout

### TextLayoutGetBounds
*Type:* FUNCTION
Get the lines in the layout

**Parameters**

- `layout` (HTextLayout) - the text layout

**Returns**

- `width` (float*) - the total width of the layout (out)
- `height` (float*) - the total height of the layout (out)

### TextLayoutGetGlyphCount
*Type:* FUNCTION
Get the glyph count in the layout

**Parameters**

- `layout` (HTextLayout) - the text layout

**Returns**

- `count` (uint32_t) - the number of glyphs in the layout

### TextLayoutGetGlyphs
*Type:* FUNCTION
Get the glyphs in the layout

**Parameters**

- `layout` (HTextLayout) - the text layout

**Returns**

- `glyphs` (TextGlyph*) - the array of glyphs in the layout

### TextLayoutGetLineCount
*Type:* FUNCTION
Get the line count in the layout

**Parameters**

- `layout` (HTextLayout) - the text layout

**Returns**

- `count` (uint32_t) - the number of lines in the layout

### TextLayoutGetLines
*Type:* FUNCTION
Get the lines in the layout

**Parameters**

- `layout` (HTextLayout) - the text layout

**Returns**

- `lines` (TextLine*) - the array of lines in the layout

### TextLayoutSettings
*Type:* STRUCT
Describes how to do a text layout

**Members**

- `m_Size` (float) - The desired size of the font (in pixels)
- `m_Width` (float) - Max layout width. Used only when m_LineBreak is non-zero
- `m_Leading` (float) - The extra space between each line. Set 1.0f as default.
- `m_Tracking` (float) - The extra tracking between glyphs. Set 0 as default.
- `m_Padding` (uint32_t) - Legacy: Padding for monospace, glyphbank fonts
- `m_LineBreak` (uint8_t:1) - Allow line breaks
- `m_Monospace` (uint8_t:1) - Legacy: Is the font a monospace font. Current: should be set on the font in the font collection!

### TextLayoutType
*Type:* ENUM
An enum representing text layout features
Each font supports a layout type
The selected layout type it the minimum value of layout types

**Members**

- `TEXT_LAYOUT_TYPE_LEGACY` - Legacy text shaping api
- `TEXT_LAYOUT_TYPE_FULL` -   Full text shaping api

### TextLine
*Type:* STRUCT
Represents a line of glyphs

**Members**

- `m_Width` (float) - Width of the line
- `m_Index` (uint16_t) - Index into the list of glyphs
- `m_Length` (uint16_t) - Number of glyphs to render

### TextResult
*Type:* ENUM
An enum representing text layout results

**Members**

- `TEXT_RESULT_OK`
- `TEXT_RESULT_ERROR`

<!-- engine-gameobject-src-dmsdk-gameobject-component-h -->

# Component {#apis:engine-gameobject-src-dmsdk-gameobject-component-h}

**Namespace:** `dmGameObject`
**Language:** C++
**Type:** Defold C++
**File:** `component.h`
**Source:** `engine/gameobject/src/dmsdk/gameobject/component.h`
**Include:** `dmsdk/gameobject/component.h`

Api for manipulating game object components (WIP)

## API

### ComponentAddToUpdate
*Type:* TYPEDEF
Component add to update function. Only components called with this function should be included in the update passes.

**Parameters**

- `params` (const dmGameObject::ComponentAddToUpdateParams&)

**Returns**

- `result` (CreateResult) - CREATE_RESULT_OK on success

### ComponentAddToUpdateParams
*Type:* STRUCT
Parameters to ComponentAddToUpdate callback.

**Members**

- `m_Collection` (HCollection) - Collection handle
- `m_Instance` (HInstance) - Game object instance
- `m_World` (void*) - Component world
- `m_Context` (void*) - User context
- `m_UserData` (uintptr_t*) - User data storage pointer

### ComponentCreate
*Type:* TYPEDEF
Component create function. Should allocate all necessary resources for the component.
The game object instance is guaranteed to have its id, scene hierarchy and transform data updated when this is called.

**Parameters**

- `params` (const dmGameObject::ComponentCreateParams&)

**Returns**

- `result` (CreateResult) - CREATE_RESULT_OK on success

### ComponentCreateParams
*Type:* STRUCT
Parameters to ComponentCreate callback.

**Members**

- `m_Instance` (HInstance) - Game object instance
- `m_Position` (dmVMath::Point3) - Local component position
- `m_Rotation` (dmVMath::Quat) - Local component rotation
- `m_Scale` (dmVMath::Vector3) - Local component scale
- `m_PropertySet` (PropertySet) - Set of properties
- `m_Resource` (void*) - Component resource
- `m_World` (void*) - Component world, as created in the ComponentNewWorld callback
- `m_Context` (void*) - User context
- `m_UserData` (uintptr_t*) - User data storage pointer
- `m_ComponentIndex` (uint16_t) - Index of the component type being created (among all component types)

### ComponentDeleteWorld
*Type:* TYPEDEF
Component world destroy function

**Parameters**

- `params` (const dmGameObject::ComponentDeleteWorldParams&)

**Returns**

- `result` (CreateResult) - CREATE_RESULT_OK on success

### ComponentDeleteWorldParams
*Type:* STRUCT
Parameters to ComponentDeleteWorld callback.

**Members**

- `m_Context` - [type void*] Context for the component type
- `m_World` - [type void*] The pointer to the world to destroy

### ComponentDestroy
*Type:* TYPEDEF
Component destroy function. Should deallocate all necessary resources.

**Parameters**

- `params` (const dmGameObject::ComponentDestroyParams&)

**Returns**

- `result` (CreateResult) - CREATE_RESULT_OK on success

### ComponentDestroyParams
*Type:* STRUCT
Parameters to ComponentDestroy callback.

**Members**

- `m_Collection` (HCollection) - Collection handle
- `m_Instance` (HInstance) - Game object instance
- `m_World` (void*) - Component world
- `m_Context` (void*) - User context
- `m_UserData` (uintptr_t*) - User data storage pointer

### ComponentFinal
*Type:* TYPEDEF
Component finalize function. Should clean up as it is called when the component is disabled.

**Parameters**

- `params` (const dmGameObject::ComponentFinalParams&)

**Returns**

- `result` (CreateResult) - CREATE_RESULT_OK on success

### ComponentFinalParams
*Type:* STRUCT
Parameters to ComponentFinal callback.

**Members**

- `m_Collection` (HCollection) - Collection handle
- `m_Instance` (HInstance) - Game object instance
- `m_World` (void*) - Component world
- `m_Context` (void*) - User context
- `m_UserData` (uintptr_t*) - User data storage pointer

### ComponentGet
*Type:* TYPEDEF
A simple way to get the component instance from the user_data (which was set during creation)

**Parameters**

- `params` (const dmGameObject::ComponentGetParams&) - Update parameters

**Returns**

- `component` (void*) - The internal component pointer

### ComponentGetParams
*Type:* STRUCT
Parameters to ComponentGet callback.

**Members**

- `m_World` (HComponentWorld) - Component world
- `m_UserData` (HComponentInternal) - Component internal representation

### ComponentGetProperty
*Type:* TYPEDEF
Callback for retrieving a property value of the component.

**Parameters**

- `params` (const dmGameObject::ComponentGetPropertyParams&) - the parameters
- `out_value` (dmGameObject::PropertyDesc&) - (out) the property

**Returns**

- `result` (dmGameObject::PropertyResult) - PROPERTY_RESULT_OK if retrieving the property was ok

### ComponentGetPropertyParams
*Type:* STRUCT
Parameters to ComponentGetProperty callback.

**Members**

- `m_Context` (void*) - Context for the component type
- `m_World` (void*) - Component world
- `m_Instance` (HInstance) - Game object instance
- `m_PropertyId` (dmhash_t) - Id of the property
- `m_UserData` (uintptr_t*) - User data storage pointer
- `m_Options` (PropertyOptions) - Options for getting the property

### ComponentInit
*Type:* TYPEDEF
Component init function. Should set the components initial state as it is called when the component is enabled.

**Parameters**

- `params` (const dmGameObject::ComponentInitParams&)

**Returns**

- `result` (CreateResult) - CREATE_RESULT_OK on success

### ComponentInitParams
*Type:* STRUCT
Parameters to ComponentInit callback.

**Members**

- `m_Collection` (HCollection) - Collection handle
- `m_Instance` (HInstance) - Game object instance
- `m_World` (void*) - Component world
- `m_Context` (void*) - User context
- `m_UserData` (uintptr_t*) - User data storage pointer

### ComponentIterProperties
*Type:* TYPEDEF
Callback when iterating over the properties for a component.

**Notes**

- This function is only available/used in debug builds, when traversing the scene graph in order to export
this data for external tools (e.g. external testing libraries like Poco)

**Parameters**

- `pit` (dmGameObject::SceneNodePropertyIterator) - the property iterator
- `node` (dmGameObject::SceneNode*) - the scene node

### ComponentNewWorld
*Type:* TYPEDEF
Component world create function

**Parameters**

- `params` (const dmGameObject::ComponentNewWorldParams&)

**Returns**

- `result` (CreateResult) - CREATE_RESULT_OK on success

### ComponentNewWorldParams
*Type:* STRUCT
Parameters to ComponentNewWorld callback.

**Members**

- `m_Context` (void*) - Context for the component type
- `m_ComponentIndex` (uint8_t) - Component type index that can be used later with GetWorld()
- `m_MaxInstances` (uint32_t) - Max component game object instance count (if applicable)
- `m_World` (void**) - Out-parameter of the pointer in which to store the created world
- `m_MaxComponentInstances` (uint32_t) - Max components count of this type in current collection counted at the build stage.
                                        If component in factory then value is 0xFFFFFFFF

### ComponentOnInput
*Type:* TYPEDEF
Component on-input function. Called when input is sent to this component

**Parameters**

- `params` (const dmGameObject::ComponentOnInputParams&) - Input parameters

**Returns**

- `result` (InputResult) - How the component handled the input

### ComponentOnInputParams
*Type:* STRUCT
Parameters to ComponentOnInput callback.

**Members**

- `m_Instance` (HInstance) - Instance handle
- `m_InputAction` (const InputAction*) - Information about the input that occurred (note that input being released is also treated as input)
- `m_Context` (void*) - User context
- `m_UserData` (uintptr_t*) - User data storage pointer

### ComponentOnMessage
*Type:* TYPEDEF
Component on-message function. Called when message is sent to this component

**Parameters**

- `params` (const dmGameObject::ComponentOnMessageParams&) - Update parameters

**Returns**

- `result` (UpdateResult) - UPDATE_RESULT_OK on success

### ComponentOnMessageParams
*Type:* STRUCT
Parameters to ComponentOnMessage callback.

**Members**

- `m_Instance` (HInstance) - Instance handle
- `m_World` (void*) - World
- `m_Context` (void*) - User context
- `m_UserData` (uintptr_t*) - User data storage pointer
- `m_Message` (dmMessage::Message*) - Message

### ComponentOnReload
*Type:* FUNCTION
Called when the resource the component is based on has been reloaded.

**Parameters**

- `params` (const dmGameObject::ComponentOnReloadParams&) - the parameters

### ComponentOnReloadParams
*Type:* STRUCT
Parameters to ComponentOnReload callback.

**Members**

- `m_Instance` (HInstance) - Instance handle
- `m_Resource` (void*) - Resource that was reloaded
- `m_World` (void*) - Component world
- `m_Context` (void*) - User context
- `m_UserData` (uintptr_t*) - User data storage pointer

### ComponentSetProperties
*Type:* TYPEDEF
Set a property set for the component.

**Parameters**

- `params` (const dmGameObject::ComponentSetPropertiesParams&) - the parameters

**Returns**

- `result` (dmGameObject::PropertyResult) - PROPERTY_RESULT_OK if property was set

### ComponentSetPropertiesParams
*Type:* STRUCT
Parameters to ComponentSetProperties callback.

**Members**

- `m_Instance` (HInstance) - Instance handle
- `m_PropertySet` (PropertySet) - Property set to use
- `m_UserData` (uintptr_t*) - User data storage pointer

### ComponentSetProperty
*Type:* TYPEDEF
Callback for setting a property value of the component.

**Parameters**

- `params` (const dmGameObject::ComponentSetPropertyParams&) - the parameters

**Returns**

- `result` (dmGameObject::PropertyResult) - PROPERTY_RESULT_OK if property was set

### ComponentSetPropertyParams
*Type:* STRUCT
Parameters to ComponentSetProperty callback.

**Members**

- `m_Context` (void*) - Context for the component type
- `m_World` (void*) - Component world
- `m_Instance` (HInstance) - Game object instance
- `m_PropertyId` (dmhash_t) - Id of the property
- `m_UserData` (uintptr_t*) - User data storage pointer
- `m_Value` (PropertyVar) - New value of the property
- `m_Options` (PropertyOptions) - Options for setting the property

### ComponentsPostUpdate
*Type:* TYPEDEF
Component post update function. The component state should never be modified in this function.

**Parameters**

- `params` (const dmGameObject::ComponentsPostUpdateParams&) - Update parameters

**Returns**

- `result` (UpdateResult) - UPDATE_RESULT_OK on success

### ComponentsPostUpdateParams
*Type:* STRUCT
Parameters for ComponentsPostUpdate callback.

**Members**

- `m_Collection` (HCollection) - Collection handle
- `m_World` (void*) - Component world
- `m_Context` (void*) - User context

### ComponentsRender
*Type:* TYPEDEF
Component render function.

**Parameters**

- `params` (const dmGameObject::ComponentsRenderParams&) - Update parameters

**Returns**

- `result` (UpdateResult) - UPDATE_RESULT_OK on success

### ComponentsRenderParams
*Type:* STRUCT
Parameters to ComponentsRender callback.

**Members**

- `m_Collection` (HCollection) - Collection handle
- `m_World` (void*) - Component world
- `m_Context` (void*) - User context

### ComponentsUpdate
*Type:* TYPEDEF
Component update function. Updates all component of this type for all game objects

**Parameters**

- `params` (const dmGameObject::ComponentsUpdateParams&) - Update parameters
- `params` (dmGameObject::ComponentsUpdateResult&) - (out) Update result

**Returns**

- `result` (UpdateResult) - UPDATE_RESULT_OK on success

### ComponentsUpdateParams
*Type:* STRUCT
Parameters to ComponentsUpdate callback.

**Members**

- `m_Collection` (HCollection) - Collection handle
- `m_UpdateContext` (const UpdateContext*) - Update context
- `m_World` (void*) - Component world
- `m_Context` (void*) - User context

### ComponentsUpdateResult
*Type:* STRUCT
Parameters to ComponentsUpdate callback.

**Members**

- `m_TransformsUpdated` (bool) - True if a component type updated any game object transforms

### ComponentTypeCreateCtx
*Type:* STRUCT
Context used when registering a new component type

**Members**

- `m_Config` (dmConfigFile::HConfig) - The config file
- `m_Factory` (dmResource::HFactory) - The resource factory
- `m_Register` (dmGameObject::HRegister) - The game object registry
- `m_Script` (dmScript::HContext) - The shared script context
- `m_Contexts` (dmHashTable64<void*>) - Mappings between names and contextx

### ComponentTypeGetContext
*Type:* FUNCTION
get the component type global context

**Parameters**

- `type` (HComponentType) - the type

**Returns**

- `context` (void*) - component type global context

### ComponentTypeGetTypeIndex
*Type:* FUNCTION
Get the component type index. Used for with e.g. dmGameObject::GetWorld()/GetContext()

**Parameters**

- `type` (HComponentType) - the type

**Returns**

- `type_index` (uint32_t) - The type index.

### ComponentTypeSetAddToUpdateFn
*Type:* FUNCTION
Set the component add-to-update callback. Called for each component instal, when the game object is spawned.

**Parameters**

- `type` (HComponentType) - the type
- `fn` (ComponentAddToUpdate) - callback

### ComponentTypeSetChildIteratorFn
*Type:* FUNCTION
set the component child iterator function. Called during inspection

**Parameters**

- `type` (HComponentType) - the type
- `fn` (dmGameObject::FIteratorChildren) - child iterator function

### ComponentTypeSetContext
*Type:* FUNCTION
Set the component type global context. Usually set when registering the component type.

**Parameters**

- `type` (HComponentType) - the type
- `context` (void*) - component type global context

### ComponentTypeSetCreateFn
*Type:* FUNCTION
Set the component create callback. Called when a component instance is created.

**Parameters**

- `type` (HComponentType) - the type
- `fn` (ComponentCreate) - callback

### ComponentTypeSetDeleteWorldFn
*Type:* FUNCTION
Set the world destroy callback. Called when a collection (i.e. a "world") is destroyed.

**Parameters**

- `type` (HComponentType) - the type
- `fn` (ComponentDeleteWorld) - callback

### ComponentTypeSetDestroyFn
*Type:* FUNCTION
Set the component destroy callback. Called when a component instance is destroyed.

**Parameters**

- `type` (HComponentType) - the type
- `fn` (ComponentDestroy) - callback

### ComponentTypeSetFinalFn
*Type:* FUNCTION
Set the component finalize callback. Called on each gameobject's components, during a gameobject's finalization.

**Parameters**

- `type` (HComponentType) - the type
- `fn` (ComponentFinal) - callback

### ComponentTypeSetFixedUpdateFn
*Type:* FUNCTION
Set the component update callback. Called when it's time to update all component instances.

**Parameters**

- `type` (HComponentType) - the type
- `fn` (ComponentsUpdate) - callback

### ComponentTypeSetGetFn
*Type:* FUNCTION
Set the component get callback. Called when the scripts want to retrieve the individual component user data given an url.

**Parameters**

- `type` (HComponentType) - the type
- `fn` (ComponentGet) - callback

### ComponentTypeSetGetPropertyFn
*Type:* FUNCTION
Set the component get property callback. Called when accessing a property via go.get()

**Parameters**

- `type` (HComponentType) - the type
- `fn` (ComponentGetProperty) - callback

### ComponentTypeSetHasUserData
*Type:* FUNCTION
Set the component type need for a per component instance user data. Defaults to true.

**Parameters**

- `type` (HComponentType) - the type
- `has_user_data` (bool) - does each component instance need user data

### ComponentTypeSetInitFn
*Type:* FUNCTION
Set the component init callback. Called on each gameobject's components, during a gameobject's initialization.

**Parameters**

- `type` (HComponentType) - the type
- `fn` (ComponentInit) - callback

### ComponentTypeSetLateUpdateFn
*Type:* FUNCTION
Set the component late update callback. Called after regular update of all component instances but before render and before post update.

**Parameters**

- `type` (HComponentType) - the type
- `fn` (ComponentsUpdate) - callback

### ComponentTypeSetNewWorldFn
*Type:* FUNCTION
Set the new world callback. Called when a collection (i.e. a "world") is created.

**Parameters**

- `type` (HComponentType) - the type
- `fn` (ComponentNewWorld) - callback

### ComponentTypeSetOnInputFn
*Type:* FUNCTION
Set the component on-input callback. Called once per frame, before the Update function.

**Parameters**

- `type` (HComponentType) - the type
- `fn` (ComponentOnInput) - callback

### ComponentTypeSetOnMessageFn
*Type:* FUNCTION
Set the component on-message callback. Called multiple times per frame, to flush messages.

**Parameters**

- `type` (HComponentType) - the type
- `fn` (ComponentOnMessage) - callback

### ComponentTypeSetOnReloadFn
*Type:* FUNCTION
Set the component on-reload callback. Called when the resource of a component instance is reloaded.

**Parameters**

- `type` (HComponentType) - the type
- `fn` (ComponentOnReload) - callback

### ComponentTypeSetPostUpdateFn
*Type:* FUNCTION
Set the component post update callback. Called for each collection after the update, before the render.

**Parameters**

- `type` (HComponentType) - the type
- `fn` (ComponentsPostUpdate) - callback

### ComponentTypeSetPrio
*Type:* FUNCTION
Set the component type prio order. Defines the update order of the component types.

**Parameters**

- `type` (HComponentType) - the type
- `prio` (uint16_t) - prio order

### ComponentTypeSetPropertyIteratorFn
*Type:* FUNCTION
set the component property iterator function. Called during inspection

**Parameters**

- `type` (HComponentType) - the type
- `fn` (dmGameObject::FIteratorProperties) - property iterator function

### ComponentTypeSetReadsTransforms
*Type:* FUNCTION
Set the component type transform dependency flag.
If this flag is set, it might trigger an dmGameObject::UpdateTransforms() (if there are dirty transforms)

**Parameters**

- `type` (HComponentType) - the type
- `reads_transforms` (bool) - transform dependency flag

### ComponentTypeSetRenderFn
*Type:* FUNCTION
Set the component render callback. Called when it's time to render all component instances.

**Parameters**

- `type` (HComponentType) - the type
- `fn` (ComponentsRender) - callback

### ComponentTypeSetSetPropertiesFn
*Type:* FUNCTION
Set the component set properties callback. Called when the component instance is being spwned.

**Parameters**

- `type` (HComponentType) - the type
- `fn` (ComponentSetProperties) - callback

### ComponentTypeSetSetPropertyFn
*Type:* FUNCTION
Set the component set property callback. Called when accessing a property via go.set()

**Parameters**

- `type` (HComponentType) - the type
- `fn` (ComponentSetProperty) - callback

### ComponentTypeSetUpdateFn
*Type:* FUNCTION
Set the component update callback. Called when it's time to update all component instances.

**Parameters**

- `type` (HComponentType) - the type
- `fn` (ComponentsUpdate) - callback

### DM_DECLARE_COMPONENT_TYPE
*Type:* MACRO
Register a new component type

**Parameters**

- `symbol` (symbol) - The unique C++ symbol name
- `name` (const char*) - name of the component type (i.e. the resource suffix)
- `create_fn` (dmGameObject::Result (*fn)(const ComponentTypeCreateCtx* ctx, HComponentType type)) - The type configuration function. May not be 0.
- `destroy_fn` (dmGameObject::Result (*fn)(const ComponentTypeCreateCtx* ctx, HComponentType type)) - The type destruction function. May be 0.

### HComponentType
*Type:* TYPEDEF
Component type handle. It holds the life time functions for a type.

<!-- engine-gameobject-src-dmsdk-gameobject-gameobject-h -->

# Gameobject {#apis:engine-gameobject-src-dmsdk-gameobject-gameobject-h}

**Namespace:** `dmGameObject`
**Language:** C++
**Type:** Defold C++
**File:** `gameobject.h`
**Source:** `engine/gameobject/src/dmsdk/gameobject/gameobject.h`
**Include:** `dmsdk/gameobject/gameobject.h`

API for manipulating game objects

## API

### AcquireInstanceIndex
*Type:* FUNCTION
Retrieve an instance index from the index pool for the collection.

**Parameters**

- `collection` (dmGameObject::HColleciton) - Collection from which to retrieve the instance index.

**Returns**

- `instance` (uint32_t) - index from the index pool of collection.

### AddDynamicResourceHash
*Type:* FUNCTION
Adds a reference to a dynamically created resource into the collection.
If the resource is not released before the collection is being destroyed,
the collection will automatically free the resource.

**Parameters**

- `collection` (HCollection) - Collection handle
- `path_hash` (dmhash_t) - resource path hash

### AssignInstanceIndex
*Type:* FUNCTION
Assign an index to the instance, only if the instance is not null.

**Parameters**

- `index` (uint32_t) - The index to assign.
- `instance` (dmGameObject::HInstance) - The instance that should be assigned the index.

### CreateInstanceId
*Type:* FUNCTION
Creates a new unique instance ID and returns its hash.

**Returns**

- `id` (dmhash_t) - hash of the new unique instance id

### CreateResult
*Type:* ENUM
Create result enum.

**Members**

- `dmGameObject::CREATE_RESULT_OK`
- `dmGameObject::CREATE_RESULT_UNKNOWN_ERROR`

### Delete
*Type:* FUNCTION
Delete gameobject instance

**Parameters**

- `collection` (dmGameObject::HCollection) - Gameobject collection
- `instance` (dmGameObject::HInstance) - Gameobject instance
- `recursive` (bool) - If true, delete child hierarchy recursively in child to parent order (leaf first)

### DeleteBones
*Type:* FUNCTION
Recursively delete all instances flagged as bones under the given parent instance.
The order of deletion is depth-first, so that the children are deleted before the parents.

**Parameters**

- `parent` (HInstance) - Parent instance of the hierarchy

### GetAbsoluteIdentifier
*Type:* FUNCTION
Get absolute identifier relative to instance. The returned identifier is the
representation of the qualified name, i.e. the path from root-collection to
the sub-collection which the instance belongs to.
Example: if the instance is part of a sub-collection in the root-collection
named "sub" and id == "a" the returned identifier represents the path "sub.a"

**Parameters**

- `instance` (dmGameObject::HInstance) - Gameobject instance to get absolute identifier to
- `identifier` (const char*) - Identifier relative to instance

**Returns**

- `return` (dmhash_t) - Absolute identifier.

### GetCollection
*Type:* FUNCTION
Retrieve a collection from the specified instance

**Parameters**

- `instance` (dmGameObject::HInstance) - Game object instance

**Returns**

- `collection` (dmGameObject::HInstance) - The collection the specified instance belongs to

### GetCollectionByHash
*Type:* FUNCTION
Retrieve a collection by socket name hash
Note: in native extensions, the register can be retrieved during init using dmEngine::GetGameObjectRegister(dmExtension::AppParams *params)

**Parameters**

- `regist` (dmGameObject::HRegister) - Register
- `socket_name` (dmhash_t) - The socket name

**Returns**

- `collection` (dmGameObject::HCollection) - The collection if successful. 0 otherwise.

### GetComponent
*Type:* FUNCTION
Get the component, component type and its world

**Parameters**

- `instance` (dmGameObject::HInstance) - Instance
- `component_id` (dmhash_t) - Component id
- `component_type` (uint32_t*) - (out) Component type. Used for validation.
- `component` (HComponent*) - (out) The component.
- `world` (HComponentWorld*) - (out) The component world. May be 0.

**Returns**

- `result` (dmGameObject::Result) - RESULT_OK if the component was found

### GetComponentId
*Type:* FUNCTION
Get component id from component index.

**Parameters**

- `instance` (dmGameObject::HInstance) - Instance
- `component_index` (uint16_t) - Component index
- `component_id` (dmhash_t*) - Component id as out-argument

**Returns**

- `result` (dmGameObject::Result) - RESULT_OK if the component was found

### GetComponentTypeIndex
*Type:* FUNCTION
Get the component type index

**Parameters**

- `collection` (HCollection) - Collection handle
- `type_hash` (dmhash_t) - The hashed name of the registered component type (e.g. dmHashString("guic"))

**Returns**

- `type_index` (uint32_t) - The component type index. 0xFFFFFFFF if not found

### GetContext
*Type:* FUNCTION
Retrieve the context for a component type

**Parameters**

- `collection` (HCollection) - Collection handle
- `component_type_index` (uint32_t) - index of the component type

**Returns**

- `context` (void*) - The pointer to the context, 0x0 if not found

### GetIdentifier
*Type:* FUNCTION
Get instance identifier

**Parameters**

- `instance` (dmGameObject::HInstance) - Gameobject instance

**Returns**

- `return` (dmhash_t) - Identifier. dmGameObject::UNNAMED_IDENTIFIER if not set.

### GetInstanceFromIdentifier
*Type:* FUNCTION
Get instance from identifier

**Parameters**

- `collection` (dmGameObject::HCollection) - Collection
- `identifier` (dmhash_t) - Identifier

**Returns**

- `instance` (dmGameObject::HInstance) - Instance. NULL if instance isn't found.

### GetMessageSocket
*Type:* FUNCTION
Retrieve the message socket for the specified collection.

**Parameters**

- `collection` (dmGameObject::HCollection) - Collection handle

**Returns**

- `socket` (dmMessage::HSocket) - The message socket of the specified collection

### GetPosition
*Type:* FUNCTION
Get gameobject instance position

**Parameters**

- `instance` (dmGameObject::HInstance) - Gameobject instance

**Returns**

- `return` (dmVMath::Point3) - Position

### GetRotation
*Type:* FUNCTION
Get gameobject instance rotation

**Parameters**

- `instance` (dmGameObject::HInstance) - Gameobject instance

**Returns**

- `return` (dmGameObject::Quat) - rotation

### GetScale
*Type:* FUNCTION
Get gameobject instance scale

**Parameters**

- `instance` (dmGameObject::HInstance) - Gameobject instance

**Returns**

- `return` (dmGameObject::Vector3) - Non-uniform scale

### GetUniformScale
*Type:* FUNCTION
Get gameobject instance uniform scale

**Parameters**

- `instance` (dmGameObject::HInstance) - Gameobject instance

**Returns**

- `return` (float) - Uniform scale

### GetWorld
*Type:* FUNCTION
Retrieve the world in the collection connected to the supplied component

**Parameters**

- `collection` (HCollection) - Collection handle
- `component_type_index` (uint32_t) - index of the component type

**Returns**

- `world` (void*) - The pointer to the world, 0x0 if not found

### GetWorldMatrix
*Type:* FUNCTION
Get game object instance world transform as Matrix4.

**Parameters**

- `instance` (dmGameObject::HInstance) - Gameobject instance

**Returns**

- `return` (dmGameObject::Matrix4) - World transform matrix.

### GetWorldPosition
*Type:* FUNCTION
Get gameobject instance world position

**Parameters**

- `instance` (dmGameObject::HInstance) - Gameobject instance

**Returns**

- `return` (dmGameObject::Point3) - World position

### GetWorldRotation
*Type:* FUNCTION
Get gameobject instance world rotation

**Parameters**

- `instance` (dmGameObject::HInstance) - Gameobject instance

**Returns**

- `return` (dmGameObject::Quat) - World rotation

### GetWorldScale
*Type:* FUNCTION
Get game object instance world transform

**Parameters**

- `instance` (dmGameObject::HInstance) - Gameobject instance

**Returns**

- `return` (dmGameObject::Vector3) - World scale

### GetWorldTransform
*Type:* FUNCTION
Get game object instance world transform

**Parameters**

- `instance` (dmGameObject::HInstance) - Gameobject instance

**Returns**

- `return` (dmTransform::Transform) - World transform

### GetWorldUniformScale
*Type:* FUNCTION
Get game object instance uniform scale

**Parameters**

- `instance` (dmGameObject::HInstance) - Gameobject instance

**Returns**

- `return` (float) - World uniform scale

### HCollection
*Type:* TYPEDEF
Gameobject collection handle

### HComponent
*Type:* TYPEDEF
Opaque handle to component instance

### HComponentInternal
*Type:* TYPEDEF
Opaque handle to internal representation of a component instance

### HComponentWorld
*Type:* TYPEDEF
Opaque handle to a component world

### HInstance
*Type:* TYPEDEF
Gameobject instance handle

### HProperties
*Type:* TYPEDEF
Gameobject properties handle

### HPropertyContainer
*Type:* TYPEDEF
Handle to a list of properties (gameobject_props.h)

### HPrototype
*Type:* TYPEDEF
Gameobject prototype handle

### HRegister
*Type:* TYPEDEF
Collection register.

### HScript
*Type:* TYPEDEF
Script handle

### HScriptInstance
*Type:* TYPEDEF
Script instance handle

### InputAction
*Type:* STRUCT
Container of input related information.

### InputResult
*Type:* ENUM
Input result enum

**Members**

- `INPUT_RESULT_IGNORED` - = 0
- `INPUT_RESULT_CONSUMED` - = 1
- `INPUT_RESULT_UNKNOWN_ERROR` - = -1000

### InstanceIdMap
*Type:* TYPEDEF
Used for mapping instance ids from a collection definition to newly spawned instances

### InstancePropertyContainers
*Type:* TYPEDEF
Contains property containers for game objects to be spawned

### INVALID_INSTANCE_POOL_INDEX
*Type:* CONSTANT
Value for an invalid instance index, this must be the same as defined in gamesys_ddf.proto for Create#index.

### IsBone
*Type:* FUNCTION
Check whether the instance is flagged as a bone.

**Parameters**

- `instance` (HInstance) - Instance

**Returns**

- `result` (bool) - True if flagged as a bone

### New
*Type:* FUNCTION
Create a new gameobject instance

**Notes**

- Calling this function during update is not permitted. Use #Spawn instead for deferred creation

**Parameters**

- `collection` (dmGameObject::HCollection) - Gameobject collection
- `prototype_name` (const char*) - Prototype file name. May be 0.

**Returns**

- `instance` (dmGameObject::HInstance) - New gameobject instance. NULL if any error occured

### Playback
*Type:* ENUM
Playback type enum

### PropertyDesc
*Type:* STRUCT
Description of a property.
If the property is externally mutable, m_ValuePtr points to the value and its length is m_ElementCount.
m_Variant always reflects the value.

**Members**

- `m_ElementIds` (dmhash_t) - For composite properties (float arrays), these ids name each element
- `m_Variant` (PropertyVar) - Variant holding the value
- `m_ValuePtr` (float*) - Pointer to the value, only set for mutable values. The actual data type is described by the variant.
- `m_ReadOnly` (uint16_t) - Determines whether we are permitted to write to this property.
- `m_ValueType` (uint16_t) - Indicates type of the property (of type PropertyValueType).
- `m_ArrayLength` (uint16_t) - Number of array entries, if the property is an array and zero otherwise. Max supported length is 2^14 (16384 elements)

### PropertyOptions
*Type:* STRUCT
Parameters variant that holds key or index for a propertys data structure.

**Members**

- `m_Index` (int32_t) - The index of the property to set, only applicable if property is array.
- `m_Key` (dmhash_t) - The key of the property to set, only applicable if property is hashtable.
- `m_HasKey` (uint8_t) - A flag if structure contain m_Key value (it can't contain both)

### PropertyResult
*Type:* ENUM
Property result.

**Members**

- `dmGameObject::PROPERTY_RESULT_OK`
- `dmGameObject::PROPERTY_RESULT_NOT_FOUND`
- `dmGameObject::PROPERTY_RESULT_INVALID_FORMAT`
- `dmGameObject::PROPERTY_RESULT_UNSUPPORTED_TYPE`
- `dmGameObject::PROPERTY_RESULT_TYPE_MISMATCH`
- `dmGameObject::PROPERTY_RESULT_COMP_NOT_FOUND`
- `dmGameObject::PROPERTY_RESULT_INVALID_INSTANCE`
- `dmGameObject::PROPERTY_RESULT_BUFFER_OVERFLOW`
- `dmGameObject::PROPERTY_RESULT_UNSUPPORTED_VALUE`
- `dmGameObject::PROPERTY_RESULT_UNSUPPORTED_OPERATION`
- `dmGameObject::PROPERTY_RESULT_RESOURCE_NOT_FOUND`
- `dmGameObject::PROPERTY_RESULT_INVALID_INDEX`
- `dmGameObject::PROPERTY_RESULT_INVALID_KEY`
- `dmGameObject::PROPERTY_RESULT_READ_ONLY`

### PropertyType
*Type:* ENUM
Property types.

**Members**

- `dmGameObject::PROPERTY_TYPE_NUMBER`
- `dmGameObject::PROPERTY_TYPE_HASH`
- `dmGameObject::PROPERTY_TYPE_URL`
- `dmGameObject::PROPERTY_TYPE_VECTOR3`
- `dmGameObject::PROPERTY_TYPE_VECTOR4`
- `dmGameObject::PROPERTY_TYPE_QUAT`
- `dmGameObject::PROPERTY_TYPE_BOOLEAN`
- `dmGameObject::PROPERTY_TYPE_COUNT`

### PropertyValueType
*Type:* ENUM
Type of property value

**Members**

- `dmGameObject::PROP_VALUE_ARRAY`
- `dmGameObject::PROP_VALUE_HASHTABLE`

### PropertyVar
*Type:* STRUCT
Property variant that holds the data for a variable

**Members**

- `m_Type` (dmGameObject::PropertyType) - property type
- `m_Number` (double) - A floating point value (union)
- `m_Hash` (dmhash_t) - A hash value (union)
- `m_Url` (const uin8_t*) - An URL value (union)
- `m_V4` (float) - A vector4 value (union)
- `m_Bool` (bool) - A boolean value (union)

### Result
*Type:* ENUM
Result enumeration.

**Members**

- `dmGameObject::RESULT_OK`
- `dmGameObject::RESULT_OUT_OF_RESOURCES`
- `dmGameObject::RESULT_ALREADY_REGISTERED`
- `dmGameObject::RESULT_IDENTIFIER_IN_USE`
- `dmGameObject::RESULT_IDENTIFIER_ALREADY_SET`
- `dmGameObject::RESULT_COMPONENT_NOT_FOUND`
- `dmGameObject::RESULT_MAXIMUM_HIEARCHICAL_DEPTH`
- `dmGameObject::RESULT_INVALID_OPERATION`
- `dmGameObject::RESULT_RESOURCE_TYPE_NOT_FOUND`
- `dmGameObject::RESULT_BUFFER_OVERFLOW`
- `dmGameObject::RESULT_IDENTIFIER_INVALID`
- `dmGameObject::RESULT_RESOURCE_ERROR`
- `dmGameObject::RESULT_CHILD_NOT_FOUND`
- `dmGameObject::RESULT_INVALID_PROPERTIES`
- `dmGameObject::RESULT_UNABLE_TO_CREATE_COMPONENTS`
- `dmGameObject::RESULT_UNABLE_TO_INIT_INSTANCE`
- `dmGameObject::RESULT_UNKNOWN_ERROR`

### SceneNode
*Type:* STRUCT
Opaque struct that holds info about the current node

**Notes**

- The concept of a `scene node` only exists here, for the purposes of inspecting the scene graph for inspection and testing purposes only.

### SceneNodeIterator
*Type:* STRUCT
Opaque struct that holds info about the current position when traversing the scene

### SceneNodeProperty
*Type:* STRUCT
Struct that holds info about the current position when traversing the scene

**Members**

- `m_NameHash` (dmhash_t) - name
- `m_Type` (dmGameObject::SceneNodePropertyType) - type
- `m_Value` (union) - value

`m_Number`
: [type:double] floating point number

`m_Hash`
: [type:dmhash_t] The hashed value.

`m_URL`
: [type:char[1024]] The text representation of the url (if reverse hashes are enabled)

`m_V4`
: [type:float[4]] Used for Vector3, Vector4 and Quat

`m_Bool`
: [type:bool] A boolean value

`m_Text`
: [type:const char*] Text from a text property

### SceneNodePropertyIterator
*Type:* STRUCT
Holds the property

**Members**

- `m_Property` (dmGameObject::SceneNodeProperty) - property

### SceneNodePropertyType
*Type:* ENUM
scene node property types

**Notes**

- Since we don't support text properties, we'll keep a separate enum here for now

**Members**

- `dmGameObject::SCENE_NODE_PROPERTY_TYPE_NUMBER`
- `dmGameObject::SCENE_NODE_PROPERTY_TYPE_HASH`
- `dmGameObject::SCENE_NODE_PROPERTY_TYPE_URL`
- `dmGameObject::SCENE_NODE_PROPERTY_TYPE_VECTOR3`
- `dmGameObject::SCENE_NODE_PROPERTY_TYPE_VECTOR4`
- `dmGameObject::SCENE_NODE_PROPERTY_TYPE_QUAT`
- `dmGameObject::SCENE_NODE_PROPERTY_TYPE_BOOLEAN`
- `dmGameObject::SCENE_NODE_PROPERTY_TYPE_TEXT`
- `dmGameObject::SCENE_NODE_PROPERTY_TYPE_COUNT`

### SetBone
*Type:* FUNCTION
Set whether the instance should be flagged as a bone.
Instances flagged as bones can have their transforms updated in a batch through SetBoneTransforms.
Used for animated skeletons.

**Parameters**

- `instance` (HInstance) - Instance
- `bone` (bool) - true if the instance is a bone

### SetBoneTransforms
*Type:* FUNCTION
Set the local transforms recursively of all instances flagged as bones, starting with component with id.
The order of the transforms is depth-first.

**Parameters**

- `instance` (HInstance) - First Instance of the hierarchy to set
- `component_transform` (dmTransform::Transform) - the transform for component root
- `transforms` (dmTransform::Transform*) - Array of transforms to set depth-first for the bone instances
- `transform_count` (uint32_t) - Size of the transforms array

**Returns**

- `Number` - of instances found

### SetIdentifier
*Type:* FUNCTION
Set instance identifier. Must be unique within the collection.

**Parameters**

- `collection` (dmGameObject::HCollection) - Collection
- `instance` (dmGameObject::HInstance) - Instance
- `identifier` (dmhash_t) - Identifier

**Returns**

- `result` (dmGameObject::Result) - RESULT_OK on success

### SetPosition
*Type:* FUNCTION
Set gameobject instance position

**Parameters**

- `instance` (dmGameObject::HInstance) - Gameobject instance
- `position` (dmVMath::Point3) - New Position

### SetRotation
*Type:* FUNCTION
Set gameobject instance rotation

**Parameters**

- `instance` (dmGameObject::HInstance) - Gameobject instance
- `rotation` (dmVmath::Quat) - New rotation

### SetScale
*Type:* FUNCTION
Set gameobject instance uniform scale

**Parameters**

- `instance` (dmGameObject::HInstance) - Gameobject instance
- `scale` (float) - New uniform scale

### SetScale
*Type:* FUNCTION
Set gameobject instance non-uniform scale

**Parameters**

- `instance` (dmGameObject::HInstance) - Gameobject instance
- `scale` (dmVmath::Vector3) - New non-uniform scale

### SetScaleXY
*Type:* FUNCTION
Set gameobject instance x and y scale

**Parameters**

- `instance` (dmGameObject::HInstance) - Gameobject instance
- `scale_x` - New x scale
- `scale_y` - New y scale

### Spawn
*Type:* FUNCTION
Spawns a new gameobject instance. The actual creation is performed after the update is completed.

**Parameters**

- `collection` (HCollection) - Gameobject collection
- `prototype` (HPrototype) - Prototype
- `prototype_name` (const char*) - Prototype file name (.goc)
- `id` (dmhash_t) - Id of the spawned instance
- `properties` (HPropertyContainer) - Container with override properties
- `position` (dmVMath::Vector3) - Position of the spawed object
- `rotation` (dmVMath::Quat) - Rotation of the spawned object
- `scale` (dmVMath::Vector3) - Scale of the spawned object
return instance <span class="type"> HInstance</span> the spawned instance, 0 at failure

### TraverseGetRoot
*Type:* FUNCTION
Gets the top node of the whole game (the main collection)

**Notes**

- The dmGameObject::HRegister is obtained from the `dmEngine::GetGameObjectRegister(dmExtension::AppParams)`
- Traversing the scene like this is not efficient. These functions are here for inspection and testing purposes only.

**Parameters**

- `regist` (dmGameObject::HRegister) - the full gameobject register
- `node` (dmGameObject::HRegister) - the node to inspect

**Returns**

- `result` (bool) - True if successful

**Examples**

The following examples show how to iterate over currently loaded scene graph
```
void OutputNode(dmGameObject::SceneNode* node) {
    dmGameObject::SceneNodeIterator it = dmGameObject::TraverseIterateChildren(node);
    while(dmGameObject::TraverseIterateNext(&it))
    {
        OutputProperties(&it.m_Node); // see dmGameObject::TraverseIterateProperties()
        OutputNode(&it.m_Node);
    }
}

bool OutputScene(HRegister regist) {
    dmGameObject::SceneNode root;
    if (!dmGameObject::TraverseGetRoot(regist, &root))
        return false;
    OutputNode(&node);
}

```

### TraverseIterateChildren
*Type:* FUNCTION
Get a scene node iterator for the nodes' children

**Parameters**

- `node` (dmGameObject::SceneNode*) - the parent node

**Returns**

- `iterator` (dmGameObject::SceneNodeIterator) - the iterator

### TraverseIterateNext
*Type:* FUNCTION
Step a scene node iterator to the next sibling

**Parameters**

- `it` (dmGameObject::SceneNodeIterator*) - the iterator

**Returns**

- `result` (bool) - true if successful. false if the iterator is finished

### TraverseIterateProperties
*Type:* FUNCTION
Create a scene node traversal property iterator

**Notes**

- Getting the properties like this is not efficient. These functions are here for inspection and testing purposes only.
- Reverse hashes via `dmHashReverseSafe64()` isn't available in release builds.

**Parameters**

- `node` (dmGameObject::SceneNode*) - the node to inspect

**Returns**

- `iterator` (dmGameObject::SceneNodePropertyIterator) - the property iterator

**Examples**

The following examples show how to iterate over the properties of a node
```
dmGameObject::SceneNodePropertyIterator pit = TraverseIterateProperties(node);
while(dmGameObject::TraverseIteratePropertiesNext(&pit))
{
    const char* name = dmHashReverseSafe64(pit.m_Property.m_NameHash);
    switch(pit.m_Property.m_Type)
    {
    case dmGameObject::SCENE_NODE_PROPERTY_TYPE_NUMBER: ...
    ...
    }
}

```

### TraverseIteratePropertiesNext
*Type:* FUNCTION
Steps the scene node traversal property iterator to the next property

**Parameters**

- `it` (dmGameObject::SceneNodePropertyIterator*) - the iterator

**Returns**

- `finished` (bool) - True if the iterator it valid, false if the iterator is finished.

### UpdateContext
*Type:* STRUCT
Update context

**Members**

- `m_TimeScale` (float) - the scaling factor what was applied on the dt (i.e. the collection update time scale)
- `m_DT` (float) - the delta time elapsed since last frame (seconds)
- `m_FixedUpdateFrequency` (uint32_t) - Number of of calls per second to the FixedUpdate of each component

### UpdateResult
*Type:* ENUM
Update result enum.

**Members**

- `dmGameObject::UPDATE_RESULT_OK`
- `dmGameObject::UPDATE_RESULT_UNKNOWN_ERROR`

<!-- engine-gameobject-src-dmsdk-gameobject-gameobject_props-h -->

# PropertyContainer {#apis:engine-gameobject-src-dmsdk-gameobject-gameobject_props-h}

**Namespace:** `dmGameObject`
**Language:** C++
**Type:** Defold C++
**File:** `gameobject_props.h`
**Source:** `engine/gameobject/src/dmsdk/gameobject/gameobject_props.h`
**Include:** `dmsdk/gameobject/gameobject_props.h`

API for game object property container

## API

### HPropertyContainer
*Type:* TYPEDEF
Opaque handle to a list of properties

### HPropertyContainerBuilder
*Type:* TYPEDEF
Opaque handle to a property container builder

### PropertyContainerBuilderParams
*Type:* STRUCT
PropertyContainerBuilderParams
Helper struct to create a property container builder.
It is required to fill out how many items of each type that is wanted.

**Parameters**

- `m_NumberCount` (int32_t) - Number of items of type float
- `m_HashCount` (int32_t) - Number of items of type dmhash_t
- `m_URLStringCount` (int32_t) - Number of items of type const char*
- `m_URLStringSize` (int32_t) - Size of all url strings combined, including null terminators
- `m_URLCount` (int32_t) - Number of items of type dmMessage::URL
- `m_Vector3Count` (int32_t) - Number of items of type vector3 (float[3])
- `m_Vector4Count` (int32_t) - Number of items of type vector4 (float[4])
- `m_QuatCount` (int32_t) - Number of items of type quaternion (float[4])
- `m_BoolCount` (int32_t) - Number of items of type bool

### PropertyContainerCopy
*Type:* FUNCTION
Allocates and copies a property container

**Parameters**

- `original` (HPropertyContainer) - The original property container

**Returns**

- `container` (HPropertyContainer) - The new property container

### PropertyContainerCreate
*Type:* FUNCTION
Creates the final property container

**Parameters**

- `builder` (HPropertyContainerBuilder) - The property container builder

**Returns**

- `container` (HPropertyContainer) - The property container

### PropertyContainerCreateBuilder
*Type:* FUNCTION
Create a property container builder with memory preallocated

**Parameters**

- `params` (PropertyContainerBuilderParams) - The params holding the memory requirements

**Returns**

- `container` (HPropertyContainerBuilder) - The builder

### PropertyContainerDestroy
*Type:* FUNCTION
Deallocates a property container

**Parameters**

- `container` (HPropertyContainer) - The property container

### PropertyContainerMerge
*Type:* FUNCTION
Merges two containers into a newly allocated container
The properties in the overrides container will take presedence.

**Parameters**

- `original` (HPropertyContainer) - The original property container
- `overrides` (HPropertyContainer) - The container with override properties

**Returns**

- `container` (HPropertyContainer) - The merged property container

### PropertyContainerPushBool
*Type:* FUNCTION
Add a property of type bool to the container

**Parameters**

- `builder` (HPropertyContainerBuilder) - The container builder
- `id` (dmhash_t) - The id of the property
- `value` (bool) - The value of the property

### PropertyContainerPushFloat
*Type:* FUNCTION
Add a property of type float to the container

**Parameters**

- `builder` (HPropertyContainerBuilder) - The container builder
- `id` (dmhash_t) - The id of the property
- `value` (float) - The value of the property

### PropertyContainerPushHash
*Type:* FUNCTION
Add a property of type dmhash_t to the container

**Parameters**

- `builder` (HPropertyContainerBuilder) - The container builder
- `id` (dmhash_t) - The id of the property
- `value` (dmhash_t) - The value of the property

### PropertyContainerPushQuat
*Type:* FUNCTION
Add a property of type float4 to the container

**Parameters**

- `builder` (HPropertyContainerBuilder) - The container builder
- `id` (dmhash_t) - The id of the property
- `values` (float*) - The value of the property (4 floats)

### PropertyContainerPushURL
*Type:* FUNCTION
Add a property of type dmMessage::URL to the container

**Parameters**

- `builder` (HPropertyContainerBuilder) - The container builder
- `id` (dmhash_t) - The id of the property
- `value` (dmMessage::URL) - The value of the property

### PropertyContainerPushURLString
*Type:* FUNCTION
Add a property of type (url) string to the container

**Parameters**

- `builder` (HPropertyContainerBuilder) - The container builder
- `id` (dmhash_t) - The id of the property
- `value` (const char*) - The value of the property

### PropertyContainerPushVector3
*Type:* FUNCTION
Add a property of type float3 to the container

**Parameters**

- `builder` (HPropertyContainerBuilder) - The container builder
- `id` (dmhash_t) - The id of the property
- `values` (float*) - The value of the property (3 floats)

### PropertyContainerPushVector4
*Type:* FUNCTION
Add a property of type float4 to the container

**Parameters**

- `builder` (HPropertyContainerBuilder) - The container builder
- `id` (dmhash_t) - The id of the property
- `values` (float*) - The value of the property (4 floats)

<!-- engine-gameobject-src-dmsdk-gameobject-script-h -->

# Script {#apis:engine-gameobject-src-dmsdk-gameobject-script-h}

**Namespace:** `dmGameObject`
**Language:** C++
**Type:** Defold C++
**File:** `script.h`
**Source:** `engine/gameobject/src/dmsdk/gameobject/script.h`
**Include:** `dmsdk/gameobject/script.h`

SDK GameObject script API documentation

## API

### PostDDF
*Type:* FUNCTION
Sends a script message. Wraps the message in a dmGameSystemDDF::ScriptMessage struct.

**Template Parameters**

- `T`

**Parameters**

- `message` (T*) - The ddf message to send
- `sender` (dmMessage::Message*) - The sender
- `receiver` (dmMessage::Message*) - The receiver
- `function_ref` (int) - The function ref. 0 wil cause the "on_message" to be called
- `unref_function_after_call` (bool) - call dmScript::UnrefInInstance on the function_ref after the dmScript::PCall is made

**Returns**

- `success` (bool) - true if successful

### PostScriptUnrefMessage
*Type:* FUNCTION
Sends a script message to unreference a script object

**Parameters**

- `sender` (dmMessage::Message*) - The sender
- `receiver` (dmMessage::Message*) - The receiver
- `reference` (int) - The reference to remove

**Returns**

- `success` (Result) - RESULT_OK if successful

### PropertyContainerCreateFromLua
*Type:* FUNCTION
Creates a property container from a lua table

**Parameters**

- `L` (lua_State*) - The lua state
- `index` (int) - The lua stack index of the lua table

**Returns**

- `container` (HPropertyContainer) - The property container

<!-- engine-gamesys-src-dmsdk-gamesys-components-comp_collection_factory-h -->

# Collection factory {#apis:engine-gamesys-src-dmsdk-gamesys-components-comp_collection_factory-h}

**Namespace:** `dmGameSystem`
**Language:** C++
**Type:** Defold C++
**File:** `comp_collection_factory.h`
**Source:** `engine/gamesys/src/dmsdk/gamesys/components/comp_collection_factory.h`
**Include:** `dmsdk/gamesys/components/comp_collection_factory.h`

API for spawning collections from a collection factory component.

## API

### CompCollectionFactorySpawn
*Type:* FUNCTION
Spawns a collection of gameobjects in a collection using a collection factory component.

**Parameters**

- `world` (HCollectionFactoryWorld) - Collection factory world
- `component` (HCollectionFactoryComponent) - Collection factory component
- `collection` (HCollection) - Gameobject collection to spawn into
- `id_prefix` (const char*) - Prefix for the spawned instance identifiers. Must start with a forward slash (/). Must be unique within the collection. Pass nullptr to automatically generate a unique identifier prefix (e.g. /collection1, /collection2 etc.).
- `position` (dmVMath::Point3) - Position of the spawned objects
- `rotation` (dmVMath::Quat) - Rotation of the spawned objects
- `scale` (dmVMath::Vector3) - Scale of the spawned objects
- `properties` (dmGameObject::InstancePropertyContainers) - Property containers with override properties
- `out_instances` (dmGameObject::InstanceIdMap) - A map with the spawned instance id's

**Returns**

- `result` (dmGameObject::Result) - Result of the operation

<!-- engine-gamesys-src-dmsdk-gamesys-components-comp_factory-h -->

# Factory {#apis:engine-gamesys-src-dmsdk-gamesys-components-comp_factory-h}

**Namespace:** `dmGameSystem`
**Language:** C++
**Type:** Defold C++
**File:** `comp_factory.h`
**Source:** `engine/gamesys/src/dmsdk/gamesys/components/comp_factory.h`
**Include:** `dmsdk/gamesys/components/comp_factory.h`

API for spawning gameobject instances from a factory component.

## API

### CompFactorySpawn
*Type:* FUNCTION
Spawns a new gameobject instance in a collection using a factory component.

**Parameters**

- `world` (HFactoryWorld) - Factory world
- `component` (HFactoryComponent) - Factory component
- `collection` (HCollection) - Gameobject collection to spawn into
- `id` (dmhash_t) - Identifier for the new instance. Must be unique within the collection. Pass 0 to automatically generate a unique identifier (e.g. /instance1, /instance2 etc.).
- `position` (dmVMath::Point3) - Position of the spawned object
- `rotation` (dmVMath::Quat) - Rotation of the spawned object
- `scale` (dmVMath::Vector3) - Scale of the spawned object
- `properties` (dmGameObject::HPropertyContainer) - Property container with override properties
- `out_instance` (dmGameObject::HInstance) - Output parameter for the new instance

**Returns**

- `result` (dmGameObject::Result) - Result of the operation

<!-- engine-gamesys-src-dmsdk-gamesys-gui-h -->

# GameSystem Gui {#apis:engine-gamesys-src-dmsdk-gamesys-gui-h}

**Namespace:** `dmGameSystem`
**Language:** C++
**Type:** Defold C++
**File:** `gui.h`
**Source:** `engine/gamesys/src/dmsdk/gamesys/gui.h`
**Include:** `dmsdk/gamesys/gui.h`

Built-in scripting functions.

## API

### CompGuiNodeTypeCtx
*Type:* STRUCT
Gui component node type create/destroy context

### DM_DECLARE_COMPGUI_TYPE
*Type:* MACRO
Registers a new gui node type to the Gui component

**Parameters**

- `symbol` (symbol) - The unique C++ symbol name
- `name` (const char*) - The name of the node type
- `type_create_fn` (GuiNodeTypeCreateFunction) - the create function
- `type_destroy_fn` (GuiNodeTypeDestroyFunction) - the destroy function. May be 0

### GuiNodeType
*Type:* STRUCT
Gui component node type

### GuiNodeTypeCreateFunction
*Type:* TYPEDEF

### GuiNodeTypeDestroyFunction
*Type:* TYPEDEF

<!-- engine-gamesys-src-dmsdk-gamesys-property-h -->

# Property {#apis:engine-gamesys-src-dmsdk-gamesys-property-h}

**Namespace:** `dmGameSystem`
**Language:** C++
**Type:** Defold C++
**File:** `property.h`
**Source:** `engine/gamesys/src/dmsdk/gamesys/property.h`
**Include:** `dmsdk/gamesys/property.h`

Property functions.

## API

### GetResourceProperty
*Type:* FUNCTION
Gets the resource path hash

**Parameters**

- `property` (const PropVector4&) - the property
- `resource` (void*) - the resource to get the
- `out_value` (dmGameObject::PropertyDesc&) - the out property

**Returns**

- `result` (dmGameObject::PropertyResult) - RESULT_OK if successful

### IsReferencingProperty
*Type:* FUNCTION
Checks if the name matches any field in the property

**Parameters**

- `property` (const PropVector3&) - the property
- `query` (dmhash_t) - the name to look for (e.g. hash("pos.x"))

**Returns**

- `result` (bool) - true if the property contains the name

### IsReferencingProperty
*Type:* FUNCTION
Checks if the name matches any field in the property

**Parameters**

- `property` (const PropVector4&) - the property
- `query` (dmhash_t) - the name to look for (e.g. hash("pos.x"))

**Returns**

- `result` (bool) - true if the property contains the name

### PropVector3
*Type:* STRUCT

### PropVector4
*Type:* STRUCT

### SetResourceProperty
*Type:* FUNCTION
Updates the reference count of the resources, and returns the new resource.

**Parameters**

- `factory` (dmGameObject::HFactory) - the factory
- `value` (const dmGameObject::PropertyVar&) - the property containing the hash of the resources to get
- `ext` (dmhash_t) - the hash of the resource file suffix (without the "."). E.g. hash("spritec")
- `out_resource` (void**) - pointer to the current resource. Will also get the pointer to the new resource.

**Returns**

- `result` (dmGameObject::PropertyResult) - RESULT_OK if successful

<!-- engine-gamesys-src-dmsdk-gamesys-render_constants-h -->

# Component Render Constants {#apis:engine-gamesys-src-dmsdk-gamesys-render_constants-h}

**Namespace:** `dmGameSystem`
**Language:** C++
**Type:** Defold C++
**File:** `render_constants.h`
**Source:** `engine/gamesys/src/dmsdk/gamesys/render_constants.h`
**Include:** `dmsdk/gamesys/render_constants.h`

Api for setting and updating component render constants

## API

### AreRenderConstantsUpdated
*Type:* FUNCTION
check if the constants have changed

**Parameters**

- `constants` (dmGameSystem::HComponentRenderConstants) - the constants

**Returns**

- `result` (int) - non zero if the constants were changed

### ClearRenderConstant
*Type:* FUNCTION
Removes a render constant from the container

**Parameters**

- `constants` (dmGameSystem::HComponentRenderConstants) - the constants
- `name_hash` (dmhash_t) - the hashed name of the constant

**Returns**

- `result` (int) - non zero if the constant was removed

### CompGetConstantCallback
*Type:* TYPEDEF
Used in GetMaterialConstant to resolve a render constant's value

### CompSetConstantCallback
*Type:* TYPEDEF
Used in SetMaterialConstant to set a render constant's value

### CreateRenderConstants
*Type:* FUNCTION
Create a new HComponentRenderConstants container

**Returns**

- `constants` (dmGameSystem::HComponentRenderConstants)

### DestroyRenderConstants
*Type:* FUNCTION
Destroys a render constants container

**Parameters**

- `constants` (dmGameSystem::HComponentRenderConstants) - (must not be 0)

### EnableRenderObjectConstants
*Type:* FUNCTION
set the constants of a render object

**Parameters**

- `ro` (dmRender::RenderObject*) - the render object
- `constants` (dmGameSystem::HComponentRenderConstants) - the constants

### GetRenderConstant
*Type:* FUNCTION
Destroys a render constants container

**Parameters**

- `constants` (dmGameSystem::HComponentRenderConstants) - the constants
- `name_hash` (dmhash_t) - the hashed name of the property
- `out_constant` (dmRender::Constant**) - the pointer where to store the constant

**Returns**

- `result` (bool) - returns true if the constant exists

### GetRenderConstant
*Type:* FUNCTION
Get a render constant by index

**Parameters**

- `constants` (dmGameSystem::HComponentRenderConstants) - the constants
- `index` (uint32_t) - the index

**Returns**

- `constant` (dmRender::HConstant) - the pointer where to store the constant

### GetRenderConstantCount
*Type:* FUNCTION
Get the number of render constants

**Parameters**

- `constants` (dmGameSystem::HComponentRenderConstants) - the constants

**Returns**

- `size` (uint32_t) - returns the number of set constants

### HashRenderConstants
*Type:* FUNCTION
Hashes the constants

**Notes**

- Also updates the internal state of the constants container. After a call to this function, the `AreRenderConstantsUpdated` will always return false.

**Parameters**

- `constants` (dmGameSystem::HComponentRenderConstants) - the constants
- `state` (HashState32*) - the hash state to update

### HashState32
*Type:* TYPEDEF
Found in hash.h

### HComponentRenderConstants
*Type:* TYPEDEF
Render constants handle

### SetRenderConstant
*Type:* FUNCTION
Set a render constant by name. The constant must exist in the material

**Parameters**

- `constants` (dmGameSystem::HComponentRenderConstants) - the render constants buffer
- `material` (dmRender::HMaterial) - the material to get default values from if constant didn't already exist in the render constants buffer
- `name_hash` (dmhash_t) - the hashed name of the constant
- `value_index` (uint32_t) - index of the constant value to set, if the constant is an array
- `element_index` (uint32_t*) - pointer to the index of the element (in range [0,3]). May be 0
- `var` (const dmGameObject::PropertyVar&) - the constant value

### SetRenderConstant
*Type:* FUNCTION
Set a render constant by name. The constant must exist in the material

**Parameters**

- `constants` (dmGameSystem::HComponentRenderConstants) - the constants
- `name_hash` (dmhash_t) - the hashed name of the constant
- `values` (dmVMath::Vector4*) - the values
- `num_values` (uint32_t) - number of values in the array

<!-- engine-gamesys-src-dmsdk-gamesys-resources-res_font-h -->

# Font Resource {#apis:engine-gamesys-src-dmsdk-gamesys-resources-res_font-h}

**Namespace:** `dmGameSystem`
**Language:** C++
**Type:** Defold C++
**File:** `res_font.h`
**Source:** `engine/gamesys/src/dmsdk/gamesys/resources/res_font.h`
**Include:** `dmsdk/gamesys/resources/res_font.h`

Font resource functions.

## API

### FontInfo
*Type:* STRUCT
Used to retrieve the information of a font.

**Members**

- `m_Size` (uint32_t) - The size of the font (in points)
- `m_ShadowX` (float) - The shadow distance in X-axis (in pixels)
- `m_ShadowY` (float) - The shadow distance in Y-axis (in pixels)
- `m_ShadowBlur` (uint32_t) - The shadow blur spread [0.255] (in pixels)
- `m_ShadowAlpha` (float) - The shadow alpha value [0..255]
- `m_Alpha` (float) - The alpha value [0..255]
- `m_OutlineAlpha` (float) - The outline alpha value [0..255]
- `m_OutlineWidth` (float) - The outline size (in pixels)
- `m_OutputFormat` (dmRenderDDF::FontTextureFormat) - The type of font (bitmap or distance field)
- `m_RenderMode` (dmRenderDDF::FontRenderMode) - Single or multi channel

### FontResource
*Type:* STRUCT
Handle to font resource

### FPrewarmTextCallback
*Type:* TYPEDEF

**Parameters**

- `ctx` (void*) - The callback context
- `result` (int) - The result of the prewarming. Non zero if successful
- `errmsg` (const char*) - An error message if not successful.

### PrewarmText
*Type:* FUNCTION
Make sure each glyph in the text gets rasterized and put into the glyph cache

**Parameters**

- `font` (FontResource*) - The font resource
- `text` (const char*) - The text (utf8)
- `cbk` (FPrewarmTextCallback) - The callback is called when the last item is done
- `cbk_ctx` (void*) - The callback context

**Returns**

- `result` (dmResource::Result) - RESULT_OK if successful

### ResFontAddFontByPath
*Type:* FUNCTION
add a ttf font to a font collection

**Notes**

- Loads the resource if not already loaded

**Parameters**

- `factory` (dmResource::HFactory) - The factory
- `font` (FontResource*) - The font collection (.fontc)
- `ttf_path` (const char*) - The .ttf path

**Returns**

- `result` (dmResource::Result) - RESULT_OK if successful

### ResFontAddFontByPathHash
*Type:* FUNCTION
add a ttf font to a font collection

**Notes**

- the ttf resource must already be loaded

**Parameters**

- `factory` (dmResource::HFactory) - The factory
- `font` (FontResource*) - The font collection (.fontc)
- `ttf_hash` (dmhash_t) - The ttf path hash (.ttf)

**Returns**

- `result` (dmResource::Result) - RESULT_OK if successful

### ResFontAddGlyph
*Type:* FUNCTION

**Parameters**

- `font` (FontResource*) - The font resource
- `hfont` (HFont) - The font the glyph was created from
- `glyph_index` (uint32_t) - The glyph index

**Returns**

- `result` (bool) - true if the glyph already has rasterized bitmap data

### ResFontAddGlyph
*Type:* FUNCTION

**Parameters**

- `font` (FontResource*) - The font resource
- `hfont` (HFont) - The font the glyph was created from
- `glyph` (FontGlyph*) - The glyph

**Returns**

- `result` (dmResource::Result) - RESULT_OK if successful

### ResFontGetFontCollection
*Type:* FUNCTION

**Parameters**

- `resource` (FontResource*) - The font resource

**Returns**

- `font_collection` (HFontCollection*) - The font collection if successful. 0 otherwise.

### ResFontGetHandle
*Type:* FUNCTION

**Parameters**

- `font` (FontResource*) - The font resource

**Returns**

- `result` (dmRender::HFontMap) - Handle to a font if successful. 0 otherwise.

### ResFontGetInfo
*Type:* FUNCTION

**Parameters**

- `font` (FontResource*) - The font resource to query
- `info` (FontInfo*) - The output info (out)

**Returns**

- `result` (dmResource::Result) - RESULT_OK if successful

### ResFontGetPathHashFromFont
*Type:* FUNCTION

**Parameters**

- `resource` (FontResource*) - The font resource
- `font` (HFont) - The font

**Returns**

- `path_hash` (dmhash_t) - The path hash to the associated TTFresource*

### ResFontGetTTFResourceFromFont
*Type:* FUNCTION

**Parameters**

- `resource` (FontResource*) - The font resource
- `font` (HFont) - The font

**Returns**

- `ttfresource` (TTFResource*) - The ttfresource if successful. 0 otherwise.

### ResFontRemoveFont
*Type:* FUNCTION
remove a ttf font from a font collection

**Parameters**

- `factory` (dmResource::HFactory) - The factory
- `font` (FontResource*) - The font collection (.fontc)
- `ttf_hash` (dmhash_t) - The ttf path hash (.ttf)

**Returns**

- `result` (dmResource::Result) - RESULT_OK if successful

### SDF_EDGE_VALUE
*Type:* CONSTANT
The edge value of an sdf glyph bitmap

<!-- engine-gamesys-src-dmsdk-gamesys-script-h -->

# Script {#apis:engine-gamesys-src-dmsdk-gamesys-script-h}

**Namespace:** `dmScript`
**Language:** C++
**Type:** Defold C++
**File:** `script.h`
**Source:** `engine/gamesys/src/dmsdk/gamesys/script.h`
**Include:** `dmsdk/gamesys/script.h`

Built-in scripting functions.

## API

### CheckCollection
*Type:* FUNCTION
Get current gameobject's collection handle

**Notes**

- Works from both a .script/.gui_script

**Parameters**

- `L` (lua_State*) - lua state
- `index` (int) - lua-arg

**Returns**

- `instance` (lua_State*) - gameobject instance

### CheckGOInstance
*Type:* FUNCTION
Get current game object instance
Works in both gameobjects and gui scripts

**Parameters**

- `L` (lua_State*) - lua state

**Returns**

- `instance` (dmGameObject::HInstance)

### CheckGOInstance
*Type:* FUNCTION
Get gameobject instance
The instance reference (url) at stack index "index" will be resolved to an instance.

**Notes**

- The function only accepts instances in "this" collection. Otherwise a lua-error will be raised.

**Parameters**

- `L` (lua_State*) - lua state
- `index` (int) - lua-arg

**Returns**

- `instance` (dmGameObject::HInstance) - gameobject instance

**Examples**

How to get the position of a gameobject in a script extension
```
static int get_position(lua_State* L)
{
    DM_LUA_STACK_CHECK(L, 3);
    dmGameObject::HInstance instance = dmScript::CheckGOInstance(L, 1);
    dmVMath::Point3 position = dmGameObject::GetPosition(instance);
    lua_pushnumber(L, position.getX());
    lua_pushnumber(L, position.getY());
    lua_pushnumber(L, position.getZ());
    return 3;
}

```

### dmScript::CheckBuffer
*Type:* FUNCTION
Retrieve a LuaHBuffer from the supplied lua state.
Check if the value in the supplied index on the lua stack is a LuaHBuffer and returns it.

**Notes**

- The dmBuffer::IsBufferValid is already called on the returned buffer

**Parameters**

- `L` (lua_State*) - lua state
- `index` (int) - Index of the value

**Returns**

- `buffer` (LuaHBuffer*) - pointer to dmScript::LuaHBuffer

### dmScript::CheckBufferNoError
*Type:* FUNCTION
Retrieve a LuaHBuffer from the supplied lua state.
Check if the value in the supplied index on the lua stack is a LuaHBuffer and returns it.

**Notes**

- Returns 0 on error. Does not invoke lua_error.
- deprecated. Prefer ToBuffer() instead.
- The dmBuffer::IsBufferValid is already called on the returned buffer

**Parameters**

- `L` (lua_State*) - lua state
- `index` (int) - Index of the value

**Returns**

- `buffer` (LuaHBuffer*) - pointer to dmScript::LuaHBuffer or 0 if not valid

### dmScript::CheckBufferUnpack
*Type:* FUNCTION
Retrieve a HBuffer from the supplied lua state
Check if the value in the supplied index on the lua stack is a LuaHBuffer and it's valid, returns the HBuffer.

**Notes**

- The dmBuffer::IsBufferValid is already called on the returned buffer

**Parameters**

- `L` (lua_State*) - lua state
- `index` (int) - Index of the value

**Returns**

- `buffer` (dmBuffer::HBuffer) - buffer if valid, 0 otherwise

### dmScript::CheckBufferUnpackNoError
*Type:* FUNCTION
Retrieve a HBuffer from the supplied lua state
Check if the value in the supplied index on the lua stack is a LuaHBuffer and it's valid, returns the HBuffer.

**Notes**

- The dmBuffer::IsBufferValid is already called on the returned buffer

**Parameters**

- `L` (lua_State*) - lua state
- `index` (int) - Index of the value

**Returns**

- `buffer` (dmBuffer::HBuffer) - buffer if valid, 0 otherwise

### dmScript::IsBuffer
*Type:* FUNCTION
Check if the value is a dmScript::LuaHBuffer

**Parameters**

- `L` (lua_State*) - lua state
- `index` (int) - Index of the value

**Returns**

- `boolean` (boolean) - True if value at index is a LuaHBuffer

### dmScript::LuaHBuffer
*Type:* STRUCT
Holds info about the buffer and who owns it.

**Members**

- `Union` - of
    - m_BufferRes [type:void*]                       A buffer resource
    - m_Buffer    [type:dmBuffer::HBuffer]           A buffer
- `m_Buffer` (dmBuffer::HBuffer) - The buffer (or resource)
- `m_Owner` (dmScript::LuaBufferOwnership) - What ownership the pointer has

**Examples**

See examples for dmScript::PushBuffer()

### dmScript::PushBuffer
*Type:* FUNCTION
Will increase the stack by 1.

**Parameters**

- `L` (lua_State*) - lua state
- `buffer` (dmScript::LuaHBuffer) - buffer to push

**Examples**

How to push a buffer and give Lua ownership of the buffer (GC)
```
dmScript::LuaHBuffer luabuf(buffer, dmScript::OWNER_LUA);
PushBuffer(L, luabuf);

```

How to push a buffer and keep ownership in C++
```
dmScript::LuaHBuffer luabuf(buffer, dmScript::OWNER_C);
PushBuffer(L, luabuf);

```

### dmScript::ToBuffer
*Type:* FUNCTION
Retrieve a LuaHBuffer from the supplied lua state.
Check if the value in the supplied index on the lua stack is a LuaHBuffer and returns it.

**Notes**

- Returns 0 on error. Does not invoke lua_error.
- The dmBuffer::IsBufferValid is already called on the returned buffer

**Parameters**

- `L` (lua_State*) - lua state
- `index` (int) - Index of the value

**Returns**

- `buffer` (LuaHBuffer*) - pointer to dmScript::LuaHBuffer or 0 if not valid

### GetComponentFromLua
*Type:* FUNCTION
Get component user data from a url.

**Notes**

- The object referenced by the url must be in the same collection as the caller.

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - index to argument (a url)
- `component_type` (const char*) - E.g. "factoryc". The call will fail if the found component does not have the specified extension
- `world` (dmGameObject::HComponentWorld*) - The world associated owning the component. May be 0
- `component` (dmGameObject::HComponent*) - The component data associated with the url. May be 0
- `url` (dmMessage::URL*) - The resolved url. May be 0

### LuaBufferOwnership
*Type:* ENUM
Buffer ownership.
 - OWNER_C   - m_Buffer is owned by C side, should not be destroyed when GCed
 - OWNER_LUA - m_Buffer is owned by Lua side, will be destroyed when GCed
 - OWNER_RES - m_Buffer not used, has a reference to a buffer resource instead. m_BufferRes is owned by C side, will be released when GCed

**Members**

- `dmScript::OWNER_C`
- `dmScript::OWNER_LUA`
- `dmScript::OWNER_RES`

<!-- engine-graphics-src-dmsdk-graphics-graphics-h -->

# Graphics {#apis:engine-graphics-src-dmsdk-graphics-graphics-h}

**Namespace:** `dmGraphics`
**Language:** C++
**Type:** Defold C++
**File:** `graphics.h`
**Source:** `engine/graphics/src/dmsdk/graphics/graphics.h`
**Include:** `dmsdk/graphics/graphics.h`

Graphics API

## API

### AdapterFamily
*Type:* ENUM
Graphics adapter family.
Identifies the type of graphics backend used by the rendering system

**Members**

- `ADAPTER_FAMILY_NONE` -      No adapter detected. Used as an error state or uninitialized value
- `ADAPTER_FAMILY_NULL` -      Null (dummy) backend. Used for headless operation, testing, or environments where rendering output is not required
- `ADAPTER_FAMILY_OPENGL` -    OpenGL desktop backend. Common on Windows, macOS and Linux systems
- `ADAPTER_FAMILY_OPENGLES` -  OpenGL ES backend. Primarily used on mobile devices (Android, iOS), as well as WebGL (browser)
- `ADAPTER_FAMILY_VULKAN` -    Vulkan backend. Cross-platform modern graphics API with explicit control over GPU resources and multithreading
- `ADAPTER_FAMILY_VENDOR` -    Vendor-specific backend. A placeholder for proprietary or experimental APIs tied to a particular GPU vendor.
- `ADAPTER_FAMILY_WEBGPU` -    WebGPU backend. Modern web graphics API designed as the successor to WebGL
- `ADAPTER_FAMILY_DIRECTX` -   DirectX backend. Microsofts graphics API used on Windows and Xbox

### AddVertexStream
*Type:* FUNCTION
Adds a stream to a vertex stream declaration

**Parameters**

- `name` (const char*) - the name of the stream
- `size` (uint32_t) - the size of the stream, i.e number of components
- `type` (dmGraphics::Type) - the data type of the stream
- `normalize` (bool) - true if the stream should be normalized in the 0..1 range

### AddVertexStream
*Type:* FUNCTION
Adds a stream to a vertex stream declaration

**Parameters**

- `name_hash` (dmhash_t) - the name hash of the stream
- `size` (uint32_t) - the size of the stream, i.e number of components
- `type` (dmGraphics::Type) - the data type of the stream
- `normalize` (bool) - true if the stream should be normalized in the 0..1 range

### AttachmentOp
*Type:* ENUM
Defines how an attachment should be treated at the start and end of a render pass

**Members**

- `ATTACHMENT_OP_DONT_CARE` - Ignore existing content, no guarantees about the result
- `ATTACHMENT_OP_LOAD` -      Preserve the existing contents of the attachment
- `ATTACHMENT_OP_STORE` -     Store the attachments results after the pass finishes
- `ATTACHMENT_OP_CLEAR` -     Clear the attachment to a predefined value at the beginning of the pass

### BlendFactor
*Type:* ENUM
Blend factors for color blending.
Defines how source and destination colors are combined

**Members**

- `BLEND_FACTOR_ZERO` -                        Always use 0.0
- `BLEND_FACTOR_ONE` -                         Always use 1.0
- `BLEND_FACTOR_SRC_COLOR` -                   Use source color
- `BLEND_FACTOR_ONE_MINUS_SRC_COLOR` -         Use (1 - source color)
- `BLEND_FACTOR_DST_COLOR` -                   Use destination color
- `BLEND_FACTOR_ONE_MINUS_DST_COLOR` -         Use (1 - destination color)
- `BLEND_FACTOR_SRC_ALPHA` -                   Use source alpha
- `BLEND_FACTOR_ONE_MINUS_SRC_ALPHA` -         Use (1 - source alpha)
- `BLEND_FACTOR_DST_ALPHA` -                   Use destination alpha
- `BLEND_FACTOR_ONE_MINUS_DST_ALPHA` -         Use (1 - destination alpha)
- `BLEND_FACTOR_SRC_ALPHA_SATURATE` -          Use min(srcAlpha, 1 - dstAlpha)
- `BLEND_FACTOR_CONSTANT_COLOR`
- `BLEND_FACTOR_ONE_MINUS_CONSTANT_COLOR`
- `BLEND_FACTOR_CONSTANT_ALPHA`
- `BLEND_FACTOR_ONE_MINUS_CONSTANT_ALPHA`

### BufferAccess
*Type:* ENUM

**Members**

- `BUFFER_ACCESS_READ_ONLY`
- `BUFFER_ACCESS_WRITE_ONLY`
- `BUFFER_ACCESS_READ_WRITE`

### BufferUsage
*Type:* ENUM
Buffer usage hints.
Indicates how often the data in a buffer will be updated.
Helps the driver optimize memory placement

**Members**

- `BUFFER_USAGE_STREAM_DRAW` -     Updated every frame, used once (e.g. dynamic geometry)
- `BUFFER_USAGE_DYNAMIC_DRAW` -    Updated occasionally, used many times
- `BUFFER_USAGE_STATIC_DRAW` -     Set once, used many times (e.g. meshes, textures). Preferred for buffers that never change

### CompareFunc
*Type:* ENUM
Depth and alpha test comparison functions.
Defines how incoming values are compared against stored ones

**Members**

- `COMPARE_FUNC_NEVER` -        Never passes.
- `COMPARE_FUNC_LESS` -         Passes if incoming < stored
- `COMPARE_FUNC_LEQUAL` -       Passes if incoming <= stored
- `COMPARE_FUNC_GREATER` -      Passes if incoming > stored
- `COMPARE_FUNC_GEQUAL` -       Passes if incoming >= stored
- `COMPARE_FUNC_EQUAL` -        Passes if incoming == stored
- `COMPARE_FUNC_NOTEQUAL` -     Passes if incoming != stored
- `COMPARE_FUNC_ALWAYS` -       Always passes (ignores stored values)

### DeleteIndexBuffer
*Type:* FUNCTION
Delete the index buffer

**Parameters**

- `buffer` (dmGraphics::HIndexBuffer) - the index buffer

### DeleteRenderTarget
*Type:* FUNCTION

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `render_target` (dmGraphics::HRenderTarget)

### DeleteTexture
*Type:* FUNCTION
Delete texture

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `texture` (dmGraphics::HTexture) - Texture handle

### DeleteVertexBuffer
*Type:* FUNCTION
Delete vertex buffer

**Parameters**

- `buffer` (dmGraphics::HVertexBuffer) - the buffer

### DeleteVertexDeclaration
*Type:* FUNCTION
Delete vertex declaration

**Parameters**

- `vertex_declaration` (dmGraphics::HVertexDeclaration) - the vertex declaration

### DeleteVertexStreamDeclaration
*Type:* FUNCTION
Delete vertex stream declaration

**Parameters**

- `stream_declaration` (dmGraphics::HVertexStreamDeclaration) - the vertex stream declaration

### DisableState
*Type:* FUNCTION

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `state` (dmGraphics::State) - Render state

### DisableTexture
*Type:* FUNCTION
Disable a texture bound to a texture unit.
Unbinds the given texture handle from the specified unit,
releasing the association in the graphics pipeline.
This is useful to prevent unintended reuse of textures,
or to free up texture units for other bindings.

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `unit` (uint32_t) - Texture unit index to disable. Must match the one previously used in <code>dmGraphics::EnableTexture</code>
- `texture` (dmGraphics::HTexture) - Handle to the texture object to disable

### EnableState
*Type:* FUNCTION

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `state` (dmGraphics::State) - Render state

### EnableTexture
*Type:* FUNCTION
Enable and bind a texture to a texture unit.
Associates a texture object with a specific texture unit in the
graphics context, making it available for sampling in shaders.
Multiple textures can be active simultaneously by binding them
to different units. The shader must reference the correct unit
(via sampler uniform) to access the bound texture

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `unit` (uint32_t) - Texture unit index to bind the texture to. Valid range depends on GPU capabilities (commonly 015 for at least 16 texture units)
- `id_index` (uint8_t) - Index for internal tracking or binding variation. Typically used when multiple texture IDs are managed within the same unit (e.g. array textures or multi-bind)
- `texture` (dmGraphics::HTexture) - Handle to the texture object to enable and bind

### FaceWinding
*Type:* ENUM

**Members**

- `FACE_WINDING_CCW`
- `FACE_WINDING_CW`

### GetDisplayScaleFactor
*Type:* FUNCTION
Get the scale factor of the display.
The display scale factor is usally 1.0 but will for instance be 2.0 on a macOS Retina display.

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context

**Returns**

- `scale_factor` (float) - Display scale factor

### GetHeight
*Type:* FUNCTION
Returns the specified height of the opened window, which might differ from the actual window width.

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context

**Returns**

- `height` (uint32_t) - Specified height of the window. If no window is opened, 0 is always returned.

### GetInstalledAdapterFamily
*Type:* FUNCTION
Get installed graphics adapter family

**Returns**

- `family` (dmGraphics::AdapterFamily) - Installed adapter family

### GetInstalledContext
*Type:* FUNCTION

**Returns**

- `context` (dmGraphics::HContext) - Installed graphics context

### GetMaxElementsIndices
*Type:* FUNCTION
Get the max number of indices allowed by the system in an index buffer

**Parameters**

- `context` (dmGraphics::HContext) - the context

**Returns**

- `count` (uint32_t) - the count

### GetMaxElementsVertices
*Type:* FUNCTION
Get the max number of vertices allowed by the system in a vertex buffer

**Parameters**

- `context` (dmGraphics::HContext) - the context

**Returns**

- `count` (uint32_t) - the count

### GetMaxTextureSize
*Type:* FUNCTION
Get maximum supported size in pixels of non-array texture

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context

**Returns**

- `max_texture_size` (uint32_t) - Maximum texture size supported by GPU

### GetNumSupportedExtensions
*Type:* FUNCTION

**Parameters**

- `context` (dmGraphics::HContext) - the context

**Returns**

- `count` (uint32_t) - the number of supported extensions

### GetNumTextureHandles
*Type:* FUNCTION
Get how many platform-dependent texture handle used for engine texture handle.
Applicable only for OpenGL/ES backend. All other backends return 1.

**Parameters**

- `context` (dmGraphics::Context) - Graphics context
- `texture` (dmGraphics::HTexture) - Texture handle

**Returns**

- `handles_amount` (uint8_t) - Platform-dependent handles amount

### GetOriginalTextureHeight
*Type:* FUNCTION
Get texture original (before uploading to GPU) height

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `texture` (dmGraphics::HTexture) - Texture handle

**Returns**

- `original_height` (uint16_t)

### GetOriginalTextureWidth
*Type:* FUNCTION
Get texture original (before uploading to GPU) width

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `texture` (dmGraphics::HTexture) - Texture handle

**Returns**

- `original_width` (uin16_t) - Texture's original width

### GetPipelineState
*Type:* FUNCTION

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context

**Returns**

- `pipeline_state` (dmGraphics::PipelineState)

### GetRenderTargetAttachment
*Type:* FUNCTION
Get the attachment texture from a render target. Returns zero if no such attachment texture exists.

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `render_target` (dmGraphics::HRenderTarget) - the render target
- `attachment_type` (dmGraphics::RenderTargetAttachment) - the attachment to get

**Returns**

- `attachment` (dmGraphics::HTexture) - the attachment texture

### GetRenderTargetSize
*Type:* FUNCTION

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `render_target` (dmGraphics::HRenderTarget)
- `buffer_type` (dmGraphics::BufferType)
- `width` (uint32_t&)
- `height` (uint32_t&)

### GetRenderTargetTexture
*Type:* FUNCTION

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `render_target` (dmGraphics::HRenderTarget)
- `buffer_type` (dmGraphics::BufferType)

**Returns**

- `render_target_texture` (dmGraphics::HTexture)

### GetSupportedExtension
*Type:* FUNCTION
get the supported extension

**Parameters**

- `context` (dmGraphics::HContext) - the context
- `index` (uint32_t) - the index of the extension

**Returns**

- `extension` (const char*) - the extension. 0 if index was out of bounds

### GetTextureDepth
*Type:* FUNCTION
Get texture depth. applicable for 3D and cube map textures

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `texture` (dmGraphics::HTexture) - Texture handle

**Returns**

- `depth` (uint16_t) - Texture's depth

### GetTextureFormatLiteral
*Type:* FUNCTION
Get string representation of texture format

**Parameters**

- `format` (dmGraphics::TextureFormat) - Texture format

**Returns**

- `literal_format` (const char*) - String representation of format

### GetTextureHandle
*Type:* FUNCTION
Get the native graphics API texture object from an engine texture handle. This depends on the graphics backend and is not
guaranteed to be implemented on the currently running adapter.

**Parameters**

- `texture` (dmGraphics::HTexture) - the texture handle
- `out_handle` (void**) - a pointer to where the raw object should be stored

**Returns**

- `handle_result` (dmGraphics::HandleResult) - the result of the query

### GetTextureHeight
*Type:* FUNCTION
Get texture height

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `texture` (dmGraphics::HTexture) - Texture handle

**Returns**

- `height` (uint16_t) - Texture's height

### GetTextureMipmapCount
*Type:* FUNCTION
Get texture mipmap count

**Parameters**

- `context` (dmGraphice::HContext) - Graphics context
- `texture` (dmGraphics::HTexture) - Texture handle

**Returns**

- `count` (uint8_t) - Texture mipmap count

### GetTextureResourceSize
*Type:* FUNCTION
Get approximate size of how much memory texture consumes

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `texture` (dmGraphics::HTexture) - Texture handle

**Returns**

- `data_size` (uint32_t) - Resource data size in bytes

### GetTextureStatusFlags
*Type:* FUNCTION
Get status of texture

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `texture` (dmGraphics::HTexture) - Texture handle

**Returns**

- `flags` (dmGraphics::TextureStatusFlags) - Enumerated status bit flags

### GetTextureType
*Type:* FUNCTION
Get texture type

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `texture` (dmGraphics::HTexture) - Texture handle

**Returns**

- `type` (dmGraphics::TextureType) - Texture type

### GetTextureTypeLiteral
*Type:* FUNCTION
Get string representation of texture type

**Parameters**

- `texture_type` (dmGraphics::TextureType) - Texture type

**Returns**

- `literal_type` (const char*) - String representation of type

### GetTextureUsageHintFlags
*Type:* FUNCTION
Query usage hint flags for a texture.
Retrieves the bitwise usage flags that were assigned to a texture
when it was created. These flags indicate the intended role(s) of
the texture in the rendering pipeline and allow the graphics
backend to apply optimizations or enforce restrictions

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `texture` (dmGraphics::HTexture) - Texture handle

**Returns**

- `flags` (uint32_t) - A bitwise OR of usage flags describing how the texture may be used. Applications can test specific flags using bitmask operations

### GetTextureWidth
*Type:* FUNCTION
Get texture width

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `texture` (dmGraphics::HTexture) - Texture handle

**Returns**

- `width` (uint16_t) - Texture's width

### GetVertexStreamOffset
*Type:* FUNCTION
Get the physical offset into the vertex data for a particular stream

**Parameters**

- `vertex_declaration` (dmGraphics::HVertexDeclaration) - the vertex declaration
- `name_hash` (dmhash_t) - the name hash of the vertex stream (as passed into AddVertexStream())

**Returns**

- `Offset` - in bytes into the vertex or INVALID_STREAM_OFFSET if not found

### GetViewport
*Type:* FUNCTION
Get viewport's parameters

**Parameters**

- `context` (dmGraphics::HContext) - the context
- `x` (int32_t) - x-coordinate of the viewport's origin
- `y` (int32_t) - y-coordinate of the viewport's origin
- `width` (uint32_t) - viewport's width
- `height` (uint32_t) - viewport's height

### GetWidth
*Type:* FUNCTION
Returns the specified width of the opened window, which might differ from the actual window width.

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context

**Returns**

- `width` (uint32_t) - Specified width of the window. If no window is opened, 0 is always returned.

### GetWindowHeight
*Type:* FUNCTION
Return the height of the opened window, if any.

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context

**Returns**

- `window_height` (uint32_t) - Height of the window. If no window is opened, 0 is always returned

### GetWindowWidth
*Type:* FUNCTION
Return the width of the opened window, if any.

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context

**Returns**

- `window_width` (uint32_t) - Width of the window. If no window is opened, 0 is always returned

### HandleResult
*Type:* ENUM
Function's call result code

**Members**

- `HANDLE_RESULT_OK` -             The function's call succeeded and returned a valid result
- `HANDLE_RESULT_NOT_AVAILABLE` -  The function is not supported by the current graphics backend
- `HANDLE_RESULT_ERROR` -          An error occurred while function call

### HContext
*Type:* TYPEDEF
Context handle

### HIndexBuffer
*Type:* TYPEDEF
Index buffer handle

### HPipelineState
*Type:* TYPEDEF
PipelineState handle

### HProgram
*Type:* TYPEDEF
Program handle

### HRenderTarget
*Type:* TYPEDEF
Rendertarget handle

### HStorageBuffer
*Type:* TYPEDEF
Storage buffer handle

### HTexture
*Type:* TYPEDEF
Texture handle

### HUniformLocation
*Type:* TYPEDEF
Uniform location handle

### HVertexBuffer
*Type:* TYPEDEF
Vertex buffer handle

### HVertexDeclaration
*Type:* TYPEDEF
Vertex declaration handle

### HVertexStreamDeclaration
*Type:* TYPEDEF
Vertex stream declaration handle

### IndexBufferFormat
*Type:* ENUM
Index buffer element types.
Defines the integer size used for vertex indices

**Members**

- `INDEXBUFFER_FORMAT_16` -    16-bit unsigned integers (max 65535 vertices)
- `INDEXBUFFER_FORMAT_32` -    32-bit unsigned integers (supports larger meshes)

### INVALID_STREAM_OFFSET
*Type:* CONSTANT
Invalid stream offset

### IsExtensionSupported
*Type:* FUNCTION
check if an extension is supported

**Parameters**

- `context` (dmGraphics::HContext) - the context
- `extension` (const char*) - the extension.

**Returns**

- `result` (bool) - true if the extension was supported

### IsIndexBufferFormatSupported
*Type:* FUNCTION
Check if the index format is supported

**Parameters**

- `context` (dmGraphics::HContext) - the context
- `format` (dmGraphics::IndexBufferFormat) - the format
- `result` (bool) - true if the format is supoprted

### IsTextureFormatSupported
*Type:* FUNCTION
check if a specific texture format is supported

**Parameters**

- `context` (dmGraphics::HContext) - the context
- `format` (dmGraphics::TextureFormat) - the texture format.

**Returns**

- `result` (bool) - true if the texture format was supported

### MAX_BUFFER_COLOR_ATTACHMENTS
*Type:* CONSTANT
Max buffer color attachments

### NewIndexBuffer
*Type:* FUNCTION
Create new index buffer with initial data

**Notes**

- The caller need to track if the indices are 16 or 32 bit.

**Parameters**

- `context` (dmGraphics::HContext) - the context
- `size` (uint32_t) - the size of the buffer (in bytes). May be 0
- `data` (void*) - the data
- `buffer_usage` (dmGraphics::BufferUsage) - the usage

**Returns**

- `buffer` (dmGraphics::HIndexBuffer) - the index buffer

### NewRenderTarget
*Type:* FUNCTION

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `buffer_type_flags` (uint32_t)
- `params` (dmGraphics::const RenderTargetCreationParams)

**Returns**

- `render_target` (dmGraphics::HRenderTarget) - Newly created render target

### NewTexture
*Type:* FUNCTION
Create new texture

**Parameters**

- `context` (HContext) - Graphics context
- `params` (const dmGraphics::TextureCreationParams&) - Creation parameters

**Returns**

- `texture_handle` (dmGraphics::HTexture) - Opaque texture handle

### NewVertexBuffer
*Type:* FUNCTION
Create new vertex buffer with initial data

**Parameters**

- `context` (dmGraphics::HContext) - the context
- `size` (uint32_t) - the size of the buffer (in bytes). May be 0
- `data` (void*) - the data
- `buffer_usage` (dmGraphics::BufferUsage) - the usage

**Returns**

- `buffer` (dmGraphics::HVertexBuffer) - the vertex buffer

### NewVertexDeclaration
*Type:* FUNCTION
Create new vertex declaration from a vertex stream declaration

**Parameters**

- `context` (dmGraphics::HContext) - the context
- `stream_declaration` (dmGraphics::HVertexStreamDeclaration) - the vertex stream declaration

**Returns**

- `declaration` (dmGraphics::HVertexDeclaration) - the vertex declaration

### NewVertexDeclaration
*Type:* FUNCTION
Create new vertex declaration from a vertex stream declaration and an explicit stride value,
where the stride is the number of bytes between each consecutive vertex in a vertex buffer

**Parameters**

- `context` (dmGraphics::HContext) - the context
- `stream_declaration` (dmGraphics::HVertexStreamDeclaration) - the vertex stream declaration
- `stride` (uint32_t) - the stride between the start of each vertex (in bytes)

**Returns**

- `declaration` (dmGraphics::HVertexDeclaration) - the vertex declaration

### NewVertexStreamDeclaration
*Type:* FUNCTION
Create new vertex stream declaration. A stream declaration contains a list of vertex streams
that should be used to create a vertex declaration from.

**Parameters**

- `context` (dmGraphics::HContext) - the context

**Returns**

- `declaration` (dmGraphics::HVertexStreamDeclaration) - the vertex declaration

### NewVertexStreamDeclaration
*Type:* FUNCTION
Create new vertex stream declaration. A stream declaration contains a list of vertex streams
that should be used to create a vertex declaration from.

**Parameters**

- `context` (dmGraphics::HContext) - the context
- `step_function` (dmGraphics::VertexStepFunction) - the vertex step function to use

**Returns**

- `declaration` (dmGraphics::HVertexStreamDeclaration) - the vertex declaration

### PrimitiveType
*Type:* ENUM
Primitive drawing modes.
Defines how vertex data is assembled into primitives

**Members**

- `PRIMITIVE_LINES` -          Each pair of vertices forms a line
- `PRIMITIVE_TRIANGLES` -      Each group of 3 vertices forms a triangle
- `PRIMITIVE_TRIANGLE_STRIP` - Connected strip of triangles (shares vertices)

### ReadPixels
*Type:* FUNCTION
Read frame buffer pixels in BGRA format

**Parameters**

- `context` (dmGraphics::HContext) - the context
- `x` (int32_t) - x-coordinate of the starting position
- `y` (int32_t) - y-coordinate of the starting position
- `width` (uint32_t) - width of the region
- `height` (uint32_t) - height of the region
- `buffer` (void*) - buffer to read to
- `buffer_size` (uint32_t) - buffer size

### RenderTargetAttachment
*Type:* ENUM
Attachment points for render targets

**Members**

- `ATTACHMENT_COLOR` -     A color buffer attachment (used for rendering visible output)
- `ATTACHMENT_DEPTH` -     A depth buffer attachment (used for depth testing)
- `ATTACHMENT_STENCIL` -   A stencil buffer attachment (used for stencil operations)

### RepackRGBToRGBA
*Type:* FUNCTION

**Parameters**

- `num_pixels` (uint32_t)
- `rgb` (uint8_t*)
- `rgba` (uint8_t*)

### SetBlendFunc
*Type:* FUNCTION

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `source_factor` (gmGraphics::BlendFactor)
- `destination_factor` (dmGraphics::BlendFactor)

### SetColorMask
*Type:* FUNCTION

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `red` (bool)
- `green` (bool)
- `blue` (bool)
- `alpha` (bool)

### SetCullFace
*Type:* FUNCTION

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `face_type` (dmGraphics::FaceType)

### SetDepthFunc
*Type:* FUNCTION

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `func` (dmGraphics::CompareFunc)

### SetDepthMask
*Type:* FUNCTION

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `enable_mask` (bool)

### SetIndexBufferData
*Type:* FUNCTION
Set index buffer data

**Parameters**

- `buffer` (dmGraphics::HIndexBuffer) - the buffer
- `size` (uint32_t) - the size of the buffer (in bytes). May be 0
- `data` (void*) - the data
- `buffer_usage` (dmGraphics::BufferUsage) - the usage

### SetIndexBufferSubData
*Type:* FUNCTION
Set subset of index buffer data

**Parameters**

- `buffer` (dmGraphics::HVertexBuffer) - the buffer
- `offset` (uint32_t) - the offset into the desination buffer (in bytes)
- `size` (uint32_t) - the size of the buffer (in bytes). May be 0
- `data` (void*) - the data

### SetRenderTarget
*Type:* FUNCTION

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `render_target` (dmGraphics::HRenderTarget)
- `transient_buffer_types` (uint32_t)

### SetRenderTargetSize
*Type:* FUNCTION

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `render_target` (dmGraphics::HRenderTarget)
- `width` (uint32_t)
- `height` (uint32_t)

### SetStencilFunc
*Type:* FUNCTION

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `func` (dmGraphics::CompareFunc)
- `ref` (uint32_t)
- `mask` (uint32_t)

### SetStencilFuncSeparate
*Type:* FUNCTION

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `face_type` (dmGraphics::FaceType)
- `func` (dmGraphics::CompareFunc)
- `ref` (uint32_t)
- `mask` (uint32_t)

### SetStencilMask
*Type:* FUNCTION

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `mask` (uint32_t)

### SetStencilOp
*Type:* FUNCTION

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `sfail` (dmGraphics::StencilOp)
- `dpfail` (dmGraphics::StencilOp)
- `dppass` (dmGraphics::StencilOp)

### SetStencilOpSeparate
*Type:* FUNCTION

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `face_type` (dmGraphics::FaceType)
- `sfail` (dmGraphics::StencilOp)
- `dpfail` (dmGraphics::StencilOp)
- `dppass` (dmGraphics::StencilOp)

### SetTexture
*Type:* FUNCTION
Set texture data. For textures of type TEXTURE_TYPE_CUBE_MAP it's assumed that
6 mip-maps are present contiguously in memory with stride m_DataSize

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `texture` (dmGraphics::HTexture) - Texture handle
- `params` (const dmGraphics::TextureParams&)

### SetTextureAsync
*Type:* FUNCTION
Set texture data asynchronously. For textures of type TEXTURE_TYPE_CUBE_MAP it's assumed that
6 mip-maps are present contiguously in memory with stride m_DataSize

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `texture` (dmGraphics::HTexture) - Texture handle
- `params` (const dmGraphics::TextureParams&) - Texture parameters. Texture will be recreated if parameters differ from creation parameters
- `callback` (dmGraphics::SetTextureAsyncCallback) - Completion callback
- `user_data` (void*) - User data that will be passed to completion callback

### SetTextureAsyncCallback
*Type:* TYPEDEF
Function called when a texture has been set asynchronously

**Parameters**

- `texture` (dmGraphics::HTexture) - Texture handle
- `user_data` (void*) - User data that will be passed to the SetTextureAsyncCallback

### SetTextureParams
*Type:* FUNCTION
Set texture parameters

**Parameters**

- `context` (dmGraphics::HContext) - Graphics context
- `texture` (dmGraphics::HTexture) - Texture handle
- `min_filter` (dmGraphics::TextureFilter) - Minification filter type
- `mag_filter` (dmGraphics::TextureFilter) - Magnification filter type
- `uwrap` (dmGraphics::TextureWrap) - Wrapping mode for the U (X) texture coordinate.
- `vwrap` (dmGraphics::TextureWrap) - Wrapping mode for the V (Y) texture coordinate
- `max_anisotropy` (float)

### SetVertexBufferData
*Type:* FUNCTION
Set vertex buffer data

**Parameters**

- `buffer` (dmGraphics::HVertexBuffer) - the buffer
- `size` (uint32_t) - the size of the buffer (in bytes). May be 0
- `data` (void*) - the data
- `buffer_usage` (dmGraphics::BufferUsage) - the usage

### SetVertexBufferSubData
*Type:* FUNCTION
Set subset of vertex buffer data

**Parameters**

- `buffer` (dmGraphics::HVertexBuffer) - the buffer
- `offset` (uint32_t) - the offset into the desination buffer (in bytes)
- `size` (uint32_t) - the size of the buffer (in bytes). May be 0
- `data` (void*) - the data

### StencilOp
*Type:* ENUM
Stencil test actions.
Defines what happens to a stencil buffer value depending on the outcome of the stencil/depth test.

**Members**

- `STENCIL_OP_KEEP` -            Keep the current stencil value
- `STENCIL_OP_ZERO` -            Set stencil value to 0
- `STENCIL_OP_REPLACE` -         Replace stencil value with reference value
- `STENCIL_OP_INCR` -            Increment stencil value (clamps at max)
- `STENCIL_OP_INCR_WRAP` -       Increment stencil value, wrapping around
- `STENCIL_OP_DECR` -            Decrement stencil value (clamps at 0)
- `STENCIL_OP_DECR_WRAP` -       Decrement stencil value, wrapping around
- `STENCIL_OP_INVERT` -          Bitwise invert stencil value

### TextureCreationParams
*Type:* STRUCT
Texture creation parameters.
Defines how a texture is created, initialized, and used.
This structure is typically passed when allocating GPU memory
for a new texture. It controls dimensions, format, layering,
mipmapping, and intended usage.

**Members**

- `m_Type` (dmGraphics::TextureType) - Texture type. Defines the dimensionality and interpretation of the texture (2D, 3D, cube map, array)
- `m_Width` (uint16_t) - Width of the texture in pixels at the base mip level
- `m_Height` (uint16_t) - Height of the texture in pixels at the base mip level
- `m_Depth` (uint16_t) - Depth of the texture. Used for 3D textures or texture arrays. For standard 2D textures, this is typically `1`
- `m_OriginalWidth` (uint16_t) - Width of the original source data before scaling or compression
- `m_OriginalHeight` (uint16_t) - Height of the original source data before scaling or compression
- `m_OriginalDepth` (uint16_t) - Depth of the original source data
- `m_LayerCount` (uint8_t) - Number of layers in the texture. Used for array textures (`TEXTURE_TYPE_2D_ARRAY`). For standard 2D textures, this is `1`
- `m_MipMapCount` (uint8_t) - Number of mipmap levels. A value of `1` means no mipmaps (only the base level is stored). Larger values allow for mipmapped sampling.
- `m_UsageHintBits` (uint8_t) - Bitfield of usage hints. Indicates how the texture will be used (e.g. sampling, render target, storage image). See dmGraphics::TextureUsageFlag

### TextureFilter
*Type:* ENUM
Texture filtering modes.
Controls how texels are sampled when scaling or rotating textures

**Members**

- `TEXTURE_FILTER_DEFAULT` -                   Default texture filtering mode. Depeneds on graphics backend (for example, for OpenGL - TEXTURE_FILTER_LINEAR)
- `TEXTURE_FILTER_NEAREST` -                   Nearest-neighbor sampling (blocky look, fastest)
- `TEXTURE_FILTER_LINEAR` -                    Linear interpolation between texels (smooth look)
- `TEXTURE_FILTER_NEAREST_MIPMAP_NEAREST` -    Nearest mipmap level, nearest texel
- `TEXTURE_FILTER_NEAREST_MIPMAP_LINEAR` -     Linear blend between two mipmap levels, nearest texel
- `TEXTURE_FILTER_LINEAR_MIPMAP_NEAREST` -     Nearest mipmap level, linear texel
- `TEXTURE_FILTER_LINEAR_MIPMAP_LINEAR` -      Linear blend between mipmap levels and texels (trilinear)

### TextureFormat
*Type:* ENUM
Pixel formats supported by textures.
Includes uncompressed, compressed, and floating-point variants

**Members**

- `TEXTURE_FORMAT_LUMINANCE` -            Single-channel grayscale
- `TEXTURE_FORMAT_LUMINANCE_ALPHA` -      Two-channel grayscale + alpha
- `TEXTURE_FORMAT_RGB` -                  Standard 24-bit RGB color
- `TEXTURE_FORMAT_RGBA` -                 Standard 32-bit RGBA color
- `TEXTURE_FORMAT_RGB_16BPP` -            Packed 16-bit RGB (lower precision, saves memory)
- `TEXTURE_FORMAT_RGBA_16BPP` -           Packed 16-bit RGBA
- `TEXTURE_FORMAT_DEPTH` -                Depth buffer texture (used for depth testing)
- `TEXTURE_FORMAT_STENCIL` -              Stencil buffer texture
- `TEXTURE_FORMAT_RGB_PVRTC_2BPPV1` -     PVRTC compressed RGB at 2 bits per pixel
- `TEXTURE_FORMAT_RGB_PVRTC_4BPPV1` -     PVRTC compressed RGB at 4 bits per pixel
- `TEXTURE_FORMAT_RGBA_PVRTC_2BPPV1` -    PVRTC compressed RGBA at 2 bits per pixel
- `TEXTURE_FORMAT_RGBA_PVRTC_4BPPV1` -    PVRTC compressed RGBA at 4 bits per pixel
- `TEXTURE_FORMAT_RGB_ETC1` -             ETC1 compressed RGB (no alpha support)
- `TEXTURE_FORMAT_R_ETC2` -               ETC2 single-channel
- `TEXTURE_FORMAT_RG_ETC2` -              ETC2 two-channel
- `TEXTURE_FORMAT_RGBA_ETC2` -            ETC2 four-channel (with alpha)
- `TEXTURE_FORMAT_RGBA_ASTC_4X4` -        ASTC block-compressed 44
- `TEXTURE_FORMAT_RGB_BC1` -              BC1/DXT1 compressed RGB
- `TEXTURE_FORMAT_RGBA_BC3` -             BC3/DXT5 compressed RGBA
- `TEXTURE_FORMAT_R_BC4` -                BC4 single-channel
- `TEXTURE_FORMAT_RG_BC5` -               BC5 two-channel
- `TEXTURE_FORMAT_RGBA_BC7` -             BC7 high-quality compressed RGBA
- `TEXTURE_FORMAT_RGB16F` -               Half-precision float RGB
- `TEXTURE_FORMAT_RGB32F` -               Full 32-bit float RGB
- `TEXTURE_FORMAT_RGBA16F` -              Half-precision float RGBA
- `TEXTURE_FORMAT_RGBA32F` -              Full 32-bit float RGBA
- `TEXTURE_FORMAT_R16F` -                 Half-precision float single channel
- `TEXTURE_FORMAT_RG16F` -                Half-precision float two channels
- `TEXTURE_FORMAT_R32F` -                 Full 32-bit float single channel
- `TEXTURE_FORMAT_RG32F` -                Full 32-bit float two channels
- `TEXTURE_FORMAT_RGBA32UI` -             Internal: 32-bit unsigned integer RGBA (not script-exposed)
- `TEXTURE_FORMAT_BGRA8U` -               Internal: 32-bit BGRA layout
- `TEXTURE_FORMAT_R32UI` -                Internal: 32-bit unsigned integer single channel
- `TEXTURE_FORMAT_RGBA_ASTC_5X4` -        ASTC 5x4 block compression
- `TEXTURE_FORMAT_RGBA_ASTC_5X5` -        ASTC 5x5 block compression
- `TEXTURE_FORMAT_RGBA_ASTC_6X5` -        ASTC 6x5 block compression
- `TEXTURE_FORMAT_RGBA_ASTC_6X6` -        ASTC 6x6 block compression
- `TEXTURE_FORMAT_RGBA_ASTC_8X5` -        ASTC 8x5 block compression
- `TEXTURE_FORMAT_RGBA_ASTC_8X6` -        ASTC 8x6 block compression
- `TEXTURE_FORMAT_RGBA_ASTC_8X8` -        ASTC 8x8 block compression
- `TEXTURE_FORMAT_RGBA_ASTC_10X5` -       ASTC 10x5 block compression
- `TEXTURE_FORMAT_RGBA_ASTC_10X6` -       ASTC 10x6 block compression
- `TEXTURE_FORMAT_RGBA_ASTC_10X8` -       ASTC 10x8 block compression
- `TEXTURE_FORMAT_RGBA_ASTC_10X10` -      ASTC 10x10 block compression
- `TEXTURE_FORMAT_RGBA_ASTC_12X10` -      ASTC 12x10 block compression
- `TEXTURE_FORMAT_RGBA_ASTC_12X12` -      ASTC 12x12 block compression

### TextureParams
*Type:* STRUCT
Texture update parameters.
Defines a block of pixel data to be uploaded to a texture,
along with filtering, wrapping, and sub-region update options.
Typically used when calling texture upload/update functions
after a texture object has been created with TextureCreationParams

**Members**

- `m_Data` (const void*) - Pointer to raw pixel data in CPU memory. The format is defined by `m_Format`
- `m_DataSize` (uint32_t) - Size of the pixel data in bytes. Must match the expected size from width, height, depth, and format
- `m_Format` (dmGraphics::TextureFormat) - Format of the pixel data (e.g. RGBA, RGB, compressed formats). Dictates how the GPU interprets the memory pointed by `m_Data`
- `m_MinFilter` (dmGraphics::TextureFilter) - Minification filter (applied when shrinking). Determines how pixels are sampled when the texture is displayed smaller than its native resolution
- `m_MagFilter` (dmGraphics::TextureFilter) - Magnification filter (applied when enlarging). Determines how pixels are sampled when the texture is displayed larger than its native resolution
- `m_UWrap` (dmGraphics::TextureWrap) - Wrapping mode for U (X) texture coordinate. Controls behavior when texture coordinates exceed [0,1]
- `m_VWrap` (dmGraphics::TextureWrap) - Wrapping mode for V (Y) texture coordinate. Controls behavior when texture coordinates exceed [0,1]
- `m_X` (uint32_t) - X offset in pixels for sub-texture updates. Defines the left edge of the destination region
- `m_Y` (uint32_t) - Y offset in pixels for sub-texture updates. Defines the top edge of the destination region
- `m_Z` (uint32_t) - Z offset (depth layer) for 3D textures. Ignored for standard 2D textures
- `m_Slice` (uint32_t) - Slice index in an array texture where the data should be uploaded
- `m_Width` (uint16_t) - Width of the pixel data block in pixels. Used for both full uploads and sub-updates
- `m_Height` (uint16_t) - Height of the pixel data block in pixels. Used for both full uploads and sub-updates
- `m_Depth` (uint16_t) - Depth of the pixel data block in pixels. Only relevant for 3D textures
- `m_LayerCount` (uint8_t) - Number of layers to update. For array textures, this specifies how many pages are updated
- `m_MipMap` (uint8_t) - Only 7 bit available Mipmap level to update. Level 0 is the base level, higher levels are progressively downscaled versions
- `m_SubUpdate` (uint8_t) - If true, this represents a partial texture update (sub-region), using `m_X`, `m_Y`, `m_Z`, and `m_Slice` offsets. If false, the entire texture/mipmap level is replaced

### TextureStatusFlags
*Type:* ENUM
Texture data upload status flags

**Members**

- `TEXTURE_STATUS_OK` -            Texture updated and ready-to-use
- `TEXTURE_STATUS_DATA_PENDING` -  Data upload to the texture is in progress

### TextureType
*Type:* ENUM
Texture types

**Members**

- `TEXTURE_TYPE_2D`
- `TEXTURE_TYPE_2D_ARRAY`
- `TEXTURE_TYPE_3D`
- `TEXTURE_TYPE_CUBE_MAP`
- `TEXTURE_TYPE_IMAGE_2D`
- `TEXTURE_TYPE_IMAGE_3D`
- `TEXTURE_TYPE_SAMPLER`
- `TEXTURE_TYPE_TEXTURE_2D`
- `TEXTURE_TYPE_TEXTURE_2D_ARRAY`
- `TEXTURE_TYPE_TEXTURE_3D`
- `TEXTURE_TYPE_TEXTURE_CUBE`

### TextureWrap
*Type:* ENUM
Texture addressing/wrapping modes.
Controls behavior when texture coordinates fall outside the [0,1] range

**Members**

- `TEXTURE_WRAP_CLAMP_TO_BORDER` -     Clamp to the color defined as 'border'
- `TEXTURE_WRAP_CLAMP_TO_EDGE` -       Clamp to the edge pixel of the texture
- `TEXTURE_WRAP_MIRRORED_REPEAT` -     Repeat texture, mirroring every other repetition
- `TEXTURE_WRAP_REPEAT` -              Repeat texture in a tiled fashion

### Type
*Type:* ENUM
Data type.
Represents scalar, vector, matrix, image, or sampler types used
for vertex attributes, uniforms, and shader interface definitions

**Members**

- `TYPE_BYTE` -                Signed 8-bit integer. Compact storage, often used for colors, normals, or compressed vertex attributes
- `TYPE_UNSIGNED_BYTE` -       Unsigned 8-bit integer. Common for color channels (0255) or normalized texture data
- `TYPE_SHORT` -               Signed 16-bit integer. Used for medium-range numeric attributes such as bone weights or coordinates with normalization
- `TYPE_UNSIGNED_SHORT` -      Unsigned 16-bit integer. Often used for indices or normalized attributes when extra precision over bytes is required
- `TYPE_INT` -                 Signed 32-bit integer. Typically used for uniform values, shader constants, or counters
- `TYPE_UNSIGNED_INT` -        Unsigned 32-bit integer. Used for indices, IDs, or GPU counters
- `TYPE_FLOAT` -               32-bit floating point. Standard for most vertex attributes and uniform values (positions, UVs, weights)
- `TYPE_FLOAT_VEC4` -          4-component floating-point vector (`vec4` in GLSL). Typically used for homogeneous coordinates, colors (RGBA), or combined attributes
- `TYPE_FLOAT_MAT4` -          4x4 floating-point matrix (`mat4` in GLSL). Standard for 3D transformations (model, view, projection)
- `TYPE_SAMPLER_2D` -          2D texture sampler. Standard type for most texture lookups
- `TYPE_SAMPLER_CUBE` -        Cube map sampler. Used for environment mapping, reflections, and skyboxes
- `TYPE_SAMPLER_2D_ARRAY` -    Array of 2D texture samplers. Enables efficient texture indexing when using multiple layers (e.g. terrain textures, sprite atlases)
- `TYPE_FLOAT_VEC2` -          2-component floating-point vector (`vec2` in GLSL). Commonly used for texture coordinates or 2D positions
- `TYPE_FLOAT_VEC3` -          3-component floating-point vector (`vec3` in GLSL). Used for positions, normals, and directions in 3D space
- `TYPE_FLOAT_MAT2` -          2x2 floating-point matrix (`mat2` in GLSL). Used in transformations (e.g. 2D rotations, scaling)
- `TYPE_FLOAT_MAT3` -          3x3 floating-point matrix (`mat3` in GLSL). Commonly used for normal matrix calculations in lighting
- `TYPE_IMAGE_2D` -            2D image object. Unlike samplers, images allow read/write access in shaders (e.g. compute shaders or image load/store operations)
- `TYPE_TEXTURE_2D` -          2D texture object handle. Represents an actual GPU texture resource
- `TYPE_SAMPLER` -             Generic sampler handle, used as a placeholder for texture units without specifying the dimension
- `TYPE_TEXTURE_2D_ARRAY` -    2D texture array object handle
- `TYPE_TEXTURE_CUBE` -        Cube map texture object handle
- `TYPE_SAMPLER_3D` -          3D texture sampler. Used for volumetric effects, noise fields, or voxel data
- `TYPE_TEXTURE_3D` -          3D texture object handle
- `TYPE_IMAGE_3D` -            3D image object. Used for compute-based volume processing
- `TYPE_SAMPLER_3D_ARRAY` -    Array of 3D texture samplers
- `TYPE_TEXTURE_3D_ARRAY` -    3D texture array object handle

<!-- engine-graphics-src-dmsdk-graphics-graphics_native-h -->

# Graphics {#apis:engine-graphics-src-dmsdk-graphics-graphics_native-h}

**Namespace:** `dmGraphics`
**Language:** C++
**Type:** Defold C++
**File:** `graphics_native.h`
**Source:** `engine/graphics/src/dmsdk/graphics/graphics_native.h`
**Include:** `dmsdk/graphics/graphics_native.h`

Platform specific native graphics functions.

## API

### dmGraphics::GetNativeAndroidActivity
*Type:* FUNCTION
Get Android native jobject. Any other platform return zero.

**Returns**

- `jobject` (jobject) - native handle

### dmGraphics::GetNativeAndroidApp
*Type:* FUNCTION
Get Android app object. Any other platform return zero.

**Returns**

- `app` (struct android_app*) - native handle

### dmGraphics::GetNativeAndroidEGLContext
*Type:* FUNCTION
Get Android EGLContext native handle (EGLContext). Any other platform return zero.

**Returns**

- `EGLContext` (EGLContext) - native handle

### dmGraphics::GetNativeAndroidEGLSurface
*Type:* FUNCTION
Get Android EGLSurface native handle (EGLSurface). Any other platform return zero.

**Returns**

- `EGLSurface` (EGLSurface) - native handle

### dmGraphics::GetNativeAndroidJavaVM
*Type:* FUNCTION
Get Android JavaVM ptr. Any other platform return zero.

**Returns**

- `JavaVM*` (JavaVM*) - native handle

### dmGraphics::GetNativeiOSEAGLContext
*Type:* FUNCTION
Get iOS EAGLContext native handle (id). Any other platform return zero.

**Returns**

- `id` (id) - native handle

### dmGraphics::GetNativeiOSUIView
*Type:* FUNCTION
Get iOS UIView native handle (id). Any other platform return zero.

**Returns**

- `id` (id) - native handle

### dmGraphics::GetNativeiOSUIWindow
*Type:* FUNCTION
Get iOS UIWindow native handle (id). Any other platform return zero.

**Returns**

- `id` (id) - native handle

### dmGraphics::GetNativeOSXNSOpenGLContext
*Type:* FUNCTION
Get OSX NSOpenGLContext native handle (id). Any other platform return zero.

**Returns**

- `id` (id) - native handle

### dmGraphics::GetNativeOSXNSView
*Type:* FUNCTION
Get OSX NSView native handle (id). Any other platform return zero.

**Returns**

- `id` (id) - native handle

### dmGraphics::GetNativeOSXNSWindow
*Type:* FUNCTION
Get OSX NSWindow native handle (id). Any other platform return zero.

**Returns**

- `id` (id) - native handle

### dmGraphics::GetNativeWindowsHGLRC
*Type:* FUNCTION
Get Win32 gl rendercontext native handle (HGLRC). Any other platform return zero.

**Returns**

- `HGLRC` (HGLRC) - native handle

### dmGraphics::GetNativeWindowsHWND
*Type:* FUNCTION
Get Win32 windows native handle (HWND). Any other platform return zero.

**Returns**

- `HWND` (HWND) - native handle

### dmGraphics::GetNativeX11GLXContext
*Type:* FUNCTION
Get Linux X11GLXContext native handle (GLXContext). Any other platform return zero.

**Returns**

- `GLXContext` (GLXContext) - native handle

### dmGraphics::GetNativeX11Window
*Type:* FUNCTION
Get Linux X11Window windows native handle (Window). Any other platform return zero.

**Returns**

- `Window` (Window) - native handle

<!-- engine-graphics-src-dmsdk-graphics-graphics_opengl-h -->

# Graphics OpenGL {#apis:engine-graphics-src-dmsdk-graphics-graphics_opengl-h}

**Namespace:** `dmGraphics`
**Language:** C++
**Type:** Defold C++
**File:** `graphics_opengl.h`
**Source:** `engine/graphics/src/dmsdk/graphics/graphics_opengl.h`
**Include:** `dmsdk/graphics/graphics_opengl.h`

Graphics OpenGL API

## API

### OpenGLGetDefaultFramebufferId
*Type:* FUNCTION
Get the default framebuffer ID

**Parameters**

- `context` (dmGraphics::HContext) - the OpenGL context

**Returns**

- `framebuffer` (uint32_t) - the framebuffer id

### OpenGLGetRenderTargetId
*Type:* FUNCTION
Get the OpenGL render target id from a render target

**Parameters**

- `context` (dmGraphics::HContext) - the OpenGL context
- `render_target` (dmGraphics::HRenderTarget) - the render target to get the ID from

**Returns**

- `id` (uint32_t) - the OpenGL render target id

<!-- engine-graphics-src-dmsdk-graphics-graphics_vulkan-h -->

# Graphics Vulkan {#apis:engine-graphics-src-dmsdk-graphics-graphics_vulkan-h}

**Namespace:** `dmGraphics`
**Language:** C++
**Type:** Defold C++
**File:** `graphics_vulkan.h`
**Source:** `engine/graphics/src/dmsdk/graphics/graphics_vulkan.h`
**Include:** `dmsdk/graphics/graphics_vulkan.h`

Graphics Vulkan API

## API

### VkDescriptorPool
*Type:* TYPEDEF

### VkDevice
*Type:* TYPEDEF

### VulkanCreateDescriptorPool
*Type:* FUNCTION
Create Vulkan descriptor pool. No need to deallocate descripto pool manualy
because it will be deallocated automatically when context will be destroyed.
Only available when using Mac/iOS.

**Parameters**

- `vk_device` (VkDevice) - the Vulkan device handle
- `max_descriptors` (uint16_t) - maximum size of allocated pool
- `vk_descriptor_pool_out` (VkDescriptorPool*) - result Vulkan descriptor pool

**Returns**

- `result` (bool) - true if creation was successful. Otherwise returns false

### VulkanGetActiveSwapChainTexture
*Type:* FUNCTION
Get the current swap chain texture

**Parameters**

- `context` (dmGraphics::HContext) - the Vulkan context

**Returns**

- `swapchain` (dmGraphics::HTexture) - the swap chain texture for the current frame

### VulkanGetCurrentFrameCommandBuffer
*Type:* FUNCTION
Get Vulkan command buffer which used at the current frame. Only available when using Mac/iOS.

**Parameters**

- `context` (dmGraphics::HContext) - the Vulkan context

**Returns**

- `command_buffer` (VkCommandBuffer) - the Vulkan command buffer

### VulkanGetDevice
*Type:* FUNCTION
Get Vulkan device handle. Only available when using Mac/iOS.

**Parameters**

- `context` (dmGraphics::HContext) - the Vulkan context

**Returns**

- `device` (VkDevice) - the Vulkan device handle

### VulkanGetGraphicsQueue
*Type:* FUNCTION
Get Vulkan graphics queue handle. Only available when using Mac/iOS.

**Parameters**

- `context` (dmGraphics::HContext) - the Vulkan context

**Returns**

- `queue` (VkQueue) - the Vulkan graphics queue

### VulkanGetGraphicsQueueFamily
*Type:* FUNCTION
Get Vulkan queue family. Only available when using Mac/iOS.

**Parameters**

- `context` (dmGraphics::HContext) - the Vulkan context
return family <span class="type"> uint16_t</span> graphics queue family

### VulkanGetInstance
*Type:* FUNCTION
Get Vulkan instance handle. Only available when using Mac/iOS.

**Parameters**

- `context` (dmGraphics::HContext) - the Vulkan context

**Returns**

- `instance` (VkInstance) - the Vulkan instance handle

### VulkanGetPhysicalDevice
*Type:* FUNCTION
Get Vulkan physical device handle. Only available when using Mac/iOS.

**Parameters**

- `context` (dmGraphics::HContext) - the Vulkan context

**Returns**

- `physical_device` (VkPhysicalDevice) - the Vulkan physical device handle

### VulkanGetRenderPass
*Type:* FUNCTION
Get Vulkan render pass handle. Only available when using Mac/iOS.

**Parameters**

- `context` (dmGraphics::HContext) - the Vulkan context

**Returns**

- `render_pass` (VkRenderPass) - the Vulkan render pass handle

### VulkanGraphicsCommandQueueToMetal
*Type:* FUNCTION
Get the native MTLCommandQueue from the Vulkan context. Only available when using Mac/iOS.

**Parameters**

- `context` (dmGraphics::HContext) - the Vulkan context

**Returns**

- `mtl_queue` (id<MTLCommandQueue>) - the Metal graphics queue wrapped with a (__bridge void*)

### VulkanTextureToMetal
*Type:* FUNCTION
Get a native MTLTexture from a Vulkan HTexture. Only available when using Mac/iOS.

**Parameters**

- `context` (dmGraphics::HContext) - the Vulkan context
- `texture` (dmGraphics::HTexture) - the texture

**Returns**

- `mtl_texture` (id<MTLTexture>) - the Metal texture wrapped with a (__bridge void*)

<!-- engine-gui-src-dmsdk-gui-gui-h -->

# Gui {#apis:engine-gui-src-dmsdk-gui-gui-h}

**Namespace:** `dmGui`
**Language:** C++
**Type:** Defold C++
**File:** `gui.h`
**Source:** `engine/gui/src/dmsdk/gui/gui.h`
**Include:** `dmsdk/gui/gui.h`

Defold GUI system

## API

### AdjustMode
*Type:* ENUM

**Members**

- `ADJUST_MODE_FIT` -     //!< 0
- `ADJUST_MODE_ZOOM` -    //!< 1
- `ADJUST_MODE_STRETCH` - //!< 2

### AdjustReference
*Type:* ENUM

**Members**

- `ADJUST_REFERENCE_PARENT`
- `ADJUST_REFERENCE_DISABLED`

### DeleteNode
*Type:* FUNCTION
Defer delete a node

**Parameters**

- `scene` (dmGui::HScene) - the gui scene
- `node` (dmGui::HNode) - the node to delete

### GetFirstChildNode
*Type:* FUNCTION
Get first child node

**Parameters**

- `scene` (dmGui::HScene) - the gui scene
- `node` (dmGui::HNode) - Gets the first child node. If 0, gets the first top level node.

**Returns**

- `child` (dmGui::HNode) - The first child node

### GetNextNode
*Type:* FUNCTION
Get next sibling

**Parameters**

- `scene` (dmGui::HScene) - the gui scene
- `node` (dmGui::HNode) - the current sibling

**Returns**

- `sibling` (dmGui::HNode) - the next sibling, or INVALID_HANDLE if no more siblings

### GetNodeCustomData
*Type:* FUNCTION
get node custom type

**Parameters**

- `scene` (dmGui::HScene) - the gui scene
- `node` (HNode) - the gui node

**Returns**

- `type` (uint32_t) - the custom type. Or 0 if it is no custom type

### GetNodeCustomData
*Type:* FUNCTION
get node custom data

**Parameters**

- `scene` (dmGui::HScene) - the gui scene
- `node` (HNode) - the gui node

**Returns**

- `data` (void*) - the custom data created per node by the gui node type extension

### GetNodeId
*Type:* FUNCTION
Get the id of a node.

**Parameters**

- `scene` (dmGui::HScene) - the gui scene
- `node` (dmGui::HNode) - the gui node

**Returns**

- `id` (dmhash_t) - the id of the node

### GetNodeIsBone
*Type:* FUNCTION
Query if the node is a bone

**Parameters**

- `scene` (dmGui::HScene) - the gui scene
- `node` (dmGui::HNode) - the gui node

**Returns**

- `result` (bool) - true if the node is a bone

### GetNodeParent
*Type:* FUNCTION
Get the parent of a gui node

**Parameters**

- `scene` (dmGui::HScene) - the gui scene
- `node` (dmGui::HNode) - the gui node

**Returns**

- `parent` (dmGui::HNode) - the parent, or INVALID_HANDLE is unsuccessful

### GetNodeProperty
*Type:* FUNCTION
Get property value

**Parameters**

- `scene` (dmGui::HScene) - scene
- `node` (dmGui::HNode) - node
- `property` (dmGui::Property) - property enum

**Returns**

- `value` (dmVMath::Vector4)

### GetNodeTextureId
*Type:* FUNCTION
get node texture

**Parameters**

- `scene` (dmGui::HScene) - the gui scene
- `node` (HNode) - the gui node

**Returns**

- `texture` (dmhash_t) - the currently assigned texture

### GetResource
*Type:* FUNCTION
Gets a resource by its resource alias.

**Parameters**

- `scene` (dmGui::HScene) - the gui scene
- `resource_id` (dmhash_t) - the resource alias
- `suffix_with_dot` (dmhash_t) - the hash of the suffix: hash(".spinescenec")

**Returns**

- `resource` (void*) - the resource if successful

### HContext
*Type:* TYPEDEF
A handle to a gui context

### HNode
*Type:* TYPEDEF
A handle to a gui node

### HScene
*Type:* TYPEDEF
A handle to a gui scene

### HScript
*Type:* TYPEDEF
A handle to a gui script

### HTextureSource
*Type:* TYPEDEF
A handle to a texture source, which can be a pointer to a resource,
a dmGraphics::HTexture or a dynamic texture created from a gui script.

### INVALID_HANDLE
*Type:* FUNCTION
Invalid node handle

### LuaPushNode
*Type:* FUNCTION
Pushes a dmGui::HNode to the stack

**Parameters**

- `L` (lua_State*) - the Lua scene
- `scene` (dmGui::HScene) - the gui scene
- `node` (HNode) - the gui node

### NewNode
*Type:* FUNCTION

**Parameters**

- `scene` (dmGui::HScene) - the gui scene
- `position` (dmVMath::Point3) - the position
- `size` (dmVMath::Vector3) - the size
- `node_type` (dmGui::NodeType) - the node type
- `custom_type` (uint32_t) - If node_type == dmGui::NODE_TYPE_CUSTOM, then this is used to create a custom node data for the registered custom type

**Returns**

- `node` (dmGui::HNode) - the created node

### NodeTextureType
*Type:* ENUM
This enum denotes what kind of texture type the m_Texture pointer is referencing.

**Members**

- `NODE_TEXTURE_TYPE_NONE`
- `NODE_TEXTURE_TYPE_TEXTURE`
- `NODE_TEXTURE_TYPE_TEXTURE_SET`

### Playback
*Type:* ENUM

**Members**

- `PLAYBACK_ONCE_FORWARD`
- `PLAYBACK_ONCE_BACKWARD`
- `PLAYBACK_ONCE_PINGPONG`
- `PLAYBACK_LOOP_FORWARD`
- `PLAYBACK_LOOP_BACKWARD`
- `PLAYBACK_LOOP_PINGPONG`
- `PLAYBACK_NONE`

### Property
*Type:* ENUM

**Members**

- `PROPERTY_POSITION` -    //!< 0
- `PROPERTY_ROTATION` -    //!< 1
- `PROPERTY_SCALE` -       //!< 2
- `PROPERTY_COLOR` -       //!< 3
- `PROPERTY_SIZE` -        //!< 4
- `PROPERTY_OUTLINE` -     //!< 5
- `PROPERTY_SHADOW` -      //!< 6
- `PROPERTY_SLICE9` -      //!< 7
- `PROPERTY_PIE_PARAMS` -  //!< 8
- `PROPERTY_TEXT_PARAMS` - //!< 9
- `PROPERTY_COUNT` -       //!< 10

### Result
*Type:* ENUM

**Members**

- `NODE_TYPE_BOX` - //!< 0,
- `NODE_TYPE_TEXT` - //!< 1,
- `NODE_TYPE_PIE` - //!< 2,
- `NODE_TYPE_TEMPLATE` - //!< 3,
- `NODE_TYPE_PARTICLEFX` - //!< 5,
- `NODE_TYPE_CUSTOM` - //!< 6,
- `NODE_TYPE_COUNT` - //!< 7,

### Result
*Type:* ENUM

**Members**

- `RESULT_OK` - //!< 0
- `RESULT_SYNTAX_ERROR` - //!< -1
- `RESULT_SCRIPT_ERROR` - //!< -2
- `RESULT_OUT_OF_RESOURCES` - //!< -4
- `RESULT_RESOURCE_NOT_FOUND` - //!< -5
- `RESULT_TEXTURE_ALREADY_EXISTS` - //!< -6
- `RESULT_INVAL_ERROR` - //!< -7
- `RESULT_INF_RECURSION` - //!< -8
- `RESULT_DATA_ERROR` - //!< -9
- `RESULT_WRONG_TYPE` - //!< -10

### SetNodeAdjustMode
*Type:* FUNCTION
Set adjust mode

**Parameters**

- `scene` (dmGui::HScene) - scene
- `node` (dmGui::HNode) - node
- `adjust_mode` (AdjustMode) - the adjust mode

### SetNodeId
*Type:* FUNCTION
Set the id of a node.

**Notes**

- The id must be unique

**Parameters**

- `scene` (dmGui::HScene) - the gui scene
- `node` (dmGui::HNode) - the gui node
- `id` (dmhash_t) - the id

### SetNodeIsBone
*Type:* FUNCTION
Set the bone state of the node

**Parameters**

- `scene` (dmGui::HScene) - the gui scene
- `node` (dmGui::HNode) - the gui node
- `is_bone` (bool) - true if the node is ot be used as a bone

### SetNodeParent
*Type:* FUNCTION
Set the parent of a gui node

**Parameters**

- `scene` (dmGui::HScene) - the gui scene
- `node` (dmGui::HNode) - the gui node
- `parent` (dmGui::HNode) - the new parent. May be null
- `keep_scene_transform` (bool) - true to keep the world position

**Returns**

- `result` (dmGui::Result) - dmGui::RESULT_OK is successful

### SetNodeProperty
*Type:* FUNCTION
Set property value

**Parameters**

- `scene` (dmGui::HScene) - scene
- `node` (dmGui::HNode) - node
- `property` (dmGui::Property) - property enum
- `value` (dmVMath::Vector4)

### SetNodeTexture
*Type:* FUNCTION
set node texture

**Parameters**

- `scene` (dmGui::HScene) - the gui scene
- `node` (HNode) - the gui node
- `texture_id` (dmhash_t) - the texture id

### SetNodeTexture
*Type:* FUNCTION
set node texture

**Parameters**

- `scene` (dmGui::HScene) - the gui scene
- `node` (HNode) - the gui node
- `type` (NodeTextureType) - the type of texture
- `texture` (void*) - A pointer to a e.g. dmGameSystem::TextureSetResource*

<!-- engine-physics-src-dmsdk-physics-physics-h -->

# Physics {#apis:engine-physics-src-dmsdk-physics-physics-h}

**Namespace:** `dmPhysics`
**Language:** C++
**Type:** Defold C++
**File:** `physics.h`
**Source:** `engine/physics/src/dmsdk/physics/physics.h`
**Include:** `dmsdk/physics/physics.h`

Physics related structs and functions

## API

### HCollisionShape2D
*Type:* TYPEDEF
2D collision shape handle

### HHullSet2D
*Type:* TYPEDEF
2D Hull set handle

<!-- engine-render-src-dmsdk-render-render-h -->

# Render {#apis:engine-render-src-dmsdk-render-render-h}

**Namespace:** `dmRender`
**Language:** C++
**Type:** Defold C++
**File:** `render.h`
**Source:** `engine/render/src/dmsdk/render/render.h`
**Include:** `dmsdk/render/render.h`

Api for render specific data

## API

### AddToRender
*Type:* FUNCTION
Adds a render object to the current render frame

**Parameters**

- `context` (dmRender::HRenderContext) - the context
- `ro` (dmRender::RenderObject*) - the render object

**Returns**

- `result` (dmRender::Result) - the result

### ApplyMaterialConstants
*Type:* FUNCTION

**Parameters**

- `render_context` (dmRender::HRenderContext) - Render context
- `material` (dmRender::Material)
- `render_object` (const dmRender::RenderObject*)

### ApplyMaterialSampler
*Type:* FUNCTION

**Parameters**

- `render_context` (dmRender::HRenderContext)
- `material` (dmRender::HMaterial)
- `sampler` (dmRender::HSampler)
- `value_index` (uint8_t)
- `texture` (dmGraphics::HTexture)

### ClearMaterialTags
*Type:* FUNCTION

**Parameters**

- `material` (dmRender::HMaterial)

### ClearNamedConstantBuffer
*Type:* FUNCTION
Clears a named constant buffer from any constants.

**Parameters**

- `buffer` (dmRender::HNamedConstantBuffer) - the constants buffer

### DeleteConstant
*Type:* FUNCTION
Deletes a shader program constant

**Parameters**

- `constant` (dmRender::HConstant) - The shader constant

### DeleteMaterial
*Type:* FUNCTION

**Parameters**

- `render_context` (dmRender::HRenderContext) - Render context
- `material` (dmRender::Material)

### DeleteNamedConstantBuffer
*Type:* FUNCTION
Deletes a named constant buffer

**Parameters**

- `buffer` (dmRender::HNamedConstantBuffer) - the constants buffer

### dmRender::GetMaterialVertexSpace
*Type:* FUNCTION
Get the vertex space (local or world)

**Parameters**

- `material` (dmRender::HMaterial) - the material

**Returns**

- `vertex_space` (dmRenderDDF::MaterialDesc::VertexSpace) - the vertex space

### dmRender::RenderObject::MAX_TEXTURE_COUNT
*Type:* CONSTANT
The maximum number of textures the render object can hold (currently 8)

### FrustumOptions
*Type:* STRUCT
Frustum options used when setting up a draw call

**Members**

- `m_FrustumMatrix` (matrix4) - the frustum matrix
- `m_SkipNearFarPlanes` (bool) - should the frustum culling use the near and far planes

### FrustumPlanes
*Type:* ENUM
Frustum planes to use in a frustum

**Members**

- `FRUSTUM_PLANES_SIDES`
- `FRUSTUM_PLANES_ALL`

### GetConstantLocation
*Type:* FUNCTION
Gets the shader program constant location

**Parameters**

- `constant` (dmRender::HConstant) - The shader constant

**Returns**

- `location` (int32_t) - the location

### GetConstantName
*Type:* FUNCTION
Gets the shader program constant name

**Parameters**

- `constant` (dmRender::HConstant) - The shader constant

**Returns**

- `name` (dmhash_t) - the hash name

### GetConstantName
*Type:* FUNCTION
Gets the shader program constant name

**Parameters**

- `constant` (dmRender::HConstant) - The shader constant
- `name` (dmhash_t) - the hash name

### GetConstantType
*Type:* FUNCTION
Gets the type of the constant

**Parameters**

- `constant` (dmRender::HConstant) - The shader constant

**Returns**

- `type` (dmRenderDDF::MaterialDesc::ConstantType) - the type of the constant

### GetConstantValues
*Type:* FUNCTION
Gets the shader program constant values

**Parameters**

- `constant` (dmRender::HConstant) - The shader constant
- `num_values` (uint32_t*) - (out) the array num_values

**Returns**

- `values` (dmVMath::Vector4*) - the uniform values

### GetMaterialSampler
*Type:* FUNCTION

### GetMaterialSamplerNameHash
*Type:* FUNCTION

**Parameters**

- `material` (dmRender::HMaterial)
- `unit` (uint32_t)

**Returns**

- `name_hash` (dmhash_t)

### GetMaterialSamplerUnit
*Type:* FUNCTION

**Parameters**

- `material` (dmRender::HMaterial)
- `name_hash` (dmhash_t)

**Returns**

- `sampler_unit` (uint32_t)

### GetMaterialTagListKey
*Type:* FUNCTION
Gets the key to the material tag list

**Parameters**

- `material` (dmGraphics::HMaterial) - the material

**Returns**

- `listkey` (uint32_t) - the list key

### GetNamedConstant
*Type:* FUNCTION
Gets a named constant from the buffer

**Notes**

- This give access to the internal memory of the constant

**Parameters**

- `buffer` (dmRender::HNamedConstantBuffer) - the constants buffer
- `name_hash` (dmhash_t) - the name of the constant
- `values` (dmVMath::Vector4**) - (out) the values. May not be null.
- `num_values` (uint32_t*) - (out) the number of values. May not be null.

**Returns**

- `ok` (bool) - true if constant existed.

### GetNamedConstant
*Type:* FUNCTION
Gets a named constant from the buffer - with type information

**Notes**

- This give access to the internal memory of the constant

**Parameters**

- `buffer` (dmRender::HNamedConstantBuffer) - the constants buffer
- `name_hash` (dmhash_t) - the name of the constant
- `values` (dmVMath::Vector4**) - (out) the values. May not be null.
- `num_values` (uint32_t*) - (out) the number of values. May not be null.
- `constant_type` (dmRenderDDF::MaterialDesc::ConstantType*) - (out) the constant type.

**Returns**

- `ok` (bool) - true if constant existed.

### GetNamedConstantCount
*Type:* FUNCTION
Gets number of constants in the buffer

**Parameters**

- `buffer` (dmRender::HNamedConstantBuffer) - the constants buffer

**Returns**

- `ok` (bool) - true if constant existed.

### GetViewMatrix
*Type:* FUNCTION

**Parameters**

- `render_context` (dmRender::HRenderContext) - Render context

**Returns**

- `view_matrix` (const dmVMath::Matrix4&)

### HConstant
*Type:* TYPEDEF
Shader constant handle

### HFont
*Type:* TYPEDEF
Font map handle

### HMaterial
*Type:* TYPEDEF
Material instance handle

### HNamedConstantBuffer
*Type:* TYPEDEF
Shader constant buffer handle. Holds name and values for a constant.

### HRenderContext
*Type:* TYPEDEF
The render context

### HRenderListDispatch
*Type:* TYPEDEF
Render dispatch function handle.

### IterateNamedConstants
*Type:* FUNCTION
Iterates over the constants

**Parameters**

- `buffer` (dmRender::HNamedConstantBuffer) - the constants buffer
- `callback` (IterateNamedConstantsFn) - the callback function
- `ctx` (void*) - the callback context

### IterateNamedConstantsFn
*Type:* TYPEDEF

**Parameters**

- `name_hash` (dmhash_t)
- `ctx` (void*)

### NewConstant
*Type:* FUNCTION
Creates a shader program constant

**Parameters**

- `name_hash` (dmhash_t) - the name of the material constant

**Returns**

- `constant` (dmRender::HConstant) - the constant

### NewMaterial
*Type:* FUNCTION

**Parameters**

- `render_context` (dmRender::HContext) - Render context
- `program` (dmGraphics::HProgram)

**Returns**

- `new_material` (dmRender::HMaterial)

### NewNamedConstantBuffer
*Type:* FUNCTION
Allocates a named constant buffer

**Returns**

- `buffer` (dmRender::HNamedConstantBuffer) - the constants buffer

### RemoveNamedConstant
*Type:* FUNCTION
Removes a named constant from the buffer

**Parameters**

- `buffer` (dmRender::HNamedConstantBuffer) - the constants buffer
- `name_hash` (dmhash_t) - the name of the constant

### RenderListAlloc
*Type:* FUNCTION
Allocates an array of render entries

**Notes**

- Do not store a pointer into this array, as they're reused next frame

**Parameters**

- `context` (dmRender::HRenderContext) - the context
- `entries` (uint32_t) - the number of entries to allocate

**Returns**

- `array` (dmRender::RenderListEntry*) - the render list entry array

### RenderListDispatchFn
*Type:* TYPEDEF
Render dispatch function callback.

**Parameters**

- `params` (dmRender::RenderListDispatchParams) - the params

### RenderListDispatchParams
*Type:* STRUCT
Render dispatch function callback.

**Members**

- `m_Context` (dmRender::HRenderContext) - the context
- `m_UserData` (void*) - the callback user data (registered with RenderListMakeDispatch())
- `m_Operation` (dmRender::RenderListOperation) - the operation
- `m_Buf` (dmRender::RenderListEntry) - the render entry array
- `m_Begin` (uint32_t*) - the start of the render batch. contains index into the m_Buf array
- `m_End` (uint32_t*) - the end of the render batch. Loop while "m_Begin != m_End"

### RenderListEntry
*Type:* FUNCTION
Represents a renderable object (e.g. a single sprite)
The renderer will (each frame) collect all entries with the current material tag, then batch these objects together.
Batching is done based on the batch key and Z value (or order for GUI nodes)
The caller will also register a callback function where the batched entries will be returned.
Each callback then represents a draw call, and will register a RenderObject

**Parameters**

- `m_WorldPosition` (dmVMath::Point3) - the world position of the object
- `m_Order` (uint32_t) - the order to sort on (used if m_MajorOrder != RENDER_ORDER_WORLD)
- `m_BatchKey` (uint32_t) - the batch key to sort on (note: only 48 bits are currently used by renderer)
- `m_TagListKey` (uint32_t) - the key to the list of material tags
- `m_UserData` (uint64_t) - user data (available in the render dispatch callback)
- `m_MinorOrder` (uint32_t:4) - used to sort within a batch
- `m_MajorOrder` (uint32_t:2) - If RENDER_ORDER_WORLD, then sorting is done based on the world position.
Otherwise the sorting uses the m_Order value directly.
- `m_Dispatch` (uint32_t:8) - The dispatch function callback (dmRender::HRenderListDispatch)
- `m_Visibility` (uint32_t:1) - Visibility flag. Used for frustrum culling. See enum Visibility

### RenderListMakeDispatch
*Type:* FUNCTION
Register a render dispatch function

**Parameters**

- `context` (dmRender::HRenderContext) - the context
- `dispatch_fn` (dmRender::RenderListDispatchFn) - the render batch callback function
- `visibility_fn` (dmRender::RenderListVisibilityFn) - the render list visibility callback function. May be 0
- `user_data` (void*) - userdata to the callback

**Returns**

- `dispatch` (dmRender::HRenderListDispatch) - the render dispatch function handle

### RenderListOperation
*Type:* ENUM
Render batch callback states

**Members**

- `RENDER_LIST_OPERATION_BEGIN`
- `RENDER_LIST_OPERATION_BATCH`
- `RENDER_LIST_OPERATION_END`

### RenderListSubmit
*Type:* FUNCTION
Adds a render object to the current render frame

**Parameters**

- `context` (dmRender::HRenderContext) - the context
- `begin` (dmRender::RenderListEntry*) - the start of the array
- `end` (dmRender::RenderListEntry*) - the end of the array (i.e. "while begin!=end: *begin ..."")

### RenderListVisibilityFn
*Type:* TYPEDEF
Render visibility function callback.

**Parameters**

- `params` (dmRender::RenderListVisibilityParams) - the params

### RenderListVisibilityParams
*Type:* STRUCT
Visibility dispatch function callback.

**Members**

- `m_UserData` (void*) - the callback user data (registered with RenderListMakeDispatch())
- `m_Entries` (dmRender::RenderListEntry) - the render entry array
- `m_NumEntries` (uint32_t) - the number of render entries in the array

### RenderObject
*Type:* STRUCT
Render objects represent an actual draw call

**Members**

- `m_Constants` (dmRender::HConstant[) - ] the shader constants
- `m_WorldTransform` (dmVMath::Matrix4) - the world transform (usually identity for batched objects)
- `m_TextureTransform` (dmVMath::Matrix4) - the texture transform
- `m_VertexBuffer` (dmGraphics::HVertexBuffer) - the vertex buffer
- `m_VertexDeclaration` (dmGraphics::HVertexDeclaration) - the vertex declaration
- `m_IndexBuffer` (dmGraphics::HIndexBuffer) - the index buffer
- `m_Material` (dmRender::HMaterial) - the material
- `m_Textures` (dmGraphics::HTexture[) - ] the textures
- `m_PrimitiveType` (dmGraphics::PrimitiveType) - the primitive type
- `m_IndexType` (dmGraphics::Type) - the index type (16/32 bit)
- `m_SourceBlendFactor` (dmGraphics::BlendFactor) - the source blend factor
- `m_DestinationBlendFactor` (dmGraphics::BlendFactor) - the destination blend factor
- `m_StencilTestParams` (dmRender::StencilTestParams) - the stencil test params
- `m_VertexStart` (uint32_t) - the vertex start
- `m_VertexCount` (uint32_t) - the vertex count
- `m_SetBlendFactors` (uint8_t:1) - use the blend factors
- `m_SetStencilTest` (uint8_t:1) - use the stencil test

### RenderOrder
*Type:* ENUM
Render order

**Members**

- `RENDER_ORDER_WORLD` -           Used by game objects
- `RENDER_ORDER_AFTER_WORLD` -     Used by gui

### Result
*Type:* ENUM

**Members**

- `RESULT_OK`
- `RESULT_INVALID_CONTEXT`
- `RESULT_OUT_OF_RESOURCES`
- `RESULT_BUFFER_IS_FULL`
- `RESULT_INVALID_PARAMETER`

### SetConstantLocation
*Type:* FUNCTION
Sets the shader program constant location

**Parameters**

- `constant` (dmRender::HConstant) - The shader constant
- `location` (dmGraphics::HUniformLocation) - the location

### SetConstantType
*Type:* FUNCTION
Sets the type of the constant

**Parameters**

- `constant` (dmRender::HConstant) - The shader constant
- `type` (dmRenderDDF::MaterialDesc::ConstantType) - the type of the constant

### SetConstantValues
*Type:* FUNCTION
Sets the shader program constant values

**Parameters**

- `constant` (dmRender::HConstant) - The shader constant
- `values` (dmVMath::Vector4*) - the array values
- `num_values` (uint32_t) - the array size (number of Vector4's)

**Returns**

- `result` (dmRender::Result) - the result

### SetMaterialSampler
*Type:* FUNCTION

**Parameters**

- `material` (dmRender::HMaterial)
- `name_hash` (dmhash_t)
- `unit` (uint32_t)
- `u_wrap` (dmGraphics::TextureWrap)
- `v_wrap` (dmGraphics::TextureWrap)
- `min_filter` (dmGraphics::TextureFilter)
- `mag_filter` (dmGraphics::TextureFilter)
- `max_anisotropy` (float)

**Returns**

- `is_succeed` (bool)

### SetMaterialTags
*Type:* FUNCTION

**Parameters**

- `material` (dmRender::Material)
- `tag_count` (uint32_t)
- `tags` (const dmhash_t*)

### SetNamedConstant
*Type:* FUNCTION
Sets one or more named constants to the buffer

**Parameters**

- `buffer` (dmRender::HNamedConstantBuffer) - the constants buffer
- `name_hash` (dmhash_t) - the name of the constant
- `values` (dmVMath::Vector4*) - the values
- `num_values` (uint32_t) - the number of values

### SetNamedConstant
*Type:* FUNCTION
Sets one or more named constants to the buffer with a specified data type.
Currently only dmRenderDDF::MaterialDesc::CONSTANT_TYPE_USER and dmRenderDDF::MaterialDesc::CONSTANT_TYPE_USER_MATRIX4
are supported.

**Parameters**

- `buffer` (dmRender::HNamedConstantBuffer) - the constants buffer
- `name_hash` (dmhash_t) - the name of the constant
- `values` (dmVMath::Vector4*) - the values
- `num_values` (uint32_t) - the number of values
- `constant_type` (dmRenderDDF::MaterialDesc::ConstantType) - The constant type

### SetNamedConstantAtIndex
*Type:* FUNCTION
Sets a named constant in the buffer at a specific index

**Parameters**

- `buffer` (dmRender::HNamedConstantBuffer) - the constants buffer
- `name_hash` (dmhash_t) - the name of the constant
- `value` (dmVMath::Vector4) - the value
- `value_index` (uint32_t) - the index of the value to set

**Returns**

- `result` (Result) - the result

### SetNamedConstants
*Type:* FUNCTION
Sets a list of named constants to the buffer

**Parameters**

- `buffer` (dmRender::HNamedConstantBuffer) - the constants buffer
- `constants` (dmRender::HConstant*) - the constants
- `num_constants` (uint32_t) - the number of constants

### StencilTestParams
*Type:* STRUCT
Struct holding stencil operation setup

**Members**

- `m_Func` (dmGraphics::CompareFunc) - the compare function
- `m_OpSFail` (dmGraphics::StencilOp) - the stencil fail operation
- `m_OpDPFail` (dmGraphics::StencilOp) - the depth pass fail operation
- `m_OpDPPass` (dmGraphics::StencilOp) - the depth pass pass operation
- `m_Ref` (uint8_t)
- `m_RefMask` (uint8_t)
- `m_BufferMask` (uint8_t)
- `m_ColorBufferMask` (uint8_t:4)
- `m_ClearBuffer` (uint8_t:1)

### Visibility
*Type:* ENUM
Visibility status

**Members**

- `VISIBILITY_NONE`
- `VISIBILITY_FULL`

<!-- engine-resource-src-dmsdk-resource-resource-h -->

# Resource {#apis:engine-resource-src-dmsdk-resource-resource-h}

**Namespace:** `Resource`
**Language:** C++
**Type:** Defold C++
**File:** `resource.h`
**Source:** `engine/resource/src/dmsdk/resource/resource.h`
**Include:** `dmsdk/resource/resource.h`

Functions for managing resource types.

## API

### DM_DECLARE_RESOURCE_TYPE
*Type:* MACRO
Declare and register new resource type to the engine.
This macro is used to declare the resource type callback functions used by the engine to communicate with the extension.

**Parameters**

- `symbol` (symbol) - external extension symbol description (no quotes).
- `suffix` (const char*) - The file resource suffix, without a ".".
- `register_fn` (function(dmResource::ResourceTypeRegisterContext& ctx)) - type register function
<dl>
<dt><code>ctx</code></dt>
<dd><span class="type">dmResource::ResourceTypeRegisterContext&amp;</span> Reference to an <code>ResourceTypeRegisterContext</code> structure.</dd>
</dl>
- `deregister_fn` (function(dmResource::ResourceTypeRegisterContext& ctx)) - type deregister function. May be null.
<dl>
<dt><code>ctx</code></dt>
<dd><span class="type">dmResource::ResourceTypeRegisterContext&amp;</span> Reference to an <code>ResourceTypeRegisterContext</code> structure.</dd>
</dl>

**Examples**

Register a new type:
```
#include
#include

static ResourceResult MyResourceTypeScriptCreate(const ResourceCreateParams* params) {}
static ResourceResult MyResourceTypeScriptDestroy(const ResourceDestroyParams* params) {}
static ResourceResult MyResourceTypeScriptRecreate(const ResourceRereateParams* params) {}

struct MyContext
{
    // ...
};

static ResourceResult RegisterResourceTypeBlob(HResourceTypeContext ctx, HResourceType type)
{
    // The engine.cpp creates the contexts for our built in types.
    // Here we register a custom type
    MyContext* context = new MyContext;

    ResourceTypeSetContext(type, (void*)context);
    ResourceTypeSetCreateFn(type, MyResourceTypeScriptCreate);
    ResourceTypeSetDestroyFn(type, MyResourceTypeScriptDestroy);
    ResourceTypeSetRecreateFn(type, MyResourceTypeScriptRecreate);
}

static ResourceResult DeregisterResourceTypeBlob(HResourceTypeContext ctx, HResourceType type)
{
    MyContext* context = (MyContext*)ResourceTypeGetContext(type);
    delete context;
}

DM_DECLARE_RESOURCE_TYPE(ResourceTypeBlob, "blobc", RegisterResourceTypeBlob, DeregisterResourceTypeBlob);

```

### FResourceCreate
*Type:* TYPEDEF
Resource create function

**Parameters**

- `param` (const dmResource::ResourceCreateParams*) - Resource parameters

**Returns**

- `result` (ResourceResult) - RESOURCE_RESULT_OK on success

### FResourceDecrypt
*Type:* TYPEDEF
Encrypts a resource in-place

**Parameters**

- `buffer` (void*) - The input/output buffer
- `buffer_len` (uint32_t) - The size of the buffer (in bytes)

**Returns**

- `RESULT_OK` - on success

### FResourceDestroy
*Type:* TYPEDEF
Resource destroy function

**Parameters**

- `param` (const dmResource::ResourceDestroyParams*) - Resource parameters

**Returns**

- `result` (ResourceResult) - RESOURCE_RESULT_OK on success

### FResourcePostCreate
*Type:* TYPEDEF
Resource postcreate function

**Notes**

- returning RESOURCE_CREATE_RESULT_PENDING will result in a repeated callback the following update.

**Parameters**

- `param` (const dmResource::ResourcePostCreateParams*) - Resource parameters

**Returns**

- `result` (ResourceResult) - RESOURCE_CREATE_RESULT_OK on success or RESOURCE_CREATE_RESULT_PENDING when pending

### FResourcePreload
*Type:* TYPEDEF
Resource preloading function. This may be called from a separate loading thread
but will not keep any mutexes held while executing the call. During this call
PreloadHint can be called with the supplied hint_info handle.
If RESULT_OK is returned, the resource Create function is guaranteed to be called
with the preload_data value supplied.

**Parameters**

- `param` (const dmResource::ResourcePreloadParams*) - Resource parameters

**Returns**

- `result` (ResourceResult) - RESOURCE_RESULT_OK on success

### FResourceRecreate
*Type:* TYPEDEF
Resource recreate function. Recreate resource in-place.

**Notes**

- Beware that any "in flight" resource pointers to the actual resource must remain valid after this call.

**Parameters**

- `param` (const dmResource::ResourceRecreateParams*) - Resource parameters

**Returns**

- `result` (ResourceResult) - RESOURCE_RESULT_OK on success

### FResourceReloadedCallback
*Type:* TYPEDEF
Function called when a resource has been reloaded.

**Parameters**

- `params` (ResourceReloadedParams*) - Parameters

### FResourceTypeDeregister
*Type:* TYPEDEF
Resource type destroy function. Generally used to destroy the registered resource type context.

**Returns**

- `RESOURCE_RESULT_OK` - on success

### FResourceTypeRegister
*Type:* TYPEDEF
Resource type setup function.

**Notes**

- The type is already cerate, and name and name hash properties are valid to get using the RsourceTypeGetName()/RsourceTypeGetNameHash() functions

**Returns**

- `RESOURCE_RESULT_OK` - on success

### GetDescriptor
*Type:* FUNCTION
Get resource descriptor from resource (name)

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `path` (dmhash_t) - Resource path
- `descriptor` (HResourceDescriptor*) - Returned resource descriptor. Temporary, don't copy.

**Returns**

- `result` (ResourceResult) - RESOURCE_RESULT_OK on success

### GetDescriptorByHash
*Type:* FUNCTION
Get resource descriptor from resource (name)

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `path_hash` (dmhash_t) - Resource path hash
- `descriptor` (HResourceDescriptor*) - Returned resource descriptor. Temporary, don't copy.

**Returns**

- `result` (ResourceResult) - RESOURCE_RESULT_OK on success

### HResourceDescriptor
*Type:* TYPEDEF
Holds information about a currently loaded resource.

### HResourceFactory
*Type:* TYPEDEF
Resource factory handle. Holds references to all currently loaded resources.

### HResourcePreloadHintInfo
*Type:* TYPEDEF
Holds information about preloading resources

### HResourceType
*Type:* TYPEDEF
Represents a resource type, with a context and type functions for creation and destroying a resource.

### HResourceTypeContext
*Type:* TYPEDEF
Holds the resource types, as well as extra in engine contexts that can be shared across type functions.

### ResourceAddFile
*Type:* FUNCTION
Adds a file to the resource system
Any request for this path will go through any existing mounts first.
If you wish to provide file overrides, please use the LiveUpdate feature for that.
The file isn't persisted between sessions.

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `path` (const char*) - The path of the resource
- `size` (uint32_t) - The size of the resource (in bytes)
- `resource` (const void*) - The resource payload

**Returns**

- `result` (ResourceResult) - RESOURCE_RESULT_OK on success

### ResourceCreateParams
*Type:* FUNCTION
Parameters to ResourceCreate function of the resource type

**Members**

- `m_Factory` (HResourceFactory)
- `m_Context` (void*) - The context registered with the resource type
- `m_Filename` (const char*) - Path of the loaded file
- `m_Buffer` (const void*) - Buffer containing the loaded file
- `m_BufferSize` (uint32_t) - Size of data buffer (in bytes)
- `m_PreloadData` (void*) - Preloaded data from Preload phase.
- `m_Resource` (HResourceDescriptor) - The resource descriptor to update. Temporary, don't copy.
- `m_Type` (HResourceType) - The resource type

### ResourceCreateResource
*Type:* FUNCTION
Creates and inserts a resource into the factory

**Notes**

- The input data pointer is not stored
- The reference count is 1, so make sure it's destruction is handled

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `name` (const char*) - Resource name
- `data` (void*) - Resource data
- `data_size` (uint32_t) - Resource data size
- `resource` (void**) - (out) Stores the created resource

**Returns**

- `result` (ResourceResult) - RESOURCE_RESULT_OK on success

### ResourceDescriptorGetNameHash
*Type:* FUNCTION
get path hash of resource

**Parameters**

- `rd` (HResourceDescriptor) - The resource

**Returns**

- `hash` (dmhash_t) - The path hash

### ResourceDescriptorGetPrevResource
*Type:* FUNCTION
get the previous resource data

**Notes**

- only used when recreating a resource

**Parameters**

- `rd` (HResourceDescriptor) - The resource handle

**Returns**

- `resource` (void*) - The resource data

### ResourceDescriptorGetResource
*Type:* FUNCTION
get the resource data

**Parameters**

- `rd` (HResourceDescriptor) - The resource handle

**Returns**

- `resource` (void*) - The resource data

### ResourceDescriptorGetResourceSize
*Type:* FUNCTION
get the resource data size

**Parameters**

- `rd` (HResourceDescriptor) - The resource handle

**Returns**

- `size` (uint32_t) - The resource data size (in bytes)

### ResourceDescriptorGetType
*Type:* FUNCTION
get the resource type

**Parameters**

- `rd` (HResourceDescriptor) - The resource handle

**Returns**

- `resource` (HResourceType) - The resource type

### ResourceDescriptorSetPrevResource
*Type:* FUNCTION
set the previous resource data

**Notes**

- only used when recreating a resource

**Parameters**

- `rd` (HResourceDescriptor) - The resource handle
- `resource` (void*) - The resource data

### ResourceDescriptorSetResource
*Type:* FUNCTION
set the resource data

**Parameters**

- `rd` (HResourceDescriptor) - The resource handle
- `resource` (void*) - The resource data

### ResourceDescriptorSetResourceSize
*Type:* FUNCTION
set the resource data size

**Parameters**

- `rd` (HResourceDescriptor) - The resource handle
- `size` (uint32_t) - The resource data size (in bytes)

### ResourceDestroyParams
*Type:* FUNCTION
Parameters to ResourceDestroy function of the resource type

**Members**

- `m_Factory` (HResourceFactory)
- `m_Context` (void*) - The context registered with the resource type
- `m_Resource` (HResourceDescriptor) - The resource descriptor to destroy
- `m_Type` (HResourceType) - The resource type

### ResourceGet
*Type:* FUNCTION
Get (load) a resource from factory

**Notes**

- if successful, it increments the ref count by one

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `path` (const char*) - Resource path
- `resource` (void**) - Created resource

**Returns**

- `result` (ResourceResult) - RESOURCE_RESULT_OK on success

### ResourceGetByHash
*Type:* FUNCTION
Get a loaded resource from factory

**Notes**

- this currently doesn't load a resource
- if successful, it increments the ref count by one

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `path_hash` (dmhash_t) - Resource path hash
- `resource` (void**) - Created resource

**Returns**

- `result` (ResourceResult) - RESOURCE_RESULT_OK on success

### ResourceGetByHashAndExt
*Type:* FUNCTION
Get a loaded resource from factory and also verifying that it's the expected file type

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `path_hash` (dmhash_t) - Resource path hash
- `ext_hash` (dmhash_t) - Resource extension hash (e.g. "texturec", "ttf"). Must match the extension of the path.
- `resource` (void**) - Created resource

**Returns**

- `result` (ResourceResult) - RESOURCE_RESULT_OK on success.
                                      RESOURCE_RESULT_INVALID_FILE_EXTENSION if the path extension doesn't match the required extension.

### ResourceGetCanonicalPath
*Type:* FUNCTION
Gets the normalized resource path: "/my//icon.texturec" -> "/my/icon.texturec". "my/icon.texturec" -> "/my/icon.texturec".

**Parameters**

- `path` (const char*) - the relative dir of the resource
- `buf` (const char*) - the output of the normalization
- `buf_len` (uint32_t) - the size of the output buffer

**Returns**

- `length` (uint32_t) - the length of the output string

### ResourceGetExtFromPath
*Type:* FUNCTION
Get a resource extension from a path, i.e "resource.ext" will return "ext".

**Parameters**

- `path` (const char*) - The path to the resource

**Returns**

- `extension` (const char*) - Pointer to extension string if an extension was found, 0 otherwise

### ResourceGetPath
*Type:* FUNCTION
Returns the canonical path hash of a resource

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `resource` (void*) - The resource pointer
- `hash` (dmhash_t*) - (out) The path hash of the resource

**Returns**

- `result` (ResourceResult) - RESOURCE_RESULT_OK on success

### ResourceGetRaw
*Type:* FUNCTION
Get raw resource data. Unregistered resources can be loaded with this function.
If successful, the returned resource data must be deallocated with free()

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `name` (dmhash_t) - Resource name
- `resource` (void**) - Created resource
- `resource_size` (uint32_t*) - Resource size

**Returns**

- `result` (ResourceResult) - RESOURCE_RESULT_OK on success

### ResourceGetTypeFromExtension
*Type:* FUNCTION
Get type from extension

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `extension` (const char*) - File extension, without leading "." character. E.g. "ttf"
- `type` (HResourceType*) - (out) returned type if successful

**Returns**

- `result` (ResourceResult) - RESOURCE_RESULT_OK on success

### ResourceGetTypeFromExtensionHash
*Type:* FUNCTION
Get type from extension hash

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `extension_hash` (dmhash_t) - Hash of file extension, without leading "." character. E.g. hash("ttf")
- `type` (HResourceType*) - (out) returned type if successful

**Returns**

- `result` (ResourceResult) - RESOURCE_RESULT_OK on success

### ResourceGetWithExt
*Type:* FUNCTION
Get (load) a resource from factory

**Notes**

- if successful, it increments the ref count by one

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `path` (const char*) - Resource path
- `ext` (const char*) - Resource extension (e.g. "texturec", "ttf"). Must match the extension of the path.
- `resource` (void**) - Created resource

**Returns**

- `result` (ResourceResult) - RESOURCE_RESULT_OK on success.
                                      RESOURCE_RESULT_INVALID_FILE_EXTENSION if the path extension doesn't match the required extension.

### ResourcePostCreateParams
*Type:* FUNCTION
Parameters to ResourcePostCreate function of the resource type

**Members**

- `m_Factory` (HResourceFactory)
- `m_Context` (void*) - The context registered with the resource type
- `m_Filename` (const char*) - Path of the loaded file
- `m_PreloadData` (void*) - Preloaded data from Preload phase.
- `m_Resource` (HResourceDescriptor) - The resource descriptor to update. Temporary, don't copy.
- `m_Type` (HResourceType) - The resource type

### ResourcePreloadHint
*Type:* FUNCTION
Hint the preloader what to load before Create is called on the resource.
The resources are not guaranteed to be loaded before Create is called.
This function can be called from a worker thread.

**Parameters**

- `preloader` (dmResource::HResourcePreloadHintInfo) - Preloader handle
- `path` (const char*) - Resource path

**Returns**

- `result` (bool) - if successfully invoking preloader.

### ResourcePreloadParams
*Type:* FUNCTION
Parameters to ResourcePreload function of the resource type

**Members**

- `m_Factory` (HResourceFactory)
- `m_Context` (void*) - The context registered with the resource type
- `m_Filename` (const char*) - Path of the loaded file
- `m_Buffer` (const void*) - Buffer containing the loaded file
- `m_BufferSize` (uint32_t) - Size of data buffer (in bytes)
- `m_HintInfo` (HResourcePreloadHintInfo) - Hinter info. Use this when calling [ref:ResourcePreloadHint]
- `m_PreloadData` (void**) - User data that is set during the Preload phase, and passed to the Create function.
- `m_Type` (HResourceType) - The resource type

### ResourceRecreateParams
*Type:* FUNCTION
Parameters to ResourceRecreate function of the resource type

**Members**

- `m_Factory` (HResourceFactory)
- `m_Context` (void*) - The context registered with the resource type
- `m_FilenameHash` (dmhash_t) - File name hash of the data
- `m_Filename` (const char*) - Path of the loaded file
- `m_Buffer` (const void*) - Buffer containing the loaded file
- `m_BufferSize` (uint32_t) - Size of data buffer (in bytes)
- `m_Message` (const void*) - Pointer holding a precreated message
- `m_Resource` (HResourceDescriptor) - The resource descriptor to update. Temporary, don't copy.
- `m_Type` (HResourceType) - The resource type

### ResourceRegisterDecryptionFunction
*Type:* FUNCTION
Registers a custom resource decryption function

**Parameters**

- `decrypt_resource` (dmResource::FDecryptResource) - The decryption function

### ResourceRelease
*Type:* FUNCTION
Release resource

**Notes**

- Decreases ref count by 1. If it reaches 0, the resource destroy function is called.

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `resource` (void*) - Resource pointer

### ResourceReloadedParams
*Type:* FUNCTION
Parameters to ResourceReloaded function of the resource type

**Members**

- `m_UserData` (void*) - User data supplied when the callback was registered
- `m_FilenameHash` (dmhash_t) - File name hash of the data
- `m_Filename` (const char*) - Path of the resource, same as provided to Get() when the resource was obtained
- `m_Resource` (HResourceDescriptor) - The resource descriptor to update. Temporary, don't copy.
- `m_Type` (HResourceType) - The resource type

### ResourceRemoveFile
*Type:* FUNCTION
Removes a previously registered file from the resource system

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `path` (const char*) - The path of the resource

**Returns**

- `result` (ResourceResult) - RESOURCE_RESULT_OK on success

### ResourceResult
*Type:* ENUM
ResourceResult

**Members**

- `RESOURCE_RESULT_OK`
- `RESOURCE_RESULT_INVALID_DATA`
- `RESOURCE_RESULT_DDF_ERROR`
- `RESOURCE_RESULT_RESOURCE_NOT_FOUND`
- `RESOURCE_RESULT_MISSING_FILE_EXTENSION`
- `RESOURCE_RESULT_ALREADY_REGISTERED`
- `RESOURCE_RESULT_INVAL`
- `RESOURCE_RESULT_UNKNOWN_RESOURCE_TYPE`
- `RESOURCE_RESULT_OUT_OF_MEMORY`
- `RESOURCE_RESULT_IO_ERROR`
- `RESOURCE_RESULT_NOT_LOADED`
- `RESOURCE_RESULT_OUT_OF_RESOURCES`
- `RESOURCE_RESULT_STREAMBUFFER_TOO_SMALL`
- `RESOURCE_RESULT_FORMAT_ERROR`
- `RESOURCE_RESULT_CONSTANT_ERROR`
- `RESOURCE_RESULT_NOT_SUPPORTED`
- `RESOURCE_RESULT_RESOURCE_LOOP_ERROR`
- `RESOURCE_RESULT_PENDING`
- `RESOURCE_RESULT_INVALID_FILE_EXTENSION`
- `RESOURCE_RESULT_VERSION_MISMATCH`
- `RESOURCE_RESULT_SIGNATURE_MISMATCH`
- `RESOURCE_RESULT_UNKNOWN_ERROR`

### ResourceTypeCreatorDescBufferSize
*Type:* VARIABLE
Resource type creator desc byte size declaration.
The registered description data passeed to ResourceRegisterTypeCreatorDesc must be of at least this size.

### ResourceTypeGetContext
*Type:* FUNCTION
get context from type

**Parameters**

- `type` (HResourceType) - The type

**Returns**

- `context` (void*) - 0 if no context was registered

### ResourceTypeGetName
*Type:* FUNCTION
get registered extension name of the type

**Parameters**

- `type` (HResourceType) - The type

**Returns**

- `name` (const char*) - The name of the type (e.g. "collectionc")

### ResourceTypeGetNameHash
*Type:* FUNCTION
get registered extension name hash of the type

**Parameters**

- `type` (HResourceType) - The type

**Returns**

- `hash` (dmhash_t) - The name hash of the type (e.g. "collectionc")

### ResourceTypeSetContext
*Type:* FUNCTION
set context from type

**Parameters**

- `type` (HResourceType) - The type
- `context` (void*) - The context to associate with the type

### ResourceTypeSetCreateFn
*Type:* FUNCTION
set create function for type

**Parameters**

- `type` (HResourceType) - The type
- `fn` (FResourceCreate) - Function to be called to creating the resource

### ResourceTypeSetDestroyFn
*Type:* FUNCTION
set destroy function for type

**Parameters**

- `type` (HResourceType) - The type
- `fn` (FResourceDestroy) - Function to be called to destroy the resource

### ResourceTypeSetPostCreateFn
*Type:* FUNCTION
set post create function for type

**Parameters**

- `type` (HResourceType) - The type
- `fn` (FResourcePostCreate) - Function to be called after creating the resource

### ResourceTypeSetPreloadFn
*Type:* FUNCTION
set preload function for type

**Parameters**

- `type` (HResourceType) - The type
- `fn` (FResourcePreload) - Function to be called when loading of the resource starts

### ResourceTypeSetRecreateFn
*Type:* FUNCTION
set recreate function for type

**Parameters**

- `type` (HResourceType) - The type
- `fn` (FResourceRecreate) - Function to be called when recreating the resource

<!-- engine-resource-src-dmsdk-resource-resource-hpp -->

# Resource {#apis:engine-resource-src-dmsdk-resource-resource-hpp}

**Namespace:** `dmResource`
**Language:** C++
**Type:** Defold C++
**File:** `resource.hpp`
**Source:** `engine/resource/src/dmsdk/resource/resource.hpp`
**Include:** `dmsdk/resource/resource.hpp`

Functions for managing resource types.

## API

### AddFile
*Type:* FUNCTION
Adds a file to the resource system
Any request for this path will go through any existing mounts first.
If you wish to provide file overrides, please use the LiveUpdate feature for that.
The file isn't persisted between sessions.

**Parameters**

- `factory` (dmResource::HFactory) - Factory handle
- `path` (const char*) - The path of the resource
- `size` (uint32_t) - The size of the resource (in bytes)
- `resource` (const void*) - The resource payload

**Returns**

- `RESULT_OK` (dmResource::Result) - on success.

### CreateResource
*Type:* FUNCTION
Creates and inserts a resource into the factory

**Notes**

- The input data pointer is not stored
- The reference count is 1, so make sure it's destruction is handled

**Parameters**

- `factory` (dmResource::HFactory) - Factory handle
- `name` (dmhash_t) - Resource name
- `data` - Resource data
- `data_size` - Resource data size
- `resource` (void**) - (out) Created resource

**Returns**

- `result` (dmResource::Result) - RESULT_OK on success

### FDecryptResource
*Type:* TYPEDEF
Decrypts a file

**Notes**

- Currently, the function requires the final resource to be the same length (or less)

**Parameters**

- `buffer` (void*) - The input/output buffer
- `buffer_len` (uint32_t) - The size of the buffer (in bytes)

**Returns**

- `RESULT_OK` - on success

### Get
*Type:* FUNCTION
Get a resource from factory

**Parameters**

- `factory` (dmResource::HFactory) - Factory handle
- `path` (const char*) - Resource path
- `resource` (void**) - (out) Created resource

**Returns**

- `result` (dmResource::Result) - RESULT_OK on success

### Get
*Type:* FUNCTION
Get a loaded resource from factory

**Parameters**

- `factory` (dmResource::HFactory) - Factory handle
- `path_hash` (const char*) - Resource path hash
- `resource` (void**) - (out) Created resource

**Returns**

- `result` (dmResource::Result) - RESULT_OK on success

### GetCanonicalPath
*Type:* FUNCTION
Gets the normalized resource path: "/my//icon.texturec" -> "/my/icon.texturec". "my/icon.texturec" -> "/my/icon.texturec".

**Parameters**

- `path` (const char*) - the relative dir of the resource
- `buf` (char*) - (out) the output of the normalization
- `buf_len` (uint32_t) - the size of the output buffer

**Returns**

- `length` (uint32_t) - the length of the output string

### GetPath
*Type:* FUNCTION
Returns the canonical path hash of a resource

**Parameters**

- `factory` (dmResource::HFactory) - Factory handle
- `resource` (const void*) - Resource
- `hash` (uint64_t*) - Returned hash

**Returns**

- `RESULT_OK` - on success

### GetTypeFromExtension
*Type:* FUNCTION
Get type from extension

**Parameters**

- `factory` (dmResource::HFactory) - Factory handle
- `extension` (const char*) - File extension, without leading "." character. E.g. "ttf"
- `type` (HResourceType*) - returned type is successful

**Returns**

- `result` (dmResult::Result) - RESULT_OK on success

### GetTypeFromExtensionHash
*Type:* FUNCTION
Get type from extension hash

**Parameters**

- `factory` (dmResource::HFactory) - Factory handle
- `extension_hash` (const char*) - Hash of file extension, without leading "." character. E.g. hash("ttf")
- `type` (HResourceType*) - returned type is successful

**Returns**

- `result` (dmResult::Result) - RESULT_OK on success

### GetWithExt
*Type:* FUNCTION
Get (load) a resource from factory

**Parameters**

- `factory` (dmResource::HFactory) - Factory handle
- `path` (const char*) - Resource path
- `ext` (const char*) - Resource extension. Must match the extension of the path
- `resource` (void**) - (out) Created resource

**Returns**

- `result` (dmResource::Result) - RESULT_OK on success.
                                           RESULT_INVALID_FILE_EXTENSION if the path extension doesn't match the required extension.

### GetWithExt
*Type:* FUNCTION
Get a loaded resource from factory

**Parameters**

- `factory` (dmResource::HFactory) - Factory handle
- `path_hash` (const char*) - Resource path hash
- `ext_hash` (const char*) - Resource extension hash. Must match the extension of the path.
- `resource` (void**) - (out) Created resource

**Returns**

- `result` (dmResource::Result) - RESULT_OK on success.
                                           RESULT_INVALID_FILE_EXTENSION if the path extension doesn't match the required extension.

### PreloadHint
*Type:* FUNCTION
Hint the preloader what to load before Create is called on the resource.
The resources are not guaranteed to be loaded before Create is called.
This function can be called from a worker thread.

**Parameters**

- `factory` (dmResource::HResourcePreloadHintInfo) - Preloader handle
- `name` (const char*) - Resource name

**Returns**

- `result` (bool) - if successfully invoking preloader.

### RegisterResourceDecryptionFunction
*Type:* FUNCTION
Registers a custom resource decryption function

**Parameters**

- `decrypt_resource` (dmResource::FDecryptResource) - The decryption function

### RegisterResourceReloadedCallback
*Type:* FUNCTION
Function called when a resource has been reloaded.

**Parameters**

- `factory` (dmResource::HFactory) - Handle of the factory to which the callback will be registered
- `callback` (dmResource::FResourceReloadedCallback) - Callback function to register
- `user_data` (void*) - User data that to

### RegisterType
*Type:* FUNCTION

**Notes**

- Deprecated in favor of ResourceRegisterTypeCreatorDesc

### Release
*Type:* FUNCTION
Release resource

**Parameters**

- `factory` (dmResource::HFactory) - Factory handle
- `resource` (void*) - Resource pointer

### RemoveFile
*Type:* FUNCTION
Removes a previously registered file from the resource system

**Parameters**

- `factory` (dmResource::HFactory) - Factory handle
- `path` (const char*) - The path of the resource

**Returns**

- `RESULT_OK` (dmResource::Result) - on success.

### SetupType
*Type:* FUNCTION
Setup function pointers and context for a resource type

**Notes**

- C++ Helper function. Deprecated in favor of ResourceRegisterTypeCreatorDesc et al

<!-- engine-resource-src-dmsdk-resource-resource_gen-hpp -->

# Resource {#apis:engine-resource-src-dmsdk-resource-resource_gen-hpp}

**Namespace:** `dmResource`
**Language:** C++
**Type:** Defold C++
**File:** `resource_gen.hpp`
**Source:** `engine/resource/src/dmsdk/resource/resource_gen.hpp`
**Include:** `dmsdk/resource/resource_gen.hpp`

Functions for managing resource types.

## API

### AddFile
*Type:* FUNCTION
Adds a file to the resource system
Any request for this path will go through any existing mounts first.
If you wish to provide file overrides, please use the LiveUpdate feature for that.
The file isn't persisted between sessions.

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `path` (const char*) - The path of the resource
- `size` (uint32_t) - The size of the resource (in bytes)
- `resource` (const void*) - The resource payload

**Returns**

- `result` (ResourceResult) - RESULT_OK on success

### DM_DECLARE_RESOURCE_TYPE
*Type:* MACRO
Declare and register new resource type to the engine.
This macro is used to declare the resource type callback functions used by the engine to communicate with the extension.

**Examples**

Register a new type:
```
#include
#include

static ResourceResult MyResourceTypeScriptCreate(const ResourceCreateParams* params) {}
static ResourceResult MyResourceTypeScriptDestroy(const ResourceDestroyParams* params) {}
static ResourceResult MyResourceTypeScriptRecreate(const ResourceRereateParams* params) {}

struct MyContext
{
    // ...
};

static ResourceResult RegisterResourceTypeBlob(HResourceTypeRegisterContext ctx, HResourceType type)
{
    // The engine.cpp creates the contexts for our built in types.
    // Here we register a custom type
    MyContext* context = new MyContext;

    ResourceTypeSetContext(type, (void*)context);
    ResourceTypeSetCreateFn(type, MyResourceTypeScriptCreate);
    ResourceTypeSetDestroyFn(type, MyResourceTypeScriptDestroy);
    ResourceTypeSetRecreateFn(type, MyResourceTypeScriptRecreate);
}

static ResourceResult DeregisterResourceTypeBlob(ResourceTypeRegisterContext& ctx)
{
    MyContext** context = (MyContext*)ResourceTypeGetContext(type);
    delete *context;
}

DM_DECLARE_RESOURCE_TYPE(ResourceTypeBlob, "blobc", RegisterResourceTypeBlob, DeregisterResourceTypeBlob);

```

### FReloadedCallback
*Type:* FUNCTION
Function called when a resource has been reloaded.

### FResourceDecrypt
*Type:* TYPEDEF
Encrypts a resource in-place

**Parameters**

- `buffer` (void*) - The input/output buffer
- `buffer_len` (uint32_t) - The size of the buffer (in bytes)

**Returns**

- `RESULT_OK` - on success

### FResourceReloadedCallback
*Type:* FUNCTION
Function called when a resource has been reloaded.

### Get
*Type:* FUNCTION
Get a resource from factory

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `name` (const char*) - Resource name
- `resource` (void**) - Created resource

**Returns**

- `result` (ResourceResult) - RESULT_OK on success

### GetByHash
*Type:* FUNCTION
Get a resource from factory

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `name` (dmhash_t) - Resource name
- `resource` (void**) - Created resource

**Returns**

- `result` (ResourceResult) - RESULT_OK on success

### GetDescriptor
*Type:* FUNCTION
Get resource descriptor from resource (name)

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `path` (dmhash_t) - Resource path
- `descriptor` (HResourceDescriptor*) - Returned resource descriptor

**Returns**

- `result` (ResourceResult) - RESULT_OK on success

### GetDescriptorByHash
*Type:* FUNCTION
Get resource descriptor from resource (name)

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `path_hash` (dmhash_t) - Resource path hash
- `descriptor` (HResourceDescriptor*) - Returned resource descriptor

**Returns**

- `result` (ResourceResult) - RESULT_OK on success

### GetPath
*Type:* FUNCTION
Returns the canonical path hash of a resource

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `resource` (void*) - The resource pointer
- `hash` (dmhash_t*) - (out) The path hash of the resource

**Returns**

- `result` (ResourceResult) - RESULT_OK on success

### GetRaw
*Type:* FUNCTION
Get raw resource data. Unregistered resources can be loaded with this function.
If successful, the returned resource data must be deallocated with free()

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `name` (dmhash_t) - Resource name
- `resource` (void**) - Created resource
- `resource_size` (uint32_t*) - Resource size

**Returns**

- `result` (ResourceResult) - RESULT_OK on success

### HDescriptor
*Type:* TYPEDEF
Holds information about a currently loaded resource.

### HFactory
*Type:* TYPEDEF
Resource factory handle. Holds references to all currently loaded resources.

### HPreloadHintInfo
*Type:* TYPEDEF
Holds information about preloading resources

### HResourceDescriptor
*Type:* TYPEDEF
Holds information about a currently loaded resource.

### HResourceFactory
*Type:* TYPEDEF
Resource factory handle. Holds references to all currently loaded resources.

### HResourcePreloadHintInfo
*Type:* TYPEDEF
Holds information about preloading resources

### HResourceType
*Type:* TYPEDEF
Represents a resource type, with a context and type functions for creation and destroying a resource.

### HResourceTypeContext
*Type:* TYPEDEF
Holds the resource types, as well as extra in engine contexts that can be shared across type functions.

### PreloadHint
*Type:* FUNCTION
Hint the preloader what to load before Create is called on the resource.
The resources are not guaranteed to be loaded before Create is called.
This function can be called from a worker thread.

**Parameters**

- `preloader` (dmResource::HResourcePreloadHintInfo) - Preloader handle
- `path` (const char*) - Resource path

**Returns**

- `result` (bool) - if successfully invoking preloader.

### Release
*Type:* FUNCTION
Release resource

**Notes**

- Decreases ref count by 1. If it reaches 0, the resource destroy function is called.

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `resource` (void*) - Resource pointer

### RemoveFile
*Type:* FUNCTION
Removes a previously registered file from the resource system

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `path` (const char*) - The path of the resource

**Returns**

- `result` (ResourceResult) - RESULT_OK on success

### ResourceAddFile
*Type:* FUNCTION
Adds a file to the resource system
Any request for this path will go through any existing mounts first.
If you wish to provide file overrides, please use the LiveUpdate feature for that.
The file isn't persisted between sessions.

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `path` (const char*) - The path of the resource
- `size` (uint32_t) - The size of the resource (in bytes)
- `resource` (const void*) - The resource payload

**Returns**

- `result` (ResourceResult) - RESULT_OK on success

### ResourceCreateParams
*Type:* FUNCTION
Parameters to ResourceCreate function of the resource type

### ResourceDestroyParams
*Type:* FUNCTION
Parameters to ResourceDestroy function of the resource type

### ResourceGet
*Type:* FUNCTION
Get a resource from factory

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `name` (const char*) - Resource name
- `resource` (void**) - Created resource

**Returns**

- `result` (ResourceResult) - RESULT_OK on success

### ResourceGetByHash
*Type:* FUNCTION
Get a resource from factory

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `name` (dmhash_t) - Resource name
- `resource` (void**) - Created resource

**Returns**

- `result` (ResourceResult) - RESULT_OK on success

### ResourceGetPath
*Type:* FUNCTION
Returns the canonical path hash of a resource

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `resource` (void*) - The resource pointer
- `hash` (dmhash_t*) - (out) The path hash of the resource

**Returns**

- `result` (ResourceResult) - RESULT_OK on success

### ResourceGetRaw
*Type:* FUNCTION
Get raw resource data. Unregistered resources can be loaded with this function.
If successful, the returned resource data must be deallocated with free()

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `name` (dmhash_t) - Resource name
- `resource` (void**) - Created resource
- `resource_size` (uint32_t*) - Resource size

**Returns**

- `result` (ResourceResult) - RESULT_OK on success

### ResourcePostCreateParams
*Type:* FUNCTION
Parameters to ResourcePostCreate function of the resource type

### ResourcePreloadHint
*Type:* FUNCTION
Hint the preloader what to load before Create is called on the resource.
The resources are not guaranteed to be loaded before Create is called.
This function can be called from a worker thread.

**Parameters**

- `preloader` (dmResource::HResourcePreloadHintInfo) - Preloader handle
- `path` (const char*) - Resource path

**Returns**

- `result` (bool) - if successfully invoking preloader.

### ResourcePreloadParams
*Type:* FUNCTION
Parameters to ResourcePreload function of the resource type

### ResourceRecreateParams
*Type:* FUNCTION
Parameters to ResourceRecreate function of the resource type

### ResourceRegisterDecryptionFunction
*Type:* FUNCTION
Registers a custom resource decryption function

**Parameters**

- `decrypt_resource` (dmResource::FDecryptResource) - The decryption function

### ResourceRelease
*Type:* FUNCTION
Release resource

**Notes**

- Decreases ref count by 1. If it reaches 0, the resource destroy function is called.

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `resource` (void*) - Resource pointer

### ResourceReloadedParams
*Type:* FUNCTION
Parameters to ResourceReloaded function of the resource type

### ResourceReloadedParams
*Type:* FUNCTION
Parameters to ResourceReloaded function of the resource type

### ResourceRemoveFile
*Type:* FUNCTION
Removes a previously registered file from the resource system

**Parameters**

- `factory` (HResourceFactory) - Factory handle
- `path` (const char*) - The path of the resource

**Returns**

- `result` (ResourceResult) - RESULT_OK on success

### ResourceResult
*Type:* ENUM
ResourceResult

**Members**

- `RESOURCE_RESULT_OK`
- `RESOURCE_RESULT_INVALID_DATA`
- `RESOURCE_RESULT_DDF_ERROR`
- `RESOURCE_RESULT_RESOURCE_NOT_FOUND`
- `RESOURCE_RESULT_MISSING_FILE_EXTENSION`
- `RESOURCE_RESULT_ALREADY_REGISTERED`
- `RESOURCE_RESULT_INVAL`
- `RESOURCE_RESULT_UNKNOWN_RESOURCE_TYPE`
- `RESOURCE_RESULT_OUT_OF_MEMORY`
- `RESOURCE_RESULT_IO_ERROR`
- `RESOURCE_RESULT_NOT_LOADED`
- `RESOURCE_RESULT_OUT_OF_RESOURCES`
- `RESOURCE_RESULT_STREAMBUFFER_TOO_SMALL`
- `RESOURCE_RESULT_FORMAT_ERROR`
- `RESOURCE_RESULT_CONSTANT_ERROR`
- `RESOURCE_RESULT_NOT_SUPPORTED`
- `RESOURCE_RESULT_RESOURCE_LOOP_ERROR`
- `RESOURCE_RESULT_PENDING`
- `RESOURCE_RESULT_INVALID_FILE_EXTENSION`
- `RESOURCE_RESULT_VERSION_MISMATCH`
- `RESOURCE_RESULT_SIGNATURE_MISMATCH`
- `RESOURCE_RESULT_UNKNOWN_ERROR`

### ResourceTypeCreatorDescBufferSize
*Type:* FUNCTION
Resource type creator desc byte size declaration.
The registered description data passeed to ResourceRegisterTypeCreatorDesc must be of at least this size.

### Result
*Type:* ENUM
ResourceResult

**Members**

- `RESOURCE_RESULT_OK`
- `RESOURCE_RESULT_INVALID_DATA`
- `RESOURCE_RESULT_DDF_ERROR`
- `RESOURCE_RESULT_RESOURCE_NOT_FOUND`
- `RESOURCE_RESULT_MISSING_FILE_EXTENSION`
- `RESOURCE_RESULT_ALREADY_REGISTERED`
- `RESOURCE_RESULT_INVAL`
- `RESOURCE_RESULT_UNKNOWN_RESOURCE_TYPE`
- `RESOURCE_RESULT_OUT_OF_MEMORY`
- `RESOURCE_RESULT_IO_ERROR`
- `RESOURCE_RESULT_NOT_LOADED`
- `RESOURCE_RESULT_OUT_OF_RESOURCES`
- `RESOURCE_RESULT_STREAMBUFFER_TOO_SMALL`
- `RESOURCE_RESULT_FORMAT_ERROR`
- `RESOURCE_RESULT_CONSTANT_ERROR`
- `RESOURCE_RESULT_NOT_SUPPORTED`
- `RESOURCE_RESULT_RESOURCE_LOOP_ERROR`
- `RESOURCE_RESULT_PENDING`
- `RESOURCE_RESULT_INVALID_FILE_EXTENSION`
- `RESOURCE_RESULT_VERSION_MISMATCH`
- `RESOURCE_RESULT_SIGNATURE_MISMATCH`
- `RESOURCE_RESULT_UNKNOWN_ERROR`

<!-- engine-script-src-dmsdk-script-script-h -->

# Script {#apis:engine-script-src-dmsdk-script-script-h}

**Namespace:** `dmScript`
**Language:** C++
**Type:** Defold C++
**File:** `script.h`
**Source:** `engine/script/src/dmsdk/script/script.h`
**Include:** `dmsdk/script/script.h`

Built-in scripting functions.

## API

### CheckHash
*Type:* FUNCTION
Check if the value in the supplied index on the lua stack is a hash.

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value

**Returns**

- `value` (hash) - The hash value

### CheckHashOrString
*Type:* FUNCTION
Check if the value in the supplied index on the lua stack is a hash or string.
If it is a string, it gets hashed on the fly

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value

**Returns**

- `value` (hash) - The hash value

### CheckMatrix4
*Type:* FUNCTION
Check if the value in the supplied index on the lua stack is a dmVMath::Matrix4.

**Notes**

- throws a luaL_error if it's not the correct type

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value

**Returns**

- `matrix` (dmVMath::Matrix4*) - The pointer to the value

### CheckQuat
*Type:* FUNCTION
Check if the value in the supplied index on the lua stack is a dmVMath::Quat.

**Notes**

- throws a luaL_error if it's not the correct type

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value

**Returns**

- `quat` (dmVMath::Quat*) - The pointer to the value

### CheckTable
*Type:* FUNCTION
Serialize a table to a buffer
Supported types: LUA_TBOOLEAN, LUA_TNUMBER, LUA_TSTRING, Point3, Vector3, Vector4 and Quat
Keys must be strings

**Parameters**

- `L` (lua_State*) - Lua state
- `buffer` (char*) - Buffer that will be written to (must be DM_ALIGNED(16))
- `buffer_size` (uint32_t) - Buffer size
- `index` (int) - Index of the table

**Returns**

- `result` (uint32_t) - Number of bytes used in buffer

### CheckURL
*Type:* FUNCTION
Check if the value in the supplied index on the lua stack is a dmMessage::URL and returns it if so.

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value

**Returns**

- `url` (dmMessage::URL*) - The pointer to the value

### CheckURL
*Type:* FUNCTION
Get the current game object URL

**Parameters**

- `L` (lua_State*) - Lua state
- `out_url` (dmMessage::URL*) - where to store the result

**Returns**

- `result` (bool) - true if successful

### CheckVector3
*Type:* FUNCTION
Check if the value in the supplied index on the lua stack is a dmVMath::Vector3.

**Notes**

- throws a luaL_error if it's not the correct type

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value

**Returns**

- `vector3` (dmVMath::Vector3*) - The pointer to the value

### CheckVector4
*Type:* FUNCTION
Check if the value in the supplied index on the lua stack is a dmVMath::Vector3.

**Notes**

- throws a luaL_error if it's not the correct type

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value

**Returns**

- `vector4` (dmVMath::Vector4*) - The pointer to the value

### CreateCallback
*Type:* FUNCTION
Stores the current Lua state plus references to the script instance (self) and the callback.
Expects SetInstance() to have been called prior to using this method.
The allocated data is created on the Lua stack and references are made against the
instances own context table.
If the callback is not explicitly deleted with DestroyCallback() the references and
data will stay around until the script instance is deleted.

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Lua stack index of the function

**Returns**

- `callback` (LuaCallbackInfo*) - Lua callback struct if successful, 0 otherwise

**Examples**

```
static int SomeFunction(lua_State* L) // called from Lua
{
    LuaCallbackInfo* cbk = dmScript::CreateCallback(L, 1);
    ... store the callback for later
}

static void InvokeCallback(LuaCallbackInfo* cbk)
{
    lua_State* L = dmScript::GetCallbackLuaContext(cbk);
    DM_LUA_STACK_CHECK(L, 0);

    if (!dmScript::SetupCallback(callback))
    {
        return;
    }

    lua_pushstring(L, "hello");

    dmScript::PCall(L, 2, 0); // self + # user arguments

    dmScript::TeardownCallback(callback);
    dmScript::DestroyCallback(cbk); // only do this if you're not using the callback again
}

```

### DestroyCallback
*Type:* FUNCTION
Deletes the Lua callback

**Parameters**

- `cbk` (LuaCallbackInfo*) - Lua callback struct

### DM_LUA_ERROR
*Type:* MACRO
This macro will verify that the Lua stack size hasn't been changed before
throwing a Lua error, which will long-jump out of the current function.
This macro can only be used together with DM_LUA_STACK_CHECK and should
be prefered over manual checking of the stack.

**Parameters**

- `fmt` (const char*) - Format string that contains error information.
- `args` (...) - Format string args (variable arg list)

**Examples**

```
static int ModuleFunc(lua_State* L)
{
    DM_LUA_STACK_CHECK(L, 1);
    if (some_error_check(L))
    {
        return DM_LUA_ERROR("some error message");
    }
    lua_pushnumber(L, 42);
    return 1;
}

```

### DM_LUA_STACK_CHECK
*Type:* MACRO
Diff is the expected difference of the stack size.
If luaL_error, or another function that executes a long-jump, is part of the executed code,
the stack guard cannot be guaranteed to execute at the end of the function.
In that case you should manually check the stack using lua_gettop.
In the case of luaL_error, see DM_LUA_ERROR.

**Parameters**

- `L` (lua_State*) - lua state
- `diff` (int) - Number of expected items to be on the Lua stack once this struct goes out of scope

**Examples**

```
DM_LUA_STACK_CHECK(L, 1);
lua_pushnumber(L, 42);

```

### GetCallbackLuaContext
*Type:* FUNCTION
Gets the Lua context from a callback struct

**Parameters**

- `cbk` (LuaCallbackInfo*) - Lua callback struct

**Returns**

- `L` (lua_State*) - Lua state

### GetInstance
*Type:* FUNCTION
Retrieve current script instance from the global table and place it on the top of the stack, only valid when set.
(see dmScript::GetMainThread)

**Parameters**

- `L` (lua_State*) - lua state

### GetLuaState
*Type:* FUNCTION
Retrieve Lua state from the context

**Parameters**

- `context` (HContext) - the script context

**Returns**

- `state` (lua_State*) - the lua state

### GetMainThread
*Type:* FUNCTION
Retrieve the main thread lua state from any lua state (main thread or coroutine).

**Parameters**

- `L` (lua_State*) - lua state

**Returns**

- `lua_State` (lua_State*) - the main thread lua state

**Examples**

How to create a Lua callback
```
dmScript::LuaCallbackInfo* g_MyCallbackInfo = 0;

static void InvokeCallback(dmScript::LuaCallbackInfo* cbk)
{
    if (!dmScript::IsCallbackValid(cbk))
        return;

    lua_State* L = dmScript::GetCallbackLuaContext(cbk);
    DM_LUA_STACK_CHECK(L, 0)

    if (!dmScript::SetupCallback(cbk))
    {
        dmLogError("Failed to setup callback");
        return;
    }

    lua_pushstring(L, "Hello from extension!");
    lua_pushnumber(L, 76);

    dmScript::PCall(L, 3, 0); // instance + 2

    dmScript::TeardownCallback(cbk);
}

static int Start(lua_State* L)
{
    DM_LUA_STACK_CHECK(L, 0);

    g_MyCallbackInfo = dmScript::CreateCallback(L, 1);

    return 0;
}

static int Update(lua_State* L)
{
    DM_LUA_STACK_CHECK(L, 0);

    static int count = 0;
    if( count++ == 5 )
    {
        InvokeCallback(g_MyCallbackInfo);
        if (g_MyCallbackInfo)
            dmScript::DestroyCallback(g_MyCallbackInfo);
        g_MyCallbackInfo = 0;
    }
    return 0;
}

```

### GetStringFromHashOrString
*Type:* FUNCTION
Gets as good as possible printable string from a hash or string

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value
- `buffer` (char*) - buffer receiving the value
- `buffer_length` (uint32_t) - the buffer length

**Returns**

- `string` (const char*) - Returns buffer. If buffer is non null, it will always contain a null terminated string. "<unknown>" if the hash could not be looked up.

### HContext
*Type:* TYPEDEF
The script context

### IsCallbackValid
*Type:* FUNCTION
Check if Lua callback is valid.

**Parameters**

- `cbk` (LuaCallbackInfo*) - Lua callback struct

### IsHash
*Type:* FUNCTION
Check if the value at #index is a hash

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value

**Returns**

- `result` (bool) - true if the value at #index is a hash

### IsInstanceValid
*Type:* FUNCTION
Check if the script instance in the lua state is valid. The instance is assumed to have been previously set by dmScript::SetInstance.

**Parameters**

- `L` (lua_State*) - lua state

**Returns**

- `boolean` (bool) - Returns true if the instance is valid

### IsMatrix4
*Type:* FUNCTION
Check if the value at #index is a dmVMath::Matrix4*

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value

**Returns**

- `true` (bool) - if value at #index is a dmVMath::Matrix4*

### IsQuat
*Type:* FUNCTION
Check if the value at #index is a dmVMath::Quat*

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value

**Returns**

- `true` (bool) - if value at #index is a dmVMath::Quat*

### IsURL
*Type:* FUNCTION
Check if the value at #index is a URL

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value

**Returns**

- `result` (bool) - true if the value at #index is a URL

### IsVector3
*Type:* FUNCTION
Check if the value at #index is a dmVMath::Vector3*

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value

**Returns**

- `true` (bool) - if value at #index is a dmVMath::Vector3*

### IsVector4
*Type:* FUNCTION
Check if the value at #index is a dmVMath::Vector4*

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value

**Returns**

- `true` (bool) - if value at #index is a dmVMath::Vector4*

### JsonToLua
*Type:* FUNCTION
Convert a Json string to Lua table.

**Notes**

- Throws Lua error if it fails to parser the json

**Parameters**

- `L` (lua_State*) - lua state
- `json` (const char*) - json string
- `json_len` (size_t) - length of json string

**Returns**

- `int` (int) - 1 if it succeeds. Throws a Lua error if it fails

### LuaCallbackInfo
*Type:* STRUCT
callback info struct that will hold the relevant info needed to make a callback into Lua

### LuaToJson
*Type:* FUNCTION
Convert a Lua table to a Json string

**Parameters**

- `L` (lua_State*) - lua state
- `json` (char**) - [out] Pointer to char*, which will receive a newly allocated string. Use free().
- `json_len` (size_t*) - length of json string

**Returns**

- `int` (int) - &lt;0 if it fails. &gt;=0 if it succeeds.

### PCall
*Type:* FUNCTION
This function wraps lua_pcall with the addition of specifying an error handler which produces a backtrace.
In the case of an error, the error is logged and popped from the stack.

**Parameters**

- `L` (lua_State*) - lua state
- `nargs` (int) - number of arguments
- `nresult` (int) - number of results

**Returns**

- `error` (int) - error code from pcall

### PushDDF
*Type:* FUNCTION
Push DDF message to Lua stack

**Parameters**

- `L` (lua_State*) - the Lua state
- `descriptor` (const dmDDF::Descriptor*) - field descriptor
- `data` (const char*) - the message data (i.e. the message struct)
- `pointers_are_offsets` (bool) - True if pointers are offsets

### PushHash
*Type:* FUNCTION
Push a hash value onto the supplied lua state, will increase the stack by 1.

**Parameters**

- `L` (lua_State*) - Lua state
- `hash` (dmhash_t) - Hash value to push

### PushMatrix4
*Type:* FUNCTION
Push a matrix4 value onto the Lua stack. Will increase the stack by 1.

**Parameters**

- `L` (lua_State*) - Lua state
- `matrix` (dmVMath::Matrix4) - dmVMath::Matrix4 value to push

### PushQuat
*Type:* FUNCTION
Push a quaternion value onto Lua stack. Will increase the stack by 1.

**Parameters**

- `L` (lua_State*) - Lua state
- `quat` (dmVMath::Quat) - dmVMath::Quat value to push

### PushURL
*Type:* FUNCTION
Push a URL value onto the supplied lua state, will increase the stack by 1.

**Parameters**

- `L` (lua_State*) - Lua state
- `url` (dmMessage::URL&) - URL reference to push

### PushVector3
*Type:* FUNCTION
Push a dmVMath::Vector3 value onto the supplied lua state, will increase the stack by 1.

**Parameters**

- `L` (lua_State*) - Lua state
- `v` (dmVMath::Vector3) - Vector3 value to push

### PushVector4
*Type:* FUNCTION
Push a dmVMath::Vector4 value onto the supplied lua state, will increase the stack by 1.

**Parameters**

- `L` (lua_State*) - Lua state
- `v` (dmVMath::Vector4) - dmVMath::Vector4 value to push

### Ref
*Type:* FUNCTION
Creates and returns a reference, in the table at index t, for the object at the
top of the stack (and pops the object).
It also tracks number of global references kept.

**Parameters**

- `L` (lua_State*) - lua state
- `table` (int) - table the lua table that stores the references. E.g LUA_REGISTRYINDEX

**Returns**

- `reference` (int) - the new reference

### RefInInstance
*Type:* FUNCTION
Creates a reference to the value at top of stack, the ref is done in the
current instances context table.
Expects SetInstance() to have been set with an value that has a meta table
with META_GET_INSTANCE_CONTEXT_TABLE_REF method.

**Parameters**

- `L` (lua_State*) - Lua state

**Returns**

- `lua` (int) - ref to value or LUA_NOREF
Lua stack on entry
 [-1] value
Lua stack on exit

### RefInInstance
*Type:* FUNCTION
Resolves a url in string format into a dmMessage::URL struct.
Special handling for:
- "." returns the default socket + path
- "#" returns default socket + path + fragment

**Parameters**

- `L` (lua_State*) - Lua state
- `url` (const char*) - url
- `out_url` (dmMessage::URL*) - where to store the result
- `default_url` (dmMessage::URL*) - default url

**Returns**

- `result` (dmMessage::Result) - dmMessage::RESULT_OK if the conversion succeeded

### ResolveURL
*Type:* FUNCTION
Resolves the value in the supplied index on the lua stack to a URL. It long jumps (calls luaL_error) on failure.
It also gets the current (caller) url if the a pointer is passed to out_default_url

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value
- `out_url` (dmMessage::URL*) - where to store the result
- `out_default_url` (dmMessage::URL*) - default URL used in the resolve, can be 0x0 (not used)

**Returns**

- `result` (int) - 0 if successful. Throws Lua error on failure

### SetInstance
*Type:* FUNCTION
Sets the current script instance
Set the value on the top of the stack as the instance into the global table and pops it from the stack.
(see dmScript::GetMainThread)

**Parameters**

- `L` (lua_State*) - lua state

### SetupCallback
*Type:* FUNCTION
The Lua stack after a successful call:
```
   [-4] old instance
   [-3] context table
   [-2] callback
   [-1] self

```

In the event of an unsuccessful call, the Lua stack is unchanged

**Parameters**

- `cbk` (LuaCallbackInfo*) - Lua callback struct

**Returns**

- `true` (bool) - if the setup was successful

### TeardownCallback
*Type:* FUNCTION
Sets the previous instance
Expects Lua stack:
```
   [-2] old instance
   [-1] context table

```

Both values are removed from the stack

**Parameters**

- `cbk` (LuaCallbackInfo*) - Lua callback struct

### ToHash
*Type:* FUNCTION
Check if the value at #index is a hash

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value

**Returns**

- `hash` (dmhash_t*) - pointer to hash or 0 if it's not a hash

### ToMatrix4
*Type:* FUNCTION
Get the value at index as a dmVMath::Matrix4*

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value

**Returns**

- `quat` (dmVMath::Matrix4*) - The pointer to the value, or 0 if not correct type

### ToQuat
*Type:* FUNCTION
Get the value at index as a dmVMath::Quat*

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value

**Returns**

- `quat` (dmVMath::Quat*) - The pointer to the value, or 0 if not correct type

### ToURL
*Type:* FUNCTION
get the value at index as a dmMessage::URL*

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value

**Returns**

- `hash` (dmhash_t*) - pointer to URL or 0 if it's not a URL

### ToVector3
*Type:* FUNCTION
Get the value at index as a dmVMath::Vector3*

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value

**Returns**

- `v` (dmVMath::Vector3*) - The pointer to the value, or 0 if not correct type

### ToVector4
*Type:* FUNCTION
Get the value at index as a dmVMath::Vector4*

**Parameters**

- `L` (lua_State*) - Lua state
- `index` (int) - Index of the value

**Returns**

- `v` (dmVMath::Vector4*) - The pointer to the value, or 0 if not correct type

### Unref
*Type:* FUNCTION
Releases reference ref from the table at index t (see luaL_ref).
The entry is removed from the table, so that the referred object can be collected.
It also decreases the number of global references kept

**Parameters**

- `L` (lua_State*) - lua state
- `table` (int) - table the lua table that stores the references. E.g LUA_REGISTRYINDEX
- `reference` (int) - the reference to the object

### UnrefInInstance
*Type:* FUNCTION
Deletes the instance local lua reference
Expects SetInstance() to have been set with an value that has a meta table
with META_GET_INSTANCE_CONTEXT_TABLE_REF method.

**Parameters**

- `L` (lua_State*) - Lua state
- `ref` (int) - ref to value or LUA_NOREF
Lua stack on entry
Lua stack on exit

### UrlToString
*Type:* FUNCTION
Converts a URL into a readable string. Useful for e.g. error messages

**Parameters**

- `url` (dmMessage::URL*) - url
- `buffer` (char*) - the output buffer
- `buffer_size` (uint32_t) - the output buffer size

**Returns**

- `buffer` (const char*) - returns the passed in buffer

<!-- engine-sound-src-dmsdk-sound-sound-h -->

# Sound {#apis:engine-sound-src-dmsdk-sound-sound-h}

**Namespace:** `dmSound`
**Language:** C++
**Type:** Defold C++
**File:** `sound.h`
**Source:** `engine/sound/src/dmsdk/sound/sound.h`
**Include:** `dmsdk/sound/sound.h`

Functions for controlling the engine sound mixer from native extensions.

## API

### IsGroupMuted
*Type:* FUNCTION
Query group mute state

**Parameters**

- `group` (dmhash_t) - hash of the mixer group (e.g. <code>hash("master")</code>)

**Returns**

- `muted` (bool) - <code>true</code> if the mixer group is muted

### Result
*Type:* ENUM

**Members**

- `RESULT_OK`
- `RESULT_PARTIAL_DATA`
- `RESULT_OUT_OF_SOURCES`
- `RESULT_EFFECT_NOT_FOUND`
- `RESULT_OUT_OF_INSTANCES`
- `RESULT_RESOURCE_LEAK`
- `RESULT_OUT_OF_BUFFERS`
- `RESULT_INVALID_PROPERTY`
- `RESULT_UNKNOWN_SOUND_TYPE`
- `RESULT_INVALID_STREAM_DATA`
- `RESULT_OUT_OF_MEMORY`
- `RESULT_UNSUPPORTED`
- `RESULT_DEVICE_NOT_FOUND`
- `RESULT_OUT_OF_GROUPS`
- `RESULT_NO_SUCH_GROUP`
- `RESULT_NOTHING_TO_PLAY`
- `RESULT_INIT_ERROR`
- `RESULT_FINI_ERROR`
- `RESULT_NO_DATA`
- `RESULT_END_OF_STREAM`
- `RESULT_DEVICE_LOST`
- `RESULT_UNKNOWN_ERROR`

### SetGroupMute
*Type:* FUNCTION
Temporarily mute or restore an individual mixer group.

**Parameters**

- `group` (dmhash_t) - hash of the mixer group (e.g. <code>hash("master")</code>)
- `mute` (bool) - <code>true</code> to mute, <code>false</code> to restore audio

**Returns**

- `result` (Result) - RESULT_OK on success

### ToggleGroupMute
*Type:* FUNCTION
Convenience toggle for SetGroupMute.

**Parameters**

- `group` (dmhash_t) - hash of the mixer group (e.g. <code>hash("master")</code>)

**Returns**

- `result` (Result) - RESULT_OK on success

<!-- b2d-lua -->

# b2d {#apis:b2d-lua}

**Namespace:** `b2d`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_box2d.cpp`
**Source:** `engine/gamesys/src/gamesys/scripts/box2d/script_box2d.cpp`

Functions for interacting with Box2D.

## API

### b2Body
*Type:* TYPEDEF
Box2D body

**Parameters**

- `value` (userdata)

### b2d.get_body
*Type:* FUNCTION
Get the Box2D body from a collision object

**Parameters**

- `url` (string | hash | url) - the url to the game object collision component

**Returns**

- `body` (b2Body) - the body if successful. Otherwise <code>nil</code>.

### b2d.get_world
*Type:* FUNCTION
Get the Box2D world from the current collection

**Returns**

- `world` (b2World) - the world if successful. Otherwise <code>nil</code>.

### b2World
*Type:* TYPEDEF
Box2D world

**Parameters**

- `value` (userdata)

<!-- b2d.body-lua -->

# b2d.body {#apis:b2d.body-lua}

**Namespace:** `b2d.body`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_box2d_body.cpp`
**Source:** `engine/gamesys/src/gamesys/scripts/box2d/script_box2d_body.cpp`

Functions for interacting with Box2D bodies.

## API

### b2Body
*Type:* TYPEDEF
Box2D body

**Parameters**

- `value` (userdata)

### b2d.body.apply_angular_impulse
*Type:* FUNCTION
Apply an angular impulse.

**Parameters**

- `body` (b2Body) - body
- `impulse` (number) - impulse the angular impulse in units of kg<em>m</em>m/s

### b2d.body.apply_force
*Type:* FUNCTION
Apply a force at a world point. If the force is not
applied at the center of mass, it will generate a torque and
affect the angular velocity. This wakes up the body.

**Parameters**

- `body` (b2Body) - body
- `force` (vector3) - the world force vector, usually in Newtons (N).
- `point` (vector3) - the world position of the point of application.

### b2d.body.apply_force_to_center
*Type:* FUNCTION
Apply a force to the center of mass. This wakes up the body.

**Parameters**

- `body` (b2Body) - body
- `force` (vector3) - the world force vector, usually in Newtons (N).

### b2d.body.apply_linear_impulse
*Type:* FUNCTION
Apply an impulse at a point. This immediately modifies the velocity.
It also modifies the angular velocity if the point of application
is not at the center of mass. This wakes up the body.

**Parameters**

- `body` (b2Body) - body
- `impulse` (vector3) - the world impulse vector, usually in N-seconds or kg-m/s.
- `point` (vector3) - the world position of the point of application.

### b2d.body.apply_torque
*Type:* FUNCTION
Apply a torque. This affects the angular velocity
without affecting the linear velocity of the center of mass.
This wakes up the body.

**Parameters**

- `body` (b2Body) - body
- `torque` (number) - torque about the z-axis (out of the screen), usually in N-m.

### b2d.body.B2_DYNAMIC_BODY
*Type:* CONSTANT
Dynamic body

### b2d.body.B2_KINEMATIC_BODY
*Type:* CONSTANT
Kinematic body

### b2d.body.B2_STATIC_BODY
*Type:* CONSTANT
Static (immovable) body

### b2d.body.enable_sleep
*Type:* FUNCTION
You can disable sleeping on this body. If you disable sleeping, the body will be woken.

**Parameters**

- `body` (b2Body) - body
- `enable` (boolean) - if false, the body will never sleep, and consume more CPU

### b2d.body.get_angle
*Type:* FUNCTION
Get the angle in radians.

**Parameters**

- `body` (b2Body) - body

**Returns**

- `angle` (number) - the current world rotation angle in radians.

### b2d.body.get_angular_damping
*Type:* FUNCTION
Get the angular damping of the body.

**Parameters**

- `body` (b2Body) - body

**Returns**

- `damping` (number) - the damping

### b2d.body.get_angular_velocity
*Type:* FUNCTION
Get the angular velocity.

**Parameters**

- `body` (b2Body) - body

**Returns**

- `velocity` (number) - the angular velocity in radians/second.

### b2d.body.get_gravity_scale
*Type:* FUNCTION
Get the gravity scale of the body.

**Parameters**

- `body` (b2Body) - body

**Returns**

- `scale` (number) - the scale

### b2d.body.get_linear_damping
*Type:* FUNCTION
Get the linear damping of the body.

**Parameters**

- `body` (b2Body) - body

**Returns**

- `damping` (number) - the damping

### b2d.body.get_linear_velocity
*Type:* FUNCTION
Get the linear velocity of the center of mass.

**Parameters**

- `body` (b2Body) - body

**Returns**

- `velocity` (vector3) - the linear velocity of the center of mass.

### b2d.body.get_linear_velocity_from_local_point
*Type:* FUNCTION
Get the world velocity of a local point.

**Parameters**

- `body` (b2Body) - body
- `local_point` (vector3) - a point in local coordinates.

**Returns**

- `velocity` (vector3) - the world velocity of a point.

### b2d.body.get_linear_velocity_from_world_point
*Type:* FUNCTION
Get the world linear velocity of a world point attached to this body.

**Parameters**

- `body` (b2Body) - body
- `world_point` (vector3) - a point in world coordinates.

**Returns**

- `velocity` (vector3) - the world velocity of a point.

### b2d.body.get_local_center_of_mass
*Type:* FUNCTION
Get the local position of the center of mass.

**Parameters**

- `body` (b2Body) - body

**Returns**

- `center` (vector3) - Get the local position of the center of mass.

### b2d.body.get_local_point
*Type:* FUNCTION
Gets a local point relative to the body's origin given a world point.

**Parameters**

- `body` (b2Body) - body
- `world_point` (vector3) - a point in world coordinates.

**Returns**

- `vector` (vector3) - the corresponding local point relative to the body's origin.

### b2d.body.get_local_vector
*Type:* FUNCTION
Gets a local vector given a world vector.

**Parameters**

- `body` (b2Body) - body
- `world_vector` (vector3) - a vector in world coordinates.

**Returns**

- `vector` (vector3) - the corresponding local vector.

### b2d.body.get_mass
*Type:* FUNCTION
Get the total mass of the body.

**Parameters**

- `body` (b2Body) - body

**Returns**

- `mass` (number) - the mass, usually in kilograms (kg).

### b2d.body.get_position
*Type:* FUNCTION
Get the world body origin position.

**Parameters**

- `body` (b2Body) - body

**Returns**

- `position` (vector3) - the world position of the body's origin.

### b2d.body.get_rotational_inertia
*Type:* FUNCTION
Get the rotational inertia of the body about the local origin.

**Parameters**

- `body` (b2Body) - body

**Returns**

- `inertia` (number) - the rotational inertia, usually in kg-m^2.

### b2d.body.get_type
*Type:* FUNCTION
Get the type of this body.

**Parameters**

- `body` (b2Body) - body

**Returns**

- `type` (b2BodyType) - the body type

### b2d.body.get_world
*Type:* FUNCTION
Get the parent world of this body.

**Parameters**

- `body` (b2Body) - body

**Returns**

- `world` (b2World)

### b2d.body.get_world_center_of_mass
*Type:* FUNCTION
Get the world position of the center of mass.

**Parameters**

- `body` (b2Body) - body

**Returns**

- `center` (vector3) - Get the world position of the center of mass.

### b2d.body.get_world_point
*Type:* FUNCTION
Get the world coordinates of a point given the local coordinates.

**Parameters**

- `body` (b2Body) - body
- `local_vector` (vector3) - localPoint a point on the body measured relative the the body's origin.

**Returns**

- `vector` (vector3) - the same point expressed in world coordinates.

### b2d.body.get_world_vector
*Type:* FUNCTION
Get the world coordinates of a vector given the local coordinates.

**Parameters**

- `body` (b2Body) - body
- `local_vector` (vector3) - a vector fixed in the body.

**Returns**

- `vector` (vector3) - the same vector expressed in world coordinates.

### b2d.body.is_active
*Type:* FUNCTION
Get the active state of the body.

**Parameters**

- `body` (b2Body) - body

**Returns**

- `enabled` (boolean) - is the body active

### b2d.body.is_awake
*Type:* FUNCTION
Get the sleeping state of this body.

**Parameters**

- `body` (b2Body) - body

**Returns**

- `enabled` (boolean) - true if the body is awake, false if it's sleeping.

### b2d.body.is_bullet
*Type:* FUNCTION
Is this body in bullet mode

**Parameters**

- `body` (b2Body) - body

**Returns**

- `enabled` (boolean) - true if the body is in bullet mode

### b2d.body.is_fixed_rotation
*Type:* FUNCTION
Does this body have fixed rotation?

**Parameters**

- `body` (b2Body) - body

**Returns**

- `enabled` (boolean) - is the rotation fixed

### b2d.body.is_sleeping_enabled
*Type:* FUNCTION
Is this body allowed to sleep

**Parameters**

- `body` (b2Body) - body

**Returns**

- `enabled` (boolean) - true if the body is allowed to sleep

### b2d.body.reset_mass_data
*Type:* FUNCTION
This resets the mass properties to the sum of the mass properties of the fixtures.
This normally does not need to be called unless you called SetMassData to override

**Parameters**

- `body` (b2Body) - body

### b2d.body.set_active
*Type:* FUNCTION
Set the active state of the body. An inactive body is not
simulated and cannot be collided with or woken up.
If you pass a flag of true, all fixtures will be added to the
broad-phase.
If you pass a flag of false, all fixtures will be removed from
the broad-phase and all contacts will be destroyed.
Fixtures and joints are otherwise unaffected. You may continue
to create/destroy fixtures and joints on inactive bodies.
Fixtures on an inactive body are implicitly inactive and will
not participate in collisions, ray-casts, or queries.
Joints connected to an inactive body are implicitly inactive.
An inactive body is still owned by a b2World object and remains
in the body list.

**Parameters**

- `body` (b2Body) - body
- `enable` (boolean) - true if the body should be active

### b2d.body.set_angular_damping
*Type:* FUNCTION
Set the angular damping of the body.

**Parameters**

- `body` (b2Body) - body
- `damping` (number) - the damping

### b2d.body.set_angular_velocity
*Type:* FUNCTION
Set the angular velocity.

**Parameters**

- `body` (b2Body) - body
- `omega` (number) - the new angular velocity in radians/second.

### b2d.body.set_awake
*Type:* FUNCTION
Set the sleep state of the body. A sleeping body has very low CPU cost.

**Parameters**

- `body` (b2Body) - body
- `enable` (boolean) - flag set to false to put body to sleep, true to wake it.

### b2d.body.set_bullet
*Type:* FUNCTION
Should this body be treated like a bullet for continuous collision detection?

**Parameters**

- `body` (b2Body) - body
- `enable` (boolean) - if true, the body will be in bullet mode

### b2d.body.set_fixed_rotation
*Type:* FUNCTION
Set this body to have fixed rotation. This causes the mass to be reset.

**Parameters**

- `body` (b2Body) - body
- `enable` (boolean) - true if the rotation should be fixed

### b2d.body.set_gravity_scale
*Type:* FUNCTION
Set the gravity scale of the body.

**Parameters**

- `body` (b2Body) - body
- `scale` (number) - the scale

### b2d.body.set_linear_damping
*Type:* FUNCTION
Set the linear damping of the body.

**Parameters**

- `body` (b2Body) - body
- `damping` (number) - the damping

### b2d.body.set_linear_velocity
*Type:* FUNCTION
Set the linear velocity of the center of mass.

**Parameters**

- `body` (b2Body) - body
- `velocity` (vector3) - the new linear velocity of the center of mass.

### b2d.body.set_transform
*Type:* FUNCTION
Set the position of the body's origin and rotation.
This breaks any contacts and wakes the other bodies.
Manipulating a body's transform may cause non-physical behavior.

**Parameters**

- `body` (b2Body) - body
- `position` (vector3) - the world position of the body's local origin.
- `angle` (number) - the world position of the body's local origin.

### b2d.body.set_type
*Type:* FUNCTION
Set the type of this body. This may alter the mass and velocity.

**Parameters**

- `body` (b2Body) - body
- `type` (b2BodyType) - the body type

### b2World
*Type:* TYPEDEF
Box2D world

**Parameters**

- `value` (userdata)

<!-- base-lua -->

# Base {#apis:base-lua}

**Namespace:** `base`
**Language:** Lua
**Type:** Defold Lua
**File:** `lua_base.doc_h`
**Source:** `engine/lua/src/lua_base.doc_h`

Documentation for the Lua base standard library.

From [Lua 5.1 Reference Manual](https://www.lua.org/manual/5.1/)
by Roberto Ierusalimschy, Luiz Henrique de Figueiredo, Waldemar Celes.

Copyright  2006-2012 Lua.org, PUC-Rio.

Freely available under the terms of the [Lua license](https://www.lua.org/license.html).

## API

### _G
*Type:* VARIABLE
A global variable (not a function) that
holds the global environment (that is, _G._G = _G).
Lua itself does not use this variable;
changing its value does not affect any environment,
nor vice-versa.
(Use setfenv to change environments.)

### _VERSION
*Type:* VARIABLE
A global variable (not a function) that
holds a string containing the current interpreter version.
The current contents of this variable is "Lua 5.1".

### assert
*Type:* FUNCTION
Issues an  error when
the value of its argument v is false (i.e.,  nil or  false);
otherwise, returns all its arguments.
message is an error message;
when absent, it defaults to "assertion failed!"

**Parameters**

- `v` (boolean)
- `message` (string) (optional)

### collectgarbage
*Type:* FUNCTION
This function is a generic interface to the garbage collector.
It performs different functions according to its first argument, opt:

"collect"
performs a full garbage-collection cycle.
This is the default option.
"stop"
stops the garbage collector.
"restart"
restarts the garbage collector.
"count"
returns the total memory in use by Lua (in Kbytes).
"step"
performs a garbage-collection step.
The step "size" is controlled by arg
(larger values mean more steps) in a non-specified way.
If you want to control the step size
you must experimentally tune the value of arg.
Returns true if the step finished a collection cycle.
"setpause"
sets arg as the new value for the pause of
the collector .
Returns the previous value for pause.
"setstepmul"
sets arg as the new value for the step multiplier of
the collector .
Returns the previous value for step.

**Parameters**

- `opt` (table) (optional)
- `arg` (number) (optional)

### dofile
*Type:* FUNCTION
Opens the named file and executes its contents as a Lua chunk.
When called without arguments,
dofile executes the contents of the standard input (stdin).
Returns all values returned by the chunk.
In case of errors, dofile propagates the error
to its caller (that is, dofile does not run in protected mode).

**Parameters**

- `filename` (string) (optional)

### error
*Type:* FUNCTION
Terminates the last protected function called
and returns message as the error message.
Function error never returns.
Usually, error adds some information about the error position
at the beginning of the message.
The level argument specifies how to get the error position.
With level 1 (the default), the error position is where the
error function was called.
Level 2 points the error to where the function
that called error was called; and so on.
Passing a level 0 avoids the addition of error position information
to the message.

**Parameters**

- `message` (string)
- `level` (number) (optional)

### getfenv
*Type:* FUNCTION
Returns the current environment in use by the function.
f can be a Lua function or a number
that specifies the function at that stack level:
Level 1 is the function calling getfenv.
If the given function is not a Lua function,
or if f is 0,
getfenv returns the global environment.
The default for f is 1.

**Parameters**

- `f` (function) (optional)

### getmetatable
*Type:* FUNCTION
If object does not have a metatable, returns  nil.
Otherwise,
if the object's metatable has a "__metatable" field,
returns the associated value.
Otherwise, returns the metatable of the given object.

**Parameters**

- `object` (table)

### ipairs
*Type:* FUNCTION
Returns three values: an iterator function, the table t, and 0,
so that the construction
```
for i,v in ipairs(t) do body end

```

will iterate over the pairs (1,t[1]), (2,t[2]), ...,
up to the first integer key absent from the table.

**Parameters**

- `t` (table)

### load
*Type:* FUNCTION
Loads a chunk using function func to get its pieces.
Each call to func must return a string that concatenates
with previous results.
A return of an empty string,  nil, or no value signals the end of the chunk.
If there are no errors,
returns the compiled chunk as a function;
otherwise, returns  nil plus the error message.
The environment of the returned function is the global environment.
chunkname is used as the chunk name for error messages
and debug information.
When absent,
it defaults to "=(load)".

**Parameters**

- `func` (function)
- `chunkname` (string) (optional)

### loadfile
*Type:* FUNCTION
Similar to load,
but gets the chunk from file filename
or from the standard input,
if no file name is given.

**Parameters**

- `filename` (string) (optional)

### loadstring
*Type:* FUNCTION
Similar to load,
but gets the chunk from the given string.
To load and run a given string, use the idiom
```
assert(loadstring(s))()

```

When absent,
chunkname defaults to the given string.

**Parameters**

- `string` (string)
- `chunkname` (string) (optional)

### module
*Type:* FUNCTION
Creates a module.
If there is a table in package.loaded[name],
this table is the module.
Otherwise, if there is a global table t with the given name,
this table is the module.
Otherwise creates a new table t and
sets it as the value of the global name and
the value of package.loaded[name].
This function also initializes t._NAME with the given name,
t._M with the module (t itself),
and t._PACKAGE with the package name
(the full module name minus last component; see below).
Finally, module sets t as the new environment
of the current function and the new value of package.loaded[name],
so that require returns t.
If name is a compound name
(that is, one with components separated by dots),
module creates (or reuses, if they already exist)
tables for each component.
For instance, if name is a.b.c,
then module stores the module table in field c of
field b of global a.
This function can receive optional options after
the module name,
where each option is a function to be applied over the module.

**Parameters**

- `name` (string)
- `...` (...) (optional)

### next
*Type:* FUNCTION
Allows a program to traverse all fields of a table.
Its first argument is a table and its second argument
is an index in this table.
next returns the next index of the table
and its associated value.
When called with  nil as its second argument,
next returns an initial index
and its associated value.
When called with the last index,
or with  nil in an empty table,
next returns  nil.
If the second argument is absent, then it is interpreted as  nil.
In particular,
you can use next(t) to check whether a table is empty.
The order in which the indices are enumerated is not specified,
even for numeric indices.
(To traverse a table in numeric order,
use a numerical for or the ipairs function.)
The behavior of next is undefined if,
during the traversal,
you assign any value to a non-existent field in the table.
You may however modify existing fields.
In particular, you may clear existing fields.

**Parameters**

- `table` (table)
- `index` (number) (optional)

### pairs
*Type:* FUNCTION
Returns three values: the next function, the table t, and  nil,
so that the construction
```
for k,v in pairs(t) do body end

```

will iterate over all key-{}value pairs of table t.
See function next for the caveats of modifying
the table during its traversal.

**Parameters**

- `t` (string)

### pcall
*Type:* FUNCTION
Calls function f with
the given arguments in protected mode.
This means that any error inside f is not propagated;
instead, pcall catches the error
and returns a status code.
Its first result is the status code (a boolean),
which is true if the call succeeds without errors.
In such case, pcall also returns all results from the call,
after this first result.
In case of any error, pcall returns  false plus the error message.

**Parameters**

- `f` (function)
- `arg1` (any)
- `...` (...)

### print
*Type:* FUNCTION
Receives any number of arguments,
and prints their values to stdout,
using the tostring function to convert them to strings.
print is not intended for formatted output,
but only as a quick way to show a value,
typically for debugging.
For formatted output, use string.format.

**Parameters**

- `...` (...)

### rawequal
*Type:* FUNCTION
Checks whether v1 is equal to v2,
without invoking any metamethod.
Returns a boolean.

**Parameters**

- `v1` (any)
- `v2` (any)

### rawget
*Type:* FUNCTION
Gets the real value of table[index],
without invoking any metamethod.
table must be a table;
index may be any value.

**Parameters**

- `table` (table)
- `index` (number)

### rawset
*Type:* FUNCTION
Sets the real value of table[index] to value,
without invoking any metamethod.
table must be a table,
index any value different from  nil,
and value any Lua value.
This function returns table.

**Parameters**

- `table` (table)
- `index` (number)
- `value` (any)

### require
*Type:* FUNCTION
Loads the given module.
The function starts by looking into the package.loaded table
to determine whether modname is already loaded.
If it is, then require returns the value stored
at package.loaded[modname].
Otherwise, it tries to find a loader for the module.
To find a loader,
require is guided by the package.loaders array.
By changing this array,
we can change how require looks for a module.
The following explanation is based on the default configuration
for package.loaders.
First require queries package.preload[modname].
If it has a value,
this value (which should be a function) is the loader.
Otherwise require searches for a Lua loader using the
path stored in package.path.
If that also fails, it searches for a C loader using the
path stored in package.cpath.
If that also fails,
it tries an all-in-one loader .
Once a loader is found,
require calls the loader with a single argument, modname.
If the loader returns any value,
require assigns the returned value to package.loaded[modname].
If the loader returns no value and
has not assigned any value to package.loaded[modname],
then require assigns true to this entry.
In any case, require returns the
final value of package.loaded[modname].
If there is any error loading or running the module,
or if it cannot find any loader for the module,
then require signals an error.

**Parameters**

- `modname` (string)

### select
*Type:* FUNCTION
If index is a number,
returns all arguments after argument number index.
Otherwise, index must be the string "#",
and select returns the total number of extra arguments it received.

**Parameters**

- `index` (number)
- `...` (...)

### setfenv
*Type:* FUNCTION
Sets the environment to be used by the given function.
f can be a Lua function or a number
that specifies the function at that stack level:
Level 1 is the function calling setfenv.
setfenv returns the given function.
As a special case, when f is 0 setfenv changes
the environment of the running thread.
In this case, setfenv returns no values.

**Parameters**

- `f` (function)
- `table` (table)

### setmetatable
*Type:* FUNCTION
Sets the metatable for the given table.
(You cannot change the metatable of other types from Lua, only from C.)
If metatable is  nil,
removes the metatable of the given table.
If the original metatable has a "__metatable" field,
raises an error.
This function returns table.

**Parameters**

- `table` (table)
- `metatable` (table)

### tonumber
*Type:* FUNCTION
Tries to convert its argument to a number.
If the argument is already a number or a string convertible
to a number, then tonumber returns this number;
otherwise, it returns  nil.
An optional argument specifies the base to interpret the numeral.
The base may be any integer between 2 and 36, inclusive.
In bases above 10, the letter 'A' (in either upper or lower case)
represents 10, 'B' represents 11, and so forth,
with 'Z' representing 35.
In base 10 (the default), the number can have a decimal part,
as well as an optional exponent part .
In other bases, only unsigned integers are accepted.

**Parameters**

- `e` (string)
- `base` (number) (optional)

### tostring
*Type:* FUNCTION
Receives an argument of any type and
converts it to a string in a reasonable format.
For complete control of how numbers are converted,
use string.format.
If the metatable of e has a "__tostring" field,
then tostring calls the corresponding value
with e as argument,
and uses the result of the call as its result.

**Parameters**

- `e` (any)

### type
*Type:* FUNCTION
Returns the type of its only argument, coded as a string.
The possible results of this function are
"nil" (a string, not the value  nil),
"number",
"string",
"boolean",
"table",
"function",
"thread",
and "userdata".

**Parameters**

- `v` (any)

### unpack
*Type:* FUNCTION
Returns the elements from the given table.
This function is equivalent to
```
return list[i], list[i+1], ..., list[j]

```

except that the above code can be written only for a fixed number
of elements.
By default, i is 1 and j is the length of the list,
as defined by the length operator .

**Parameters**

- `list` (table)
- `i` (number) (optional)
- `j` (number) (optional)

### xpcall
*Type:* FUNCTION
This function is similar to pcall,
except that you can set a new error handler.
xpcall calls function f in protected mode,
using err as the error handler.
Any error inside f is not propagated;
instead, xpcall catches the error,
calls the err function with the original error object,
and returns a status code.
Its first result is the status code (a boolean),
which is true if the call succeeds without errors.
In this case, xpcall also returns all results from the call,
after this first result.
In case of any error,
xpcall returns  false plus the result from err.

**Parameters**

- `f` (function)
- `err` (string)

<!-- bit-lua -->

# BitOp {#apis:bit-lua}

**Namespace:** `bit`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_bitop.cpp`
**Source:** `engine/script/src/script_bitop.cpp`

[Lua BitOp](http://bitop.luajit.org/api.html) is a C extension module for Lua 5.1/5.2 which adds bitwise operations on numbers.

Lua BitOp is Copyright  2008-2012 Mike Pall.
Lua BitOp is free software, released under the MIT license (same license as the Lua core).

Lua BitOp is compatible with the built-in bitwise operations in LuaJIT 2.0 and is used
on platforms where Defold runs without LuaJIT.

For clarity the examples assume the definition of a helper function `printx()`.
This prints its argument as an unsigned 32 bit hexadecimal number on all platforms:

```lua
function printx(x)
  print("0x"..bit.tohex(x))
end
```

## API

### bit.arshift
*Type:* FUNCTION
Returns the bitwise arithmetic right-shift of its first argument by the number of bits given by the second argument.
Arithmetic right-shift treats the most-significant bit as a sign bit and replicates it.
Only the lower 5 bits of the shift count are used (reduces to the range [0..31]).

**Parameters**

- `x` (number) - number
- `n` (number) - number of bits

**Returns**

- `y` (number) - bitwise arithmetic right-shifted number

**Examples**

```
print(bit.arshift(256, 8))           --> 1
print(bit.arshift(-256, 8))          --> -1
printx(bit.arshift(0x87654321, 12))  --> 0xfff87654

```

### bit.band
*Type:* FUNCTION
Returns the bitwise and of all of its arguments. Note that more than two arguments are allowed.

**Parameters**

- `x1` (number) - number
- `x2...` (number) (optional) - number(s)

**Returns**

- `y` (number) - bitwise and of the provided arguments

**Examples**

```
printx(bit.band(0x12345678, 0xff))        --> 0x00000078

```

### bit.bnot
*Type:* FUNCTION
Returns the bitwise not of its argument.

**Parameters**

- `x` (number) - number

**Returns**

- `y` (number) - bitwise not of number x

**Examples**

```
print(bit.bnot(0))            --> -1
printx(bit.bnot(0))           --> 0xffffffff
print(bit.bnot(-1))           --> 0
print(bit.bnot(0xffffffff))   --> 0
printx(bit.bnot(0x12345678))  --> 0xedcba987

```

### bit.bor
*Type:* FUNCTION
Returns the bitwise or of all of its arguments. Note that more than two arguments are allowed.

**Parameters**

- `x1` (number) - number
- `x2...` (number) (optional) - number(s)

**Returns**

- `y` (number) - bitwise or of the provided arguments

**Examples**

```
print(bit.bor(1, 2, 4, 8))                --> 15

```

### bit.bswap
*Type:* FUNCTION
Swaps the bytes of its argument and returns it. This can be used to convert little-endian 32 bit numbers to big-endian 32 bit numbers or vice versa.

**Parameters**

- `x` (number) - number

**Returns**

- `y` (number) - bitwise swapped number

**Examples**

```
printx(bit.bswap(0x12345678)) --> 0x78563412
printx(bit.bswap(0x78563412)) --> 0x12345678

```

### bit.bxor
*Type:* FUNCTION
Returns the bitwise xor of all of its arguments. Note that more than two arguments are allowed.

**Parameters**

- `x1` (number) - number
- `x2...` (number) (optional) - number(s)

**Returns**

- `y` (number) - bitwise xor of the provided arguments

**Examples**

```
printx(bit.bxor(0xa5a5f0f0, 0xaa55ff00))  --> 0x0ff00ff0

```

### bit.lshift
*Type:* FUNCTION
Returns the bitwise logical left-shift of its first argument by the number of bits given by the second argument.
Logical shifts treat the first argument as an unsigned number and shift in 0-bits.
Only the lower 5 bits of the shift count are used (reduces to the range [0..31]).

**Parameters**

- `x` (number) - number
- `n` (number) - number of bits

**Returns**

- `y` (number) - bitwise logical left-shifted number

**Examples**

```
print(bit.lshift(1, 0))              --> 1
print(bit.lshift(1, 8))              --> 256
print(bit.lshift(1, 40))             --> 256
printx(bit.lshift(0x87654321, 12))   --> 0x54321000

```

### bit.rol
*Type:* FUNCTION
Returns the bitwise left rotation of its first argument by the number of bits given by the second argument. Bits shifted out on one side are shifted back in on the other side.
Only the lower 5 bits of the rotate count are used (reduces to the range [0..31]).

**Parameters**

- `x` (number) - number
- `n` (number) - number of bits

**Returns**

- `y` (number) - bitwise left-rotated number

**Examples**

```
printx(bit.rol(0x12345678, 12))   --> 0x45678123

```

### bit.ror
*Type:* FUNCTION
Returns the bitwise right rotation of its first argument by the number of bits given by the second argument. Bits shifted out on one side are shifted back in on the other side.
Only the lower 5 bits of the rotate count are used (reduces to the range [0..31]).

**Parameters**

- `x` (number) - number
- `n` (number) - number of bits

**Returns**

- `y` (number) - bitwise right-rotated number

**Examples**

```
printx(bit.ror(0x12345678, 12))   --> 0x67812345

```

### bit.rshift
*Type:* FUNCTION
Returns the bitwise logical right-shift of its first argument by the number of bits given by the second argument.
Logical shifts treat the first argument as an unsigned number and shift in 0-bits.
Only the lower 5 bits of the shift count are used (reduces to the range [0..31]).

**Parameters**

- `x` (number) - number
- `n` (number) - number of bits

**Returns**

- `y` (number) - bitwise logical right-shifted number

**Examples**

```
print(bit.rshift(256, 8))            --> 1
print(bit.rshift(-256, 8))           --> 16777215
printx(bit.rshift(0x87654321, 12))   --> 0x00087654

```

### bit.tobit
*Type:* FUNCTION
Normalizes a number to the numeric range for bit operations and returns it. This function is usually not needed since all bit operations already normalize all of their input arguments.

**Parameters**

- `x` (number) - number to normalize

**Returns**

- `y` (number) - normalized number

**Examples**

```
print(0xffffffff)                --> 4294967295 (*)
print(bit.tobit(0xffffffff))     --> -1
printx(bit.tobit(0xffffffff))    --> 0xffffffff
print(bit.tobit(0xffffffff + 1)) --> 0
print(bit.tobit(2^40 + 1234))    --> 1234

```

(*) See the treatment of hex literals for an explanation why the printed numbers in the first two lines differ (if your Lua installation uses a double number type).

### bit.tohex
*Type:* FUNCTION
Converts its first argument to a hex string. The number of hex digits is given by the absolute value of the optional second argument. Positive numbers between 1 and 8 generate lowercase hex digits. Negative numbers generate uppercase hex digits. Only the least-significant 4*|n| bits are used. The default is to generate 8 lowercase hex digits.

**Parameters**

- `x` (number) - number to convert
- `n` (number) - number of hex digits to return

**Returns**

- `s` (string) - hexadecimal string

**Examples**

```
print(bit.tohex(1))              --> 00000001
print(bit.tohex(-1))             --> ffffffff
print(bit.tohex(0xffffffff))     --> ffffffff
print(bit.tohex(-1, -8))         --> FFFFFFFF
print(bit.tohex(0x21, 4))        --> 0021
print(bit.tohex(0x87654321, 4))  --> 4321

```

<!-- buffer-lua -->

# Buffer {#apis:buffer-lua}

**Namespace:** `buffer`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_buffer.cpp`
**Source:** `engine/gamesys/src/gamesys/scripts/script_buffer.cpp`

Functions for manipulating buffers and streams

## API

### buffer.copy_buffer
*Type:* FUNCTION
Copy all data streams from one buffer to another, element wise.
 Each of the source streams must have a matching stream in the
destination buffer. The streams must match in both type and size.
The source and destination buffer can be the same.

**Parameters**

- `dst` (buffer) - the destination buffer
- `dstoffset` (number) - the offset to start copying data to
- `src` (buffer) - the source data buffer
- `srcoffset` (number) - the offset to start copying data from
- `count` (number) - the number of elements to copy

**Examples**

How to copy elements (e.g. vertices) from one buffer to another
```
-- copy entire buffer
buffer.copy_buffer(dstbuffer, 0, srcbuffer, 0, #srcbuffer)

-- copy last 10 elements to the front of another buffer
buffer.copy_buffer(dstbuffer, 0, srcbuffer, #srcbuffer - 10, 10)

```

### buffer.copy_stream
*Type:* FUNCTION
Copy a specified amount of data from one stream to another.
 The value type and size must match between source and destination streams.
The source and destination streams can be the same.

**Parameters**

- `dst` (bufferstream) - the destination stream
- `dstoffset` (number) - the offset to start copying data to (measured in value type)
- `src` (bufferstream) - the source data stream
- `srcoffset` (number) - the offset to start copying data from (measured in value type)
- `count` (number) - the number of values to copy (measured in value type)

**Examples**

How to update a texture of a sprite:
```
-- copy entire stream
local srcstream = buffer.get_stream(srcbuffer, hash("xyz"))
local dststream = buffer.get_stream(dstbuffer, hash("xyz"))
buffer.copy_stream(dststream, 0, srcstream, 0, #srcstream)

```

### buffer.create
*Type:* FUNCTION
Create a new data buffer containing a specified set of streams. A data buffer
can contain one or more streams with typed data. This is useful for managing
compound data, for instance a vertex buffer could contain separate streams for
vertex position, color, normal etc.

**Parameters**

- `element_count` (number) - The number of elements the buffer should hold
- `declaration` (table) - A table where each entry (table) describes a stream
<ul>
<li><span class="type">hash | string</span> <code>name</code>: The name of the stream</li>
<li><span class="type">constant</span> <code>type</code>: The data type of the stream</li>
<li><span class="type">number</span> <code>count</code>: The number of values each element should hold</li>
</ul>

**Returns**

- `buffer` (buffer) - the new buffer

**Examples**

How to create and initialize a buffer
```
function init(self)
  local size = 128
  self.image = buffer.create( size * size, { {name=hash("rgb"), type=buffer.VALUE_TYPE_UINT8, count=3 } })
  self.imagestream = buffer.get_stream(self.image, hash("rgb"))

  for y=0,self.height-1 do
     for x=0,self.width-1 do
         local index = y * self.width * 3 + x * 3 + 1
         self.imagestream[index + 0] = self.r
         self.imagestream[index + 1] = self.g
         self.imagestream[index + 2] = self.b
     end
  end

```

### buffer.get_bytes
*Type:* FUNCTION
Get a copy of all the bytes from a specified stream as a Lua string.

**Parameters**

- `buffer` (buffer) - the source buffer
- `stream_name` (hash) - the name of the stream

**Returns**

- `data` (string) - the buffer data as a Lua string

### buffer.get_metadata
*Type:* FUNCTION
Get a named metadata entry from a buffer along with its type.

**Parameters**

- `buf` (buffer) - the buffer to get the metadata from
- `metadata_name` (hash | string) - name of the metadata entry

**Returns**

- `values` (table | nil) - table of metadata values or <code>nil</code> if the entry does not exist
- `value_type` (constant | nil) - numeric type of values or <code>nil</code>

**Examples**

How to get a metadata entry from a buffer
```
-- retrieve a metadata entry named "somefloats" and its nomeric type
local values, type = buffer.get_metadata(buf, hash("somefloats"))
if metadata then print(#metadata.." values in 'somefloats'") end

```

### buffer.get_stream
*Type:* FUNCTION
Get a specified stream from a buffer.

**Parameters**

- `buffer` (buffer) - the buffer to get the stream from
- `stream_name` (hash | string) - the stream name

**Returns**

- `stream` (bufferstream) - the data stream

### buffer.set_metadata
*Type:* FUNCTION
Creates or updates a metadata array entry on a buffer.
 The value type and count given when updating the entry should match those used when first creating it.

**Parameters**

- `buf` (buffer) - the buffer to set the metadata on
- `metadata_name` (hash | string) - name of the metadata entry
- `values` (table) - actual metadata, an array of numeric values
- `value_type` (constant) - type of values when stored

**Examples**

How to set a metadata entry on a buffer
```
-- create a new metadata entry with three floats
buffer.set_metadata(buf, hash("somefloats"), {1.5, 3.2, 7.9}, buffer.VALUE_TYPE_FLOAT32)
-- ...
-- update to a new set of values
buffer.set_metadata(buf, hash("somefloats"), {-2.5, 10.0, 32.2}, buffer.VALUE_TYPE_FLOAT32)

```

### buffer.VALUE_TYPE_FLOAT32
*Type:* CONSTANT
Float, single precision, 4 bytes

### buffer.VALUE_TYPE_INT16
*Type:* CONSTANT
Signed integer, 2 bytes

### buffer.VALUE_TYPE_INT32
*Type:* CONSTANT
Signed integer, 4 bytes

### buffer.VALUE_TYPE_INT64
*Type:* CONSTANT
Signed integer, 8 bytes

### buffer.VALUE_TYPE_INT8
*Type:* CONSTANT
Signed integer, 1 byte

### buffer.VALUE_TYPE_UINT16
*Type:* CONSTANT
Unsigned integer, 2 bytes

### buffer.VALUE_TYPE_UINT32
*Type:* CONSTANT
Unsigned integer, 4 bytes

### buffer.VALUE_TYPE_UINT64
*Type:* CONSTANT
Unsigned integer, 8 bytes

### buffer.VALUE_TYPE_UINT8
*Type:* CONSTANT
Unsigned integer, 1 byte

<!-- builtins-lua -->

# Built-ins {#apis:builtins-lua}

**Namespace:** `builtins`
**Language:** Lua
**Type:** Defold Lua
**File:** `script.cpp`
**Source:** `engine/script/src/script.cpp`

Built-in scripting functions.

## API

### hash
*Type:* FUNCTION
All ids in the engine are represented as hashes, so a string needs to be hashed
before it can be compared with an id.

**Parameters**

- `s` (string) - string to hash

**Returns**

- `hash` (hash) - a hashed string

**Examples**

To compare a message_id in an on-message callback function:
```
function on_message(self, message_id, message, sender)
    if message_id == hash("my_message") then
        -- Act on the message here
    end
end

```

### hash_to_hex
*Type:* FUNCTION
Returns a hexadecimal representation of a hash value.
The returned string is always padded with leading zeros.

**Parameters**

- `h` (hash) - hash value to get hex string for

**Returns**

- `hex` (string) - hex representation of the hash

**Examples**

```
local h = hash("my_hash")
local hexstr = hash_to_hex(h)
print(hexstr) --> a2bc06d97f580aab

```

### pprint
*Type:* FUNCTION
Pretty printing of Lua values. This function prints Lua values
in a manner similar to +print()+, but will also recurse into tables
and pretty print them. There is a limit to how deep the function
will recurse.

**Parameters**

- `v` (any) - value to print

**Examples**

Pretty printing a Lua table with a nested table:
```
local t2 = { 1, 2, 3, 4 }
local t = { key = "value", key2 = 1234, key3 = t2 }
pprint(t)

```

Resulting in the following output (note that the key order in non array
Lua tables is undefined):
```
{
  key3 = {
    1 = 1,
    2 = 2,
    3 = 3,
    4 = 4,
  }
  key2 = 1234,
  key = value,
}

```

<!-- camera-lua -->

# Camera {#apis:camera-lua}

**Namespace:** `camera`
**Language:** Lua
**Type:** Defold Lua
**File:** `camera_ddf.proto`
**Source:** `engine/gamesys/proto/gamesys/camera_ddf.proto`

Messages to control camera components and camera focus.

## API

### aspect_ratio
*Type:* PROPERTY
The ratio between the frustum width and height. Used when calculating the
projection of a perspective camera.
The type of the property is number.

**Examples**

```
function init(self)
  local aspect_ratio = go.get("#camera", "aspect_ratio")
  go.set("#camera", "aspect_ratio", 1.2)
end

```

### camera.get_aspect_ratio
*Type:* FUNCTION
Gets the effective aspect ratio of the camera. If auto aspect ratio is enabled,
returns the aspect ratio calculated from the current render target dimensions.
Otherwise returns the manually set aspect ratio.

**Parameters**

- `camera` (url | number | nil) - camera id

**Returns**

- `aspect_ratio` (number) - the effective aspect ratio.

### camera.get_auto_aspect_ratio
*Type:* FUNCTION
Returns whether auto aspect ratio is enabled. When enabled, the camera automatically
calculates aspect ratio from render target dimensions. When disabled, uses the
manually set aspect ratio value.

**Parameters**

- `camera` (url | number | nil) - camera id

**Returns**

- `auto_aspect_ratio` (boolean) - true if auto aspect ratio is enabled

### camera.get_cameras
*Type:* FUNCTION
This function returns a table with all the camera URLs that have been
registered in the render context.

**Returns**

- `cameras` (table) - a table with all camera URLs

**Examples**

```
for k,v in pairs(camera.get_cameras()) do
    render.set_camera(v)
    render.draw(...)
    render.set_camera()
end

```

### camera.get_enabled
*Type:* FUNCTION
get enabled

**Parameters**

- `camera` (url | number | nil) - camera id

**Returns**

- `flag` (boolean) - true if the camera is enabled

### camera.get_far_z
*Type:* FUNCTION
get far z

**Parameters**

- `camera` (url | number | nil) - camera id

**Returns**

- `far_z` (number) - the far z.

### camera.get_fov
*Type:* FUNCTION
get field of view

**Parameters**

- `camera` (url | number | nil) - camera id

**Returns**

- `fov` (number) - the field of view.

### camera.get_near_z
*Type:* FUNCTION
get near z

**Parameters**

- `camera` (url | number | nil) - camera id

**Returns**

- `near_z` (number) - the near z.

### camera.get_orthographic_mode
*Type:* FUNCTION
get orthographic zoom mode

**Parameters**

- `camera` (url | number | nil) - camera id

**Returns**

- `mode` (number) - one of camera.ORTHO_MODE_FIXED, camera.ORTHO_MODE_AUTO_FIT or
camera.ORTHO_MODE_AUTO_COVER

### camera.get_orthographic_zoom
*Type:* FUNCTION
get orthographic zoom

**Parameters**

- `camera` (url | number | nil) - camera id

**Returns**

- `orthographic_zoom` (number) - the zoom level when the camera uses orthographic projection.

### camera.get_projection
*Type:* FUNCTION
get projection matrix

**Parameters**

- `camera` (url | number | nil) - camera id

**Returns**

- `projection` (matrix4) - the projection matrix.

### camera.get_view
*Type:* FUNCTION
get view matrix

**Parameters**

- `camera` (url | number | nil) - camera id

**Returns**

- `view` (matrix4) - the view matrix.

### camera.ORTHO_MODE_AUTO_COVER
*Type:* CONSTANT
Computes zoom so the original display area covers the entire window while preserving aspect ratio.
Equivalent to using max(window_width/width, window_height/height).

### camera.ORTHO_MODE_AUTO_FIT
*Type:* CONSTANT
Computes zoom so the original display area (game.project width/height) fits inside the window
while preserving aspect ratio. Equivalent to using min(window_width/width, window_height/height).

### camera.ORTHO_MODE_FIXED
*Type:* CONSTANT
Uses the manually set orthographic zoom value (camera.set_orthographic_zoom).

### camera.screen_to_world
*Type:* FUNCTION
Converts a screen-space 2D point with view depth to a 3D world point.
z is the view depth in world units measured from the camera plane along the camera forward axis.
If a camera isn't specified, the last enabled camera is used.

**Parameters**

- `pos` (vector3) - Screen-space position (x, y) with z as view depth in world units
- `camera` (url | number | nil) (optional) - optional camera id

**Returns**

- `world_pos` (vector3) - the world coordinate

**Examples**

Place objects at the touch point with a random Z position, keeping them within the visible view zone.
```
 function on_input(self, action_id, action)
     if action_id == hash("touch") then
         if action.pressed then
             local percpective_camera = msg.url("#perspective_camera")
             local random_z = math.random(camera.get_near_z(percpective_camera) + 0.01, camera.get_far_z(percpective_camera) - 0.01)
             local world_position = camera.screen_to_world(vmath.vector3(action.screen_x, action.screen_y, random_z), percpective_camera)
             go.set_position(world_position, "/go1")
         end
     end
 end

```

### camera.screen_xy_to_world
*Type:* FUNCTION
Converts 2D screen coordinates (x,y) to the 3D world-space point on the camera's near plane for that pixel.
If a camera isn't specified, the last enabled camera is used.

**Parameters**

- `x` (number) - X coordinate on screen.
- `y` (number) - Y coordinate on screen.
- `camera` (url | number | nil) (optional) - optional camera id

**Returns**

- `world_pos` (vector3) - the world coordinate on the camera near plane

**Examples**

Place objects at the touch point.
```
 function on_input(self, action_id, action)
     if action_id == hash("touch") then
         if action.pressed then
             local world_position = camera.screen_xy_to_world(action.screen_x, action.screen_y)
             go.set_position(world_position, "/go1")
         end
     end
 end

```

### camera.set_aspect_ratio
*Type:* FUNCTION
Sets the manual aspect ratio for the camera. This value is only used when
auto aspect ratio is disabled. To disable auto aspect ratio and use this
manual value, call camera.set_auto_aspect_ratio(camera, false).

**Parameters**

- `camera` (url | number | nil) - camera id
- `aspect_ratio` (number) - the manual aspect ratio value.

### camera.set_auto_aspect_ratio
*Type:* FUNCTION
Enables or disables automatic aspect ratio calculation. When enabled (true),
the camera automatically calculates aspect ratio from render target dimensions.
When disabled (false), uses the manually set aspect ratio value.

**Parameters**

- `camera` (url | number | nil) - camera id
- `auto_aspect_ratio` (boolean) - true to enable auto aspect ratio

### camera.set_far_z
*Type:* FUNCTION
set far z

**Parameters**

- `camera` (url | number | nil) - camera id
- `far_z` (number) - the far z.

### camera.set_fov
*Type:* FUNCTION
set field of view

**Parameters**

- `camera` (url | number | nil) - camera id
- `fov` (number) - the field of view.

### camera.set_near_z
*Type:* FUNCTION
set near z

**Parameters**

- `camera` (url | number | nil) - camera id
- `near_z` (number) - the near z.

### camera.set_orthographic_mode
*Type:* FUNCTION
set orthographic zoom mode

**Parameters**

- `camera` (url | number | nil) - camera id
- `mode` (number) - camera.ORTHO_MODE_FIXED, camera.ORTHO_MODE_AUTO_FIT or camera.ORTHO_MODE_AUTO_COVER

### camera.set_orthographic_zoom
*Type:* FUNCTION
set orthographic zoom

**Parameters**

- `camera` (url | number | nil) - camera id
- `orthographic_zoom` (number) - the zoom level when the camera uses orthographic projection.

### camera.world_to_screen
*Type:* FUNCTION
Converts a 3D world position to screen-space coordinates with view depth.
Returns a vector3 where x and y are in screen pixels and z is the view depth in world units
measured from the camera plane along the camera forward axis. The returned z can be used with
camera.screen_to_world to reconstruct the world position on the same pixel ray.
If a camera isn't specified, the last enabled camera is used.

**Parameters**

- `world_pos` (vector3) - World-space position
- `camera` (url | number | nil) (optional) - optional camera id

**Returns**

- `screen_pos` (vector3) - Screen position (x,y in pixels, z is view depth)

**Examples**

Convert go position into screen pisition
```
 go.update_world_transform("/go1")
 local world_pos = go.get_world_position("/go1")
 local screen_pos = camera.world_to_screen(world_pos)

```

### far_z
*Type:* PROPERTY
Camera frustum far plane.
The type of the property is float.

**Examples**

```
function init(self)
  local far_z = go.get("#camera", "far_z")
  go.set("#camera", "far_z", 10)
end

```

### fov
*Type:* PROPERTY
Vertical field of view of the camera.
The type of the property is float.

**Examples**

```
function init(self)
  local fov = go.get("#camera", "fov")
  go.set("#camera", "fov", fov + 0.1)
  go.animate("#camera", "fov", go.PLAYBACK_ONCE_PINGPONG, 1.2, go.EASING_LINEAR, 1)
end

```

### near_z
*Type:* PROPERTY
Camera frustum near plane.
The type of the property is float.

**Examples**

```
function init(self)
  local near_z = go.get("#camera", "near_z")
  go.set("#camera", "near_z", 10)
end

```

### orthographic_zoom
*Type:* PROPERTY
Zoom level when using an orthographic projection.
The type of the property is float.

**Examples**

```
function init(self)
  local orthographic_zoom = go.get("#camera", "orthographic_zoom")
  go.set("#camera", "orthographic_zoom", 2.0)
  go.animate("#camera", "orthographic_zoom", go.PLAYBACK_ONCE_PINGPONG, 0.5, go.EASING_INOUTQUAD, 2)
end

```

### projection
*Type:* PROPERTY
READ ONLY The calculated projection matrix of the camera.
The type of the property is matrix4.

**Examples**

```
function init(self)
  local projection = go.get("#camera", "projection")
end

```

### set_camera
*Type:* MESSAGE
Post this message to a camera-component to set its properties at run-time.

**Parameters**

- `aspect_ratio` (number) - aspect ratio of the screen (width divided by height)
- `fov` (number) - field of view of the lens, measured as the angle in radians between the right and left edge
- `near_z` (number) - position of the near clipping plane (distance from camera along relative z)
- `far_z` (number) - position of the far clipping plane (distance from camera along relative z)
- `orthographic_projection` (boolean) - set to use an orthographic projection
- `orthographic_zoom` (number) - zoom level when the camera is using an orthographic projection
- `orthographic_mode` (number) - orthographic zoom behavior when orthographic_projection is enabled

**Examples**

In the examples, it is assumed that the instance of the script has a camera-component with id "camera".
```
msg.post("#camera", "set_camera", {aspect_ratio = 16/9, fov = math.pi * 0.5, near_z = 0.1, far_z = 500})

```

### view
*Type:* PROPERTY
READ ONLY The calculated view matrix of the camera.
The type of the property is matrix4.

**Examples**

```
function init(self)
  local view = go.get("#camera", "view")
end

```

<!-- collectionfactory-lua -->

# Collection factory {#apis:collectionfactory-lua}

**Namespace:** `collectionfactory`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_collection_factory.cpp`
**Source:** `engine/gamesys/src/gamesys/scripts/script_collection_factory.cpp`

Functions for controlling collection factory components which are
used to dynamically spawn collections into the runtime.

## API

### collectionfactory.create
*Type:* FUNCTION
The URL identifies the collectionfactory component that should do the spawning.
Spawning is instant, but spawned game objects get their first update calls the following frame. The supplied parameters for position, rotation and scale
will be applied to the whole collection when spawned.
Script properties in the created game objects can be overridden through
a properties-parameter table. The table should contain game object ids
(hash) as keys and property tables as values to be used when initiating each
spawned game object.
See go.property for more information on script properties.
The function returns a table that contains a key for each game object
id (hash), as addressed if the collection file was top level, and the
corresponding spawned instance id (hash) as value with a unique path
prefix added to each instance.
 Calling collectionfactory.create create on a collection factory that is marked as dynamic without having loaded resources
using collectionfactory.load will synchronously load and create resources which may affect application performance.

**Parameters**

- `url` (string | hash | url) - the collection factory component to be used
- `position` (vector3) (optional) - position to assign to the newly spawned collection
- `rotation` (quaternion) (optional) - rotation to assign to the newly spawned collection
- `properties` (table) (optional) - table of script properties to propagate to any new game object instances
- `scale` (number | vector3) (optional) - uniform scaling to apply to the newly spawned collection (must be greater than 0).

**Returns**

- `ids` (table) - a table mapping the id:s from the collection to the new instance id:s

**Examples**

How to spawn a collection of game objects:
```
function init(self)
  -- Spawn a small group of enemies.
  local pos = vmath.vector3(100, 12.5, 0)
  local rot = vmath.quat_rotation_z(math.pi / 2)
  local scale = 0.5
  local props = {}
  props[hash("/enemy_leader")] = { health = 1000.0 }
  props[hash("/enemy_1")] = { health = 200.0 }
  props[hash("/enemy_2")] = { health = 400.0, color = hash("green") }

  local self.enemy_ids = collectionfactory.create("#enemyfactory", pos, rot, props, scale)
  -- enemy_ids now map to the spawned instance ids:
  --
  -- pprint(self.enemy_ids)
  --
  -- DEBUG:SCRIPT:
  -- {
  --   hash: [/enemy_leader] = hash: [/collection0/enemy_leader],
  --   hash: [/enemy_1] = hash: [/collection0/enemy_1],
  --   hash: [/enemy_2] = hash: [/collection0/enemy_2]
  -- }

  -- Send "attack" message to the leader. First look up its instance id.
  local leader_id = self.enemy_ids[hash("/enemy_leader")]
  msg.post(leader_id, "attack")
end

```

How to delete a spawned collection:
```
go.delete(self.enemy_ids)

```

### collectionfactory.get_status
*Type:* FUNCTION
This returns status of the collection factory.
Calling this function when the factory is not marked as dynamic loading always returns COMP_COLLECTION_FACTORY_STATUS_LOADED.

**Parameters**

- `url` (string | hash | url) (optional) - the collection factory component to get status from

**Returns**

- `status` (constant) - status of the collection factory component
<ul>
<li><code>collectionfactory.STATUS_UNLOADED</code></li>
<li><code>collectionfactory.STATUS_LOADING</code></li>
<li><code>collectionfactory.STATUS_LOADED</code></li>
</ul>

### collectionfactory.load
*Type:* FUNCTION
Resources loaded are referenced by the collection factory component until the existing (parent) collection is destroyed or collectionfactory.unload is called.
Calling this function when the factory is not marked as dynamic loading does nothing.

**Parameters**

- `url` (string | hash | url) (optional) - the collection factory component to load
- `complete_function` (function(self, url, result)) (optional) - function to call when resources are loaded.
<dl>
<dt><code>self</code></dt>
<dd><span class="type">object</span> The current object.</dd>
<dt><code>url</code></dt>
<dd><span class="type">url</span> url of the collection factory component</dd>
<dt><code>result</code></dt>
<dd><span class="type">boolean</span> True if resource were loaded successfully</dd>
</dl>

**Examples**

How to load resources of a collection factory prototype.
```
collectionfactory.load("#factory", function(self, url, result) end)

```

### collectionfactory.set_prototype
*Type:* FUNCTION
Changes the prototype for the collection factory.
Setting the prototype to "nil" will revert back to the original prototype.

**Notes**

- - Requires the factory to have the "Dynamic Prototype" set
  - Cannot be set when the state is COMP_FACTORY_STATUS_LOADING
  - Setting the prototype to "nil" will revert back to the original prototype.

**Parameters**

- `url` (string | hash | url) (optional) - the collection factory component
- `prototype` (string | nil) (optional) - the path to the new prototype, or <code>nil</code>

**Examples**

How to unload the previous prototypes resources, and then spawn a new collection
```
collectionfactory.unload("#factory") -- unload the previous resources
collectionfactory.set_prototype("#factory", "/main/levels/level1.collectionc")
local ids = collectionfactory.create("#factory", go.get_world_position(), vmath.quat())

```

### collectionfactory.STATUS_LOADED
*Type:* CONSTANT
loaded

### collectionfactory.STATUS_LOADING
*Type:* CONSTANT
loading

### collectionfactory.STATUS_UNLOADED
*Type:* CONSTANT
unloaded

### collectionfactory.unload
*Type:* FUNCTION
This decreases the reference count for each resource loaded with collectionfactory.load. If reference is zero, the resource is destroyed.
Calling this function when the factory is not marked as dynamic loading does nothing.

**Parameters**

- `url` (string | hash | url) (optional) - the collection factory component to unload

**Examples**

How to unload resources of a collection factory prototype loaded with collectionfactory.load
```
collectionfactory.unload("#factory")

```

<!-- collectionproxy-lua -->

# Collection proxy {#apis:collectionproxy-lua}

**Namespace:** `collectionproxy`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_collectionproxy.cpp`
**Source:** `engine/gamesys/src/gamesys/scripts/script_collectionproxy.cpp`

Messages for controlling and interacting with collection proxies
which are used to dynamically load collections into the runtime.

## API

### async_load
*Type:* MESSAGE
Post this message to a collection-proxy-component to start background loading of the referenced collection.
When the loading has completed, the message proxy_loaded will be sent back to the script.
A loaded collection must be initialized (message init) and enabled (message enable) in order to be simulated and drawn.

**Examples**

In this example we use a collection proxy to load/unload a level (collection).
The example assume the script belongs to an instance with collection-proxy-component with id "proxy".
```
function on_message(self, message_id, message, sender)
    if message_id == hash("start_level") then
        -- some script tells us to start loading the level
        msg.post("#proxy", "async_load")
        -- store sender for later notification
        self.loader = sender
    elseif message_id == hash("proxy_loaded") then
        -- enable the collection and let the loader know
        msg.post(sender, "enable")
        msg.post(self.loader, message_id)
    end
end

```

### collectionproxy.get_resources
*Type:* FUNCTION
return an indexed table of resources for a collection proxy where the
referenced collection has been excluded using LiveUpdate. Each entry is a
hexadecimal string that represents the data of the specific resource.
This representation corresponds with the filename for each individual
resource that is exported when you bundle an application with LiveUpdate
functionality.

**Parameters**

- `collectionproxy` (url) - the collectionproxy to check for resources.

**Returns**

- `resources` (table) - the resources, or an empty list if the
collection was not excluded.

**Examples**

```
local function print_resources(self, cproxy)
    local resources = collectionproxy.get_resources(cproxy)
    for _, v in ipairs(resources) do
        print("Resource: " .. v)
    end
end

```

### collectionproxy.missing_resources
*Type:* FUNCTION
return an array of missing resources for a collection proxy. Each
entry is a hexadecimal string that represents the data of the specific
resource. This representation corresponds with the filename for each
individual resource that is exported when you bundle an application with
LiveUpdate functionality. It should be considered good practise to always
check whether or not there are any missing resources in a collection proxy
before attempting to load the collection proxy.

**Parameters**

- `collectionproxy` (url) - the collectionproxy to check for missing
resources.

**Returns**

- `resources` (table) - the missing resources

**Examples**

```
function init(self)
end

local function callback(self, id, response)
    local expected = self.resources[id]
    if response ~= nil and response.status == 200 then
        print("Successfully downloaded resource: " .. expected)
        resource.store_resource(response.response)
    else
        print("Failed to download resource: " .. expected)
        -- error handling
    end
end

local function download_resources(self, cproxy)
    self.resources = {}
    local resources = collectionproxy.missing_resources(cproxy)
    for _, v in ipairs(resources) do
        print("Downloading resource: " .. v)

        local uri = "http://example.defold.com/" .. v
        local id = http.request(uri, "GET", callback)
        self.resources[id] = v
    end
end

```

### collectionproxy.RESULT_ALREADY_LOADED
*Type:* CONSTANT
It's impossible to change the collection if the collection is already loaded.

### collectionproxy.RESULT_LOADING
*Type:* CONSTANT
It's impossible to change the collection while the collection proxy is loading.

### collectionproxy.RESULT_NOT_EXCLUDED
*Type:* CONSTANT
It's impossible to change the collection for a proxy that isn't excluded.

### collectionproxy.set_collection
*Type:* FUNCTION
The collection should be loaded by the collection proxy.
Setting the collection to "nil" will revert it back to the original collection.
The collection proxy shouldn't be loaded and should have the 'Exclude' checkbox checked.
This functionality is designed to simplify the management of Live Update resources.

**Parameters**

- `url` (string | hash | url) (optional) - the collection proxy component
- `prototype` (string | nil) (optional) - the path to the new collection, or <code>nil</code>

**Returns**

- `success` (boolean) - collection change was successful
- `code` (number) - one of the collectionproxy.RESULT_* codes if unsuccessful

**Examples**

The example assume the script belongs to an instance with collection-proxy-component with id "proxy".
```
local ok, error = collectionproxy.set_collection("/go#collectionproxy", "/LU/3.collectionc")
 if ok then
     print("The collection has been changed to /LU/3.collectionc")
 else
     print("Error changing collection to /LU/3.collectionc ", error)
 end
 msg.post("/go#collectionproxy", "load")
 msg.post("/go#collectionproxy", "init")
 msg.post("/go#collectionproxy", "enable")

```

### disable
*Type:* MESSAGE
Post this message to a collection-proxy-component to disable the referenced collection, which in turn disables the contained game objects and components.

**Examples**

In this example we use a collection proxy to load/unload a level (collection).
The example assumes the script belongs to an instance with a collection-proxy-component with id "proxy".
```
function on_message(self, message_id, message, sender)
    if message_id == hash("end_level") then
        local proxy = msg.url("#proxy")
        msg.post(proxy, "disable")
        msg.post(proxy, "final")
        msg.post(proxy, "unload")
        -- store sender for later notification
        self.unloader = sender
    elseif message_id == hash("proxy_unloaded") then
        -- let unloader know
        msg.post(self.unloader, "level_ended")
    end
end

```

### enable
*Type:* MESSAGE
Post this message to a collection-proxy-component to enable the referenced collection, which in turn enables the contained game objects and components.
If the referenced collection was not initialized prior to this call, it will automatically be initialized.

**Examples**

In this example we use a collection proxy to load/unload a level (collection).
The example assume the script belongs to an instance with collection-proxy-component with id "proxy".
```
function on_message(self, message_id, message, sender)
    if message_id == hash("start_level") then
        -- some script tells us to start loading the level
        msg.post("#proxy", "load")
        -- store sender for later notification
        self.loader = sender
    elseif message_id == hash("proxy_loaded") then
        -- enable the collection and let the loader know
        msg.post(sender, "enable")
        msg.post(self.loader, "level_started")
    end
end

```

### final
*Type:* MESSAGE
Post this message to a collection-proxy-component to finalize the referenced collection, which in turn finalizes the contained game objects and components.

**Examples**

In this example we use a collection proxy to load/unload a level (collection).
The example assumes the script belongs to an instance with a collection-proxy-component with id "proxy".
```
function on_message(self, message_id, message, sender)
    if message_id == hash("end_level") then
        local proxy = msg.url("#proxy")
        msg.post(proxy, "disable")
        msg.post(proxy, "final")
        msg.post(proxy, "unload")
        -- store sender for later notification
        self.unloader = sender
    elseif message_id == hash("proxy_unloaded") then
        -- let unloader know
        msg.post(self.unloader, "level_ended")
    end
end

```

### init
*Type:* MESSAGE
Post this message to a collection-proxy-component to initialize the game objects and components in the referenced collection.
Sending enable to an uninitialized collection proxy automatically initializes it.
The init message simply provides a higher level of control.

**Examples**

In this example we use a collection proxy to load/unload a level (collection).
The example assume the script belongs to an instance with collection-proxy-component with id "proxy".
```
function on_message(self, message_id, message, sender)
    if message_id == hash("load_level") then
        -- some script tells us to start loading the level
        msg.post("#proxy", "load")
        -- store sender for later notification
        self.loader = sender
    elseif message_id == hash("proxy_loaded") then
        -- only initialize the proxy at this point since we want to enable it at a later time for some reason
        msg.post(sender, "init")
        -- let loader know
        msg.post(self.loader, message_id)
    end
end

```

### load
*Type:* MESSAGE
Post this message to a collection-proxy-component to start the loading of the referenced collection.
When the loading has completed, the message proxy_loaded will be sent back to the script.
A loaded collection must be initialized (message init) and enabled (message enable) in order to be simulated and drawn.

**Examples**

In this example we use a collection proxy to load/unload a level (collection).
The example assume the script belongs to an instance with collection-proxy-component with id "proxy".
```
function on_message(self, message_id, message, sender)
    if message_id == hash("start_level") then
        -- some script tells us to start loading the level
        msg.post("#proxy", "load")
        -- store sender for later notification
        self.loader = sender
    elseif message_id == hash("proxy_loaded") then
        -- enable the collection and let the loader know
        msg.post(sender, "enable")
        msg.post(self.loader, message_id)
    end
end

```

### proxy_loaded
*Type:* MESSAGE
This message is sent back to the script that initiated a collection proxy load when the referenced
collection is loaded. See documentation for load for examples how to use.

### proxy_unloaded
*Type:* MESSAGE
This message is sent back to the script that initiated an unload with a collection proxy when
the referenced collection is unloaded. See documentation for unload for examples how to use.

### set_time_step
*Type:* MESSAGE
Post this message to a collection-proxy-component to modify the time-step used when updating the collection controlled by the proxy.
The time-step is modified by a scaling factor and can be incremented either continuously or in discrete steps.
The continuous mode can be used for slow-motion or fast-forward effects.
The discrete mode is only useful when scaling the time-step to pass slower than real time (factor is below 1).
The time-step will then be set to 0 for as many frames as the scaling demands and then take on the full real-time-step for one frame,
to simulate pulses. E.g. if factor is set to 0.1 the time-step would be 0 for 9 frames, then be 1/60 for one
frame, 0 for 9 frames, and so on. The result in practice is that the game looks like it's updated at a much lower frequency than 60 Hz,
which can be useful for debugging when each frame needs to be inspected.

**Parameters**

- `factor` (number) - time-step scaling factor
- `mode` (number) - time-step mode: 0 for continuous and 1 for discrete

**Examples**

The examples assumes the script belongs to an instance with a collection-proxy-component with id "proxy".
Update the collection twice as fast:
```
msg.post("#proxy", "set_time_step", {factor = 2, mode = 0})

```

Update the collection twice as slow:
```
msg.post("#proxy", "set_time_step", {factor = 0.5, mode = 0})

```

Simulate 1 FPS for the collection:
```
msg.post("#proxy", "set_time_step", {factor = 1/60, mode = 1})

```

### unload
*Type:* MESSAGE
Post this message to a collection-proxy-component to start the unloading of the referenced collection.
When the unloading has completed, the message proxy_unloaded will be sent back to the script.

**Examples**

In this example we use a collection proxy to load/unload a level (collection).
The example assumes the script belongs to an instance with a collection-proxy-component with id "proxy".
```
function on_message(self, message_id, message, sender)
    if message_id == hash("end_level") then
        local proxy = msg.url("#proxy")
        msg.post(proxy, "disable")
        msg.post(proxy, "final")
        msg.post(proxy, "unload")
        -- store sender for later notification
        self.unloader = sender
    elseif message_id == hash("proxy_unloaded") then
        -- let unloader know
        msg.post(self.unloader, "level_ended")
    end
end

```

<!-- coroutine-lua -->

# Coroutine {#apis:coroutine-lua}

**Namespace:** `coroutine`
**Language:** Lua
**Type:** Defold Lua
**File:** `lua_coroutine.doc_h`
**Source:** `engine/lua/src/lua_coroutine.doc_h`

Documentation for the Lua coroutine standard library.

From [Lua 5.1 Reference Manual](https://www.lua.org/manual/5.1/)
by Roberto Ierusalimschy, Luiz Henrique de Figueiredo, Waldemar Celes.

Copyright  2006-2012 Lua.org, PUC-Rio.

Freely available under the terms of the [Lua license](https://www.lua.org/license.html).

## API

### coroutine.create
*Type:* FUNCTION
Creates a new coroutine, with body f.
f must be a Lua function.
Returns this new coroutine,
an object with type "thread".

**Parameters**

- `f` (function)

### coroutine.resume
*Type:* FUNCTION
Starts or continues the execution of coroutine co.
The first time you resume a coroutine,
it starts running its body.
The values val1, ... are passed
as the arguments to the body function.
If the coroutine has yielded,
resume restarts it;
the values val1, ... are passed
as the results from the yield.
If the coroutine runs without any errors,
resume returns  true plus any values passed to yield
(if the coroutine yields) or any values returned by the body function
(if the coroutine terminates).
If there is any error,
resume returns  false plus the error message.

**Parameters**

- `co` (thread)
- `val1` (any) (optional)
- `...` (optional)

### coroutine.running
*Type:* FUNCTION
Returns the running coroutine,
or  nil when called by the main thread.

### coroutine.status
*Type:* FUNCTION
Returns the status of coroutine co, as a string:
"running",
if the coroutine is running (that is, it called status);
"suspended", if the coroutine is suspended in a call to yield,
or if it has not started running yet;
"normal" if the coroutine is active but not running
(that is, it has resumed another coroutine);
and "dead" if the coroutine has finished its body function,
or if it has stopped with an error.

**Parameters**

- `co` (thread)

### coroutine.wrap
*Type:* FUNCTION
Creates a new coroutine, with body f.
f must be a Lua function.
Returns a function that resumes the coroutine each time it is called.
Any arguments passed to the function behave as the
extra arguments to resume.
Returns the same values returned by resume,
except the first boolean.
In case of error, propagates the error.

**Parameters**

- `f` (function)

### coroutine.yield
*Type:* FUNCTION
Suspends the execution of the calling coroutine.
The coroutine cannot be running a C function,
a metamethod, or an iterator.
Any arguments to yield are passed as extra results to resume.

**Parameters**

- `...`

<!-- crash-lua -->

# Crash {#apis:crash-lua}

**Namespace:** `crash`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_crash.cpp`
**Source:** `engine/crash/src/script_crash.cpp`

Native crash logging functions and constants.

## API

### crash.get_backtrace
*Type:* FUNCTION
A table is returned containing the addresses of the call stack.

**Parameters**

- `handle` (number) - crash dump handle

**Returns**

- `backtrace` (table) - table containing the backtrace

### crash.get_extra_data
*Type:* FUNCTION
The format of read text blob is platform specific
and not guaranteed
but can be useful for manual inspection.

**Parameters**

- `handle` (number) - crash dump handle

**Returns**

- `blob` (string) - string with the platform specific data

### crash.get_modules
*Type:* FUNCTION
The function returns a table containing entries with sub-tables that
have fields 'name' and 'address' set for all loaded modules.

**Parameters**

- `handle` (number) - crash dump handle

**Returns**

- `modules` (table) - module table

### crash.get_signum
*Type:* FUNCTION
read signal number from a crash report

**Parameters**

- `handle` (number) - crash dump handle

**Returns**

- `signal` (number) - signal number

### crash.get_sys_field
*Type:* FUNCTION
reads a system field from a loaded crash dump

**Parameters**

- `handle` (number) - crash dump handle
- `index` (number) - system field enum. Must be less than <a href="/ref/crash#crash.SYSFIELD_MAX">crash.SYSFIELD_MAX</a>

**Returns**

- `value` (string | nil) - value recorded in the crash dump, or <code>nil</code> if it didn't exist

### crash.get_user_field
*Type:* FUNCTION
reads user field from a loaded crash dump

**Parameters**

- `handle` (number) - crash dump handle
- `index` (number) - user data slot index

**Returns**

- `value` (string) - user data value recorded in the crash dump

### crash.load_previous
*Type:* FUNCTION
The crash dump will be removed from disk upon a successful
load, so loading is one-shot.

**Returns**

- `handle` (number | nil) - handle to the loaded dump, or <code>nil</code> if no dump was found

### crash.release
*Type:* FUNCTION
releases a previously loaded crash dump

**Parameters**

- `handle` (number) - handle to loaded crash dump

### crash.set_file_path
*Type:* FUNCTION
Crashes occuring before the path is set will be stored to a default engine location.

**Parameters**

- `path` (string) - file path to use

### crash.set_user_field
*Type:* FUNCTION
Store a user value that will get written to a crash dump when
a crash occurs. This can be user id:s, breadcrumb data etc.
There are 32 slots indexed from 0. Each slot stores at most 255 characters.

**Parameters**

- `index` (number) - slot index. 0-indexed
- `value` (string) - string value to store

### crash.SYSFIELD_ANDROID_BUILD_FINGERPRINT
*Type:* CONSTANT
android build fingerprint

### crash.SYSFIELD_DEVICE_LANGUAGE
*Type:* CONSTANT
system device language as reported by sys.get_sys_info

### crash.SYSFIELD_DEVICE_MODEL
*Type:* CONSTANT
device model as reported by sys.get_sys_info

### crash.SYSFIELD_ENGINE_HASH
*Type:* CONSTANT
engine version as hash

### crash.SYSFIELD_ENGINE_VERSION
*Type:* CONSTANT
engine version as release number

### crash.SYSFIELD_LANGUAGE
*Type:* CONSTANT
system language as reported by sys.get_sys_info

### crash.SYSFIELD_MANUFACTURER
*Type:* CONSTANT
device manufacturer as reported by sys.get_sys_info

### crash.SYSFIELD_MAX
*Type:* CONSTANT
The max number of sysfields.

### crash.SYSFIELD_SYSTEM_NAME
*Type:* CONSTANT
system name as reported by sys.get_sys_info

### crash.SYSFIELD_SYSTEM_VERSION
*Type:* CONSTANT
system version as reported by sys.get_sys_info

### crash.SYSFIELD_TERRITORY
*Type:* CONSTANT
system territory as reported by sys.get_sys_info

### crash.USERFIELD_MAX
*Type:* CONSTANT
The max number of user fields.

### crash.USERFIELD_SIZE
*Type:* CONSTANT
The max size of a single user field.

### crash.write_dump
*Type:* FUNCTION
Performs the same steps as if a crash had just occured but
allows the program to continue.
The generated dump can be read by crash.load_previous

<!-- debug-lua -->

# Debug {#apis:debug-lua}

**Namespace:** `debug`
**Language:** Lua
**Type:** Defold Lua
**File:** `lua_debug.doc_h`
**Source:** `engine/lua/src/lua_debug.doc_h`

Documentation for the Lua debug standard library.

From [Lua 5.1 Reference Manual](https://www.lua.org/manual/5.1/)
by Roberto Ierusalimschy, Luiz Henrique de Figueiredo, Waldemar Celes.

Copyright  2006-2012 Lua.org, PUC-Rio.

Freely available under the terms of the [Lua license](https://www.lua.org/license.html).

## API

### debug.debug
*Type:* FUNCTION
Enters an interactive mode with the user,
running each string that the user enters.
Using simple commands and other debug facilities,
the user can inspect global and local variables,
change their values, evaluate expressions, and so on.
A line containing only the word cont finishes this function,
so that the caller continues its execution.
Note that commands for debug.debug are not lexically nested
within any function, and so have no direct access to local variables.

### debug.getfenv
*Type:* FUNCTION
Returns the environment of object o.

**Parameters**

- `o` (any)

### debug.gethook
*Type:* FUNCTION
Returns the current hook settings of the thread, as three values:
the current hook function, the current hook mask,
and the current hook count
(as set by the debug.sethook function).

**Parameters**

- `thread` (thread) (optional)

### debug.getinfo
*Type:* FUNCTION
Returns a table with information about a function.
You can give the function directly,
or you can give a number as the value of function,
which means the function running at level function of the call stack
of the given thread:
level 0 is the current function (getinfo itself);
level 1 is the function that called getinfo;
and so on.
If function is a number larger than the number of active functions,
then getinfo returns  nil.
The returned table can contain all the fields returned by lua_getinfo,
with the string what describing which fields to fill in.
The default for what is to get all information available,
except the table of valid lines.
If present,
the option 'f'
adds a field named func with the function itself.
If present,
the option 'L'
adds a field named activelines with the table of
valid lines.
For instance, the expression debug.getinfo(1,"n").name returns
a table with a name for the current function,
if a reasonable name can be found,
and the expression debug.getinfo(print)
returns a table with all available information
about the print function.

**Parameters**

- `thread` (thread) (optional)
- `function` (function)
- `what` (string) (optional)

### debug.getlocal
*Type:* FUNCTION
This function returns the name and the value of the local variable
with index local of the function at level level of the stack.
(The first parameter or local variable has index 1, and so on,
until the last active local variable.)
The function returns  nil if there is no local
variable with the given index,
and raises an error when called with a level out of range.
(You can call debug.getinfo to check whether the level is valid.)
Variable names starting with '(' (open parentheses)
represent internal variables
(loop control variables, temporaries, and C function locals).

**Parameters**

- `thread` (thread) (optional)
- `level` (number)
- `local` (number)

### debug.getmetatable
*Type:* FUNCTION
Returns the metatable of the given object
or  nil if it does not have a metatable.

**Parameters**

- `object` (any)

### debug.getregistry
*Type:* FUNCTION
Returns the registry table .

### debug.getupvalue
*Type:* FUNCTION
This function returns the name and the value of the upvalue
with index up of the function func.
The function returns  nil if there is no upvalue with the given index.

**Parameters**

- `func` (function)
- `up` (number)

### debug.setfenv
*Type:* FUNCTION
Sets the environment of the given object to the given table.
Returns object.

**Parameters**

- `object` (any)
- `table` (table)

### debug.sethook
*Type:* FUNCTION
Sets the given function as a hook.
The string mask and the number count describe
when the hook will be called.
The string mask may have the following characters,
with the given meaning:

"c"
the hook is called every time Lua calls a function;
"r"
the hook is called every time Lua returns from a function;
"l"
the hook is called every time Lua enters a new line of code.

With a count different from zero,
the hook is called after every count instructions.
When called without arguments,
debug.sethook turns off the hook.
When the hook is called, its first parameter is a string
describing the event that has triggered its call:
"call", "return" (or "tail return",
when simulating a return from a tail call),
"line", and "count".
For line events,
the hook also gets the new line number as its second parameter.
Inside a hook,
you can call getinfo with level 2 to get more information about
the running function
(level 0 is the getinfo function,
and level 1 is the hook function),
unless the event is "tail return".
In this case, Lua is only simulating the return,
and a call to getinfo will return invalid data.

**Parameters**

- `thread` (thread) (optional)
- `hook` (function)
- `mask` (string)
- `count` (number) (optional)

### debug.setlocal
*Type:* FUNCTION
This function assigns the value value to the local variable
with index local of the function at level level of the stack.
The function returns  nil if there is no local
variable with the given index,
and raises an error when called with a level out of range.
(You can call getinfo to check whether the level is valid.)
Otherwise, it returns the name of the local variable.

**Parameters**

- `thread` (thread) (optional)
- `level` (number)
- `local` (number)
- `value` (any)

### debug.setmetatable
*Type:* FUNCTION
Sets the metatable for the given object to the given table
(which can be  nil).

**Parameters**

- `object` (any)
- `table` (table)

### debug.setupvalue
*Type:* FUNCTION
This function assigns the value value to the upvalue
with index up of the function func.
The function returns  nil if there is no upvalue
with the given index.
Otherwise, it returns the name of the upvalue.

**Parameters**

- `func` (function)
- `up` (number)
- `value` (any)

### debug.traceback
*Type:* FUNCTION
Returns a string with a traceback of the call stack.
An optional message string is appended
at the beginning of the traceback.
An optional level number tells at which level
to start the traceback
(default is 1, the function calling traceback).

**Parameters**

- `thread` (thread) (optional)
- `message` (string) (optional)
- `level` (number) (optional)

<!-- editor-lua -->

# Editor {#apis:editor-lua}

**Namespace:** `editor`
**Language:** Lua
**Type:** Defold Lua

Editor scripting documentation

## API

### editor.bob
*Type:* FUNCTION
Run bob the builder program
For the full documentation of the available commands and options, see the bob manual.

**Parameters**

- `options` (table) (optional) - table of command line options for bob, without the leading dashes (<code>--</code>). You can use snake_case instead of kebab-case for option keys. Only long option names are supported (i.e. <code>output</code>, not <code>o</code>). Supported value types are strings, integers and booleans. If an option takes no arguments, use a boolean (i.e. <code>true</code>). If an option may be repeated, you can use an array of values.
- `...commands` (string) (optional) - bob commands, e.g. <code>"resolve"</code> or <code>"build"</code>

**Examples**

Print help in the console:
```
editor.bob({help = true})

```

Bundle the game for the host platform:
```
local opts = {
    archive = true,
    platform = editor.platform
}
editor.bob(opts, "distclean", "resolve", "build", "bundle")

```

Using snake_cased and repeated options:
```
local opts = {
    archive = true,
    platform = editor.platform,
    build_server = "https://build.my-company.com",
    settings = {"test.ini", "headless.ini"}
}
editor.bob(opts, "distclean", "resolve", "build")

```

### editor.browse
*Type:* FUNCTION
Open a URL in the default browser or a registered application

**Parameters**

- `url` (string) - http(s) or file URL

### editor.can_add
*Type:* FUNCTION
Check if editor.tx.add() (as well as editor.tx.clear() and editor.tx.remove()) transaction with this property won't throw an error

**Parameters**

- `node` (string | userdata) - Either resource path (e.g. <code>"/main/game.script"</code>), or internal node id passed to the script by the editor
- `property` (string) - Either <code>"path"</code>, <code>"text"</code>, or a property from the Outline view (hover the label to see its editor script name)

**Returns**

- `value` (boolean)

### editor.can_get
*Type:* FUNCTION
Check if you can get this property so editor.get() won't throw an error

**Parameters**

- `node` (string | userdata) - Either resource path (e.g. <code>"/main/game.script"</code>), or internal node id passed to the script by the editor
- `property` (string) - Either <code>"path"</code>, <code>"text"</code>, or a property from the Outline view (hover the label to see its editor script name)

**Returns**

- `value` (boolean)

### editor.can_reorder
*Type:* FUNCTION
Check if editor.tx.reorder() transaction with this property won't throw an error

**Parameters**

- `node` (string | userdata) - Either resource path (e.g. <code>"/main/game.script"</code>), or internal node id passed to the script by the editor
- `property` (string) - Either <code>"path"</code>, <code>"text"</code>, or a property from the Outline view (hover the label to see its editor script name)

**Returns**

- `value` (boolean)

### editor.can_reset
*Type:* FUNCTION
Check if editor.tx.reset() transaction with this property won't throw an error

**Parameters**

- `node` (string | userdata) - Either resource path (e.g. <code>"/main/game.script"</code>), or internal node id passed to the script by the editor
- `property` (string) - Either <code>"path"</code>, <code>"text"</code>, or a property from the Outline view (hover the label to see its editor script name)

**Returns**

- `value` (boolean)

### editor.can_set
*Type:* FUNCTION
Check if editor.tx.set() transaction with this property won't throw an error

**Parameters**

- `node` (string | userdata) - Either resource path (e.g. <code>"/main/game.script"</code>), or internal node id passed to the script by the editor
- `property` (string) - Either <code>"path"</code>, <code>"text"</code>, or a property from the Outline view (hover the label to see its editor script name)

**Returns**

- `value` (boolean)

### editor.command
*Type:* FUNCTION
Create an editor command

**Parameters**

- `opts` (table) - A table with the following keys:<dl><dt><code>label <small>string, message</small></code></dt><dd>required, user-visible command name, either a string or a localization message</dd><dt><code>locations <small>string[]</small></code></dt><dd>required, a non-empty list of locations where the command is displayed in the editor, values are either <code>"Edit"</code>, <code>"View"</code>, <code>"Project"</code>, <code>"Debug"</code> (the editor menubar), <code>"Assets"</code> (the assets pane), or <code>"Outline"</code> (the outline pane)</dd><dt><code>query <small>table</small></code></dt><dd>optional, a query that both controls the command availability and provides additional information to the command handler functions; a table with the following keys:<dl><dt><code>selection <small>table</small></code></dt><dd>current selection, a table with the following keys:<dl><dt><code>type <small>string</small></code></dt><dd>either <code>"resource"</code> (selected resource) or <code>"outline"</code> (selected outline node)</dd><dt><code>cardinality <small>string</small></code></dt><dd>either <code>"one"</code> (will use first selected item) or <code>"many"</code> (will use all selected items)</dd></dl></dd><dt><code>argument <small>table</small></code></dt><dd>the command argument</dd></dl></dd><dt><code>id <small>string</small></code></dt><dd>optional, keyword identifier that may be used for assigning a shortcut to a command; should be a dot-separated identifier string, e.g. <code>"my-extension.do-stuff"</code></dd><dt><code>active <small>function</small></code></dt><dd>optional function that additionally checks if a command is active in the current context; will receive opts table with values populated by the query; should be fast to execute since the editor might invoke it in response to UI interactions (on key typed, mouse clicked)</dd><dt><code>run <small>function</small></code></dt><dd>optional function that is invoked when the user decides to execute the command; will receive opts table with values populated by the query</dd></dl>

**Returns**

- `command` (command)

**Examples**

Print Git history for a file:
```
editor.command({
  label = "Git History",
  query = {
    selection = {
      type = "resource",
      cardinality = "one"
    }
  },
  run = function(opts)
    editor.execute(
      "git",
      "log",
      "--follow",
      "." .. editor.get(opts.selection, "path"),
      {reload_resources=false})
  end
})

```

### editor.create_directory
*Type:* FUNCTION
Create a directory if it does not exist, and all non-existent parent directories.
Throws an error if the directory can't be created.

**Parameters**

- `resource_path` (string) - Resource path (starting with <code>/</code>)

**Examples**

```
editor.create_directory("/assets/gen")

```

### editor.create_resources
*Type:* FUNCTION
Create resources (including non-existent parent directories).
Throws an error if any of the provided resource paths already exist

**Parameters**

- `resources` (string[) - ] Array of resource paths (strings starting with <code>/</code>) or resource definitions, lua tables with the following keys:<dl><dt><code>1 <small>string</small></code></dt><dd>required, resource path (starting with <code>/</code>)</dd><dt><code>2 <small>string</small></code></dt><dd>optional, created resource content</dd></dl>

**Examples**

Create a single resource from template:
```
editor.create_resources({
  "/npc.go"
})

```

Create multiple resources:
```
editor.create_resources({
  "/npc.go",
  "/levels/1.collection",
  "/levels/2.collection",
})

```

Create a resource with custom content:
```
editor.create_resources({
  {"/npc.script", "go.property('hp', 100)"}
})

```

### editor.delete_directory
*Type:* FUNCTION
Delete a directory if it exists, and all existent child directories and files.
Throws an error if the directory can't be deleted.

**Parameters**

- `resource_path` (string) - Resource path (starting with <code>/</code>)

**Examples**

```
editor.delete_directory("/assets/gen")

```

### editor.editor_sha1
*Type:* VARIABLE
A string, SHA1 of Defold editor

### editor.engine_sha1
*Type:* VARIABLE
A string, SHA1 of Defold engine

### editor.execute
*Type:* FUNCTION
Execute a shell command.
Any shell command arguments should be provided as separate argument strings to this function. If the exit code of the process is not zero, this function throws error. By default, the function returns nil, but it can be configured to capture the output of the shell command as string and return it  set out option to "capture" to do it.By default, after this shell command is executed, the editor will reload resources from disk.

**Parameters**

- `command` (string) - Shell command name to execute
- `...` (string) (optional) - Optional shell command arguments
- `options` (table) (optional) - Optional options table. Supported entries:                                            <ul>                                              <li>                                                <span class="type">boolean</span> <code>reload_resources</code>: make the editor reload the resources from disk after the command is executed, default <code>true</code>                                              </li>                                              <li>                                                <span class="type">string</span> <code>out</code>: standard output mode, either:                                                <ul>                                                  <li>                                                    <code>"pipe"</code>: the output is piped to the editor console (this is the default behavior).                                                  </li>                                                  <li>                                                    <code>"capture"</code>: capture and return the output to the editor script with trailing newlines trimmed.                                                  </li>                                                  <li>                                                    <code>"discard"</code>: the output is discarded completely.                                                  </li>                                                </ul>                                              </li>                                              <li>                                                <span class="type">string</span> <code>err</code>: standard error output mode, either:                                                <ul>                                                  <li>                                                    <code>"pipe"</code>: the error output is piped to the editor console (this is the default behavior).                                                  </li>                                                  <li>                                                    <code>"stdout"</code>: the error output is redirected to the standard output of the process.                                                  </li>                                                  <li>                                                    <code>"discard"</code>: the error output is discarded completely.                                                  </li>                                                </ul>                                              </li>                                            </ul>

**Returns**

- `result` (nil | string) - If <code>out</code> option is set to <code>"capture"</code>, returns the output as string with trimmed trailing newlines. Otherwise, returns <code>nil</code>.

**Examples**

Make a directory with spaces in it:
```
editor.execute("mkdir", "new dir")

```

Read the git status:
```
local status = editor.execute("git", "status", "--porcelain", {
  reload_resources = false,
  out = "capture"
})

```

### editor.external_file_attributes
*Type:* FUNCTION
Query information about file system path

**Parameters**

- `path` (string) - External file path, resolved against project root if relative

**Returns**

- `attributes` (table) - A table with the following keys:<dl>                                                  <dt><code>path <small>string</small></code></dt>                                                  <dd>resolved file path</dd>                                                  <dt><code>exists <small>boolean</small></code></dt>                                                  <dd>whether there is a file system entry at the path</dd>                                                  <dt><code>is_file <small>boolean</small></code></dt>                                                  <dd>whether the path corresponds to a file</dd>                                                  <dt><code>is_directory <small>boolean</small></code></dt>                                                  <dd>whether the path corresponds to a directory</dd>                                                </dl>

### editor.get
*Type:* FUNCTION
Get a value of a node property inside the editor.
Some properties might be read-only, and some might be unavailable in different contexts, so you should use editor.can_get() before reading them and editor.can_set() before making the editor set them.

**Parameters**

- `node` (string | userdata) - Either resource path (e.g. <code>"/main/game.script"</code>), or internal node id passed to the script by the editor
- `property` (string) - Either <code>"path"</code>, <code>"text"</code>, or a property from the Outline view (hover the label to see its editor script name)

**Returns**

- `value` (any) - property value

### editor.open_external_file
*Type:* FUNCTION
Open a file in a registered application

**Parameters**

- `path` (string) - file path

### editor.platform
*Type:* VARIABLE
Editor platform id.
A string, either:
- "x86_64-win32"
- "x86_64-macos"
- "arm64-macos"
- "x86_64-linux"

### editor.prefs.get
*Type:* FUNCTION
Get preference value
The schema for the preference value should be defined beforehand.

**Parameters**

- `key` (string) - dot-separated preference key path

**Returns**

- `value` (any) - current pref value or default if a schema for the key path exists, nil otherwise

### editor.prefs.is_set
*Type:* FUNCTION
Check if preference value is explicitly set
The schema for the preference value should be defined beforehand.

**Parameters**

- `key` (string) - dot-separated preference key path

**Returns**

- `value` (boolean) - flag indicating if the value is explicitly set

### editor.prefs.schema.array
*Type:* FUNCTION
array schema

**Parameters**

- `opts` (table) - Required opts: <dl><dt><code>item <small>schema</small></code></dt><dd>array item schema</dd></dl>  Optional opts: <dl><dt><code>default <small>item[]</small></code></dt><dd>default value</dd><dt><code>scope <small>string</small></code></dt><dd>preference scope; either: <ul><li><code>editor.prefs.SCOPE.GLOBAL</code>: same preference value is used in every project on this computer</li><li><code>editor.prefs.SCOPE.PROJECT</code>: a separate preference value per project</li></ul></dd></dl>

**Returns**

- `value` (schema) - Prefs schema

### editor.prefs.schema.boolean
*Type:* FUNCTION
boolean schema

**Parameters**

- `opts` (table) (optional) - Optional opts: <dl><dt><code>default <small>boolean</small></code></dt><dd>default value</dd><dt><code>scope <small>string</small></code></dt><dd>preference scope; either: <ul><li><code>editor.prefs.SCOPE.GLOBAL</code>: same preference value is used in every project on this computer</li><li><code>editor.prefs.SCOPE.PROJECT</code>: a separate preference value per project</li></ul></dd></dl>

**Returns**

- `value` (schema) - Prefs schema

### editor.prefs.schema.enum
*Type:* FUNCTION
enum value schema

**Parameters**

- `opts` (table) - Required opts: <dl><dt><code>values <small>any[]</small></code></dt><dd>allowed values, must be scalar (nil, boolean, number or string)</dd></dl>  Optional opts: <dl><dt><code>default <small>any</small></code></dt><dd>default value</dd><dt><code>scope <small>string</small></code></dt><dd>preference scope; either: <ul><li><code>editor.prefs.SCOPE.GLOBAL</code>: same preference value is used in every project on this computer</li><li><code>editor.prefs.SCOPE.PROJECT</code>: a separate preference value per project</li></ul></dd></dl>

**Returns**

- `value` (schema) - Prefs schema

### editor.prefs.schema.integer
*Type:* FUNCTION
integer schema

**Parameters**

- `opts` (table) (optional) - Optional opts: <dl><dt><code>default <small>integer</small></code></dt><dd>default value</dd><dt><code>scope <small>string</small></code></dt><dd>preference scope; either: <ul><li><code>editor.prefs.SCOPE.GLOBAL</code>: same preference value is used in every project on this computer</li><li><code>editor.prefs.SCOPE.PROJECT</code>: a separate preference value per project</li></ul></dd></dl>

**Returns**

- `value` (schema) - Prefs schema

### editor.prefs.schema.keyword
*Type:* FUNCTION
keyword schema
A keyword is a short string that is interned within the editor runtime, useful e.g. for identifiers

**Parameters**

- `opts` (table) (optional) - Optional opts: <dl><dt><code>default <small>string</small></code></dt><dd>default value</dd><dt><code>scope <small>string</small></code></dt><dd>preference scope; either: <ul><li><code>editor.prefs.SCOPE.GLOBAL</code>: same preference value is used in every project on this computer</li><li><code>editor.prefs.SCOPE.PROJECT</code>: a separate preference value per project</li></ul></dd></dl>

**Returns**

- `value` (schema) - Prefs schema

### editor.prefs.schema.number
*Type:* FUNCTION
floating-point number schema

**Parameters**

- `opts` (table) (optional) - Optional opts: <dl><dt><code>default <small>number</small></code></dt><dd>default value</dd><dt><code>scope <small>string</small></code></dt><dd>preference scope; either: <ul><li><code>editor.prefs.SCOPE.GLOBAL</code>: same preference value is used in every project on this computer</li><li><code>editor.prefs.SCOPE.PROJECT</code>: a separate preference value per project</li></ul></dd></dl>

**Returns**

- `value` (schema) - Prefs schema

### editor.prefs.schema.object
*Type:* FUNCTION
heterogeneous object schema

**Parameters**

- `opts` (table) - Required opts: <dl><dt><code>properties <small>table&lt;string, schema&gt;</small></code></dt><dd>a table from property key (string) to value schema</dd></dl>  Optional opts: <dl><dt><code>default <small>table</small></code></dt><dd>default value</dd><dt><code>scope <small>string</small></code></dt><dd>preference scope; either: <ul><li><code>editor.prefs.SCOPE.GLOBAL</code>: same preference value is used in every project on this computer</li><li><code>editor.prefs.SCOPE.PROJECT</code>: a separate preference value per project</li></ul></dd></dl>

**Returns**

- `value` (schema) - Prefs schema

### editor.prefs.schema.object_of
*Type:* FUNCTION
homogeneous object schema

**Parameters**

- `opts` (table) - Required opts: <dl><dt><code>key <small>schema</small></code></dt><dd>table key schema</dd><dt><code>val <small>schema</small></code></dt><dd>table value schema</dd></dl>  Optional opts: <dl><dt><code>default <small>table</small></code></dt><dd>default value</dd><dt><code>scope <small>string</small></code></dt><dd>preference scope; either: <ul><li><code>editor.prefs.SCOPE.GLOBAL</code>: same preference value is used in every project on this computer</li><li><code>editor.prefs.SCOPE.PROJECT</code>: a separate preference value per project</li></ul></dd></dl>

**Returns**

- `value` (schema) - Prefs schema

### editor.prefs.schema.one_of
*Type:* FUNCTION
one of schema

**Parameters**

- `opts` (table) - Required opts: <dl><dt><code>schemas <small>schema[]</small></code></dt><dd>alternative schemas</dd></dl>  Optional opts: <dl><dt><code>default <small>any</small></code></dt><dd>default value</dd><dt><code>scope <small>string</small></code></dt><dd>preference scope; either: <ul><li><code>editor.prefs.SCOPE.GLOBAL</code>: same preference value is used in every project on this computer</li><li><code>editor.prefs.SCOPE.PROJECT</code>: a separate preference value per project</li></ul></dd></dl>

**Returns**

- `value` (schema) - Prefs schema

### editor.prefs.schema.password
*Type:* FUNCTION
password schema
A password is a string that is encrypted when stored in a preference file

**Parameters**

- `opts` (table) (optional) - Optional opts: <dl><dt><code>default <small>string</small></code></dt><dd>default value</dd><dt><code>scope <small>string</small></code></dt><dd>preference scope; either: <ul><li><code>editor.prefs.SCOPE.GLOBAL</code>: same preference value is used in every project on this computer</li><li><code>editor.prefs.SCOPE.PROJECT</code>: a separate preference value per project</li></ul></dd></dl>

**Returns**

- `value` (schema) - Prefs schema

### editor.prefs.schema.set
*Type:* FUNCTION
set schema
Set is represented as a lua table with true values

**Parameters**

- `opts` (table) - Required opts: <dl><dt><code>item <small>schema</small></code></dt><dd>set item schema</dd></dl>  Optional opts: <dl><dt><code>default <small>table&lt;item, true&gt;</small></code></dt><dd>default value</dd><dt><code>scope <small>string</small></code></dt><dd>preference scope; either: <ul><li><code>editor.prefs.SCOPE.GLOBAL</code>: same preference value is used in every project on this computer</li><li><code>editor.prefs.SCOPE.PROJECT</code>: a separate preference value per project</li></ul></dd></dl>

**Returns**

- `value` (schema) - Prefs schema

### editor.prefs.schema.string
*Type:* FUNCTION
string schema

**Parameters**

- `opts` (table) (optional) - Optional opts: <dl><dt><code>default <small>string</small></code></dt><dd>default value</dd><dt><code>scope <small>string</small></code></dt><dd>preference scope; either: <ul><li><code>editor.prefs.SCOPE.GLOBAL</code>: same preference value is used in every project on this computer</li><li><code>editor.prefs.SCOPE.PROJECT</code>: a separate preference value per project</li></ul></dd></dl>

**Returns**

- `value` (schema) - Prefs schema

### editor.prefs.schema.tuple
*Type:* FUNCTION
tuple schema
A tuple is a fixed-length array where each item has its own defined type

**Parameters**

- `opts` (table) - Required opts: <dl><dt><code>items <small>schema[]</small></code></dt><dd>schemas for the items</dd></dl>  Optional opts: <dl><dt><code>default <small>any[]</small></code></dt><dd>default value</dd><dt><code>scope <small>string</small></code></dt><dd>preference scope; either: <ul><li><code>editor.prefs.SCOPE.GLOBAL</code>: same preference value is used in every project on this computer</li><li><code>editor.prefs.SCOPE.PROJECT</code>: a separate preference value per project</li></ul></dd></dl>

**Returns**

- `value` (schema) - Prefs schema

### editor.prefs.SCOPE.GLOBAL
*Type:* VARIABLE
"global"

### editor.prefs.SCOPE.PROJECT
*Type:* VARIABLE
"project"

### editor.prefs.set
*Type:* FUNCTION
Set preference value
The schema for the preference value should be defined beforehand.

**Parameters**

- `key` (string) - dot-separated preference key path
- `value` (any) - new pref value to set

### editor.resource_attributes
*Type:* FUNCTION
Query information about a project resource

**Parameters**

- `resource_path` (string) - Resource path (starting with <code>/</code>)

**Returns**

- `value` (table) - A table with the following keys:<dl><dt><code>exists <small>boolean</small></code></dt><dd>whether a resource identified by the path exists in the project</dd><dt><code>is_file <small>boolean</small></code></dt><dd>whether the resource represents a file with some content</dd><dt><code>is_directory <small>boolean</small></code></dt><dd>whether the resource represents a directory</dd></dl>

### editor.save
*Type:* FUNCTION
Persist any unsaved changes to disk

### editor.transact
*Type:* FUNCTION
Change the editor state in a single, undoable transaction

**Parameters**

- `txs` (transaction_step[) - ] An array of transaction steps created using <code>editor.tx.*</code> functions

### editor.tx.add
*Type:* FUNCTION
Create a transaction step that will add a child item to a node's list property when transacted with editor.transact().

**Parameters**

- `node` (string | userdata) - Either resource path (e.g. <code>"/main/game.script"</code>), or internal node id passed to the script by the editor
- `property` (string) - Either <code>"path"</code>, <code>"text"</code>, or a property from the Outline view (hover the label to see its editor script name)
- `value` (any) - Added item for the property, a table from property key to either a valid <code>editor.tx.set()</code>-able value, or an array of valid <code>editor.tx.add()</code>-able values

### editor.tx.clear
*Type:* FUNCTION
Create a transaction step that will remove all items from node's list property when transacted with editor.transact().

**Parameters**

- `node` (string | userdata) - Either resource path (e.g. <code>"/main/game.script"</code>), or internal node id passed to the script by the editor
- `property` (string) - Either <code>"path"</code>, <code>"text"</code>, or a property from the Outline view (hover the label to see its editor script name)

**Returns**

- `tx` (transaction_step) - A transaction step

### editor.tx.remove
*Type:* FUNCTION
Create a transaction step that will remove a child node from the node's list property when transacted with editor.transact().

**Parameters**

- `node` (string | userdata) - Either resource path (e.g. <code>"/main/game.script"</code>), or internal node id passed to the script by the editor
- `property` (string) - Either <code>"path"</code>, <code>"text"</code>, or a property from the Outline view (hover the label to see its editor script name)
- `child_node` (string | userdata) - Either resource path (e.g. <code>"/main/game.script"</code>), or internal node id passed to the script by the editor

**Returns**

- `tx` (transaction_step) - A transaction step

### editor.tx.reorder
*Type:* FUNCTION
Create a transaction step that reorders child nodes in a node list defined by the property if supported (see editor.can_reorder())

**Parameters**

- `node` (string | userdata) - Either resource path (e.g. <code>"/main/game.script"</code>), or internal node id passed to the script by the editor
- `property` (string) - Either <code>"path"</code>, <code>"text"</code>, or a property from the Outline view (hover the label to see its editor script name)
- `child_nodes` (table) - array of child nodes (the same as returned by <code>editor.get(node, property)</code>) in new order

**Returns**

- `tx` (transaction_step) - A transaction step

### editor.tx.reset
*Type:* FUNCTION
Create a transaction step that will reset an overridden property to its default value when transacted with editor.transact().

**Parameters**

- `node` (string | userdata) - Either resource path (e.g. <code>"/main/game.script"</code>), or internal node id passed to the script by the editor
- `property` (string) - Either <code>"path"</code>, <code>"text"</code>, or a property from the Outline view (hover the label to see its editor script name)

**Returns**

- `tx` (transaction_step) - A transaction step

### editor.tx.set
*Type:* FUNCTION
Create transaction step that will set the node's property to a supplied value when transacted with editor.transact().

**Parameters**

- `node` (string | userdata) - Either resource path (e.g. <code>"/main/game.script"</code>), or internal node id passed to the script by the editor
- `property` (string) - Either <code>"path"</code>, <code>"text"</code>, or a property from the Outline view (hover the label to see its editor script name)
- `value` (any) - A new value for the property

**Returns**

- `tx` (transaction_step) - A transaction step

### editor.ui.ALIGNMENT.BOTTOM
*Type:* VARIABLE
"bottom"

### editor.ui.ALIGNMENT.BOTTOM_LEFT
*Type:* VARIABLE
"bottom-left"

### editor.ui.ALIGNMENT.BOTTOM_RIGHT
*Type:* VARIABLE
"bottom-right"

### editor.ui.ALIGNMENT.CENTER
*Type:* VARIABLE
"center"

### editor.ui.ALIGNMENT.LEFT
*Type:* VARIABLE
"left"

### editor.ui.ALIGNMENT.RIGHT
*Type:* VARIABLE
"right"

### editor.ui.ALIGNMENT.TOP
*Type:* VARIABLE
"top"

### editor.ui.ALIGNMENT.TOP_LEFT
*Type:* VARIABLE
"top-left"

### editor.ui.ALIGNMENT.TOP_RIGHT
*Type:* VARIABLE
"top-right"

### editor.ui.button
*Type:* FUNCTION
Button with a label and/or an icon

**Parameters**

- `props` (table) - Optional props: <dl><dt><code>on_pressed <small>function</small></code></dt><dd>button press callback, will be invoked without arguments when the user presses the button</dd><dt><code>text <small>string, message</small></code></dt><dd>the text, either a string or a localization message</dd><dt><code>text_alignment <small>string</small></code></dt><dd>text alignment within paragraph bounds; either: <ul><li><code>editor.ui.TEXT_ALIGNMENT.LEFT</code></li><li><code>editor.ui.TEXT_ALIGNMENT.CENTER</code></li><li><code>editor.ui.TEXT_ALIGNMENT.RIGHT</code></li><li><code>editor.ui.TEXT_ALIGNMENT.JUSTIFY</code></li></ul></dd><dt><code>icon <small>string</small></code></dt><dd>predefined icon name; either: <ul><li><code>editor.ui.ICON.OPEN_RESOURCE</code></li><li><code>editor.ui.ICON.PLUS</code></li><li><code>editor.ui.ICON.MINUS</code></li><li><code>editor.ui.ICON.CLEAR</code></li></ul></dd><dt><code>enabled <small>boolean</small></code></dt><dd>determines if the input component can be interacted with</dd><dt><code>alignment <small>string</small></code></dt><dd>alignment of the component content within its assigned bounds, defaults to <code>editor.ui.ALIGNMENT.TOP_LEFT</code>; either: <ul><li><code>editor.ui.ALIGNMENT.TOP_LEFT</code></li><li><code>editor.ui.ALIGNMENT.TOP</code></li><li><code>editor.ui.ALIGNMENT.TOP_RIGHT</code></li><li><code>editor.ui.ALIGNMENT.LEFT</code></li><li><code>editor.ui.ALIGNMENT.CENTER</code></li><li><code>editor.ui.ALIGNMENT.RIGHT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_LEFT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_RIGHT</code></li></ul></dd><dt><code>grow <small>boolean</small></code></dt><dd>determines if the component should grow to fill available space in a <code>horizontal</code> or <code>vertical</code> layout container</dd><dt><code>row_span <small>integer</small></code></dt><dd>how many rows the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd><dt><code>column_span <small>integer</small></code></dt><dd>how many columns the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd></dl>

**Returns**

- `value` (component) - UI component

### editor.ui.check_box
*Type:* FUNCTION
Check box with a label

**Parameters**

- `props` (table) - Optional props: <dl><dt><code>value <small>boolean</small></code></dt><dd>determines if the checkbox should appear checked</dd><dt><code>on_value_changed <small>function</small></code></dt><dd>change callback, will receive the new value</dd><dt><code>text <small>string, message</small></code></dt><dd>the text, either a string or a localization message</dd><dt><code>text_alignment <small>string</small></code></dt><dd>text alignment within paragraph bounds; either: <ul><li><code>editor.ui.TEXT_ALIGNMENT.LEFT</code></li><li><code>editor.ui.TEXT_ALIGNMENT.CENTER</code></li><li><code>editor.ui.TEXT_ALIGNMENT.RIGHT</code></li><li><code>editor.ui.TEXT_ALIGNMENT.JUSTIFY</code></li></ul></dd><dt><code>issue <small>table</small></code></dt><dd>issue related to the input; table with the following keys (all required):<dl><dt><code>severity <small>string</small></code></dt><dd>either <code>editor.ui.ISSUE_SEVERITY.WARNING</code> or <code>editor.ui.ISSUE_SEVERITY.ERROR</code></dd><dt><code>message <small>string, message</small></code></dt><dd>issue message that will be shown in a tooltip; either a string or a localization message</dd></dl></dd><dt><code>tooltip <small>string, message</small></code></dt><dd>tooltip message shown on hover; either a string or a localization message</dd><dt><code>enabled <small>boolean</small></code></dt><dd>determines if the input component can be interacted with</dd><dt><code>alignment <small>string</small></code></dt><dd>alignment of the component content within its assigned bounds, defaults to <code>editor.ui.ALIGNMENT.TOP_LEFT</code>; either: <ul><li><code>editor.ui.ALIGNMENT.TOP_LEFT</code></li><li><code>editor.ui.ALIGNMENT.TOP</code></li><li><code>editor.ui.ALIGNMENT.TOP_RIGHT</code></li><li><code>editor.ui.ALIGNMENT.LEFT</code></li><li><code>editor.ui.ALIGNMENT.CENTER</code></li><li><code>editor.ui.ALIGNMENT.RIGHT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_LEFT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_RIGHT</code></li></ul></dd><dt><code>grow <small>boolean</small></code></dt><dd>determines if the component should grow to fill available space in a <code>horizontal</code> or <code>vertical</code> layout container</dd><dt><code>row_span <small>integer</small></code></dt><dd>how many rows the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd><dt><code>column_span <small>integer</small></code></dt><dd>how many columns the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd></dl>

**Returns**

- `value` (component) - UI component

### editor.ui.COLOR.ERROR
*Type:* VARIABLE
"error"

### editor.ui.COLOR.HINT
*Type:* VARIABLE
"hint"

### editor.ui.COLOR.OVERRIDE
*Type:* VARIABLE
"override"

### editor.ui.COLOR.TEXT
*Type:* VARIABLE
"text"

### editor.ui.COLOR.WARNING
*Type:* VARIABLE
"warning"

### editor.ui.component
*Type:* FUNCTION
Convert a function to a UI component.
The wrapped function may call any hooks functions (editor.ui.use_*), but on any function invocation, the hooks calls must be the same, and in the same order. This means that hooks should not be used inside loops and conditions or after a conditional return statement.
The following props are supported automatically:grow booleandetermines if the component should grow to fill available space in a horizontal or vertical layout containerrow_span integerhow many rows the component spans inside a grid container, must be positive. This prop is only useful for components inside a grid container.column_span integerhow many columns the component spans inside a grid container, must be positive. This prop is only useful for components inside a grid container.

**Parameters**

- `fn` (function) - function, will receive a single table of props when called

**Returns**

- `value` (function) - decorated component function that may be invoked with a props table create component

### editor.ui.dialog
*Type:* FUNCTION
Dialog component, a top-level window component that can't be used as a child of other components

**Parameters**

- `props` (table) - Required props: <dl><dt><code>title <small>string, message</small></code></dt><dd>OS dialog window title, either a string or a localization message</dd></dl>  Optional props: <dl><dt><code>header <small>component</small></code></dt><dd>top part of the dialog, defaults to <code>editor.ui.heading({text = props.title})</code></dd><dt><code>content <small>component</small></code></dt><dd>content of the dialog</dd><dt><code>buttons <small>component[]</small></code></dt><dd>array of <code>editor.ui.dialog_button(...)</code> components, footer of the dialog. Defaults to a single Close button</dd></dl>

**Returns**

- `value` (component) - UI component

### editor.ui.dialog_button
*Type:* FUNCTION
Dialog button shown in the footer of a dialog

**Parameters**

- `props` (table) - Required props: <dl><dt><code>text <small>string, message</small></code></dt><dd>button text, either a string or a localization message</dd></dl>  Optional props: <dl><dt><code>result <small>any</small></code></dt><dd>value returned by <code>editor.ui.show_dialog(...)</code> if this button is pressed</dd><dt><code>default <small>boolean</small></code></dt><dd>if set, pressing <code>Enter</code> in the dialog will trigger this button</dd><dt><code>cancel <small>boolean</small></code></dt><dd>if set, pressing <code>Escape</code> in the dialog will trigger this button</dd><dt><code>enabled <small>boolean</small></code></dt><dd>determines if the button can be interacted with</dd></dl>

**Returns**

- `value` (component) - UI component

### editor.ui.external_file_field
*Type:* FUNCTION
Input component for selecting files from the file system

**Parameters**

- `props` (table) - Optional props: <dl><dt><code>value <small>string</small></code></dt><dd>file or directory path; resolved against project root if relative</dd><dt><code>on_value_changed <small>function</small></code></dt><dd>value change callback, will receive the absolute path of a selected file/folder or nil if the field was cleared; even though the selector dialog allows selecting only files, it's possible to receive directories and non-existent file system entries using text field input</dd><dt><code>title <small>string, message</small></code></dt><dd>OS window title, either a string or a localization message</dd><dt><code>filters <small>table[]</small></code></dt><dd>File filters, an array of filter tables, where each filter has following keys:<dl><dt><code>description <small>string, message</small></code></dt><dd>text explaining the filter, either a literal string like <code>"Text files (<em>.txt)"</code> or a localization message</dd><dt><code>extensions <small>string[]</small></code></dt><dd>array of file extension patterns, e.g. <code>"</em>.txt"</code>, <code>"<em>.</em>"</code> or <code>"game.project"</code></dd></dl></dd><dt><code>issue <small>table</small></code></dt><dd>issue related to the input; table with the following keys (all required):<dl><dt><code>severity <small>string</small></code></dt><dd>either <code>editor.ui.ISSUE_SEVERITY.WARNING</code> or <code>editor.ui.ISSUE_SEVERITY.ERROR</code></dd><dt><code>message <small>string, message</small></code></dt><dd>issue message that will be shown in a tooltip; either a string or a localization message</dd></dl></dd><dt><code>tooltip <small>string, message</small></code></dt><dd>tooltip message shown on hover; either a string or a localization message</dd><dt><code>enabled <small>boolean</small></code></dt><dd>determines if the input component can be interacted with</dd><dt><code>alignment <small>string</small></code></dt><dd>alignment of the component content within its assigned bounds, defaults to <code>editor.ui.ALIGNMENT.TOP_LEFT</code>; either: <ul><li><code>editor.ui.ALIGNMENT.TOP_LEFT</code></li><li><code>editor.ui.ALIGNMENT.TOP</code></li><li><code>editor.ui.ALIGNMENT.TOP_RIGHT</code></li><li><code>editor.ui.ALIGNMENT.LEFT</code></li><li><code>editor.ui.ALIGNMENT.CENTER</code></li><li><code>editor.ui.ALIGNMENT.RIGHT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_LEFT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_RIGHT</code></li></ul></dd><dt><code>grow <small>boolean</small></code></dt><dd>determines if the component should grow to fill available space in a <code>horizontal</code> or <code>vertical</code> layout container</dd><dt><code>row_span <small>integer</small></code></dt><dd>how many rows the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd><dt><code>column_span <small>integer</small></code></dt><dd>how many columns the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd></dl>

**Returns**

- `value` (component) - UI component

### editor.ui.grid
*Type:* FUNCTION
Layout container that places its children in a 2D grid

**Parameters**

- `props` (table) - Optional props: <dl><dt><code>children <small>component[][]</small></code></dt><dd>array of arrays of child components</dd><dt><code>rows <small>table[]</small></code></dt><dd>array of row option tables, separate configuration for each row:<dl><dt><code>grow <small>boolean</small></code></dt><dd>determines if the row should grow to fill available space</dd></dl></dd><dt><code>columns <small>table[]</small></code></dt><dd>array of column option tables, separate configuration for each column:<dl><dt><code>grow <small>boolean</small></code></dt><dd>determines if the column should grow to fill available space</dd></dl></dd><dt><code>padding <small>string, number</small></code></dt><dd>empty space from the edges of the container to its children; either: <ul><li><code>editor.ui.PADDING.NONE</code></li><li><code>editor.ui.PADDING.SMALL</code></li><li><code>editor.ui.PADDING.MEDIUM</code></li><li><code>editor.ui.PADDING.LARGE</code></li><li>non-negative number, pixels</li></ul></dd><dt><code>spacing <small>string, number</small></code></dt><dd>empty space between child components, defaults to <code>editor.ui.SPACING.MEDIUM</code>; either: <ul><li><code>editor.ui.SPACING.NONE</code></li><li><code>editor.ui.SPACING.SMALL</code></li><li><code>editor.ui.SPACING.MEDIUM</code></li><li><code>editor.ui.SPACING.LARGE</code></li><li>non-negative number, pixels</li></ul></dd><dt><code>alignment <small>string</small></code></dt><dd>alignment of the component content within its assigned bounds, defaults to <code>editor.ui.ALIGNMENT.TOP_LEFT</code>; either: <ul><li><code>editor.ui.ALIGNMENT.TOP_LEFT</code></li><li><code>editor.ui.ALIGNMENT.TOP</code></li><li><code>editor.ui.ALIGNMENT.TOP_RIGHT</code></li><li><code>editor.ui.ALIGNMENT.LEFT</code></li><li><code>editor.ui.ALIGNMENT.CENTER</code></li><li><code>editor.ui.ALIGNMENT.RIGHT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_LEFT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_RIGHT</code></li></ul></dd><dt><code>grow <small>boolean</small></code></dt><dd>determines if the component should grow to fill available space in a <code>horizontal</code> or <code>vertical</code> layout container</dd><dt><code>row_span <small>integer</small></code></dt><dd>how many rows the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd><dt><code>column_span <small>integer</small></code></dt><dd>how many columns the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd></dl>

**Returns**

- `value` (component) - UI component

### editor.ui.heading
*Type:* FUNCTION
A text heading

**Parameters**

- `props` (table) - Optional props: <dl><dt><code>text <small>string, message</small></code></dt><dd>the text, either a string or a localization message</dd><dt><code>text_alignment <small>string</small></code></dt><dd>text alignment within paragraph bounds; either: <ul><li><code>editor.ui.TEXT_ALIGNMENT.LEFT</code></li><li><code>editor.ui.TEXT_ALIGNMENT.CENTER</code></li><li><code>editor.ui.TEXT_ALIGNMENT.RIGHT</code></li><li><code>editor.ui.TEXT_ALIGNMENT.JUSTIFY</code></li></ul></dd><dt><code>color <small>string</small></code></dt><dd>semantic color, defaults to <code>editor.ui.COLOR.TEXT</code>; either: <ul><li><code>editor.ui.COLOR.TEXT</code></li><li><code>editor.ui.COLOR.HINT</code></li><li><code>editor.ui.COLOR.OVERRIDE</code></li><li><code>editor.ui.COLOR.WARNING</code></li><li><code>editor.ui.COLOR.ERROR</code></li></ul></dd><dt><code>word_wrap <small>boolean</small></code></dt><dd>determines if the lines of text are word-wrapped when they don't fit in the assigned bounds, defaults to true</dd><dt><code>style <small>string</small></code></dt><dd>heading style, defaults to <code>editor.ui.HEADING_STYLE.H3</code>; either: <ul><li><code>editor.ui.HEADING_STYLE.H1</code></li><li><code>editor.ui.HEADING_STYLE.H2</code></li><li><code>editor.ui.HEADING_STYLE.H3</code></li><li><code>editor.ui.HEADING_STYLE.H4</code></li><li><code>editor.ui.HEADING_STYLE.H5</code></li><li><code>editor.ui.HEADING_STYLE.H6</code></li><li><code>editor.ui.HEADING_STYLE.DIALOG</code></li><li><code>editor.ui.HEADING_STYLE.FORM</code></li></ul></dd><dt><code>alignment <small>string</small></code></dt><dd>alignment of the component content within its assigned bounds, defaults to <code>editor.ui.ALIGNMENT.TOP_LEFT</code>; either: <ul><li><code>editor.ui.ALIGNMENT.TOP_LEFT</code></li><li><code>editor.ui.ALIGNMENT.TOP</code></li><li><code>editor.ui.ALIGNMENT.TOP_RIGHT</code></li><li><code>editor.ui.ALIGNMENT.LEFT</code></li><li><code>editor.ui.ALIGNMENT.CENTER</code></li><li><code>editor.ui.ALIGNMENT.RIGHT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_LEFT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_RIGHT</code></li></ul></dd><dt><code>grow <small>boolean</small></code></dt><dd>determines if the component should grow to fill available space in a <code>horizontal</code> or <code>vertical</code> layout container</dd><dt><code>row_span <small>integer</small></code></dt><dd>how many rows the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd><dt><code>column_span <small>integer</small></code></dt><dd>how many columns the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd></dl>

**Returns**

- `value` (component) - UI component

### editor.ui.HEADING_STYLE.DIALOG
*Type:* VARIABLE
"dialog"

### editor.ui.HEADING_STYLE.FORM
*Type:* VARIABLE
"form"

### editor.ui.HEADING_STYLE.H1
*Type:* VARIABLE
"h1"

### editor.ui.HEADING_STYLE.H2
*Type:* VARIABLE
"h2"

### editor.ui.HEADING_STYLE.H3
*Type:* VARIABLE
"h3"

### editor.ui.HEADING_STYLE.H4
*Type:* VARIABLE
"h4"

### editor.ui.HEADING_STYLE.H5
*Type:* VARIABLE
"h5"

### editor.ui.HEADING_STYLE.H6
*Type:* VARIABLE
"h6"

### editor.ui.horizontal
*Type:* FUNCTION
Layout container that places its children in a horizontal row one after another

**Parameters**

- `props` (table) - Optional props: <dl><dt><code>children <small>component[]</small></code></dt><dd>array of child components</dd><dt><code>padding <small>string, number</small></code></dt><dd>empty space from the edges of the container to its children; either: <ul><li><code>editor.ui.PADDING.NONE</code></li><li><code>editor.ui.PADDING.SMALL</code></li><li><code>editor.ui.PADDING.MEDIUM</code></li><li><code>editor.ui.PADDING.LARGE</code></li><li>non-negative number, pixels</li></ul></dd><dt><code>spacing <small>string, number</small></code></dt><dd>empty space between child components, defaults to <code>editor.ui.SPACING.MEDIUM</code>; either: <ul><li><code>editor.ui.SPACING.NONE</code></li><li><code>editor.ui.SPACING.SMALL</code></li><li><code>editor.ui.SPACING.MEDIUM</code></li><li><code>editor.ui.SPACING.LARGE</code></li><li>non-negative number, pixels</li></ul></dd><dt><code>alignment <small>string</small></code></dt><dd>alignment of the component content within its assigned bounds, defaults to <code>editor.ui.ALIGNMENT.TOP_LEFT</code>; either: <ul><li><code>editor.ui.ALIGNMENT.TOP_LEFT</code></li><li><code>editor.ui.ALIGNMENT.TOP</code></li><li><code>editor.ui.ALIGNMENT.TOP_RIGHT</code></li><li><code>editor.ui.ALIGNMENT.LEFT</code></li><li><code>editor.ui.ALIGNMENT.CENTER</code></li><li><code>editor.ui.ALIGNMENT.RIGHT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_LEFT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_RIGHT</code></li></ul></dd><dt><code>grow <small>boolean</small></code></dt><dd>determines if the component should grow to fill available space in a <code>horizontal</code> or <code>vertical</code> layout container</dd><dt><code>row_span <small>integer</small></code></dt><dd>how many rows the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd><dt><code>column_span <small>integer</small></code></dt><dd>how many columns the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd></dl>

**Returns**

- `value` (component) - UI component

### editor.ui.icon
*Type:* FUNCTION
An icon from a predefined set

**Parameters**

- `props` (table) - Required props: <dl><dt><code>icon <small>string</small></code></dt><dd>predefined icon name; either: <ul><li><code>editor.ui.ICON.OPEN_RESOURCE</code></li><li><code>editor.ui.ICON.PLUS</code></li><li><code>editor.ui.ICON.MINUS</code></li><li><code>editor.ui.ICON.CLEAR</code></li></ul></dd></dl>  Optional props: <dl><dt><code>alignment <small>string</small></code></dt><dd>alignment of the component content within its assigned bounds, defaults to <code>editor.ui.ALIGNMENT.TOP_LEFT</code>; either: <ul><li><code>editor.ui.ALIGNMENT.TOP_LEFT</code></li><li><code>editor.ui.ALIGNMENT.TOP</code></li><li><code>editor.ui.ALIGNMENT.TOP_RIGHT</code></li><li><code>editor.ui.ALIGNMENT.LEFT</code></li><li><code>editor.ui.ALIGNMENT.CENTER</code></li><li><code>editor.ui.ALIGNMENT.RIGHT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_LEFT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_RIGHT</code></li></ul></dd><dt><code>grow <small>boolean</small></code></dt><dd>determines if the component should grow to fill available space in a <code>horizontal</code> or <code>vertical</code> layout container</dd><dt><code>row_span <small>integer</small></code></dt><dd>how many rows the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd><dt><code>column_span <small>integer</small></code></dt><dd>how many columns the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd></dl>

**Returns**

- `value` (component) - UI component

### editor.ui.ICON.CLEAR
*Type:* VARIABLE
"clear"

### editor.ui.ICON.MINUS
*Type:* VARIABLE
"minus"

### editor.ui.ICON.OPEN_RESOURCE
*Type:* VARIABLE
"open-resource"

### editor.ui.ICON.PLUS
*Type:* VARIABLE
"plus"

### editor.ui.integer_field
*Type:* FUNCTION
Integer input component based on a text field, reports changes on commit (Enter or focus loss)

**Parameters**

- `props` (table) - Optional props: <dl><dt><code>value <small>any</small></code></dt><dd>value</dd><dt><code>on_value_changed <small>function</small></code></dt><dd>value change callback, will receive the new value</dd><dt><code>issue <small>table</small></code></dt><dd>issue related to the input; table with the following keys (all required):<dl><dt><code>severity <small>string</small></code></dt><dd>either <code>editor.ui.ISSUE_SEVERITY.WARNING</code> or <code>editor.ui.ISSUE_SEVERITY.ERROR</code></dd><dt><code>message <small>string, message</small></code></dt><dd>issue message that will be shown in a tooltip; either a string or a localization message</dd></dl></dd><dt><code>tooltip <small>string, message</small></code></dt><dd>tooltip message shown on hover; either a string or a localization message</dd><dt><code>enabled <small>boolean</small></code></dt><dd>determines if the input component can be interacted with</dd><dt><code>alignment <small>string</small></code></dt><dd>alignment of the component content within its assigned bounds, defaults to <code>editor.ui.ALIGNMENT.TOP_LEFT</code>; either: <ul><li><code>editor.ui.ALIGNMENT.TOP_LEFT</code></li><li><code>editor.ui.ALIGNMENT.TOP</code></li><li><code>editor.ui.ALIGNMENT.TOP_RIGHT</code></li><li><code>editor.ui.ALIGNMENT.LEFT</code></li><li><code>editor.ui.ALIGNMENT.CENTER</code></li><li><code>editor.ui.ALIGNMENT.RIGHT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_LEFT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_RIGHT</code></li></ul></dd><dt><code>grow <small>boolean</small></code></dt><dd>determines if the component should grow to fill available space in a <code>horizontal</code> or <code>vertical</code> layout container</dd><dt><code>row_span <small>integer</small></code></dt><dd>how many rows the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd><dt><code>column_span <small>integer</small></code></dt><dd>how many columns the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd></dl>

**Returns**

- `value` (component) - UI component

### editor.ui.ISSUE_SEVERITY.ERROR
*Type:* VARIABLE
"error"

### editor.ui.ISSUE_SEVERITY.WARNING
*Type:* VARIABLE
"warning"

### editor.ui.label
*Type:* FUNCTION
Label intended for use with input components

**Parameters**

- `props` (table) - Optional props: <dl><dt><code>text <small>string, message</small></code></dt><dd>the text, either a string or a localization message</dd><dt><code>text_alignment <small>string</small></code></dt><dd>text alignment within paragraph bounds; either: <ul><li><code>editor.ui.TEXT_ALIGNMENT.LEFT</code></li><li><code>editor.ui.TEXT_ALIGNMENT.CENTER</code></li><li><code>editor.ui.TEXT_ALIGNMENT.RIGHT</code></li><li><code>editor.ui.TEXT_ALIGNMENT.JUSTIFY</code></li></ul></dd><dt><code>color <small>string</small></code></dt><dd>semantic color, defaults to <code>editor.ui.COLOR.TEXT</code>; either: <ul><li><code>editor.ui.COLOR.TEXT</code></li><li><code>editor.ui.COLOR.HINT</code></li><li><code>editor.ui.COLOR.OVERRIDE</code></li><li><code>editor.ui.COLOR.WARNING</code></li><li><code>editor.ui.COLOR.ERROR</code></li></ul></dd><dt><code>tooltip <small>string, message</small></code></dt><dd>tooltip message shown on hover; either a string or a localization message</dd><dt><code>alignment <small>string</small></code></dt><dd>alignment of the component content within its assigned bounds, defaults to <code>editor.ui.ALIGNMENT.TOP_LEFT</code>; either: <ul><li><code>editor.ui.ALIGNMENT.TOP_LEFT</code></li><li><code>editor.ui.ALIGNMENT.TOP</code></li><li><code>editor.ui.ALIGNMENT.TOP_RIGHT</code></li><li><code>editor.ui.ALIGNMENT.LEFT</code></li><li><code>editor.ui.ALIGNMENT.CENTER</code></li><li><code>editor.ui.ALIGNMENT.RIGHT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_LEFT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_RIGHT</code></li></ul></dd><dt><code>grow <small>boolean</small></code></dt><dd>determines if the component should grow to fill available space in a <code>horizontal</code> or <code>vertical</code> layout container</dd><dt><code>row_span <small>integer</small></code></dt><dd>how many rows the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd><dt><code>column_span <small>integer</small></code></dt><dd>how many columns the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd></dl>

**Returns**

- `value` (component) - UI component

### editor.ui.number_field
*Type:* FUNCTION
Number input component based on a text field, reports changes on commit (Enter or focus loss)

**Parameters**

- `props` (table) - Optional props: <dl><dt><code>value <small>any</small></code></dt><dd>value</dd><dt><code>on_value_changed <small>function</small></code></dt><dd>value change callback, will receive the new value</dd><dt><code>issue <small>table</small></code></dt><dd>issue related to the input; table with the following keys (all required):<dl><dt><code>severity <small>string</small></code></dt><dd>either <code>editor.ui.ISSUE_SEVERITY.WARNING</code> or <code>editor.ui.ISSUE_SEVERITY.ERROR</code></dd><dt><code>message <small>string, message</small></code></dt><dd>issue message that will be shown in a tooltip; either a string or a localization message</dd></dl></dd><dt><code>tooltip <small>string, message</small></code></dt><dd>tooltip message shown on hover; either a string or a localization message</dd><dt><code>enabled <small>boolean</small></code></dt><dd>determines if the input component can be interacted with</dd><dt><code>alignment <small>string</small></code></dt><dd>alignment of the component content within its assigned bounds, defaults to <code>editor.ui.ALIGNMENT.TOP_LEFT</code>; either: <ul><li><code>editor.ui.ALIGNMENT.TOP_LEFT</code></li><li><code>editor.ui.ALIGNMENT.TOP</code></li><li><code>editor.ui.ALIGNMENT.TOP_RIGHT</code></li><li><code>editor.ui.ALIGNMENT.LEFT</code></li><li><code>editor.ui.ALIGNMENT.CENTER</code></li><li><code>editor.ui.ALIGNMENT.RIGHT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_LEFT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_RIGHT</code></li></ul></dd><dt><code>grow <small>boolean</small></code></dt><dd>determines if the component should grow to fill available space in a <code>horizontal</code> or <code>vertical</code> layout container</dd><dt><code>row_span <small>integer</small></code></dt><dd>how many rows the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd><dt><code>column_span <small>integer</small></code></dt><dd>how many columns the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd></dl>

**Returns**

- `value` (component) - UI component

### editor.ui.open_resource
*Type:* FUNCTION
Open a resource, either in the editor or in a third-party app

**Parameters**

- `resource_path` (string) - Resource path (starting with <code>/</code>)

### editor.ui.ORIENTATION.HORIZONTAL
*Type:* VARIABLE
"horizontal"

### editor.ui.ORIENTATION.VERTICAL
*Type:* VARIABLE
"vertical"

### editor.ui.PADDING.LARGE
*Type:* VARIABLE
"large"

### editor.ui.PADDING.MEDIUM
*Type:* VARIABLE
"medium"

### editor.ui.PADDING.NONE
*Type:* VARIABLE
"none"

### editor.ui.PADDING.SMALL
*Type:* VARIABLE
"small"

### editor.ui.paragraph
*Type:* FUNCTION
A paragraph of text

**Parameters**

- `props` (table) - Optional props: <dl><dt><code>text <small>string, message</small></code></dt><dd>the text, either a string or a localization message</dd><dt><code>text_alignment <small>string</small></code></dt><dd>text alignment within paragraph bounds; either: <ul><li><code>editor.ui.TEXT_ALIGNMENT.LEFT</code></li><li><code>editor.ui.TEXT_ALIGNMENT.CENTER</code></li><li><code>editor.ui.TEXT_ALIGNMENT.RIGHT</code></li><li><code>editor.ui.TEXT_ALIGNMENT.JUSTIFY</code></li></ul></dd><dt><code>color <small>string</small></code></dt><dd>semantic color, defaults to <code>editor.ui.COLOR.TEXT</code>; either: <ul><li><code>editor.ui.COLOR.TEXT</code></li><li><code>editor.ui.COLOR.HINT</code></li><li><code>editor.ui.COLOR.OVERRIDE</code></li><li><code>editor.ui.COLOR.WARNING</code></li><li><code>editor.ui.COLOR.ERROR</code></li></ul></dd><dt><code>word_wrap <small>boolean</small></code></dt><dd>determines if the lines of text are word-wrapped when they don't fit in the assigned bounds, defaults to true</dd><dt><code>alignment <small>string</small></code></dt><dd>alignment of the component content within its assigned bounds, defaults to <code>editor.ui.ALIGNMENT.TOP_LEFT</code>; either: <ul><li><code>editor.ui.ALIGNMENT.TOP_LEFT</code></li><li><code>editor.ui.ALIGNMENT.TOP</code></li><li><code>editor.ui.ALIGNMENT.TOP_RIGHT</code></li><li><code>editor.ui.ALIGNMENT.LEFT</code></li><li><code>editor.ui.ALIGNMENT.CENTER</code></li><li><code>editor.ui.ALIGNMENT.RIGHT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_LEFT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_RIGHT</code></li></ul></dd><dt><code>grow <small>boolean</small></code></dt><dd>determines if the component should grow to fill available space in a <code>horizontal</code> or <code>vertical</code> layout container</dd><dt><code>row_span <small>integer</small></code></dt><dd>how many rows the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd><dt><code>column_span <small>integer</small></code></dt><dd>how many columns the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd></dl>

**Returns**

- `value` (component) - UI component

### editor.ui.resource_field
*Type:* FUNCTION
Input component for selecting project resources

**Parameters**

- `props` (table) - Optional props: <dl><dt><code>value <small>string</small></code></dt><dd>resource path (must start with <code>/</code>)</dd><dt><code>on_value_changed <small>function</small></code></dt><dd>value change callback, will receive either resource path of a selected resource or nil when the field is cleared; even though the resource selector dialog allows filtering on resource extensions, it's possible to receive resources with other extensions and non-existent resources using text field input</dd><dt><code>title <small>string, message</small></code></dt><dd>dialog title, either a string or a localization message, defaults to <code>localization.message("dialog.select-resource.title")</code></dd><dt><code>extensions <small>string[]</small></code></dt><dd>if specified, restricts selectable resources in the dialog to specified file extensions; e.g. <code>{"collection", "go"}</code></dd><dt><code>issue <small>table</small></code></dt><dd>issue related to the input; table with the following keys (all required):<dl><dt><code>severity <small>string</small></code></dt><dd>either <code>editor.ui.ISSUE_SEVERITY.WARNING</code> or <code>editor.ui.ISSUE_SEVERITY.ERROR</code></dd><dt><code>message <small>string, message</small></code></dt><dd>issue message that will be shown in a tooltip; either a string or a localization message</dd></dl></dd><dt><code>tooltip <small>string, message</small></code></dt><dd>tooltip message shown on hover; either a string or a localization message</dd><dt><code>enabled <small>boolean</small></code></dt><dd>determines if the input component can be interacted with</dd><dt><code>alignment <small>string</small></code></dt><dd>alignment of the component content within its assigned bounds, defaults to <code>editor.ui.ALIGNMENT.TOP_LEFT</code>; either: <ul><li><code>editor.ui.ALIGNMENT.TOP_LEFT</code></li><li><code>editor.ui.ALIGNMENT.TOP</code></li><li><code>editor.ui.ALIGNMENT.TOP_RIGHT</code></li><li><code>editor.ui.ALIGNMENT.LEFT</code></li><li><code>editor.ui.ALIGNMENT.CENTER</code></li><li><code>editor.ui.ALIGNMENT.RIGHT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_LEFT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_RIGHT</code></li></ul></dd><dt><code>grow <small>boolean</small></code></dt><dd>determines if the component should grow to fill available space in a <code>horizontal</code> or <code>vertical</code> layout container</dd><dt><code>row_span <small>integer</small></code></dt><dd>how many rows the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd><dt><code>column_span <small>integer</small></code></dt><dd>how many columns the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd></dl>

**Returns**

- `value` (component) - UI component

### editor.ui.scroll
*Type:* FUNCTION
Layout container that optionally shows scroll bars if child contents overflow the assigned bounds

**Parameters**

- `props` (table) - Required props: <dl><dt><code>content <small>component</small></code></dt><dd>content component</dd></dl>  Optional props: <dl><dt><code>grow <small>boolean</small></code></dt><dd>determines if the component should grow to fill available space in a <code>horizontal</code> or <code>vertical</code> layout container</dd><dt><code>row_span <small>integer</small></code></dt><dd>how many rows the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd><dt><code>column_span <small>integer</small></code></dt><dd>how many columns the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd></dl>

**Returns**

- `value` (component) - UI component

### editor.ui.select_box
*Type:* FUNCTION
Dropdown select box with an array of options

**Parameters**

- `props` (table) - Optional props: <dl><dt><code>value <small>any</small></code></dt><dd>selected value</dd><dt><code>on_value_changed <small>function</small></code></dt><dd>change callback, will receive the selected value</dd><dt><code>options <small>any[]</small></code></dt><dd>array of selectable options</dd><dt><code>to_string <small>function</small></code></dt><dd>function that converts an item to a string (or a localization message); defaults to <code>tostring</code></dd><dt><code>issue <small>table</small></code></dt><dd>issue related to the input; table with the following keys (all required):<dl><dt><code>severity <small>string</small></code></dt><dd>either <code>editor.ui.ISSUE_SEVERITY.WARNING</code> or <code>editor.ui.ISSUE_SEVERITY.ERROR</code></dd><dt><code>message <small>string, message</small></code></dt><dd>issue message that will be shown in a tooltip; either a string or a localization message</dd></dl></dd><dt><code>tooltip <small>string, message</small></code></dt><dd>tooltip message shown on hover; either a string or a localization message</dd><dt><code>enabled <small>boolean</small></code></dt><dd>determines if the input component can be interacted with</dd><dt><code>alignment <small>string</small></code></dt><dd>alignment of the component content within its assigned bounds, defaults to <code>editor.ui.ALIGNMENT.TOP_LEFT</code>; either: <ul><li><code>editor.ui.ALIGNMENT.TOP_LEFT</code></li><li><code>editor.ui.ALIGNMENT.TOP</code></li><li><code>editor.ui.ALIGNMENT.TOP_RIGHT</code></li><li><code>editor.ui.ALIGNMENT.LEFT</code></li><li><code>editor.ui.ALIGNMENT.CENTER</code></li><li><code>editor.ui.ALIGNMENT.RIGHT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_LEFT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_RIGHT</code></li></ul></dd><dt><code>grow <small>boolean</small></code></dt><dd>determines if the component should grow to fill available space in a <code>horizontal</code> or <code>vertical</code> layout container</dd><dt><code>row_span <small>integer</small></code></dt><dd>how many rows the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd><dt><code>column_span <small>integer</small></code></dt><dd>how many columns the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd></dl>

**Returns**

- `value` (component) - UI component

### editor.ui.separator
*Type:* FUNCTION
Thin line for visual content separation, by default horizontal and aligned to center

**Parameters**

- `props` (table) - Optional props: <dl><dt><code>orientation <small>string</small></code></dt><dd>separator line orientation, <code>editor.ui.ORIENTATION.VERTICAL</code> or <code>editor.ui.ORIENTATION.HORIZONTAL</code>; either: <ul><li><code>editor.ui.ORIENTATION.VERTICAL</code></li><li><code>editor.ui.ORIENTATION.HORIZONTAL</code></li></ul></dd><dt><code>alignment <small>string</small></code></dt><dd>alignment of the component content within its assigned bounds, defaults to <code>editor.ui.ALIGNMENT.TOP_LEFT</code>; either: <ul><li><code>editor.ui.ALIGNMENT.TOP_LEFT</code></li><li><code>editor.ui.ALIGNMENT.TOP</code></li><li><code>editor.ui.ALIGNMENT.TOP_RIGHT</code></li><li><code>editor.ui.ALIGNMENT.LEFT</code></li><li><code>editor.ui.ALIGNMENT.CENTER</code></li><li><code>editor.ui.ALIGNMENT.RIGHT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_LEFT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_RIGHT</code></li></ul></dd><dt><code>grow <small>boolean</small></code></dt><dd>determines if the component should grow to fill available space in a <code>horizontal</code> or <code>vertical</code> layout container</dd><dt><code>row_span <small>integer</small></code></dt><dd>how many rows the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd><dt><code>column_span <small>integer</small></code></dt><dd>how many columns the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd></dl>

**Returns**

- `value` (component) - UI component

### editor.ui.show_dialog
*Type:* FUNCTION
Show a modal dialog and await a result

**Parameters**

- `dialog` (component) - a component that resolves to <code>editor.ui.dialog(...)</code>

**Returns**

- `value` (any) - dialog result, the value used as a <code>result</code> prop in a <code>editor.ui.dialog_button({...})</code> selected by the user, or <code>nil</code> if the dialog was closed and there was no <code>cancel = true</code> dialog button with <code>result</code> prop set

### editor.ui.show_external_directory_dialog
*Type:* FUNCTION
Show a modal OS directory selection dialog and await a result

**Parameters**

- `opts` (table) (optional) - <dl><dt><code>path <small>string</small></code></dt><dd>initial file or directory path used by the dialog; resolved against project root if relative</dd><dt><code>title <small>string, message</small></code></dt><dd>OS window title, either a string or a localization message</dd></dl>

**Returns**

- `value` (string | nil) - either absolute directory path or nil if user canceled directory selection

### editor.ui.show_external_file_dialog
*Type:* FUNCTION
Show a modal OS file selection dialog and await a result

**Parameters**

- `opts` (table) (optional) - <dl><dt><code>path <small>string</small></code></dt><dd>initial file or directory path used by the dialog; resolved against project root if relative</dd><dt><code>title <small>string, message</small></code></dt><dd>OS window title, either a string or a localization message</dd><dt><code>filters <small>table[]</small></code></dt><dd>File filters, an array of filter tables, where each filter has following keys:<dl><dt><code>description <small>string, message</small></code></dt><dd>text explaining the filter, either a literal string like <code>"Text files (*.txt)"</code> or a localization message</dd><dt><code>extensions <small>string[]</small></code></dt><dd>array of file extension patterns, e.g. <code>"*.txt"</code>, <code>"*.*"</code> or <code>"game.project"</code></dd></dl></dd></dl>

**Returns**

- `value` (string | nil) - either absolute file path or nil if user canceled file selection

### editor.ui.show_resource_dialog
*Type:* FUNCTION
Show a modal resource selection dialog and await a result

**Parameters**

- `opts` (table) (optional) - <dl><dt><code>extensions <small>string[]</small></code></dt><dd>if specified, restricts selectable resources in the dialog to specified file extensions; e.g. <code>{"collection", "go"}</code></dd><dt><code>selection <small>string</small></code></dt><dd>either <code>"single"</code> or <code>"multiple"</code>, defaults to <code>"single"</code></dd><dt><code>title <small>string, message</small></code></dt><dd>dialog title, either a string or a localization message, defaults to <code>localization.message("dialog.select-resource.title")</code></dd></dl>

**Returns**

- `value` (string | string[) - |nil] if user made no selection, returns <code>nil</code>. Otherwise, if selection mode is <code>"single"</code>, returns selected resource path; otherwise returns a non-empty array of selected resource paths.

### editor.ui.SPACING.LARGE
*Type:* VARIABLE
"large"

### editor.ui.SPACING.MEDIUM
*Type:* VARIABLE
"medium"

### editor.ui.SPACING.NONE
*Type:* VARIABLE
"none"

### editor.ui.SPACING.SMALL
*Type:* VARIABLE
"small"

### editor.ui.string_field
*Type:* FUNCTION
String input component based on a text field, reports changes on commit (Enter or focus loss)

**Parameters**

- `props` (table) - Optional props: <dl><dt><code>value <small>any</small></code></dt><dd>value</dd><dt><code>on_value_changed <small>function</small></code></dt><dd>value change callback, will receive the new value</dd><dt><code>issue <small>table</small></code></dt><dd>issue related to the input; table with the following keys (all required):<dl><dt><code>severity <small>string</small></code></dt><dd>either <code>editor.ui.ISSUE_SEVERITY.WARNING</code> or <code>editor.ui.ISSUE_SEVERITY.ERROR</code></dd><dt><code>message <small>string, message</small></code></dt><dd>issue message that will be shown in a tooltip; either a string or a localization message</dd></dl></dd><dt><code>tooltip <small>string, message</small></code></dt><dd>tooltip message shown on hover; either a string or a localization message</dd><dt><code>enabled <small>boolean</small></code></dt><dd>determines if the input component can be interacted with</dd><dt><code>alignment <small>string</small></code></dt><dd>alignment of the component content within its assigned bounds, defaults to <code>editor.ui.ALIGNMENT.TOP_LEFT</code>; either: <ul><li><code>editor.ui.ALIGNMENT.TOP_LEFT</code></li><li><code>editor.ui.ALIGNMENT.TOP</code></li><li><code>editor.ui.ALIGNMENT.TOP_RIGHT</code></li><li><code>editor.ui.ALIGNMENT.LEFT</code></li><li><code>editor.ui.ALIGNMENT.CENTER</code></li><li><code>editor.ui.ALIGNMENT.RIGHT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_LEFT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_RIGHT</code></li></ul></dd><dt><code>grow <small>boolean</small></code></dt><dd>determines if the component should grow to fill available space in a <code>horizontal</code> or <code>vertical</code> layout container</dd><dt><code>row_span <small>integer</small></code></dt><dd>how many rows the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd><dt><code>column_span <small>integer</small></code></dt><dd>how many columns the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd></dl>

**Returns**

- `value` (component) - UI component

### editor.ui.TEXT_ALIGNMENT.CENTER
*Type:* VARIABLE
"center"

### editor.ui.TEXT_ALIGNMENT.JUSTIFY
*Type:* VARIABLE
"justify"

### editor.ui.TEXT_ALIGNMENT.LEFT
*Type:* VARIABLE
"left"

### editor.ui.TEXT_ALIGNMENT.RIGHT
*Type:* VARIABLE
"right"

### editor.ui.use_memo
*Type:* FUNCTION
A hook that caches the result of a computation between re-renders.
See editor.ui.component for hooks caveats and rules. If any of the arguments to use_memo change during a component refresh (checked with ==), the value will be recomputed.

**Parameters**

- `compute` (function) - function that will be used to compute the cached value
- `...` (...any) (optional) - args to the computation function

**Returns**

- `values` (...any) - all returned values of the compute function

**Examples**

```
local function increment(n)
    return n + 1
end

local function make_listener(set_count)
    return function()
        set_count(increment)
    end
end

local counter_button = editor.ui.component(function(props)
    local count, set_count = editor.ui.use_state(props.count)
    local on_pressed = editor.ui.use_memo(make_listener, set_count)
    return editor.ui.text_button {
        text = tostring(count),
        on_pressed = on_pressed
    }
end)
```

### editor.ui.use_state
*Type:* FUNCTION
A hook that adds local state to the component.
See editor.ui.component for hooks caveats and rules. If any of the arguments to use_state change during a component refresh (checked with ==), the current state will be reset to the initial one.

**Parameters**

- `init` (any | function) - local state initializer, either initial data structure or function that produces the data structure
- `...` (...any) (optional) - used when <code>init</code> is a function, the args are passed to the initializer function

**Returns**

- `state` (any) - current local state, starts with initial state, then may be changed using the returned <code>set_state</code> function
- `set_state` (function) - function that changes the local state and causes the component to refresh. The function may be used in 2 ways:                         <ul>                           <li>to set the state to some other data structure: pass the data structure as a value</li>                           <li>to replace the state using updater function: pass a function to <code>set_state</code>  it will be invoked with the current state, as well as with the rest of the arguments passed to <code>set_state</code> after the updater function. The state will be set to the value returned from the updater function</lia>                         </ul>

**Examples**

```
local function increment(n)
  return n + 1
end

local counter_button = editor.ui.component(function(props)
  local count, set_count = editor.ui.use_state(props.count)
  return editor.ui.text_button {
    text = tostring(count),
    on_pressed = function()
      set_count(increment)
    end
  }
end)
```

### editor.ui.vertical
*Type:* FUNCTION
Layout container that places its children in a vertical column one after another

**Parameters**

- `props` (table) - Optional props: <dl><dt><code>children <small>component[]</small></code></dt><dd>array of child components</dd><dt><code>padding <small>string, number</small></code></dt><dd>empty space from the edges of the container to its children; either: <ul><li><code>editor.ui.PADDING.NONE</code></li><li><code>editor.ui.PADDING.SMALL</code></li><li><code>editor.ui.PADDING.MEDIUM</code></li><li><code>editor.ui.PADDING.LARGE</code></li><li>non-negative number, pixels</li></ul></dd><dt><code>spacing <small>string, number</small></code></dt><dd>empty space between child components, defaults to <code>editor.ui.SPACING.MEDIUM</code>; either: <ul><li><code>editor.ui.SPACING.NONE</code></li><li><code>editor.ui.SPACING.SMALL</code></li><li><code>editor.ui.SPACING.MEDIUM</code></li><li><code>editor.ui.SPACING.LARGE</code></li><li>non-negative number, pixels</li></ul></dd><dt><code>alignment <small>string</small></code></dt><dd>alignment of the component content within its assigned bounds, defaults to <code>editor.ui.ALIGNMENT.TOP_LEFT</code>; either: <ul><li><code>editor.ui.ALIGNMENT.TOP_LEFT</code></li><li><code>editor.ui.ALIGNMENT.TOP</code></li><li><code>editor.ui.ALIGNMENT.TOP_RIGHT</code></li><li><code>editor.ui.ALIGNMENT.LEFT</code></li><li><code>editor.ui.ALIGNMENT.CENTER</code></li><li><code>editor.ui.ALIGNMENT.RIGHT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_LEFT</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM</code></li><li><code>editor.ui.ALIGNMENT.BOTTOM_RIGHT</code></li></ul></dd><dt><code>grow <small>boolean</small></code></dt><dd>determines if the component should grow to fill available space in a <code>horizontal</code> or <code>vertical</code> layout container</dd><dt><code>row_span <small>integer</small></code></dt><dd>how many rows the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd><dt><code>column_span <small>integer</small></code></dt><dd>how many columns the component spans inside a grid container, must be positive. This prop is only useful for components inside a <code>grid</code> container.</dd></dl>

**Returns**

- `value` (component) - UI component

### editor.version
*Type:* VARIABLE
A string, version name of Defold

### http.request
*Type:* FUNCTION
Perform an HTTP request

**Parameters**

- `url` (string) - request URL
- `opts` (table) (optional) - Additional request options, a table with the following keys:<dl><dt><code>method <small>string</small></code></dt><dd>request method, defaults to <code>"GET"</code></dd><dt><code>headers <small>table</small></code></dt><dd>request headers, a table with string keys and values</dd><dt><code>body <small>string</small></code></dt><dd>request body</dd><dt><code>as <small>string</small></code></dt><dd>response body converter, either <code>"string"</code> or <code>"json"</code></dd></dl>

**Returns**

- `response` (table) - HTTP response, a table with the following keys:<dl><dt><code>status <small>integer</small></code></dt><dd>response code</dd><dt><code>headers <small>table</small></code></dt><dd>response headers, a table where each key is a lower-cased string, and each value is either a string or an array of strings if the header was repeated</dd><dt><code>body <small>string, any, nil</small></code></dt><dd>response body, present only when <code>as</code> option was provided, either a string or a parsed json value</dd></dl>

### http.server.external_file_response
*Type:* FUNCTION
Create HTTP response that will stream the content of a file defined by the path

**Parameters**

- `path` (string) - External file path, resolved against project root if relative
- `status` (integer) (optional) - HTTP status code, an integer, default 200
- `headers` (table&lt;string,string&gt;) (optional) - HTTP response headers, a table from lower-case header names to header values

**Returns**

- `response` (response) - HTTP response value, userdata

### http.server.json_response
*Type:* FUNCTION
Create HTTP response with a JSON value

**Parameters**

- `value` (any) - Any Lua value that may be represented as JSON
- `status` (integer) (optional) - HTTP status code, an integer, default 200
- `headers` (table&lt;string,string&gt;) (optional) - HTTP response headers, a table from lower-case header names to header values

**Returns**

- `response` (response) - HTTP response value, userdata

### http.server.local_url
*Type:* VARIABLE
Editor's HTTP server local url

### http.server.port
*Type:* VARIABLE
Editor's HTTP server port

### http.server.resource_response
*Type:* FUNCTION
Create HTTP response that will stream the content of a resource defined by the resource path

**Parameters**

- `resource_path` (string) - Resource path (starting with <code>/</code>)
- `status` (integer) (optional) - HTTP status code, an integer, default 200
- `headers` (table&lt;string,string&gt;) (optional) - HTTP response headers, a table from lower-case header names to header values

**Returns**

- `response` (response) - HTTP response value, userdata

### http.server.response
*Type:* FUNCTION
Create HTTP response

**Parameters**

- `status` (integer) (optional) - HTTP status code, an integer, default 200
- `headers` (table&lt;string,string&gt;) (optional) - HTTP response headers, a table from lower-case header names to header values
- `body` (string) (optional) - HTTP response body

**Returns**

- `response` (response) - HTTP response value, userdata

### http.server.route
*Type:* FUNCTION
Create route definition for the editor's HTTP server

**Parameters**

- `path` (string) - HTTP URI path, starts with <code>/</code>; may include path patterns (<code>{name}</code> for a single segment and <code>{*name}</code> for the rest of the request path) that will be extracted from the path and provided to the handler as a part of the request
- `method` (string) (optional) - HTTP request method, default <code>"GET"</code>
- `as` (string) (optional) - Request body converter, either <code>"string"</code> or <code>"json"</code>; the body will be discarded if not specified
- `handler` (function) - Request handler function, will receive request argument, a table with the following keys:<dl><dt><code>path <small>string</small></code></dt><dd>full matched path, a string starting with <code>/</code></dd><dt><code>method <small>string</small></code></dt><dd>HTTP request method, e.g. <code>"POST"</code></dd><dt><code>headers <small>table&lt;string,(string|string[])&gt;</small></code></dt><dd>HTTP request headers, a table from lower-case header names to header values</dd><dt><code>query <small>string</small></code></dt><dd>optional query string</dd><dt><code>body <small>string, any</small></code></dt><dd>optional request body, depends on the <code>as</code> argument</dd></dl> Handler function should return either a single response value, or 0 or more arguments to the <code>http.server.response()</code> function

**Returns**

- `route` (route) - HTTP server route

**Examples**

Receive JSON and respond with JSON:
```
http.server.route(
  "/json", "POST", "json",
  function(request)
    pprint(request.body)
    return 200
  end
)

```

Extract parts of the path:
```
http.server.route(
  "/users/{user}/orders",
  function(request)
    print(request.user)
  end
)

```

Simple file server:
```
http.server.route(
  "/files/{*file}",
  function(request)
    local attrs = editor.external_file_attributes(request.file)
    if attrs.is_file then
      return http.server.external_file_response(request.file)
    elseif attrs.is_directory then
      return 400
    else
      return 404
    end
  end
)

```

### http.server.url
*Type:* VARIABLE
Editor's HTTP server url

### json.decode
*Type:* FUNCTION
Decode JSON string to Lua value

**Parameters**

- `json` (string) - json data
- `options` (table) (optional) - A table with the following keys:<dl><dt><code>all <small>boolean</small></code></dt><dd>if <code>true</code>, decodes all json values in a string and returns an array</dd></dl>

### json.encode
*Type:* FUNCTION
Encode Lua value to JSON string

**Parameters**

- `value` (any) - any Lua value that may be represented as JSON

### localization.and_list
*Type:* FUNCTION
Create a message pattern that renders a list with the "and" conjunction (for example: a, b, and c) once it is stringified

**Parameters**

- `items` (any[) - ] array of values; each value may be <code>nil</code>, <code>boolean</code>, <code>number</code>, <code>string</code>, or another <code>message</code> instance

**Returns**

- `message` (message) - a userdata value that, when stringified with <code>tostring()</code>, will produce a localized text according to the currently selected language in the editor

### localization.concat
*Type:* FUNCTION
Create a message pattern that concatenates values (similar to table.concat) and performs the actual concatenation when stringified

**Parameters**

- `items` (any[) - ] array of values; each value may be <code>nil</code>, <code>boolean</code>, <code>number</code>, <code>string</code>, or another <code>message</code> instance
- `separator` (nil | boolean | number | string | message) (optional) - optional separator inserted between values; defaults to an empty string

**Returns**

- `message` (message) - a userdata value that, when stringified with <code>tostring()</code>, will produce a localized text according to the currently selected language in the editor

### localization.message
*Type:* FUNCTION
Create a message pattern for a localization key defined in an .editor_localization file; the actual localization happens when the returned value is stringified

**Parameters**

- `key` (string) - localization key defined in an <code>.editor_localization</code> file
- `vars` (table) (optional) - optional table with variables to be substituted in the localized string that uses <a href="https://unicode-org.github.io/icu/userguide/format_parse/messages/">ICU Message Format</a> syntax; keys must be strings; values must be either <code>nil</code>, <code>boolean</code>, <code>number</code>, <code>string</code>, or another <code>message</code> instance

**Returns**

- `message` (message) - a userdata value that, when stringified with <code>tostring()</code>, will produce a localized text according to the currently selected language in the editor

### localization.or_list
*Type:* FUNCTION
Create a message pattern that renders a list with the "or" conjunction (for example: a, b, or c) once it is stringified

**Parameters**

- `items` (any[) - ] array of values; each value may be <code>nil</code>, <code>boolean</code>, <code>number</code>, <code>string</code>, or another <code>message</code> instance

**Returns**

- `message` (message) - a userdata value that, when stringified with <code>tostring()</code>, will produce a localized text according to the currently selected language in the editor

### pprint
*Type:* FUNCTION
Pretty-print a Lua value

**Parameters**

- `value` (any) - any Lua value to pretty-print

### tilemap.tiles.clear
*Type:* FUNCTION
Remove all tiles

**Parameters**

- `tiles` (tiles) - unbounded 2d grid of tiles

**Returns**

- `tiles` (tiles) - unbounded 2d grid of tiles

### tilemap.tiles.get_info
*Type:* FUNCTION
Get full information from a tile at a particular coordinate

**Parameters**

- `tiles` (tiles) - unbounded 2d grid of tiles
- `x` (integer) - x coordinate of a tile
- `y` (integer) - y coordinate of a tile

**Returns**

- `info` (table) - full tile information table with the following keys:<dl><dt><code>index <small>integer</small></code></dt><dd>1-indexed tile index of a tilemap's tilesource</dd><dt><code>h_flip <small>boolean</small></code></dt><dd>horizontal flip</dd><dt><code>v_flip <small>boolean</small></code></dt><dd>vertical flip</dd><dt><code>rotate_90 <small>boolean</small></code></dt><dd>whether the tile is rotated 90 degrees clockwise</dd></dl>

### tilemap.tiles.get_tile
*Type:* FUNCTION
Get a tile index at a particular coordinate

**Parameters**

- `tiles` (tiles) - unbounded 2d grid of tiles
- `x` (integer) - x coordinate of a tile
- `y` (integer) - y coordinate of a tile

**Returns**

- `tile_index` (integer) - 1-indexed tile index of a tilemap's tilesource

### tilemap.tiles.iterator
*Type:* FUNCTION
Create an iterator over all tiles in a tiles data structure
When iterating using for loop, each iteration returns x, y and tile index of a tile in a tile map

**Parameters**

- `tiles` (tiles) - unbounded 2d grid of tiles

**Returns**

- `iter` (function) - iterator

**Examples**

Iterate over all tiles in a tile map:
```
local layers = editor.get("/level.tilemap", "layers")
for i = 1, #layers do
  local tiles = editor.get(layers[i], "tiles")
  for x, y, i in tilemap.tiles.iterator(tiles) do
    print(x, y, i)
  end
end

```

### tilemap.tiles.new
*Type:* FUNCTION
Create a new unbounded 2d grid data structure for storing tilemap layer tiles

**Returns**

- `tiles` (tiles) - unbounded 2d grid of tiles

### tilemap.tiles.remove
*Type:* FUNCTION
Remove a tile at a particular coordinate

**Parameters**

- `tiles` (tiles) - unbounded 2d grid of tiles
- `x` (integer) - x coordinate of a tile
- `y` (integer) - y coordinate of a tile

**Returns**

- `tiles` (tiles) - unbounded 2d grid of tiles

### tilemap.tiles.set
*Type:* FUNCTION
Set a tile at a particular coordinate

**Parameters**

- `tiles` (tiles) - unbounded 2d grid of tiles
- `x` (integer) - x coordinate of a tile
- `y` (integer) - y coordinate of a tile
- `tile_or_info` (integer | table) - Either 1-indexed tile index of a tilemap's tilesource or full tile information table with the following keys:<dl><dt><code>index <small>integer</small></code></dt><dd>1-indexed tile index of a tilemap's tilesource</dd><dt><code>h_flip <small>boolean</small></code></dt><dd>horizontal flip</dd><dt><code>v_flip <small>boolean</small></code></dt><dd>vertical flip</dd><dt><code>rotate_90 <small>boolean</small></code></dt><dd>whether the tile is rotated 90 degrees clockwise</dd></dl>

**Returns**

- `tiles` (tiles) - unbounded 2d grid of tiles

### zip.METHOD.DEFLATED
*Type:* VARIABLE
"deflated" compression method

### zip.METHOD.STORED
*Type:* VARIABLE
"stored" compression method, i.e. no compression

### zip.ON_CONFLICT.ERROR
*Type:* VARIABLE
"error", any conflict aborts extraction

### zip.ON_CONFLICT.OVERWRITE
*Type:* VARIABLE
"skip", existing file is overwritten

### zip.ON_CONFLICT.SKIP
*Type:* VARIABLE
"skip", existing file is preserved

### zip.pack
*Type:* FUNCTION
Create a ZIP archive

**Parameters**

- `output_path` (string) - output zip file path, resolved against project root if relative
- `opts` (table) (optional) - compression options, a table with the following keys:<dl><dt><code>method <small>string</small></code></dt><dd>compression method, either <code>zip.METHOD.DEFLATED</code> (default) or <code>zip.METHOD.STORED</code></dd><dt><code>level <small>integer</small></code></dt><dd>compression level, an integer between 0 and 9, only useful when the compression method is <code>zip.METHOD.DEFLATED</code>; defaults to 6</dd></dl>
- `entries` (string | table) - entries to compress, either a string (relative path to file or folder to include) or a table with the following keys:<dl><dt><code>1 <small>string</small></code></dt><dd>required; source file or folder path to include, resolved against project root if relative</dd><dt><code>2 <small>string</small></code></dt><dd>optional; target file or folder path in the zip archive. May be omitted if source is a relative path that does not go above the project directory.</dd><dt><code>method <small>string</small></code></dt><dd>compression method, either <code>zip.METHOD.DEFLATED</code> (default) or <code>zip.METHOD.STORED</code></dd><dt><code>level <small>integer</small></code></dt><dd>compression level, an integer between 0 and 9, only useful when the compression method is <code>zip.METHOD.DEFLATED</code>; defaults to 6</dd></dl>

**Examples**

Archive a file and a folder:
```
zip.pack("build.zip", {"build", "game.project"})

```

Change the location of the files within the archive:
```
zip.pack("build.zip", {
  {"build/wasm-web", "."},
  {"configs/prod.json", "config.json"}
})

```

Create archive without compression (much faster to create the archive, bigger archive file size, allows mmap access):
```
zip.pack("build.zip", {method = zip.METHOD.STORED}, {
  "build",
  "resources"
})

```

Don't compress one of the folders:
```
zip.pack("build.zip", {
  {"assets", method = zip.METHOD.STORED},
  "build/wasm-web"
})

```

Include files from outside the project:
```
zip.pack("build.zip", {
  "build",
  {"../secrets/auth-key.txt", "auth-key.txt"}
})

```

### zip.unpack
*Type:* FUNCTION
Extract a ZIP archive

**Parameters**

- `archive_path` (string) - zip file path, resolved against project root if relative
- `target_path` (string) (optional) - target path for extraction, defaults to parent of <code>archive_path</code> if omitted
- `opts` (table) (optional) - extraction options, a table with the following keys:<dl><dt><code>on_conflict <small>string</small></code></dt><dd>conflict resolution strategy, defaults to <code>zip.ON_CONFLICT.ERROR</code></dd></dl>
- `paths` (table) (optional) - entries to extract, relative string paths

**Examples**

Extract everything to a build dir:
```
zip.unpack("build/dev/resources.zip")

```

Extract to a different directory:
```
zip.unpack(
  "build/dev/resources.zip",
  "build/dev/tmp",
)

```

Extract while overwriting existing files on conflict:
```
zip.unpack(
  "build/dev/resources.zip",
  {on_conflict = zip.ON_CONFLICT.OVERWRITE}
)

```

Extract a single file:
```
zip.unpack(
  "build/dev/resources.zip",
  {"config.json"}
)

```

### zlib.deflate
*Type:* FUNCTION
Deflate (compress) a buffer

**Parameters**

- `buf` (string) - buffer to deflate

**Returns**

- `buf` (string) - deflated buffer

### zlib.inflate
*Type:* FUNCTION
Inflate (decompress) a buffer

**Parameters**

- `buf` (string) - buffer to inflate

**Returns**

- `buf` (string) - inflated buffer

<!-- factory-lua -->

# Factory {#apis:factory-lua}

**Namespace:** `factory`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_factory.cpp`
**Source:** `engine/gamesys/src/gamesys/scripts/script_factory.cpp`

Functions for controlling factory components which are used to
dynamically spawn game objects into the runtime.

## API

### factory.create
*Type:* FUNCTION
The URL identifies which factory should create the game object.
If the game object is created inside of the frame (e.g. from an update callback), the game object will be created instantly, but none of its component will be updated in the same frame.
Properties defined in scripts in the created game object can be overridden through the properties-parameter below.
See go.property for more information on script properties.
 Calling factory.create on a factory that is marked as dynamic without having loaded resources
using factory.load will synchronously load and create resources which may affect application performance.

**Parameters**

- `url` (string | hash | url) - the factory that should create a game object.
- `position` (vector3) (optional) - the position of the new game object, the position of the game object calling <code>factory.create()</code> is used by default, or if the value is <code>nil</code>.
- `rotation` (quaternion) (optional) - the rotation of the new game object, the rotation of the game object calling <code>factory.create()</code> is used by default, or if the value is <code>nil</code>.
- `properties` (table) (optional) - the properties defined in a script attached to the new game object.
- `scale` (number | vector3) (optional) - the scale of the new game object (must be greater than 0), the scale of the game object containing the factory is used by default, or if the value is <code>nil</code>

**Returns**

- `id` (hash) - the global id of the spawned game object

**Examples**

How to create a new game object:
```
function init(self)
    -- create a new game object and provide property values
    self.my_created_object = factory.create("#factory", nil, nil, {my_value = 1})
    -- communicate with the object
    msg.post(self.my_created_object, "hello")
end

```

And then let the new game object have a script attached:
```
go.property("my_value", 0)

function init(self)
    -- do something with self.my_value which is now one
end

```

### factory.get_status
*Type:* FUNCTION
This returns status of the factory.
Calling this function when the factory is not marked as dynamic loading always returns
factory.STATUS_LOADED.

**Parameters**

- `url` (string | hash | url) (optional) - the factory component to get status from

**Returns**

- `status` (constant) - status of the factory component
<ul>
<li><code>factory.STATUS_UNLOADED</code></li>
<li><code>factory.STATUS_LOADING</code></li>
<li><code>factory.STATUS_LOADED</code></li>
</ul>

### factory.load
*Type:* FUNCTION
Resources are referenced by the factory component until the existing (parent) collection is destroyed or factory.unload is called.
Calling this function when the factory is not marked as dynamic loading does nothing.

**Parameters**

- `url` (string | hash | url) (optional) - the factory component to load
- `complete_function` (function(self, url, result)) (optional) - function to call when resources are loaded.
<dl>
<dt><code>self</code></dt>
<dd><span class="type">object</span> The current object.</dd>
<dt><code>url</code></dt>
<dd><span class="type">url</span> url of the factory component</dd>
<dt><code>result</code></dt>
<dd><span class="type">boolean</span> True if resources were loaded successfully</dd>
</dl>

**Examples**

How to load resources of a factory prototype.
```
factory.load("#factory", function(self, url, result) end)

```

### factory.set_prototype
*Type:* FUNCTION
Changes the prototype for the factory.

**Notes**

- - Requires the factory to have the "Dynamic Prototype" set
  - Cannot be set when the state is COMP_FACTORY_STATUS_LOADING
  - Setting the prototype to `nil` will revert back to the original prototype.

**Parameters**

- `url` (string | hash | url) (optional) - the factory component
- `prototype` (string | nil) (optional) - the path to the new prototype, or <code>nil</code>

**Examples**

How to unload the previous prototypes resources, and then spawn a new game object
```
factory.unload("#factory") -- unload the previous resources
factory.set_prototype("#factory", "/main/levels/enemyA.goc")
local id = factory.create("#factory", go.get_world_position(), vmath.quat())

```

### factory.STATUS_LOADED
*Type:* CONSTANT
loaded

### factory.STATUS_LOADING
*Type:* CONSTANT
loading

### factory.STATUS_UNLOADED
*Type:* CONSTANT
unloaded

### factory.unload
*Type:* FUNCTION
This decreases the reference count for each resource loaded with factory.load. If reference is zero, the resource is destroyed.
Calling this function when the factory is not marked as dynamic loading does nothing.

**Parameters**

- `url` (string | hash | url) (optional) - the factory component to unload

**Examples**

How to unload resources of a factory prototype loaded with factory.load
```
factory.unload("#factory")

```

<!-- font-lua -->

# Font {#apis:font-lua}

**Namespace:** `font`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_font.cpp`
**Source:** `engine/gamesys/src/gamesys/scripts/script_font.cpp`

Functions, messages and properties used to manipulate font resources.

## API

### font.add_font
*Type:* FUNCTION
associates a ttf resource to a .fontc file.

**Notes**

- The ttf font is loaded via the resource system. There are a few ways it can be accessed:
    - It was already loaded in the resource system
    - It is bundled via our game data
    - It is accessible via a live update mount
- The reference count will increase for the .ttf font

**Parameters**

- `fontc` (string | hash) - The path to the .fontc resource
- `ttf` (string | hash) - The path to the .ttf resource

**Examples**

```
local font_hash = hash("/assets/fonts/roboto.fontc")
local ttf_hash = hash("/assets/fonts/Roboto/Roboto-Bold.ttf")
font.add_font(font_hash, ttf_hash)

```

### font.get_info
*Type:* FUNCTION
Gets information about a font, such as the associated font files

**Parameters**

- `fontc` (string | hash) - The path to the .fontc resource

**Returns**

- `info` (table) - the information table contains these fields:
<dl>
<dt><code>path</code></dt>
<dd><span class="type">hash</span> The path hash of the current file.</dd>
<dt><code>fonts</code></dt>
<dd>
<span class="type">table</span> An array of associated font (e.g. .ttf) files. Each item is a table that contains:
<dl>
<dt><code>path</code></dt>
<dd><span class="type">string</span> The path of the font file</dd>
<dt><code>path_hash</code></dt>
<dd><span class="type">hash</span> The path of the font file</dd>
</dl>
</dd>
</dl>

### font.prewarm_text
*Type:* FUNCTION
prepopulates the font glyph cache with rasterised glyphs

**Parameters**

- `fontc` (string | hash) - The path to the .fontc resource
- `text` (string) - The text to layout
- `callback` (function(self, request_id, result, errstring)) (optional) - (optional) A callback function that is called after the request is finished
<dl>
<dt><code>self</code></dt>
<dd><span class="type">object</span> The current object.</dd>
<dt><code>request_id</code></dt>
<dd><span class="type">number</span> The request id</dd>
<dt><code>result</code></dt>
<dd><span class="type">boolean</span> True if request was succesful</dd>
<dt><code>errstring</code></dt>
<dd><span class="type">string</span> <code>nil</code> if the request was successful</dd>
</dl>

**Returns**

- `request_id` (number) - Returns the asynchronous request id

**Examples**

```
local font_hash = hash("/assets/fonts/roboto.fontc")
font.prewarm_text(font_hash, "Some text", function (self, request_id, result, errstring)
        -- cache is warm, show the text!
    end)

```

### font.remove_font
*Type:* FUNCTION
associates a ttf resource to a .fontc file

**Notes**

- The reference count will decrease for the .ttf font

**Parameters**

- `fontc` (string | hash) - The path to the .fontc resource
- `ttf` (string | hash) - The path to the .ttf resource

**Examples**

```
local font_hash = hash("/assets/fonts/roboto.fontc")
local ttf_hash = hash("/assets/fonts/Roboto/Roboto-Bold.ttf")
font.remove_font(font_hash, ttf_hash)

```

<!-- go-lua -->

# Game object {#apis:go-lua}

**Namespace:** `go`
**Language:** Lua
**Type:** Defold Lua
**File:** `gameobject_script.cpp`
**Source:** `engine/gameobject/src/gameobject/gameobject_script.cpp`

Functions, core hooks, messages and constants for manipulation of
game objects. The "go" namespace is accessible from game object script
files.

## API

### acquire_input_focus
*Type:* MESSAGE
Post this message to a game object instance to make that instance acquire the user input focus.
User input is distributed by the engine to every instance that has
requested it. The last instance to request focus will receive it first.
This means that the scripts in the instance will have first-hand-chance
at reacting on user input, possibly consuming it (by returning
true from on_input) so that no other instances
can react on it. The most common case is for a script to send this message
to itself when it needs to respond to user input.
A script belonging to an instance which has the user input focus will
receive the input actions in its on_input callback function.
See on_input for more information on how user input can be
handled.

**Examples**

This example demonstrates how to acquire and act on user input.
```
function init(self)
    -- acquire input focus as soon as the instance has been initialized
    msg.post(".", "acquire_input_focus")
end

function on_input(self, action_id, action)
    -- check which input we received
    if action_id == hash("my_action") then
        -- act on the input
        self.my_action_amount = action.value
    end
end

```

### disable
*Type:* MESSAGE
This message disables the receiving component. All components are enabled by default, which means they will receive input, updates
and be a part of the simulation. A component is disabled when it receives the disable message.
 Components that currently supports this message are:

Camera
Collection Proxy
Collision Object
Gui
Label
Spine Model
Sprite
Tile Grid
Model
Mesh

**Examples**

Disable the component "my_component":
```
msg.post("#my_component", "disable")

```

### enable
*Type:* MESSAGE
This message enables the receiving component. All components are enabled by default, which means they will receive input, updates
and be a part of the simulation. A component is disabled when it receives the disable message.
 Components that currently supports this message are:

Camera
Collection Proxy
Collision Object
Gui
Label
Spine Model
Sprite
Tile Grid
Model
Mesh

**Examples**

Enable the component "my_component":
```
msg.post("#my_component", "enable")

```

### euler
*Type:* PROPERTY
The rotation of the game object expressed in Euler angles.
Euler angles are specified in degrees in the interval (-360, 360).
The type of the property is vector3.

**Examples**

How to set a game object's rotation with euler angles, either as a vector3 or selecting a specific dimension:
```
function init(self)
  -- set "player" euler z rotation component to 45 degrees around z.
  local rotz = 45
  go.set("player", "euler.z", rotz)
  local rot = go.get("player", "euler")
  -- do something useful
  assert(rot.z == rotz)
end

```

### final
*Type:* FUNCTION
This is a callback-function, which is called by the engine when a script component is finalized (destroyed). It can
be used to e.g. take some last action, report the finalization to other game object instances, delete spawned objects
or release user input focus (see release_input_focus).

**Parameters**

- `self` (userdata) - reference to the script state to be used for storing data

**Examples**

```
function final(self)
    -- report finalization
    msg.post("my_friend_instance", "im_dead", {my_stats = self.some_value})
end

```

### fixed_update
*Type:* FUNCTION
This is a callback-function, which is called by the engine at fixed intervals to update the state of a script
component. The function will be called if 'Fixed Update Frequency' is enabled in the Engine section of game.project.
It can for instance be used to update game logic with the physics simulation if using a fixed timestep for the
physics (enabled by ticking 'Use Fixed Timestep' in the Physics section of game.project).

**Parameters**

- `self` (userdata) - reference to the script state to be used for storing data
- `dt` (number) - the time-step of the frame update

### go.animate
*Type:* FUNCTION
This is only supported for numerical properties. If the node property is already being
animated, that animation will be canceled and replaced by the new one.
If a complete_function (lua function) is specified, that function will be called when the animation has completed.
By starting a new animation in that function, several animations can be sequenced together. See the examples for more information.
 If you call go.animate() from a game object's final() function,
any passed complete_function will be ignored and never called upon animation completion.
See the properties guide for which properties can be animated and the animation guide for how
them.

**Parameters**

- `url` (string | hash | url) - url of the game object or component having the property
- `property` (string | hash) - id of the property to animate
- `playback` (go.PLAYBACK_ONCE_FORWARD | go.PLAYBACK_ONCE_BACKWARD | go.PLAYBACK_ONCE_PINGPONG | go.PLAYBACK_LOOP_FORWARD | go.PLAYBACK_LOOP_BACKWARD | go.PLAYBACK_LOOP_PINGPONG) - playback mode of the animation
<ul>
<li><code>go.PLAYBACK_ONCE_FORWARD</code></li>
<li><code>go.PLAYBACK_ONCE_BACKWARD</code></li>
<li><code>go.PLAYBACK_ONCE_PINGPONG</code></li>
<li><code>go.PLAYBACK_LOOP_FORWARD</code></li>
<li><code>go.PLAYBACK_LOOP_BACKWARD</code></li>
<li><code>go.PLAYBACK_LOOP_PINGPONG</code></li>
</ul>
- `to` (number | vector3 | vector4 | quaternion) - target property value
- `easing` (vector | go.EASING_INBACK | go.EASING_INBOUNCE | go.EASING_INCIRC | go.EASING_INCUBIC | go.EASING_INELASTIC | go.EASING_INEXPO | go.EASING_INOUTBACK | go.EASING_INOUTBOUNCE | go.EASING_INOUTCIRC | go.EASING_INOUTCUBIC | go.EASING_INOUTELASTIC | go.EASING_INOUTEXPO | go.EASING_INOUTQUAD | go.EASING_INOUTQUART | go.EASING_INOUTQUINT | go.EASING_INOUTSINE | go.EASING_INQUAD | go.EASING_INQUART | go.EASING_INQUINT | go.EASING_INSINE | go.EASING_LINEAR | go.EASING_OUTBACK | go.EASING_OUTBOUNCE | go.EASING_OUTCIRC | go.EASING_OUTCUBIC | go.EASING_OUTELASTIC | go.EASING_OUTEXPO | go.EASING_OUTINBACK | go.EASING_OUTINBOUNCE | go.EASING_OUTINCIRC | go.EASING_OUTINCUBIC | go.EASING_OUTINELASTIC | go.EASING_OUTINEXPO | go.EASING_OUTINQUAD | go.EASING_OUTINQUART | go.EASING_OUTINQUINT | go.EASING_OUTINSINE | go.EASING_OUTQUAD | go.EASING_OUTQUART | go.EASING_OUTQUINT | go.EASING_OUTSINE) - easing to use during animation. Either specify a constant, see the <a href="/manuals/animation#_easing">animation guide</a> for a complete list, or a vmath.vector with a curve
- `duration` (number) - duration of the animation in seconds
- `delay` (number) (optional) - delay before the animation starts in seconds
- `complete_function` (function(self, url, property)) (optional) - optional function to call when the animation has completed
<dl>
<dt><code>self</code></dt>
<dd>
<span class="type">object</span> The current object.
</dd>
<dt><code>url</code></dt>
<dd>
<span class="type">url</span> The game object or component instance for which the property is animated.
</dd>
<dt><code>property</code></dt>
<dd>
<span class="type">hash</span> The id of the animated property.
</dd>
</dl>

**Examples**

Animate the position of a game object to x = 10 during 1 second, then y = 20 during 1 second:
```
local function x_done(self, url, property)
    go.animate(go.get_id(), "position.y", go.PLAYBACK_ONCE_FORWARD, 20, go.EASING_LINEAR, 1)
end

function init(self)
    go.animate(go.get_id(), "position.x", go.PLAYBACK_ONCE_FORWARD, 10, go.EASING_LINEAR, 1, 0, x_done)
end

```

Animate the y position of a game object using a crazy custom easing curve:
```
local values = { 0, 0, 0, 0, 0, 0, 0, 0,
                 1, 1, 1, 1, 1, 1, 1, 1,
                 0, 0, 0, 0, 0, 0, 0, 0,
                 1, 1, 1, 1, 1, 1, 1, 1,
                 0, 0, 0, 0, 0, 0, 0, 0,
                 1, 1, 1, 1, 1, 1, 1, 1,
                 0, 0, 0, 0, 0, 0, 0, 0,
                 1, 1, 1, 1, 1, 1, 1, 1 }
local vec = vmath.vector(values)
go.animate("go", "position.y", go.PLAYBACK_LOOP_PINGPONG, 100, vec, 2.0)

```

### go.cancel_animations
*Type:* FUNCTION
By calling this function, all or specified stored property animations of the game object or component will be canceled.
See the properties guide for which properties can be animated and the animation guide for how to animate them.

**Parameters**

- `url` (string | hash | url) - url of the game object or component
- `property` (string | hash) (optional) - optional id of the property to cancel

**Examples**

Cancel the animation of the position of a game object:
```
go.cancel_animations(go.get_id(), "position")

```

Cancel all property animations of the current game object:
```
go.cancel_animations(".")

```

Cancel all property animations of the sprite component of the current game object:
```
go.cancel_animations("#sprite")

```

### go.delete
*Type:* FUNCTION
Delete one or more game objects identified by id. Deletion is asynchronous meaning that
the game object(s) are scheduled for deletion which will happen at the end of the current
frame. Note that game objects scheduled for deletion will be counted against
max_instances in "game.project" until they are actually removed.
 Deleting a game object containing a particle FX component emitting particles will not immediately stop the particle FX from emitting particles. You need to manually stop the particle FX using particlefx.stop().
 Deleting a game object containing a sound component that is playing will not immediately stop the sound from playing. You need to manually stop the sound using sound.stop().

**Parameters**

- `id` (string | hash | url | table) (optional) - optional id or table of id's of the instance(s) to delete, the instance of the calling script is deleted by default
- `recursive` (boolean) (optional) - optional boolean, set to true to recursively delete child hiearchy in child to parent order

**Examples**

This example demonstrates how to delete game objects
```
-- Delete the script game object
go.delete()
-- Delete a game object with the id "my_game_object".
local id = go.get_id("my_game_object") -- retrieve the id of the game object to be deleted
go.delete(id)
-- Delete a list of game objects.
local ids = { hash("/my_object_1"), hash("/my_object_2"), hash("/my_object_3") }
go.delete(ids)

```

This example demonstrates how to delete a game objects and their children (child to parent order)
```
-- Delete the script game object and it's children
go.delete(true)
-- Delete a game object with the id "my_game_object" and it's children.
local id = go.get_id("my_game_object") -- retrieve the id of the game object to be deleted
go.delete(id, true)
-- Delete a list of game objects and their children.
local ids = { hash("/my_object_1"), hash("/my_object_2"), hash("/my_object_3") }
go.delete(ids, true)

```

### go.EASING_INBACK
*Type:* CONSTANT
in-back

### go.EASING_INBOUNCE
*Type:* CONSTANT
in-bounce

### go.EASING_INCIRC
*Type:* CONSTANT
in-circlic

### go.EASING_INCUBIC
*Type:* CONSTANT
in-cubic

### go.EASING_INELASTIC
*Type:* CONSTANT
in-elastic

### go.EASING_INEXPO
*Type:* CONSTANT
in-exponential

### go.EASING_INOUTBACK
*Type:* CONSTANT
in-out-back

### go.EASING_INOUTBOUNCE
*Type:* CONSTANT
in-out-bounce

### go.EASING_INOUTCIRC
*Type:* CONSTANT
in-out-circlic

### go.EASING_INOUTCUBIC
*Type:* CONSTANT
in-out-cubic

### go.EASING_INOUTELASTIC
*Type:* CONSTANT
in-out-elastic

### go.EASING_INOUTEXPO
*Type:* CONSTANT
in-out-exponential

### go.EASING_INOUTQUAD
*Type:* CONSTANT
in-out-quadratic

### go.EASING_INOUTQUART
*Type:* CONSTANT
in-out-quartic

### go.EASING_INOUTQUINT
*Type:* CONSTANT
in-out-quintic

### go.EASING_INOUTSINE
*Type:* CONSTANT
in-out-sine

### go.EASING_INQUAD
*Type:* CONSTANT
in-quadratic

### go.EASING_INQUART
*Type:* CONSTANT
in-quartic

### go.EASING_INQUINT
*Type:* CONSTANT
in-quintic

### go.EASING_INSINE
*Type:* CONSTANT
in-sine

### go.EASING_LINEAR
*Type:* CONSTANT
linear interpolation

### go.EASING_OUTBACK
*Type:* CONSTANT
out-back

### go.EASING_OUTBOUNCE
*Type:* CONSTANT
out-bounce

### go.EASING_OUTCIRC
*Type:* CONSTANT
out-circlic

### go.EASING_OUTCUBIC
*Type:* CONSTANT
out-cubic

### go.EASING_OUTELASTIC
*Type:* CONSTANT
out-elastic

### go.EASING_OUTEXPO
*Type:* CONSTANT
out-exponential

### go.EASING_OUTINBACK
*Type:* CONSTANT
out-in-back

### go.EASING_OUTINBOUNCE
*Type:* CONSTANT
out-in-bounce

### go.EASING_OUTINCIRC
*Type:* CONSTANT
out-in-circlic

### go.EASING_OUTINCUBIC
*Type:* CONSTANT
out-in-cubic

### go.EASING_OUTINELASTIC
*Type:* CONSTANT
out-in-elastic

### go.EASING_OUTINEXPO
*Type:* CONSTANT
out-in-exponential

### go.EASING_OUTINQUAD
*Type:* CONSTANT
out-in-quadratic

### go.EASING_OUTINQUART
*Type:* CONSTANT
out-in-quartic

### go.EASING_OUTINQUINT
*Type:* CONSTANT
out-in-quintic

### go.EASING_OUTINSINE
*Type:* CONSTANT
out-in-sine

### go.EASING_OUTQUAD
*Type:* CONSTANT
out-quadratic

### go.EASING_OUTQUART
*Type:* CONSTANT
out-quartic

### go.EASING_OUTQUINT
*Type:* CONSTANT
out-quintic

### go.EASING_OUTSINE
*Type:* CONSTANT
out-sine

### go.exists
*Type:* FUNCTION
This function can check for game objects in any collection by specifying
the collection name in the URL.

**Parameters**

- `url` (string | hash | url) - url of the game object to check

**Returns**

- `exists` (boolean) - true if the game object exists

**Examples**

Check if game object "my_game_object" exists in the current collection
```
go.exists("/my_game_object")

```

Check if game object exists in another collection
```
go.exists("other_collection:/my_game_object")

```

### go.get
*Type:* FUNCTION
gets a named property of the specified game object or component

**Parameters**

- `url` (string | hash | url) - url of the game object or component having the property
- `property` (string | hash) - id of the property to retrieve
- `options` (table) (optional) - optional options table
- index <span class="type">number</span> index into array property (1 based)
- key <span class="type">hash</span> name of internal property

**Returns**

- `value` (number | boolean | hash | url | vector3 | vector4 | quaternion | resource) - the value of the specified property

**Examples**

Get a property "speed" from a script "player", the property must be declared in the player-script:
```
go.property("speed", 50)

```

Then in the calling script (assumed to belong to the same game object, but does not have to):
```
local speed = go.get("#player", "speed")
```Get a value in a material property array

```lua
-- get the first vector4 in the array: example[0] (the glsl indices are 0-based)
go.get(url, "example", {index=1})

-- get the last vector4 in the array: example[15] (the glsl indices are 0-based)
go.get(url, "example", {index=16})

-- get an element of a vector4 in the array: example[0].x (the glsl indices are 0-based)
go.get(url, "example.x", {index=1})

```

Getting all values in a material property array as a table
```
-- get all vector4's in the constant array
go.get(url, "example")
-- result: { vector4, vector4, ... }

-- get all elements of the vector4's from an array
go.get(url, "example.x")
-- result: { number1, number2, ... }
```Get a named property

```lua
function init(self)
    -- get the resource of a certain gui font
    local font_hash = go.get("#gui", "fonts", {key = "system_font_BIG"})
end

```

### go.get_id
*Type:* FUNCTION
Returns or constructs an instance identifier. The instance id is a hash
of the absolute path to the instance.

If path is specified, it can either be absolute or relative to the instance of the calling script.
If path is not specified, the id of the game object instance the script is attached to will be returned.

**Parameters**

- `path` (string) (optional) - path of the instance for which to return the id

**Returns**

- `id` (hash) - instance id

**Examples**

For the instance with path /my_sub_collection/my_instance, the following calls are equivalent:
```
local id = go.get_id() -- no path, defaults to the instance containing the calling script
print(id) --> hash: [/my_sub_collection/my_instance]

local id = go.get_id("/my_sub_collection/my_instance") -- absolute path
print(id) --> hash: [/my_sub_collection/my_instance]

local id = go.get_id("my_instance") -- relative path
print(id) --> hash: [/my_sub_collection/my_instance]

```

### go.get_parent
*Type:* FUNCTION
Get the parent for a game object instance.

**Parameters**

- `id` (string | hash | url) (optional) - optional id of the game object instance to get parent for, defaults to the instance containing the calling script

**Returns**

- `parent_id` (hash | nil) - parent instance or <code>nil</code>

**Examples**

Get parent of the instance containing the calling script:
```
local parent_id = go.get_parent()

```

Get parent of the instance with id "x":
```
local parent_id = go.get_parent("x")

```

### go.get_position
*Type:* FUNCTION
The position is relative the parent (if any). Use go.get_world_position to retrieve the global world position.

**Parameters**

- `id` (string | hash | url) (optional) - optional id of the game object instance to get the position for, by default the instance of the calling script

**Returns**

- `position` (vector3) - instance position

**Replaces:** request_transform transform_response

**Examples**

Get the position of the game object instance the script is attached to:
```
local p = go.get_position()

```

Get the position of another game object instance "my_gameobject":
```
local pos = go.get_position("my_gameobject")

```

### go.get_rotation
*Type:* FUNCTION
The rotation is relative to the parent (if any). Use go.get_world_rotation to retrieve the global world rotation.

**Parameters**

- `id` (string | hash | url) (optional) - optional id of the game object instance to get the rotation for, by default the instance of the calling script

**Returns**

- `rotation` (quaternion) - instance rotation

**Examples**

Get the rotation of the game object instance the script is attached to:
```
local r = go.get_rotation()

```

Get the rotation of another game object instance with id "x":
```
local r = go.get_rotation("x")

```

### go.get_scale
*Type:* FUNCTION
The scale is relative the parent (if any). Use go.get_world_scale to retrieve the global world 3D scale factor.

**Parameters**

- `id` (string | hash | url) (optional) - optional id of the game object instance to get the scale for, by default the instance of the calling script

**Returns**

- `scale` (vector3) - instance scale factor

**Examples**

Get the scale of the game object instance the script is attached to:
```
local s = go.get_scale()

```

Get the scale of another game object instance with id "x":
```
local s = go.get_scale("x")

```

### go.get_scale_uniform
*Type:* FUNCTION
The uniform scale is relative the parent (if any). If the underlying scale vector is non-uniform the min element of the vector is returned as the uniform scale factor.

**Parameters**

- `id` (string | hash | url) (optional) - optional id of the game object instance to get the uniform scale for, by default the instance of the calling script

**Returns**

- `scale` (number) - uniform instance scale factor

**Examples**

Get the scale of the game object instance the script is attached to:
```
local s = go.get_scale_uniform()

```

Get the uniform scale of another game object instance with id "x":
```
local s = go.get_scale_uniform("x")

```

### go.get_world_position
*Type:* FUNCTION
The function will return the world position calculated at the end of the previous frame.
To recalculate it within the current frame, use go.update_world_transform on the instance before calling this.
Use go.get_position to retrieve the position relative to the parent.

**Parameters**

- `id` (string | hash | url) (optional) - optional id of the game object instance to get the world position for, by default the instance of the calling script

**Returns**

- `position` (vector3) - instance world position

**Examples**

Get the world position of the game object instance the script is attached to:
```
local p = go.get_world_position()

```

Get the world position of another game object instance with id "x":
```
local p = go.get_world_position("x")

```

### go.get_world_rotation
*Type:* FUNCTION
The function will return the world rotation calculated at the end of the previous frame.
To recalculate it within the current frame, use go.update_world_transform on the instance before calling this.
Use go.get_rotation to retrieve the rotation relative to the parent.

**Parameters**

- `id` (string | hash | url) (optional) - optional id of the game object instance to get the world rotation for, by default the instance of the calling script

**Returns**

- `rotation` (quaternion) - instance world rotation

**Examples**

Get the world rotation of the game object instance the script is attached to:
```
local r = go.get_world_rotation()

```

Get the world rotation of another game object instance with id "x":
```
local r = go.get_world_rotation("x")

```

### go.get_world_scale
*Type:* FUNCTION
The function will return the world 3D scale factor calculated at the end of the previous frame.
To recalculate it within the current frame, use go.update_world_transform on the instance before calling this.
Use go.get_scale to retrieve the 3D scale factor relative to the parent.
This vector is derived by decomposing the transformation matrix and should be used with care.
For most cases it should be fine to use go.get_world_scale_uniform instead.

**Parameters**

- `id` (string | hash | url) (optional) - optional id of the game object instance to get the world scale for, by default the instance of the calling script

**Returns**

- `scale` (vector3) - instance world 3D scale factor

**Examples**

Get the world 3D scale of the game object instance the script is attached to:
```
local s = go.get_world_scale()

```

Get the world scale of another game object instance "x":
```
local s = go.get_world_scale("x")

```

### go.get_world_scale_uniform
*Type:* FUNCTION
The function will return the world scale factor calculated at the end of the previous frame.
To recalculate it within the current frame, use go.update_world_transform on the instance before calling this.
Use go.get_scale_uniform to retrieve the scale factor relative to the parent.

**Parameters**

- `id` (string | hash | url) (optional) - optional id of the game object instance to get the world scale for, by default the instance of the calling script

**Returns**

- `scale` (number) - instance world scale factor

**Examples**

Get the world scale of the game object instance the script is attached to:
```
local s = go.get_world_scale_uniform()

```

Get the world scale of another game object instance with id "x":
```
local s = go.get_world_scale_uniform("x")

```

### go.get_world_transform
*Type:* FUNCTION
The function will return the world transform matrix calculated at the end of the previous frame.
To recalculate it within the current frame, use go.update_world_transform on the instance before calling this.

**Parameters**

- `id` (string | hash | url) (optional) - optional id of the game object instance to get the world transform for, by default the instance of the calling script

**Returns**

- `transform` (matrix4) - instance world transform

**Examples**

Get the world transform of the game object instance the script is attached to:
```
local m = go.get_world_transform()

```

Get the world transform of another game object instance with id "x":
```
local m = go.get_world_transform("x")

```

### go.PLAYBACK_LOOP_BACKWARD
*Type:* CONSTANT
loop backward

### go.PLAYBACK_LOOP_FORWARD
*Type:* CONSTANT
loop forward

### go.PLAYBACK_LOOP_PINGPONG
*Type:* CONSTANT
ping pong loop

### go.PLAYBACK_NONE
*Type:* CONSTANT
no playback

### go.PLAYBACK_ONCE_BACKWARD
*Type:* CONSTANT
once backward

### go.PLAYBACK_ONCE_FORWARD
*Type:* CONSTANT
once forward

### go.PLAYBACK_ONCE_PINGPONG
*Type:* CONSTANT
once ping pong

### go.property
*Type:* FUNCTION
This function defines a property which can then be used in the script through the self-reference.
The properties defined this way are automatically exposed in the editor in game objects and collections which use the script.
Note that you can only use this function outside any callback-functions like init and update.

**Parameters**

- `name` (string) - the id of the property
- `value` (number | hash | url | vector3 | vector4 | quaternion | resource | boolean) - default value of the property. In the case of a url, only the empty constructor msg.url() is allowed. In the case of a resource one of the resource constructors (eg resource.atlas(), resource.font() etc) is expected.

**Examples**

This example demonstrates how to define a property called "health" in a script.
The health is decreased whenever someone sends a message called "take_damage" to the script.
```
go.property("health", 100)

function init(self)
    -- prints 100 to the output
    print(self.health)
end

function on_message(self, message_id, message, sender)
    if message_id == hash("take_damage") then
        self.health = self.health - message.damage
        print("Ouch! My health is now: " .. self.health)
    end
end

```

### go.set
*Type:* FUNCTION
sets a named property of the specified game object or component, or a material constant

**Parameters**

- `url` (string | hash | url) - url of the game object or component having the property
- `property` (string | hash) - id of the property to set
- `value` (number | boolean | hash | url | vector3 | vector4 | quaternion | resource) - the value to set
- `options` (table) (optional) - optional options table
- index <span class="type">integer</span> index into array property (1 based)
- key <span class="type">hash</span> name of internal property

**Examples**

Set a property "speed" of a script "player", the property must be declared in the player-script:
```
go.property("speed", 50)

```

Then in the calling script (assumed to belong to the same game object, but does not have to):
```
go.set("#player", "speed", 100)
```Set a vector4 in a material property array

```lua
-- set the first vector4 in the array: example[0] = v (the glsl indices are 0-based)
go.set(url, "example", vmath.vector4(1,1,1,1), {index=1})

-- set the last vector4 in the array: example[15] = v (the glsl indices are 0-based)
go.set(url, "example", vmath.vector4(2,2,2,2), {index=16})

-- set an element of a vector4 in the array: example[0].x = 7 (the glsl indices are 0-based)
go.set(url, "example.x", 7, {index=1})

```

Set a material property array by a table of vector4
```
-- set the first two vector4's in the array
-- if the array has more than two elements in the array they will not be set
go.set(url, "example", { vmath.vector4(1,1,1,1), vmath.vector4(2,2,2,2) })
```Set a named property

```lua
go.property("big_font", resource.font())

function init(self)
    go.set("#gui", "fonts", self.big_font, {key = "system_font_BIG"})
end

```

### go.set_parent
*Type:* FUNCTION
Sets the parent for a game object instance. This means that the instance will exist in the geometrical space of its parent,
like a basic transformation hierarchy or scene graph. If no parent is specified, the instance will be detached from any parent and exist in world
space.
This function will generate a set_parent message. It is not until the message has been processed that the change actually takes effect. This
typically happens later in the same frame or the beginning of the next frame. Refer to the manual to learn how messages are processed by the
engine.

**Parameters**

- `id` (string | hash | url) (optional) - optional id of the game object instance to set parent for, defaults to the instance containing the calling script
- `parent_id` (string | hash | url) (optional) - optional id of the new parent game object, defaults to detaching game object from its parent
- `keep_world_transform` (boolean) (optional) - optional boolean, set to true to maintain the world transform when changing spaces. Defaults to false.

**Examples**

Attach myself to another instance "my_parent":
```
go.set_parent(go.get_id(),go.get_id("my_parent"))

```

Attach an instance "my_instance" to another instance "my_parent":
```
go.set_parent(go.get_id("my_instance"),go.get_id("my_parent"))

```

Detach an instance "my_instance" from its parent (if any):
```
go.set_parent(go.get_id("my_instance"))

```

### go.set_position
*Type:* FUNCTION
The position is relative to the parent (if any). The global world position cannot be manually set.

**Parameters**

- `position` (vector3) - position to set
- `id` (string | hash | url) (optional) - optional id of the game object instance to set the position for, by default the instance of the calling script

**Examples**

Set the position of the game object instance the script is attached to:
```
local p = ...
go.set_position(p)

```

Set the position of another game object instance with id "x":
```
local p = ...
go.set_position(p, "x")

```

### go.set_rotation
*Type:* FUNCTION
The rotation is relative to the parent (if any). The global world rotation cannot be manually set.

**Parameters**

- `rotation` (quaternion) - rotation to set
- `id` (string | hash | url) (optional) - optional id of the game object instance to get the rotation for, by default the instance of the calling script

**Examples**

Set the rotation of the game object instance the script is attached to:
```
local r = ...
go.set_rotation(r)

```

Set the rotation of another game object instance with id "x":
```
local r = ...
go.set_rotation(r, "x")

```

### go.set_scale
*Type:* FUNCTION
The scale factor is relative to the parent (if any). The global world scale factor cannot be manually set.
 See manual to know how physics affected when setting scale from this function.

**Parameters**

- `scale` (number | vector3) - vector or uniform scale factor, must be greater than 0
- `id` (string | hash | url) (optional) - optional id of the game object instance to get the scale for, by default the instance of the calling script

**Examples**

Set the scale of the game object instance the script is attached to:
```
local s = vmath.vector3(2.0, 1.0, 1.0)
go.set_scale(s)

```

Set the scale of another game object instance with id "obj_id":
```
local s = 1.2
go.set_scale(s, "obj_id")

```

### go.set_scale_xy
*Type:* FUNCTION
The scale factor is relative to the parent (if any). The global world scale factor cannot be manually set.
 See manual to know how physics affected when setting scale from this function.

**Parameters**

- `scale` (number | vector3) - vector or uniform scale factor, must be greater than 0
- `id` (string | hash | url) (optional) - optional id of the game object instance to get the scale for, by default the instance of the calling script

**Examples**

Set the scale of the game object instance the script is attached to:
```
local s = vmath.vector3(2.0, 1.0, 5.0)
go.set_scale_xy(s) -- z will not be set here, only x and y

```

Set the scale of another game object instance with id "obj_id":
```
local s = 1.2
go.set_scale_xy(s, "obj_id") -- z will not be set here, only x and y

```

### go.update_world_transform
*Type:* FUNCTION
Recalculates and updates the cached world transform immediately for the target instance
and its ancestors (parent chain up to the collection root). Descendants (children) are
not updated by this function.
If no id is provided, the instance of the calling script is used.
 Use this after changing local transform mid-frame when you need the
new world transform right away (e.g. before end-of-frame updates). Note that child
instances will still have last-frame world transforms until the regular update.

**Parameters**

- `id` (string | hash | url) (optional) - optional id of the game object instance to update

**Examples**

Update this game object's world transform:
```
go.update_world_transform()

```

Update another game object's world transform:
```
go.update_world_transform("/other")

```

### go.world_to_local_position
*Type:* FUNCTION
The function uses world transformation calculated at the end of previous frame.

**Parameters**

- `position` (vector3) - position which need to be converted
- `url` (string | hash | url) - url of the game object which coordinate system convert to

**Returns**

- `converted_postion` (vector3) - converted position

**Examples**

Convert position of "test" game object into coordinate space of "child" object.
```
  local test_pos = go.get_world_position("/test")
  local child_pos = go.get_world_position("/child")
  local new_position = go.world_to_local_position(test_pos, "/child")

```

### go.world_to_local_transform
*Type:* FUNCTION
The function uses world transformation calculated at the end of previous frame.

**Parameters**

- `transformation` (matrix4) - transformation which need to be converted
- `url` (string | hash | url) - url of the game object which coordinate system convert to

**Returns**

- `converted_transform` (matrix4) - converted transformation

**Examples**

Convert transformation of "test" game object into coordinate space of "child" object.
```
   local test_transform = go.get_world_transform("/test")
   local child_transform = go.get_world_transform("/child")
   local result_transform = go.world_to_local_transform(test_transform, "/child")

```

### init
*Type:* FUNCTION
This is a callback-function, which is called by the engine when a script component is initialized. It can be used
to set the initial state of the script.

**Parameters**

- `self` (userdata) - reference to the script state to be used for storing data

**Examples**

```
function init(self)
    -- set up useful data
    self.my_value = 1
end

```

### late_update
*Type:* FUNCTION
This is a callback-function, which is called by the engine at the end of the frame to update the state of a script
component. Use it to make final adjustments to the game object instance.

**Parameters**

- `self` (userdata) - reference to the script state to be used for storing data
- `dt` (number) - the time-step of the frame update

### on_input
*Type:* FUNCTION
This is a callback-function, which is called by the engine when user input is sent to the game object instance of the script.
It can be used to take action on the input, e.g. move the instance according to the input.
For an instance to obtain user input, it must first acquire input focus
through the message acquire_input_focus.
Any instance that has obtained input will be put on top of an
input stack. Input is sent to all listeners on the stack until the
end of stack is reached, or a listener returns true
to signal that it wants input to be consumed.
See the documentation of acquire_input_focus for more
information.
The action parameter is a table containing data about the input mapped to the
action_id.
For mapped actions it specifies the value of the input and if it was just pressed or released.
Actions are mapped to input in an input_binding-file.
Mouse movement is specifically handled and uses nil as its action_id.
The action only contains positional parameters in this case, such as x and y of the pointer.
Here is a brief description of the available table fields:

Field
Description

value
The amount of input given by the user. This is usually 1 for buttons and 0-1 for analogue inputs. This is not present for mouse movement and text input.

pressed
If the input was pressed this frame. This is not present for mouse movement and text input.

released
If the input was released this frame. This is not present for mouse movement and text input.

repeated
If the input was repeated this frame. This is similar to how a key on a keyboard is repeated when you hold it down. This is not present for mouse movement and text input.

x
The x value of a pointer device, if present. This is not present for gamepad, key and text input.

y
The y value of a pointer device, if present. This is not present for gamepad, key and text input.

screen_x
The screen space x value of a pointer device, if present. This is not present for gamepad, key and text input.

screen_y
The screen space y value of a pointer device, if present. This is not present for gamepad, key and text input.

dx
The change in x value of a pointer device, if present. This is not present for gamepad, key and text input.

dy
The change in y value of a pointer device, if present. This is not present for gamepad, key and text input.

screen_dx
The change in screen space x value of a pointer device, if present. This is not present for gamepad, key and text input.

screen_dy
The change in screen space y value of a pointer device, if present. This is not present for gamepad, key and text input.

gamepad
The index of the gamepad device that provided the input. See table below about gamepad input.

touch
List of touch input, one element per finger, if present. See table below about touch input

text
Text input from a (virtual) keyboard or similar.

marked_text
Sequence of entered symbols while entering a symbol combination, for example Japanese Kana.

Gamepad specific fields:

Field
Description

gamepad
The index of the gamepad device that provided the input.

userid
Id of the user associated with the controller. Usually only relevant on consoles.

gamepad_unknown
True if the inout originated from an unknown/unmapped gamepad.

gamepad_name
Name of the gamepad

gamepad_axis
List of gamepad axis values. For raw gamepad input only.

gamepadhats
List of gamepad hat values. For raw gamepad input only.

gamepad_buttons
List of gamepad button values. For raw gamepad input only.

Touch input table:

Field
Description

id
A number identifying the touch input during its duration.

pressed
True if the finger was pressed this frame.

released
True if the finger was released this frame.

tap_count
Number of taps, one for single, two for double-tap, etc

x
The x touch location.

y
The y touch location.

dx
The change in x value.

dy
The change in y value.

acc_x
Accelerometer x value (if present).

acc_y
Accelerometer y value (if present).

acc_z
Accelerometer z value (if present).

**Parameters**

- `self` (userdata) - reference to the script state to be used for storing data
- `action_id` (hash) - id of the received input action, as mapped in the input_binding-file
- `action` (table) - a table containing the input data, see above for a description

**Returns**

- `consume` (boolean | nil) - optional boolean to signal if the input should be consumed (not passed on to others) or not, default is false

**Examples**

This example demonstrates how a game object instance can be moved as a response to user input.
```
function init(self)
    -- acquire input focus
    msg.post(".", "acquire_input_focus")
    -- maximum speed the instance can be moved
    self.max_speed = 2
    -- velocity of the instance, initially zero
    self.velocity = vmath.vector3()
end

function update(self, dt)
    -- move the instance
    go.set_position(go.get_position() + dt * self.velocity)
end

function on_input(self, action_id, action)
    -- check for movement input
    if action_id == hash("right") then
        if action.released then -- reset velocity if input was released
            self.velocity = vmath.vector3()
        else -- update velocity
            self.velocity = vmath.vector3(action.value * self.max_speed, 0, 0)
        end
    end
end

```

### on_message
*Type:* FUNCTION
This is a callback-function, which is called by the engine whenever a message has been sent to the script component.
It can be used to take action on the message, e.g. send a response back to the sender of the message.
The message parameter is a table containing the message data. If the message is sent from the engine, the
documentation of the message specifies which data is supplied.

**Parameters**

- `self` (userdata) - reference to the script state to be used for storing data
- `message_id` (hash) - id of the received message
- `message` (table) - a table containing the message data
- `sender` (url) - address of the sender

**Examples**

This example demonstrates how a game object instance, called "a", can communicate with another instance, called "b". It
is assumed that both script components of the instances has id "script".
Script of instance "a":
```
function init(self)
    -- let b know about some important data
    msg.post("b#script", "my_data", {important_value = 1})
end

```

Script of instance "b":
```
function init(self)
    -- store the url of instance "a" for later use, by specifying nil as socket we
    -- automatically use our own socket
    self.a_url = msg.url(nil, go.get_id("a"), "script")
end

function on_message(self, message_id, message, sender)
    -- check message and sender
    if message_id == hash("my_data") and sender == self.a_url then
        -- use the data in some way
        self.important_value = message.important_value
    end
end

```

### on_reload
*Type:* FUNCTION
This is a callback-function, which is called by the engine when the script component is reloaded, e.g. from the editor.
It can be used for live development, e.g. to tweak constants or set up the state properly for the instance.

**Parameters**

- `self` (userdata) - reference to the script state to be used for storing data

**Examples**

This example demonstrates how to tweak the speed of a game object instance that is moved on user input.
```
function init(self)
    -- acquire input focus
    msg.post(".", "acquire_input_focus")
    -- maximum speed the instance can be moved, this value is tweaked in the on_reload function below
    self.max_speed = 2
    -- velocity of the instance, initially zero
    self.velocity = vmath.vector3()
end

function update(self, dt)
    -- move the instance
    go.set_position(go.get_position() + dt * self.velocity)
end

function on_input(self, action_id, action)
    -- check for movement input
    if action_id == hash("right") then
        if action.released then -- reset velocity if input was released
            self.velocity = vmath.vector3()
        else -- update velocity
            self.velocity = vmath.vector3(action.value * self.max_speed, 0, 0)
        end
    end
end

function on_reload(self)
    -- edit this value and reload the script component
    self.max_speed = 100
end

```

### position
*Type:* PROPERTY
The position of the game object.
The type of the property is vector3.

**Examples**

How to query a game object's position, either as a vector3 or selecting a specific dimension:
```
function init(self)
  -- get position from "player"
  local pos = go.get("player", "position")
  local posx = go.get("player", "position.x")
  -- do something useful
  assert(pos.x == posx)
end

```

### release_input_focus
*Type:* MESSAGE
Post this message to an instance to make that instance release the user input focus.
See acquire_input_focus for more information on how the user input handling
works.

**Examples**

How to make a game object stop receiving input:
```
msg.post(".", "release_input_focus")

```

### rotation
*Type:* PROPERTY
The rotation of the game object.
The type of the property is quaternion.

**Examples**

How to set a game object's rotation:
```
function init(self)
  -- set "player" rotation to 45 degrees around z.
  local rotz = vmath.quat_rotation_z(3.141592 / 4)
  go.set("player", "rotation", rotz)
end

```

### scale
*Type:* PROPERTY
The uniform scale of the game object. The type of the property is number.

**Examples**

How to scale a game object:
```
function init(self)
  -- Double the scaling on "player"
  local scale = go.get("player", "scale")
  go.set("player", "scale", scale * 2)
end

```

### set_parent
*Type:* MESSAGE
When this message is sent to an instance, it sets the parent of that instance. This means that the instance will exist
in the geometrical space of its parent, like a basic transformation hierarchy or scene graph. If no parent is specified,
the instance will be detached from any parent and exist in world space. A script can send this message to itself to set
the parent of its instance.

**Parameters**

- `parent_id` (hash) - the id of the new parent
- `keep_world_transform` (number) - if the world transform of the instance should be preserved when changing spaces, 0 for false and 1 for true. The default value is 1.

**Examples**

Attach myself to another instance "my_parent":
```
msg.post(".", "set_parent", {parent_id = go.get_id("my_parent")})

```

Attach an instance "my_instance" to another instance "my_parent":
```
msg.post("my_instance", "set_parent", {parent_id = go.get_id("my_parent")})

```

Detach an instance "my_instance" from its parent (if any):
```
msg.post("my_instance", "set_parent")

```

### update
*Type:* FUNCTION
This is a callback-function, which is called by the engine every frame to update the state of a script component.
It can be used to perform any kind of game related tasks, e.g. moving the game object instance.

**Parameters**

- `self` (userdata) - reference to the script state to be used for storing data
- `dt` (number) - the time-step of the frame update

**Examples**

This example demonstrates how to move a game object instance through the script component:
```
function init(self)
    -- set initial velocity to be 1 along world x-axis
    self.my_velocity = vmath.vector3(1, 0, 0)
end

function update(self, dt)
    -- move the game object instance
    go.set_position(go.get_position() + dt * self.my_velocity)
end

```

<!-- graphics-lua -->

# Graphics {#apis:graphics-lua}

**Namespace:** `graphics`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_graphics.cpp`
**Source:** `engine/script/src/script_graphics.cpp`

Graphics functions and constants.

## API

### graphics.BLEND_FACTOR_CONSTANT_ALPHA
*Type:* CONSTANT

### graphics.BLEND_FACTOR_CONSTANT_COLOR
*Type:* CONSTANT

### graphics.BLEND_FACTOR_DST_ALPHA
*Type:* CONSTANT

### graphics.BLEND_FACTOR_DST_COLOR
*Type:* CONSTANT

### graphics.BLEND_FACTOR_ONE
*Type:* CONSTANT

### graphics.BLEND_FACTOR_ONE_MINUS_CONSTANT_ALPHA
*Type:* CONSTANT

### graphics.BLEND_FACTOR_ONE_MINUS_CONSTANT_COLOR
*Type:* CONSTANT

### graphics.BLEND_FACTOR_ONE_MINUS_DST_ALPHA
*Type:* CONSTANT

### graphics.BLEND_FACTOR_ONE_MINUS_DST_COLOR
*Type:* CONSTANT

### graphics.BLEND_FACTOR_ONE_MINUS_SRC_ALPHA
*Type:* CONSTANT

### graphics.BLEND_FACTOR_ONE_MINUS_SRC_COLOR
*Type:* CONSTANT

### graphics.BLEND_FACTOR_SRC_ALPHA
*Type:* CONSTANT

### graphics.BLEND_FACTOR_SRC_ALPHA_SATURATE
*Type:* CONSTANT

### graphics.BLEND_FACTOR_SRC_COLOR
*Type:* CONSTANT

### graphics.BLEND_FACTOR_ZERO
*Type:* CONSTANT

### graphics.BUFFER_TYPE_COLOR0_BIT
*Type:* CONSTANT

### graphics.BUFFER_TYPE_COLOR1_BIT
*Type:* CONSTANT
May be nil if multitarget rendering isn't supported

### graphics.BUFFER_TYPE_COLOR2_BIT
*Type:* CONSTANT
May be nil if multitarget rendering isn't supported

### graphics.BUFFER_TYPE_COLOR3_BIT
*Type:* CONSTANT
May be nil if multitarget rendering isn't supported

### graphics.BUFFER_TYPE_DEPTH_BIT
*Type:* CONSTANT

### graphics.BUFFER_TYPE_STENCIL_BIT
*Type:* CONSTANT

### graphics.COMPARE_FUNC_ALWAYS
*Type:* CONSTANT

### graphics.COMPARE_FUNC_EQUAL
*Type:* CONSTANT

### graphics.COMPARE_FUNC_GEQUAL
*Type:* CONSTANT

### graphics.COMPARE_FUNC_GREATER
*Type:* CONSTANT

### graphics.COMPARE_FUNC_LEQUAL
*Type:* CONSTANT

### graphics.COMPARE_FUNC_LESS
*Type:* CONSTANT

### graphics.COMPARE_FUNC_NEVER
*Type:* CONSTANT

### graphics.COMPARE_FUNC_NOTEQUAL
*Type:* CONSTANT

### graphics.COMPRESSION_TYPE_BASIS_ETC1S
*Type:* CONSTANT

### graphics.COMPRESSION_TYPE_BASIS_UASTC
*Type:* CONSTANT

### graphics.COMPRESSION_TYPE_DEFAULT
*Type:* CONSTANT

### graphics.COMPRESSION_TYPE_WEBP
*Type:* CONSTANT

### graphics.COMPRESSION_TYPE_WEBP_LOSSY
*Type:* CONSTANT

### graphics.FACE_TYPE_BACK
*Type:* CONSTANT

### graphics.FACE_TYPE_FRONT
*Type:* CONSTANT

### graphics.FACE_TYPE_FRONT_AND_BACK
*Type:* CONSTANT

### graphics.STATE_ALPHA_TEST
*Type:* CONSTANT

### graphics.STATE_ALPHA_TEST_SUPPORTED
*Type:* CONSTANT

### graphics.STATE_BLEND
*Type:* CONSTANT

### graphics.STATE_CULL_FACE
*Type:* CONSTANT

### graphics.STATE_DEPTH_TEST
*Type:* CONSTANT

### graphics.STATE_POLYGON_OFFSET_FILL
*Type:* CONSTANT

### graphics.STATE_SCISSOR_TEST
*Type:* CONSTANT

### graphics.STATE_STENCIL_TEST
*Type:* CONSTANT

### graphics.STENCIL_OP_DECR
*Type:* CONSTANT

### graphics.STENCIL_OP_DECR_WRAP
*Type:* CONSTANT

### graphics.STENCIL_OP_INCR
*Type:* CONSTANT

### graphics.STENCIL_OP_INCR_WRAP
*Type:* CONSTANT

### graphics.STENCIL_OP_INVERT
*Type:* CONSTANT

### graphics.STENCIL_OP_KEEP
*Type:* CONSTANT

### graphics.STENCIL_OP_REPLACE
*Type:* CONSTANT

### graphics.STENCIL_OP_ZERO
*Type:* CONSTANT

### graphics.TEXTURE_FILTER_DEFAULT
*Type:* CONSTANT

### graphics.TEXTURE_FILTER_LINEAR
*Type:* CONSTANT

### graphics.TEXTURE_FILTER_LINEAR_MIPMAP_LINEAR
*Type:* CONSTANT

### graphics.TEXTURE_FILTER_LINEAR_MIPMAP_NEAREST
*Type:* CONSTANT

### graphics.TEXTURE_FILTER_NEAREST
*Type:* CONSTANT

### graphics.TEXTURE_FILTER_NEAREST_MIPMAP_LINEAR
*Type:* CONSTANT

### graphics.TEXTURE_FILTER_NEAREST_MIPMAP_NEAREST
*Type:* CONSTANT

### graphics.TEXTURE_FORMAT_BGRA8U
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_DEPTH
*Type:* CONSTANT

### graphics.TEXTURE_FORMAT_LUMINANCE
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_LUMINANCE_ALPHA
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_R16F
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_R32F
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_R32UI
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_R_BC4
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_R_ETC2
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RG16F
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RG32F
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RG_BC5
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RG_ETC2
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RGB
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RGB16F
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RGB32F
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RGB_16BPP
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RGB_BC1
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RGB_ETC1
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RGB_PVRTC_2BPPV1
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RGB_PVRTC_4BPPV1
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RGBA
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RGBA16F
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RGBA32F
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RGBA32UI
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RGBA_16BPP
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RGBA_ASTC_4X4
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RGBA_BC3
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RGBA_BC7
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RGBA_ETC2
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RGBA_PVRTC_2BPPV1
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_RGBA_PVRTC_4BPPV1
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_FORMAT_STENCIL
*Type:* CONSTANT

### graphics.TEXTURE_TYPE_2D
*Type:* CONSTANT

### graphics.TEXTURE_TYPE_2D_ARRAY
*Type:* CONSTANT

### graphics.TEXTURE_TYPE_3D
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_TYPE_CUBE_MAP
*Type:* CONSTANT

### graphics.TEXTURE_TYPE_IMAGE_2D
*Type:* CONSTANT

### graphics.TEXTURE_TYPE_IMAGE_3D
*Type:* CONSTANT
May be nil if the graphics driver doesn't support it

### graphics.TEXTURE_USAGE_FLAG_COLOR
*Type:* CONSTANT

### graphics.TEXTURE_USAGE_FLAG_INPUT
*Type:* CONSTANT

### graphics.TEXTURE_USAGE_FLAG_MEMORYLESS
*Type:* CONSTANT

### graphics.TEXTURE_USAGE_FLAG_SAMPLE
*Type:* CONSTANT

### graphics.TEXTURE_USAGE_FLAG_STORAGE
*Type:* CONSTANT

### graphics.TEXTURE_WRAP_CLAMP_TO_BORDER
*Type:* CONSTANT

### graphics.TEXTURE_WRAP_CLAMP_TO_EDGE
*Type:* CONSTANT

### graphics.TEXTURE_WRAP_MIRRORED_REPEAT
*Type:* CONSTANT

### graphics.TEXTURE_WRAP_REPEAT
*Type:* CONSTANT

<!-- gui-lua -->

# GUI {#apis:gui-lua}

**Namespace:** `gui`
**Language:** Lua
**Type:** Defold Lua
**File:** `gui_script.cpp`
**Source:** `engine/gui/src/gui_script.cpp`

GUI core hooks, functions, messages, properties and constants for
creation and manipulation of GUI nodes. The "gui" namespace is
accessible only from gui scripts.

## API

### final
*Type:* FUNCTION
This is a callback-function, which is called by the engine when a gui component is finalized (destroyed). It can
be used to e.g. take some last action, report the finalization to other game object instances
or release user input focus (see release_input_focus). There is no use in starting any animations or similar
from this function since the gui component is about to be destroyed.

**Parameters**

- `self` (userdata) - reference to the script state to be used for storing data

**Examples**

```
function final(self)
    -- report finalization
    msg.post("my_friend_instance", "im_dead", {my_stats = self.some_value})
end

```

### fonts
*Type:* PROPERTY
The fonts used in the gui. The type of the property is hash.
Key must be specified in options table.

**Examples**

How to set font using a script property (see resource.font)
```
go.property("title_latin", resource.font("/open_sans.font"))
go.property("title_cyrillic", resource.font("/open_sans_cyrillic.font"))

function init(self)
  go.set("#gui", "fonts", self.title_cyrillic, {key = "title"})
end

```

### gui.ADJUST_FIT
*Type:* CONSTANT
Adjust mode is used when the screen resolution differs from the project settings.
The fit mode ensures that the entire node is visible in the adjusted gui scene.

### gui.ADJUST_STRETCH
*Type:* CONSTANT
Adjust mode is used when the screen resolution differs from the project settings.
The stretch mode ensures that the node is displayed as is in the adjusted gui scene, which might scale it non-uniformally.

### gui.ADJUST_ZOOM
*Type:* CONSTANT
Adjust mode is used when the screen resolution differs from the project settings.
The zoom mode ensures that the node fills its entire area and might make the node exceed it.

### gui.ANCHOR_BOTTOM
*Type:* CONSTANT
bottom y-anchor

### gui.ANCHOR_LEFT
*Type:* CONSTANT
left x-anchor

### gui.ANCHOR_NONE
*Type:* CONSTANT
no anchor

### gui.ANCHOR_RIGHT
*Type:* CONSTANT
right x-anchor

### gui.ANCHOR_TOP
*Type:* CONSTANT
top y-anchor

### gui.animate
*Type:* FUNCTION
This starts an animation of a node property according to the specified parameters.
If the node property is already being animated, that animation will be canceled and
replaced by the new one. Note however that several different node properties
can be animated simultaneously. Use gui.cancel_animation to stop the animation
before it has completed.
Composite properties of type vector3, vector4 or quaternion
also expose their sub-components (x, y, z and w).
You can address the components individually by suffixing the name with a dot '.'
and the name of the component.
For instance, "position.x" (the position x coordinate) or "color.w"
(the color alpha value).
If a complete_function (Lua function) is specified, that function will be called
when the animation has completed.
By starting a new animation in that function, several animations can be sequenced
together. See the examples below for more information.

**Parameters**

- `node` (node) - node to animate
- `property` (string | constant) - property to animate
<ul>
<li><code>"position"</code></li>
<li><code>"rotation"</code></li>
<li><code>"euler"</code></li>
<li><code>"scale"</code></li>
<li><code>"color"</code></li>
<li><code>"outline"</code></li>
<li><code>"shadow"</code></li>
<li><code>"size"</code></li>
<li><code>"fill_angle"</code> (pie)</li>
<li><code>"inner_radius"</code> (pie)</li>
<li><code>"leading"</code> (text)</li>
<li><code>"tracking"</code> (text)</li>
<li><code>"slice9"</code> (slice9)</li>
</ul>
The following property constants are defined equaling the corresponding property string names.
<ul>
<li><code>gui.PROP_POSITION</code></li>
<li><code>gui.PROP_ROTATION</code></li>
<li><code>gui.PROP_EULER</code></li>
<li><code>gui.PROP_SCALE</code></li>
<li><code>gui.PROP_COLOR</code></li>
<li><code>gui.PROP_OUTLINE</code></li>
<li><code>gui.PROP_SHADOW</code></li>
<li><code>gui.PROP_SIZE</code></li>
<li><code>gui.PROP_FILL_ANGLE</code></li>
<li><code>gui.PROP_INNER_RADIUS</code></li>
<li><code>gui.PROP_LEADING</code></li>
<li><code>gui.PROP_TRACKING</code></li>
<li><code>gui.PROP_SLICE9</code></li>
</ul>
- `to` (number | vector3 | vector4 | quaternion) - target property value
- `easing` (constant | vector) - easing to use during animation.
     Either specify one of the <code>gui.EASING_*</code> constants or provide a
     <span class="type">vector</span> with a custom curve. See the <a href="/manuals/animation#_easing">animation guide</a> for more information.
- `duration` (number) - duration of the animation in seconds.
- `delay` (number) (optional) - delay before the animation starts in seconds.
- `complete_function` (function(self, node)) (optional) - function to call when the
     animation has completed
- `playback` (constant) (optional) - playback mode
<ul>
<li><code>gui.PLAYBACK_ONCE_FORWARD</code></li>
<li><code>gui.PLAYBACK_ONCE_BACKWARD</code></li>
<li><code>gui.PLAYBACK_ONCE_PINGPONG</code></li>
<li><code>gui.PLAYBACK_LOOP_FORWARD</code></li>
<li><code>gui.PLAYBACK_LOOP_BACKWARD</code></li>
<li><code>gui.PLAYBACK_LOOP_PINGPONG</code></li>
</ul>

**Examples**

How to start a simple color animation, where the node fades in to white during 0.5 seconds:
```
gui.set_color(node, vmath.vector4(0, 0, 0, 0)) -- node is fully transparent
gui.animate(node, gui.PROP_COLOR, vmath.vector4(1, 1, 1, 1), gui.EASING_INOUTQUAD, 0.5) -- start animation

```

How to start a sequenced animation where the node fades in to white during 0.5 seconds, stays visible for 2 seconds and then fades out:
```
local function on_animation_done(self, node)
    -- fade out node, but wait 2 seconds before the animation starts
    gui.animate(node, gui.PROP_COLOR, vmath.vector4(0, 0, 0, 0), gui.EASING_OUTQUAD, 0.5, 2.0)
end

function init(self)
    -- fetch the node we want to animate
    local my_node = gui.get_node("my_node")
    -- node is initially set to fully transparent
    gui.set_color(my_node, vmath.vector4(0, 0, 0, 0))
    -- animate the node immediately and call on_animation_done when the animation has completed
    gui.animate(my_node, gui.PROP_COLOR, vmath.vector4(1, 1, 1, 1), gui.EASING_INOUTQUAD, 0.5, 0.0, on_animation_done)
end

```

How to animate a node's y position using a crazy custom easing curve:
```
function init(self)
    local values = { 0, 0, 0, 0, 0, 0, 0, 0,
                     1, 1, 1, 1, 1, 1, 1, 1,
                     0, 0, 0, 0, 0, 0, 0, 0,
                     1, 1, 1, 1, 1, 1, 1, 1,
                     0, 0, 0, 0, 0, 0, 0, 0,
                     1, 1, 1, 1, 1, 1, 1, 1,
                     0, 0, 0, 0, 0, 0, 0, 0,
                     1, 1, 1, 1, 1, 1, 1, 1 }
    local vec = vmath.vector(values)
    local node = gui.get_node("box")
    gui.animate(node, "position.y", 100, vec, 4.0, 0, nil, gui.PLAYBACK_LOOP_PINGPONG)
end

```

### gui.BLEND_ADD
*Type:* CONSTANT
additive blending

### gui.BLEND_ADD_ALPHA
*Type:* CONSTANT
additive alpha blending

### gui.BLEND_ALPHA
*Type:* CONSTANT
alpha blending

### gui.BLEND_MULT
*Type:* CONSTANT
multiply blending

### gui.BLEND_SCREEN
*Type:* CONSTANT
screen blending

### gui.cancel_animations
*Type:* FUNCTION
If one or more animations of the specified node is currently running (started by gui.animate), they will immediately be canceled.

**Parameters**

- `node` (node) - node that should have its animation canceled
- `property` (nil | string | constant) (optional) - optional property for which the animation should be canceled
<ul>
<li><code>"position"</code></li>
<li><code>"rotation"</code></li>
<li><code>"euler"</code></li>
<li><code>"scale"</code></li>
<li><code>"color"</code></li>
<li><code>"outline"</code></li>
<li><code>"shadow"</code></li>
<li><code>"size"</code></li>
<li><code>"fill_angle"</code> (pie)</li>
<li><code>"inner_radius"</code> (pie)</li>
<li><code>"leading"</code> (text)</li>
<li><code>"tracking"</code> (text)</li>
<li><code>"slice9"</code> (slice9)</li>
</ul>

**Examples**

Start an animation of the position property of a node, then cancel parts of
the animation:
```
local node = gui.get_node("my_node")
-- animate to new position
local pos = vmath.vector3(100, 100, 0)
gui.animate(node, "position", pos, go.EASING_LINEAR, 2)
...
-- cancel animation of the x component.
gui.cancel_animations(node, "position.x")

```

Cancels all property animations on a node in a single call:
```
local node = gui.get_node("my_node")
-- animate to new position and scale
gui.animate(node, "position", vmath.vector3(100, 100, 0), go.EASING_LINEAR, 5)
gui.animate(node, "scale", vmath.vector3(0.5), go.EASING_LINEAR, 5)
...
-- cancel positioning and scaling at once
gui.cancel_animations(node)

```

### gui.cancel_flipbook
*Type:* FUNCTION
Cancels any running flipbook animation on the specified node.

**Parameters**

- `node` (node) - node cancel flipbook animation for

**Examples**

```
local node = gui.get_node("anim_node")
gui.cancel_flipbook(node)

```

### gui.CLIPPING_MODE_NONE
*Type:* CONSTANT
clipping mode none

### gui.CLIPPING_MODE_STENCIL
*Type:* CONSTANT
clipping mode stencil

### gui.clone
*Type:* FUNCTION
Make a clone instance of a node. The cloned node will be identical to the
original node, except the id which is generated as the string "node" plus
a sequential unsigned integer value.
This function does not clone the supplied node's children nodes.
Use gui.clone_tree for that purpose.

**Parameters**

- `node` (node) - node to clone

**Returns**

- `clone` (node) - the cloned node

### gui.clone_tree
*Type:* FUNCTION
Make a clone instance of a node and all its children.
Use gui.clone to clone a node excluding its children.

**Parameters**

- `node` (node) - root node to clone

**Returns**

- `clones` (table) - a table mapping node ids to the corresponding cloned nodes

### gui.delete_node
*Type:* FUNCTION
Deletes the specified node. Any child nodes of the specified node will be
recursively deleted.

**Parameters**

- `node` (node) - node to delete

**Examples**

Delete a particular node and any child nodes it might have:
```
local node = gui.get_node("my_node")
gui.delete_node(node)

```

### gui.delete_texture
*Type:* FUNCTION
Delete a dynamically created texture.

**Parameters**

- `texture` (string | hash) - texture id

**Examples**

```
function init(self)
     -- Create a texture.
     if gui.new_texture("temp_tx", 10, 10, "rgb", string.rep('\0', 10 * 10 * 3)) then
         -- Do something with the texture.
         ...

         -- Delete the texture
         gui.delete_texture("temp_tx")
     end
end

```

### gui.EASING_INBACK
*Type:* CONSTANT
in-back

### gui.EASING_INBOUNCE
*Type:* CONSTANT
in-bounce

### gui.EASING_INCIRC
*Type:* CONSTANT
in-circlic

### gui.EASING_INCUBIC
*Type:* CONSTANT
in-cubic

### gui.EASING_INELASTIC
*Type:* CONSTANT
in-elastic

### gui.EASING_INEXPO
*Type:* CONSTANT
in-exponential

### gui.EASING_INOUTBACK
*Type:* CONSTANT
in-out-back

### gui.EASING_INOUTBOUNCE
*Type:* CONSTANT
in-out-bounce

### gui.EASING_INOUTCIRC
*Type:* CONSTANT
in-out-circlic

### gui.EASING_INOUTCUBIC
*Type:* CONSTANT
in-out-cubic

### gui.EASING_INOUTELASTIC
*Type:* CONSTANT
in-out-elastic

### gui.EASING_INOUTEXPO
*Type:* CONSTANT
in-out-exponential

### gui.EASING_INOUTQUAD
*Type:* CONSTANT
in-out-quadratic

### gui.EASING_INOUTQUART
*Type:* CONSTANT
in-out-quartic

### gui.EASING_INOUTQUINT
*Type:* CONSTANT
in-out-quintic

### gui.EASING_INOUTSINE
*Type:* CONSTANT
in-out-sine

### gui.EASING_INQUAD
*Type:* CONSTANT
in-quadratic

### gui.EASING_INQUART
*Type:* CONSTANT
in-quartic

### gui.EASING_INQUINT
*Type:* CONSTANT
in-quintic

### gui.EASING_INSINE
*Type:* CONSTANT
in-sine

### gui.EASING_LINEAR
*Type:* CONSTANT
linear interpolation

### gui.EASING_OUTBACK
*Type:* CONSTANT
out-back

### gui.EASING_OUTBOUNCE
*Type:* CONSTANT
out-bounce

### gui.EASING_OUTCIRC
*Type:* CONSTANT
out-circlic

### gui.EASING_OUTCUBIC
*Type:* CONSTANT
out-cubic

### gui.EASING_OUTELASTIC
*Type:* CONSTANT
out-elastic

### gui.EASING_OUTEXPO
*Type:* CONSTANT
out-exponential

### gui.EASING_OUTINBACK
*Type:* CONSTANT
out-in-back

### gui.EASING_OUTINBOUNCE
*Type:* CONSTANT
out-in-bounce

### gui.EASING_OUTINCIRC
*Type:* CONSTANT
out-in-circlic

### gui.EASING_OUTINCUBIC
*Type:* CONSTANT
out-in-cubic

### gui.EASING_OUTINELASTIC
*Type:* CONSTANT
out-in-elastic

### gui.EASING_OUTINEXPO
*Type:* CONSTANT
out-in-exponential

### gui.EASING_OUTINQUAD
*Type:* CONSTANT
out-in-quadratic

### gui.EASING_OUTINQUART
*Type:* CONSTANT
out-in-quartic

### gui.EASING_OUTINQUINT
*Type:* CONSTANT
out-in-quintic

### gui.EASING_OUTINSINE
*Type:* CONSTANT
out-in-sine

### gui.EASING_OUTQUAD
*Type:* CONSTANT
out-quadratic

### gui.EASING_OUTQUART
*Type:* CONSTANT
out-quartic

### gui.EASING_OUTQUINT
*Type:* CONSTANT
out-quintic

### gui.EASING_OUTSINE
*Type:* CONSTANT
out-sine

### gui.get
*Type:* FUNCTION
Instead of using specific getters such as gui.get_position or gui.get_scale,
you can use gui.get instead and supply the property as a string or a hash.
While this function is similar to go.get, there are a few more restrictions
when operating in the gui namespace. Most notably, only these explicitly named properties are supported:

"position"
"rotation"
"euler"
"scale"
"color"
"outline"
"shadow"
"size"
"fill_angle" (pie)
"inner_radius" (pie)
"leading" (text)
"tracking" (text)
"slice9" (slice9)

The value returned will either be a vmath.vector4 or a single number, i.e getting the "position"
property will return a vec4 while getting the "position.x" property will return a single value.
You can also use this function to get material constants.

**Parameters**

- `node` (node) - node to get the property for
- `property` (string | hash | constant) - the property to retrieve
- `options` (table) (optional) - optional options table (only applicable for material constants)
- <code>index</code> <span class="type">number</span> index into array property (1 based)

**Examples**

Get properties on existing nodes:
```
local node = gui.get_node("my_box_node")
local node_position = gui.get(node, "position")

```

### gui.get_adjust_mode
*Type:* FUNCTION
Returns the adjust mode of a node.
The adjust mode defines how the node will adjust itself to screen
resolutions that differs from the one in the project settings.

**Parameters**

- `node` (node) - node from which to get the adjust mode (node)

**Returns**

- `adjust_mode` (constant) - the current adjust mode
<ul>
<li><code>gui.ADJUST_FIT</code></li>
<li><code>gui.ADJUST_ZOOM</code></li>
<li><code>gui.ADJUST_STRETCH</code></li>
</ul>

### gui.get_alpha
*Type:* FUNCTION
gets the node alpha

**Parameters**

- `node` (node) - node from which to get alpha

**Returns**

- `alpha` (number) - alpha

### gui.get_blend_mode
*Type:* FUNCTION
Returns the blend mode of a node.
Blend mode defines how the node will be blended with the background.

**Parameters**

- `node` (node) - node from which to get the blend mode

**Returns**

- `blend_mode` (constant) - blend mode
<ul>
<li><code>gui.BLEND_ALPHA</code></li>
<li><code>gui.BLEND_ADD</code></li>
<li><code>gui.BLEND_ADD_ALPHA</code></li>
<li><code>gui.BLEND_MULT</code></li>
<li><code>gui.BLEND_SCREEN</code></li>
</ul>

### gui.get_clipping_inverted
*Type:* FUNCTION
If node is set as an inverted clipping node, it will clip anything inside as opposed to outside.

**Parameters**

- `node` (node) - node from which to get the clipping inverted state

**Returns**

- `inverted` (boolean) - <code>true</code> or <code>false</code>

### gui.get_clipping_mode
*Type:* FUNCTION
Clipping mode defines how the node will clip it's children nodes

**Parameters**

- `node` (node) - node from which to get the clipping mode

**Returns**

- `clipping_mode` (constant) - clipping mode
<ul>
  <li><code>gui.CLIPPING_MODE_NONE</code></li>
  <li><code>gui.CLIPPING_MODE_STENCIL</code></li>
</ul>

### gui.get_clipping_visible
*Type:* FUNCTION
If node is set as visible clipping node, it will be shown as well as clipping. Otherwise, it will only clip but not show visually.

**Parameters**

- `node` (node) - node from which to get the clipping visibility state

**Returns**

- `visible` (boolean) - <code>true</code> or <code>false</code>

### gui.get_color
*Type:* FUNCTION
Returns the color of the supplied node. The components
of the returned vector4 contains the color channel values:

Component
Color value

x
Red value

y
Green value

z
Blue value

w
Alpha value

**Parameters**

- `node` (node) - node to get the color from

**Returns**

- `color` (vector4) - node color

### gui.get_euler
*Type:* FUNCTION
Returns the rotation of the supplied node.
The rotation is expressed in degree Euler angles.

**Parameters**

- `node` (node) - node to get the rotation from

**Returns**

- `rotation` (vector3) - node rotation

### gui.get_fill_angle
*Type:* FUNCTION
Returns the sector angle of a pie node.

**Parameters**

- `node` (node) - node from which to get the fill angle

**Returns**

- `angle` (number) - sector angle

### gui.get_flipbook
*Type:* FUNCTION
Get node flipbook animation.

**Parameters**

- `node` (node) - node to get flipbook animation from

**Returns**

- `animation` (hash) - animation id

### gui.get_flipbook_cursor
*Type:* FUNCTION
This is only useful nodes with flipbook animations. Gets the normalized cursor of the flipbook animation on a node.

**Parameters**

- `node` (node) - node to get the cursor for (node)

**Returns**

- `cursor` (number) - cursor value

### gui.get_flipbook_playback_rate
*Type:* FUNCTION
This is only useful nodes with flipbook animations. Gets the playback rate of the flipbook animation on a node.

**Parameters**

- `node` (node) - node to set the cursor for

**Returns**

- `rate` (number) - playback rate

### gui.get_font
*Type:* FUNCTION
This is only useful for text nodes. The font must be mapped to the gui scene in the gui editor.

**Parameters**

- `node` (node) - node from which to get the font

**Returns**

- `font` (hash) - font id

### gui.get_font_resource
*Type:* FUNCTION
This is only useful for text nodes. The font must be mapped to the gui scene in the gui editor.

**Parameters**

- `font_name` (hash | string) - font of which to get the path hash

**Returns**

- `hash` (hash) - path hash to resource

**Examples**

Get the text metrics for a text
```
function init(self)
  local node = gui.get_node("name")
  local font_name = gui.get_font(node)
  local font = gui.get_font_resource(font_name)
  local metrics = resource.get_text_metrics(font, "The quick brown fox\n jumps over the lazy dog")
end

```

### gui.get_height
*Type:* FUNCTION
Returns the scene height.

**Returns**

- `height` (number) - scene height

### gui.get_id
*Type:* FUNCTION
Retrieves the id of the specified node.

**Parameters**

- `node` (node) - the node to retrieve the id from

**Returns**

- `id` (hash) - the id of the node

**Examples**

Gets the id of a node:
```
local node = gui.get_node("my_node")

local id = gui.get_id(node)
print(id) --> hash: [my_node]

```

### gui.get_index
*Type:* FUNCTION
Retrieve the index of the specified node among its siblings.
The index defines the order in which a node appear in a GUI scene.
Higher index means the node is drawn on top of lower indexed nodes.

**Parameters**

- `node` (node) - the node to retrieve the id from

**Returns**

- `index` (number) - the index of the node

**Examples**

Compare the index order of two sibling nodes:
```
local node1 = gui.get_node("my_node_1")
local node2 = gui.get_node("my_node_2")

if gui.get_index(node1) < gui.get_index(node2) then
    -- node1 is drawn below node2
else
    -- node2 is drawn below node1
end

```

### gui.get_inherit_alpha
*Type:* FUNCTION
gets the node inherit alpha state

**Parameters**

- `node` (node) - node from which to get the inherit alpha state

**Returns**

- `inherit_alpha` (boolean) - <code>true</code> or <code>false</code>

### gui.get_inner_radius
*Type:* FUNCTION
Returns the inner radius of a pie node.
The radius is defined along the x-axis.

**Parameters**

- `node` (node) - node from where to get the inner radius

**Returns**

- `radius` (number) - inner radius

### gui.get_layer
*Type:* FUNCTION
The layer must be mapped to the gui scene in the gui editor.

**Parameters**

- `node` (node) - node from which to get the layer

**Returns**

- `layer` (hash) - layer id

### gui.get_layout
*Type:* FUNCTION
gets the scene current layout

**Returns**

- `layout` (hash) - layout id

### gui.get_layouts
*Type:* FUNCTION
Returns a table mapping each layout id hash to a vector3(width, height, 0). For the default layout,
the current scene resolution is returned. If a layout name is not present in the Display Profiles (or when
no display profiles are assigned), the width/height pair is 0.

**Returns**

- `return` (table) - layout_id_hash -&gt; vmath.vector3(width, height, 0)

### gui.get_leading
*Type:* FUNCTION
Returns the leading value for a text node.

**Parameters**

- `node` (node) - node from where to get the leading

**Returns**

- `leading` (number) - leading scaling value (default=1)

### gui.get_line_break
*Type:* FUNCTION
Returns whether a text node is in line-break mode or not.
This is only useful for text nodes.

**Parameters**

- `node` (node) - node from which to get the line-break for

**Returns**

- `line_break` (boolean) - <code>true</code> or <code>false</code>

### gui.get_material
*Type:* FUNCTION
Returns the material of a node.
The material must be mapped to the gui scene in the gui editor.

**Parameters**

- `node` (node) - node to get the material for

**Returns**

- `materal` (hash) - material id

**Examples**

Getting the material for a node, and assign it to another node:
```
local node1 = gui.get_node("my_node")
local node2 = gui.get_node("other_node")
local node1_material = gui.get_material(node1)
gui.set_material(node2, node1_material)

```

### gui.get_node
*Type:* FUNCTION
Retrieves the node with the specified id.

**Parameters**

- `id` (string | hash) - id of the node to retrieve

**Returns**

- `instance` (node) - a new node instance

**Examples**

Gets a node by id and change its color:
```
local node = gui.get_node("my_node")
local red = vmath.vector4(1.0, 0.0, 0.0, 1.0)
gui.set_color(node, red)

```

### gui.get_outer_bounds
*Type:* FUNCTION
Returns the outer bounds mode for a pie node.

**Parameters**

- `node` (node) - node from where to get the outer bounds mode

**Returns**

- `bounds_mode` (constant) - the outer bounds mode of the pie node:
<ul>
<li><code>gui.PIEBOUNDS_RECTANGLE</code></li>
<li><code>gui.PIEBOUNDS_ELLIPSE</code></li>
</ul>

### gui.get_outline
*Type:* FUNCTION
Returns the outline color of the supplied node.
See gui.get_color for info how vectors encode color values.

**Parameters**

- `node` (node) - node to get the outline color from

**Returns**

- `color` (vector4) - outline color

### gui.get_parent
*Type:* FUNCTION
Returns the parent node of the specified node.
If the supplied node does not have a parent, nil is returned.

**Parameters**

- `node` (node) - the node from which to retrieve its parent

**Returns**

- `parent` (node | nil) - parent instance or <code>nil</code>

### gui.get_particlefx
*Type:* FUNCTION
Get the paricle fx for a gui node

**Parameters**

- `node` (node) - node to get particle fx for

**Returns**

- `particlefx` (hash) - particle fx id

### gui.get_perimeter_vertices
*Type:* FUNCTION
Returns the number of generated vertices around the perimeter
of a pie node.

**Parameters**

- `node` (node) - pie node

**Returns**

- `vertices` (number) - vertex count

### gui.get_pivot
*Type:* FUNCTION
The pivot specifies how the node is drawn and rotated from its position.

**Parameters**

- `node` (node) - node to get pivot from

**Returns**

- `pivot` (constant) - pivot constant
<ul>
  <li><code>gui.PIVOT_CENTER</code></li>
  <li><code>gui.PIVOT_N</code></li>
  <li><code>gui.PIVOT_NE</code></li>
  <li><code>gui.PIVOT_E</code></li>
  <li><code>gui.PIVOT_SE</code></li>
  <li><code>gui.PIVOT_S</code></li>
  <li><code>gui.PIVOT_SW</code></li>
  <li><code>gui.PIVOT_W</code></li>
  <li><code>gui.PIVOT_NW</code></li>
</ul>

### gui.get_position
*Type:* FUNCTION
Returns the position of the supplied node.

**Parameters**

- `node` (node) - node to get the position from

**Returns**

- `position` (vector3) - node position

### gui.get_rotation
*Type:* FUNCTION
Returns the rotation of the supplied node.
The rotation is expressed as a quaternion

**Parameters**

- `node` (node) - node to get the rotation from

**Returns**

- `rotation` (quaternion) - node rotation

### gui.get_scale
*Type:* FUNCTION
Returns the scale of the supplied node.

**Parameters**

- `node` (node) - node to get the scale from

**Returns**

- `scale` (vector3) - node scale

### gui.get_screen_position
*Type:* FUNCTION
Returns the screen position of the supplied node. This function returns the
calculated transformed position of the node, taking into account any parent node
transforms.

**Parameters**

- `node` (node) - node to get the screen position from

**Returns**

- `position` (vector3) - node screen position

### gui.get_shadow
*Type:* FUNCTION
Returns the shadow color of the supplied node.
See gui.get_color for info how vectors encode color values.

**Parameters**

- `node` (node) - node to get the shadow color from

**Returns**

- `color` (vector4) - node shadow color

### gui.get_size
*Type:* FUNCTION
Returns the size of the supplied node.

**Parameters**

- `node` (node) - node to get the size from

**Returns**

- `size` (vector3) - node size

### gui.get_size_mode
*Type:* FUNCTION
Returns the size of a node.
The size mode defines how the node will adjust itself in size. Automatic
size mode alters the node size based on the node's content. Automatic size
mode works for Box nodes and Pie nodes which will both adjust their size
to match the assigned image. Particle fx and Text nodes will ignore
any size mode setting.

**Parameters**

- `node` (node) - node from which to get the size mode (node)

**Returns**

- `size_mode` (constant) - the current size mode
<ul>
<li><code>gui.SIZE_MODE_MANUAL</code></li>
<li><code>gui.SIZE_MODE_AUTO</code></li>
</ul>

### gui.get_slice9
*Type:* FUNCTION
Returns the slice9 configuration values for the node.

**Parameters**

- `node` (node) - node to manipulate

**Returns**

- `values` (vector4) - configuration values

### gui.get_text
*Type:* FUNCTION
Returns the text value of a text node. This is only useful for text nodes.

**Parameters**

- `node` (node) - node from which to get the text

**Returns**

- `text` (string) - text value

### gui.get_texture
*Type:* FUNCTION
Returns the texture of a node.
This is currently only useful for box or pie nodes.
The texture must be mapped to the gui scene in the gui editor.

**Parameters**

- `node` (node) - node to get texture from

**Returns**

- `texture` (hash) - texture id

### gui.get_tracking
*Type:* FUNCTION
Returns the tracking value of a text node.

**Parameters**

- `node` (node) - node from where to get the tracking

**Returns**

- `tracking` (number) - tracking scaling number (default=0)

### gui.get_tree
*Type:* FUNCTION
Get a node and all its children as a Lua table.

**Parameters**

- `node` (node) - root node to get node tree from

**Returns**

- `clones` (table) - a table mapping node ids to the corresponding nodes

### gui.get_type
*Type:* FUNCTION
gets the node type

**Parameters**

- `node` (node) - node from which to get the type

**Returns**

- `type` (constant) - type
<ul>
<li><code>gui.TYPE_BOX</code></li>
<li><code>gui.TYPE_TEXT</code></li>
<li><code>gui.TYPE_PIE</code></li>
<li><code>gui.TYPE_PARTICLEFX</code></li>
<li><code>gui.TYPE_CUSTOM</code></li>
</ul>
- `subtype` (number | nil) - id of the custom type

### gui.get_visible
*Type:* FUNCTION
Returns true if a node is visible and false if it's not.
Invisible nodes are not rendered.

**Parameters**

- `node` (node) - node to query

**Returns**

- `visible` (boolean) - whether the node is visible or not

### gui.get_width
*Type:* FUNCTION
Returns the scene width.

**Returns**

- `width` (number) - scene width

### gui.get_xanchor
*Type:* FUNCTION
The x-anchor specifies how the node is moved when the game is run in a different resolution.

**Parameters**

- `node` (node) - node to get x-anchor from

**Returns**

- `anchor` (constant) - anchor constant
<ul>
<li><code>gui.ANCHOR_NONE</code></li>
<li><code>gui.ANCHOR_LEFT</code></li>
<li><code>gui.ANCHOR_RIGHT</code></li>
</ul>

### gui.get_yanchor
*Type:* FUNCTION
The y-anchor specifies how the node is moved when the game is run in a different resolution.

**Parameters**

- `node` (node) - node to get y-anchor from

**Returns**

- `anchor` (constant) - anchor constant
<ul>
<li><code>gui.ANCHOR_NONE</code></li>
<li><code>gui.ANCHOR_TOP</code></li>
<li><code>gui.ANCHOR_BOTTOM</code></li>
</ul>

### gui.hide_keyboard
*Type:* FUNCTION
Hides the on-display touch keyboard on the device.

### gui.is_enabled
*Type:* FUNCTION
Returns true if a node is enabled and false if it's not.
Disabled nodes are not rendered and animations acting on them are not evaluated.

**Parameters**

- `node` (node) - node to query
- `recursive` (boolean) (optional) - check hierarchy recursively

**Returns**

- `enabled` (boolean) - whether the node is enabled or not

### gui.KEYBOARD_TYPE_DEFAULT
*Type:* CONSTANT
default keyboard

### gui.KEYBOARD_TYPE_EMAIL
*Type:* CONSTANT
email keyboard

### gui.KEYBOARD_TYPE_NUMBER_PAD
*Type:* CONSTANT
number input keyboard

### gui.KEYBOARD_TYPE_PASSWORD
*Type:* CONSTANT
password keyboard

### gui.move_above
*Type:* FUNCTION
Alters the ordering of the two supplied nodes by moving the first node
above the second.
If the second argument is nil the first node is moved to the top.

**Parameters**

- `node` (node) - to move
- `reference` (node | nil) - reference node above which the first node should be moved

### gui.move_below
*Type:* FUNCTION
Alters the ordering of the two supplied nodes by moving the first node
below the second.
If the second argument is nil the first node is moved to the bottom.

**Parameters**

- `node` (node) - to move
- `reference` (node | nil) - reference node below which the first node should be moved

### gui.new_box_node
*Type:* FUNCTION
Dynamically create a new box node.

**Parameters**

- `pos` (vector3 | vector4) - node position
- `size` (vector3) - node size

**Returns**

- `node` (node) - new box node

### gui.new_particlefx_node
*Type:* FUNCTION
Dynamically create a particle fx node.

**Parameters**

- `pos` (vector3 | vector4) - node position
- `particlefx` (hash | string) - particle fx resource name

**Returns**

- `node` (node) - new particle fx node

### gui.new_pie_node
*Type:* FUNCTION
Dynamically create a new pie node.

**Parameters**

- `pos` (vector3 | vector4) - node position
- `size` (vector3) - node size

**Returns**

- `node` (node) - new pie node

### gui.new_text_node
*Type:* FUNCTION
Dynamically create a new text node.

**Parameters**

- `pos` (vector3 | vector4) - node position
- `text` (string) - node text

**Returns**

- `node` (node) - new text node

### gui.new_texture
*Type:* FUNCTION
Dynamically create a new texture.

**Parameters**

- `texture_id` (string | hash) - texture id
- `width` (number) - texture width
- `height` (number) - texture height
- `type` (string | constant) - texture type
<ul>
<li><code>"rgb"</code> - RGB</li></li>
<li><code>"rgba"</code> - RGBA</li></li>
<li><code>"l"</code> - LUMINANCE</li></li>
<li><code>"astc"</code> - ASTC compressed format</li></li>
</ul>
- `buffer` (string) - texture data
- `flip` (boolean) - flip texture vertically

**Returns**

- `success` (boolean) - texture creation was successful
- `code` (number) - one of the gui.RESULT_* codes if unsuccessful

**Examples**

How to create a texture and apply it to a new box node:
```
function init(self)
     local w = 200
     local h = 300

     -- A nice orange. String with the RGB values.
     local orange = string.char(0xff) .. string.char(0x80) .. string.char(0x10)

     -- Create the texture. Repeat the color string for each pixel.
     local ok, reason = gui.new_texture("orange_tx", w, h, "rgb", string.rep(orange, w * h))
     if ok then
         -- Create a box node and apply the texture to it.
         local n = gui.new_box_node(vmath.vector3(200, 200, 0), vmath.vector3(w, h, 0))
         gui.set_texture(n, "orange_tx")
     else
         -- Could not create texture for some reason...
         if reason == gui.RESULT_TEXTURE_ALREADY_EXISTS then
             ...
         else
             ...
         end
     end
end
```How to create a texture using .astc format

```lua
local path = "/assets/images/logo_4x4.astc"
local buffer = sys.load_resource(path)
local n = gui.new_box_node(pos, vmath.vector3(size, size, 0))
-- size is read from the .astc buffer
-- flip is not supported
gui.new_texture(path, 0, 0, "astc", buffer, false)
gui.set_texture(n, path)

```

### gui.pick_node
*Type:* FUNCTION
Tests whether a coordinate is within the bounding box of a
node.

**Parameters**

- `node` (node) - node to be tested for picking
- `x` (number) - x-coordinate (see <a href="#on_input">on_input</a> )
- `y` (number) - y-coordinate (see <a href="#on_input">on_input</a> )

**Returns**

- `pickable` (boolean) - pick result

### gui.PIEBOUNDS_ELLIPSE
*Type:* CONSTANT
elliptical pie node bounds

### gui.PIEBOUNDS_RECTANGLE
*Type:* CONSTANT
rectangular pie node bounds

### gui.PIVOT_CENTER
*Type:* CONSTANT
center pivot

### gui.PIVOT_E
*Type:* CONSTANT
east pivot

### gui.PIVOT_N
*Type:* CONSTANT
north pivot

### gui.PIVOT_NE
*Type:* CONSTANT
north-east pivot

### gui.PIVOT_NW
*Type:* CONSTANT
north-west pivot

### gui.PIVOT_S
*Type:* CONSTANT
south pivot

### gui.PIVOT_SE
*Type:* CONSTANT
south-east pivot

### gui.PIVOT_SW
*Type:* CONSTANT
south-west pivot

### gui.PIVOT_W
*Type:* CONSTANT
west pivot

### gui.play_flipbook
*Type:* FUNCTION
Play flipbook animation on a box or pie node.
The current node texture must contain the animation.
Use this function to set one-frame still images on the node.

**Parameters**

- `node` (node) - node to set animation for
- `animation` (string | hash) - animation id
- `complete_function` (function(self, node)) (optional) - optional function to call when the animation has completed
<dl>
<dt><code>self</code></dt>
<dd>
<span class="type">object</span> The current object.
</dd>
<dt><code>node</code></dt>
<dd>
<span class="type">node</span> The node that is animated.
</dd>
</dl>
- `play_properties` (table) (optional) - optional table with properties
<dl>
<dt><code>offset</code></dt>
<dd><span class="type">number</span> The normalized initial value of the animation cursor when the animation starts playing</dd>
<dt><code>playback_rate</code></dt>
<dd><span class="type">number</span> The rate with which the animation will be played. Must be positive</dd>
</dl>

**Examples**

Set the texture of a node to a flipbook animation from an atlas:
```
local function anim_callback(self, node)
    -- Take action after animation has played.
end

function init(self)
    -- Create a new node and set the texture to a flipbook animation
    local node = gui.get_node("button_node")
    gui.set_texture(node, "gui_sprites")
    gui.play_flipbook(node, "animated_button")
end

```

Set the texture of a node to an image from an atlas:
```
-- Create a new node and set the texture to a "button.png" from atlas
local node = gui.get_node("button_node")
gui.set_texture(node, "gui_sprites")
gui.play_flipbook(node, "button")

```

### gui.play_particlefx
*Type:* FUNCTION
Plays the paricle fx for a gui node

**Parameters**

- `node` (node) - node to play particle fx for
- `emitter_state_function` (function(self, node, emitter, state)) (optional) - optional callback function that will be called when an emitter attached to this particlefx changes state.
<dl>
<dt><code>self</code></dt>
<dd><span class="type">object</span> The current object</dd>
<dt><code>node</code></dt>
<dd><span class="type">hash</span> The particle fx node, or <code>nil</code> if the node was deleted</dd>
<dt><code>emitter</code></dt>
<dd><span class="type">hash</span> The id of the emitter</dd>
<dt><code>state</code></dt>
<dd><span class="type">constant</span> the new state of the emitter:</dd>
</dl>
<ul>
<li><code>particlefx.EMITTER_STATE_SLEEPING</code></li>
<li><code>particlefx.EMITTER_STATE_PRESPAWN</code></li>
<li><code>particlefx.EMITTER_STATE_SPAWNING</code></li>
<li><code>particlefx.EMITTER_STATE_POSTSPAWN</code></li>
</ul>

**Examples**

How to play a particle fx when a gui node is created.
The callback receives the gui node, the hash of the id
of the emitter, and the new state of the emitter as particlefx.EMITTER_STATE_.
```
local function emitter_state_change(self, node, emitter, state)
  if emitter == hash("exhaust") and state == particlefx.EMITTER_STATE_POSTSPAWN then
    -- exhaust is done spawning particles...
  end
end

function init(self)
    gui.play_particlefx(gui.get_node("particlefx"), emitter_state_change)
end

```

### gui.PLAYBACK_LOOP_BACKWARD
*Type:* CONSTANT
loop backward

### gui.PLAYBACK_LOOP_FORWARD
*Type:* CONSTANT
loop forward

### gui.PLAYBACK_LOOP_PINGPONG
*Type:* CONSTANT
ping pong loop

### gui.PLAYBACK_ONCE_BACKWARD
*Type:* CONSTANT
once backward

### gui.PLAYBACK_ONCE_FORWARD
*Type:* CONSTANT
once forward

### gui.PLAYBACK_ONCE_PINGPONG
*Type:* CONSTANT
once forward and then backward

### gui.PROP_COLOR
*Type:* CONSTANT
color property

### gui.PROP_EULER
*Type:* CONSTANT
euler property

### gui.PROP_FILL_ANGLE
*Type:* CONSTANT
fill_angle property

### gui.PROP_INNER_RADIUS
*Type:* CONSTANT
inner_radius property

### gui.PROP_LEADING
*Type:* CONSTANT
leading property

### gui.PROP_OUTLINE
*Type:* CONSTANT
outline color property

### gui.PROP_POSITION
*Type:* CONSTANT
position property

### gui.PROP_ROTATION
*Type:* CONSTANT
rotation property

### gui.PROP_SCALE
*Type:* CONSTANT
scale property

### gui.PROP_SHADOW
*Type:* CONSTANT
shadow color property

### gui.PROP_SIZE
*Type:* CONSTANT
size property

### gui.PROP_SLICE9
*Type:* CONSTANT
slice9 property

### gui.PROP_TRACKING
*Type:* CONSTANT
tracking property

### gui.reset_keyboard
*Type:* FUNCTION
Resets the input context of keyboard. This will clear marked text.

### gui.reset_material
*Type:* FUNCTION
Resets the node material to the material assigned in the gui scene.

**Parameters**

- `node` (node) - node to reset the material for

**Examples**

Resetting the material for a node:
```
local node = gui.get_node("my_node")
gui.reset_material(node)

```

### gui.reset_nodes
*Type:* FUNCTION
Resets all nodes in the current GUI scene to their initial state.
The reset only applies to static node loaded from the scene.
Nodes that are created dynamically from script are not affected.

### gui.RESULT_DATA_ERROR
*Type:* CONSTANT
The provided data is not in the expected format or is in some other way
incorrect, for instance the image data provided to gui.new_texture().

### gui.RESULT_OUT_OF_RESOURCES
*Type:* CONSTANT
The system is out of resources, for instance when trying to create a new
texture using gui.new_texture().

### gui.RESULT_TEXTURE_ALREADY_EXISTS
*Type:* CONSTANT
The texture id already exists when trying to use gui.new_texture().

### gui.SAFE_AREA_BOTH
*Type:* CONSTANT
Safe area mode that applies insets on all edges.

### gui.SAFE_AREA_LONG
*Type:* CONSTANT
Safe area mode that applies insets only on the long edges.

### gui.SAFE_AREA_NONE
*Type:* CONSTANT
Safe area mode that ignores safe area insets.

### gui.SAFE_AREA_SHORT
*Type:* CONSTANT
Safe area mode that applies insets only on the short edges.

### gui.screen_to_local
*Type:* FUNCTION
Convert the screen position to the local position of supplied node

**Parameters**

- `node` (node) - node used for getting local transformation matrix
- `screen_position` (vector3) - screen position

**Returns**

- `local_position` (vector3) - local position

### gui.set
*Type:* FUNCTION
Instead of using specific setteres such as gui.set_position or gui.set_scale,
you can use gui.set instead and supply the property as a string or a hash.
While this function is similar to go.get and go.set, there are a few more restrictions
when operating in the gui namespace. Most notably, only these named properties identifiers are supported:

"position"
"rotation"
"euler"
"scale"
"color"
"outline"
"shadow"
"size"
"fill_angle" (pie)
"inner_radius" (pie)
"leading" (text)
"tracking" (text)
"slice9" (slice9)

The value to set must either be a vmath.vector4, vmath.vector3, vmath.quat or a single number and depends on the property name you want to set.
I.e when setting the "position" property, you need to use a vmath.vector4 and when setting a single component of the property,
such as "position.x", you need to use a single value.
Note: When setting the rotation using the "rotation" property, you need to pass in a vmath.quat. This behaviour is different than from the gui.set_rotation function,
the intention is to move new functionality closer to go namespace so that migrating between gui and go is easier. To set the rotation using degrees instead,
use the "euler" property instead. The rotation and euler properties are linked, changing one of them will change the backing data of the other.
Similar to go.set, you can also use gui.set for setting material constant values on a node. E.g if a material has specified a constant called tint in
the .material file, you can use gui.set to set the value of that constant by calling gui.set(node, "tint", vmath.vec4(1,0,0,1)), or gui.set(node, "matrix", vmath.matrix4())
if the constant is a matrix. Arrays are also supported by gui.set - to set an array constant, you need to pass in an options table with the 'index' key set.
If the material has a constant array called 'tint_array' specified in the material, you can use gui.set(node, "tint_array", vmath.vec4(1,0,0,1), { index = 4}) to set the fourth array element to a different value.

**Parameters**

- `node` (node | url) - node to set the property for, or msg.url() to the gui itself
- `property` (string | hash | constant) - the property to set
- `value` (number | vector4 | vector3 | quaternion) - the property to set
- `options` (table) (optional) - optional options table (only applicable for material constants)
- <code>index</code> <span class="type">number</span> index into array property (1 based)
- <code>key</code> <span class="type">hash</span> name of internal property

**Examples**

Updates the position property on an existing node:
```
local node = gui.get_node("my_box_node")
local node_position = gui.get(node, "position")
gui.set(node, "position.x", node_position.x + 128)

```

Updates the rotation property on an existing node:
```
local node = gui.get_node("my_box_node")
gui.set(node, "rotation", vmath.quat_rotation_z(math.rad(45)))
-- this is equivalent to:
gui.set(node, "euler.z", 45)
-- or using the entire vector:
gui.set(node, "euler", vmath.vector3(0,0,45))
-- or using the set_rotation
gui.set_rotation(node, vmath.vector3(0,0,45))

```

Sets various material constants for a node:
```
local node = gui.get_node("my_box_node")
gui.set(node, "tint", vmath.vector4(1,0,0,1))
-- matrix4 is also supported
gui.set(node, "light_matrix", vmath.matrix4())
-- update a constant in an array at position 4. the array is specified in the shader as:
-- uniform vec4 tint_array[4]; // lua is 1 based, shader is 0 based
gui.set(node, "tint_array", vmath.vector4(1,0,0,1), { index = 4 })
-- update a matrix constant in an array at position 4. the array is specified in the shader as:
-- uniform mat4 light_matrix_array[4];
gui.set(node, "light_matrix_array", vmath.matrix4(), { index = 4 })
-- update a sub-element in a constant
gui.set(node, "tint.x", 1)
-- update a sub-element in an array constant at position 4
gui.set(node, "tint_array.x", 1, {index = 4})

```

Set a named property
```
function on_message(self, message_id, message, sender)
   if message_id == hash("set_font") then
       gui.set(msg.url(), "fonts", message.font, {key = "my_font_name"})
       gui.set_font(gui.get_node("text"), "my_font_name")
   elseif message_id == hash("set_texture") then
       gui.set(msg.url(), "textures", message.texture, {key = "my_texture"})
       gui.set_texture(gui.get_node("box"), "my_texture")
       gui.play_flipbook(gui.get_node("box"), "logo_256")
   end
end

```

### gui.set_adjust_mode
*Type:* FUNCTION
Sets the adjust mode on a node.
The adjust mode defines how the node will adjust itself to screen
resolutions that differs from the one in the project settings.

**Parameters**

- `node` (node) - node to set adjust mode for
- `adjust_mode` (constant) - adjust mode to set
<ul>
<li><code>gui.ADJUST_FIT</code></li>
<li><code>gui.ADJUST_ZOOM</code></li>
<li><code>gui.ADJUST_STRETCH</code></li>
</ul>

### gui.set_alpha
*Type:* FUNCTION
sets the node alpha

**Parameters**

- `node` (node) - node for which to set alpha
- `alpha` (number) - 0..1 alpha color

### gui.set_blend_mode
*Type:* FUNCTION
Set the blend mode of a node.
Blend mode defines how the node will be blended with the background.

**Parameters**

- `node` (node) - node to set blend mode for
- `blend_mode` (constant) - blend mode to set
<ul>
<li><code>gui.BLEND_ALPHA</code></li>
<li><code>gui.BLEND_ADD</code></li>
<li><code>gui.BLEND_ADD_ALPHA</code></li>
<li><code>gui.BLEND_MULT</code></li>
<li><code>gui.BLEND_SCREEN</code></li>
</ul>

### gui.set_clipping_inverted
*Type:* FUNCTION
If node is set as an inverted clipping node, it will clip anything inside as opposed to outside.

**Parameters**

- `node` (node) - node to set clipping inverted state for
- `inverted` (boolean) - <code>true</code> or <code>false</code>

### gui.set_clipping_mode
*Type:* FUNCTION
Clipping mode defines how the node will clip it's children nodes

**Parameters**

- `node` (node) - node to set clipping mode for
- `clipping_mode` (constant) - clipping mode to set
<ul>
  <li><code>gui.CLIPPING_MODE_NONE</code></li>
  <li><code>gui.CLIPPING_MODE_STENCIL</code></li>
</ul>

### gui.set_clipping_visible
*Type:* FUNCTION
If node is set as an visible clipping node, it will be shown as well as clipping. Otherwise, it will only clip but not show visually.

**Parameters**

- `node` (node) - node to set clipping visibility for
- `visible` (boolean) - <code>true</code> or <code>false</code>

### gui.set_color
*Type:* FUNCTION
Sets the color of the supplied node. The components
of the supplied vector3 or vector4 should contain the color channel values:

Component
Color value

x
Red value

y
Green value

z
Blue value

w vector4
Alpha value

**Parameters**

- `node` (node) - node to set the color for
- `color` (vector3 | vector4) - new color

### gui.set_enabled
*Type:* FUNCTION
Sets a node to the disabled or enabled state.
Disabled nodes are not rendered and animations acting on them are not evaluated.

**Parameters**

- `node` (node) - node to be enabled/disabled
- `enabled` (boolean) - whether the node should be enabled or not

### gui.set_euler
*Type:* FUNCTION
Sets the rotation of the supplied node.
The rotation is expressed in degree Euler angles.

**Parameters**

- `node` (node) - node to set the rotation for
- `rotation` (vector3 | vector4) - new rotation

### gui.set_fill_angle
*Type:* FUNCTION
Set the sector angle of a pie node.

**Parameters**

- `node` (node) - node to set the fill angle for
- `angle` (number) - sector angle

### gui.set_flipbook_cursor
*Type:* FUNCTION
This is only useful nodes with flipbook animations. The cursor is normalized.

**Parameters**

- `node` (node) - node to set the cursor for
- `cursor` (number) - cursor value

### gui.set_flipbook_playback_rate
*Type:* FUNCTION
This is only useful nodes with flipbook animations. Sets the playback rate of the flipbook animation on a node. Must be positive.

**Parameters**

- `node` (node) - node to set the cursor for
- `playback_rate` (number) - playback rate

### gui.set_font
*Type:* FUNCTION
This is only useful for text nodes.
The font must be mapped to the gui scene in the gui editor.

**Parameters**

- `node` (node) - node for which to set the font
- `font` (string | hash) - font id

### gui.set_id
*Type:* FUNCTION
Set the id of the specicied node to a new value.
Nodes created with the gui.new_*_node() functions get
an empty id. This function allows you to give dynamically
created nodes an id.
 No checking is done on the uniqueness of supplied ids.
It is up to you to make sure you use unique ids.

**Parameters**

- `node` (node) - node to set the id for
- `id` (string | hash) - id to set

**Examples**

Create a new node and set its id:
```
local pos = vmath.vector3(100, 100, 0)
local size = vmath.vector3(100, 100, 0)
local node = gui.new_box_node(pos, size)
gui.set_id(node, "my_new_node")

```

### gui.set_inherit_alpha
*Type:* FUNCTION
sets the node inherit alpha state

**Parameters**

- `node` (node) - node from which to set the inherit alpha state
- `inherit_alpha` (boolean) - <code>true</code> or <code>false</code>

### gui.set_inner_radius
*Type:* FUNCTION
Sets the inner radius of a pie node.
The radius is defined along the x-axis.

**Parameters**

- `node` (node) - node to set the inner radius for
- `radius` (number) - inner radius

### gui.set_layer
*Type:* FUNCTION
The layer must be mapped to the gui scene in the gui editor.

**Parameters**

- `node` (node) - node for which to set the layer
- `layer` (string | hash) - layer id

### gui.set_layout
*Type:* FUNCTION
Applies a named layout on the GUI scene. This re-applies per-layout node descriptors
and, if a matching Display Profile exists, updates the scene resolution. Emits
the "layout_changed" message to the scene script when the layout actually changes.

**Parameters**

- `layout` (string | hash) - the layout id to apply

**Returns**

- `return` (boolean) - true if the layout exists in the scene and was applied, false otherwise

### gui.set_leading
*Type:* FUNCTION
Sets the leading value for a text node. This value is used to
scale the line spacing of text.

**Parameters**

- `node` (node) - node for which to set the leading
- `leading` (number) - a scaling value for the line spacing (default=1)

### gui.set_line_break
*Type:* FUNCTION
Sets the line-break mode on a text node.
This is only useful for text nodes.

**Parameters**

- `node` (node) - node to set line-break for
- `line_break` (boolean) - <code>true</code> or <code>false</code>

### gui.set_material
*Type:* FUNCTION
Set the material on a node. The material must be mapped to the gui scene in the gui editor,
and assigning a material is supported for all node types. To set the default material that
is assigned to the gui scene node, use gui.reset_material(node_id) instead.

**Parameters**

- `node` (node) - node to set material for
- `material` (string | hash) - material id

**Examples**

Assign an existing material to a node:
```
local node = gui.get_node("my_node")
gui.set_material(node, "my_material")

```

### gui.set_outer_bounds
*Type:* FUNCTION
Sets the outer bounds mode for a pie node.

**Parameters**

- `node` (node) - node for which to set the outer bounds mode
- `bounds_mode` (constant) - the outer bounds mode of the pie node:
<ul>
<li><code>gui.PIEBOUNDS_RECTANGLE</code></li>
<li><code>gui.PIEBOUNDS_ELLIPSE</code></li>
</ul>

### gui.set_outline
*Type:* FUNCTION
Sets the outline color of the supplied node.
See gui.set_color for info how vectors encode color values.

**Parameters**

- `node` (node) - node to set the outline color for
- `color` (vector3 | vector4) - new outline color

### gui.set_parent
*Type:* FUNCTION
Sets the parent node of the specified node.

**Parameters**

- `node` (node) - node for which to set its parent
- `parent` (node) (optional) - parent node to set, pass <code>nil</code> to remove parent
- `keep_scene_transform` (boolean) (optional) - optional flag to make the scene position being perserved

### gui.set_particlefx
*Type:* FUNCTION
Set the paricle fx for a gui node

**Parameters**

- `node` (node) - node to set particle fx for
- `particlefx` (hash | string) - particle fx id

### gui.set_perimeter_vertices
*Type:* FUNCTION
Sets the number of generated vertices around the perimeter of a pie node.

**Parameters**

- `node` (node) - pie node
- `vertices` (number) - vertex count

### gui.set_pivot
*Type:* FUNCTION
The pivot specifies how the node is drawn and rotated from its position.

**Parameters**

- `node` (node) - node to set pivot for
- `pivot` (constant) - pivot constant
<ul>
  <li><code>gui.PIVOT_CENTER</code></li>
  <li><code>gui.PIVOT_N</code></li>
  <li><code>gui.PIVOT_NE</code></li>
  <li><code>gui.PIVOT_E</code></li>
  <li><code>gui.PIVOT_SE</code></li>
  <li><code>gui.PIVOT_S</code></li>
  <li><code>gui.PIVOT_SW</code></li>
  <li><code>gui.PIVOT_W</code></li>
  <li><code>gui.PIVOT_NW</code></li>
</ul>

### gui.set_position
*Type:* FUNCTION
Sets the position of the supplied node.

**Parameters**

- `node` (node) - node to set the position for
- `position` (vector3 | vector4) - new position

### gui.set_render_order
*Type:* FUNCTION
Set the order number for the current GUI scene.
The number dictates the sorting of the "gui" render predicate,
in other words in which order the scene will be rendered in relation
to other currently rendered GUI scenes.
The number must be in the range 0 to 15.

**Parameters**

- `order` (number) - rendering order (0-15)

### gui.set_rotation
*Type:* FUNCTION
Sets the rotation of the supplied node.
The rotation is expressed as a quaternion

**Parameters**

- `node` (node) - node to set the rotation for
- `rotation` (quaternion | vector4) - new rotation

### gui.set_safe_area_mode
*Type:* FUNCTION
Sets how the safe area is applied to this gui scene.

**Parameters**

- `mode` (constant) - safe area mode
<ul>
<li><code>gui.SAFE_AREA_NONE</code></li>
<li><code>gui.SAFE_AREA_LONG</code></li>
<li><code>gui.SAFE_AREA_SHORT</code></li>
<li><code>gui.SAFE_AREA_BOTH</code></li>
</ul>

### gui.set_scale
*Type:* FUNCTION
Sets the scaling of the supplied node.

**Parameters**

- `node` (node) - node to set the scale for
- `scale` (vector3 | vector4) - new scale

### gui.set_screen_position
*Type:* FUNCTION
Set the screen position to the supplied node

**Parameters**

- `node` (node) - node to set the screen position to
- `screen_position` (vector3) - screen position

### gui.set_shadow
*Type:* FUNCTION
Sets the shadow color of the supplied node.
See gui.set_color for info how vectors encode color values.

**Parameters**

- `node` (node) - node to set the shadow color for
- `color` (vector3 | vector4) - new shadow color

### gui.set_size
*Type:* FUNCTION
Sets the size of the supplied node.
 You can only set size on nodes with size mode set to SIZE_MODE_MANUAL

**Parameters**

- `node` (node) - node to set the size for
- `size` (vector3 | vector4) - new size

### gui.set_size_mode
*Type:* FUNCTION
Sets the size mode of a node.
The size mode defines how the node will adjust itself in size. Automatic
size mode alters the node size based on the node's content. Automatic size
mode works for Box nodes and Pie nodes which will both adjust their size
to match the assigned image. Particle fx and Text nodes will ignore
any size mode setting.

**Parameters**

- `node` (node) - node to set size mode for
- `size_mode` (constant) - size mode to set
<ul>
<li><code>gui.SIZE_MODE_MANUAL</code></li>
<li><code>gui.SIZE_MODE_AUTO</code></li>
</ul>

### gui.set_slice9
*Type:* FUNCTION
Set the slice9 configuration values for the node.

**Parameters**

- `node` (node) - node to manipulate
- `values` (vector4) - new values

### gui.set_text
*Type:* FUNCTION
Set the text value of a text node. This is only useful for text nodes.

**Parameters**

- `node` (node) - node to set text for
- `text` (string | number) - text to set

### gui.set_texture
*Type:* FUNCTION
Set the texture on a box or pie node. The texture must be mapped to
the gui scene in the gui editor. The function points out which texture
the node should render from. If the texture is an atlas, further
information is needed to select which image/animation in the atlas
to render. In such cases, use gui.play_flipbook() in
addition to this function.

**Parameters**

- `node` (node) - node to set texture for
- `texture` (string | hash) - texture id

**Examples**

To set a texture (or animation) from an atlas:
```
local node = gui.get_node("box_node")
gui.set_texture(node, "my_atlas")
gui.play_flipbook(node, "image")

```

Set a dynamically created texture to a node. Note that there is only
one texture image in this case so gui.set_texture() is
sufficient.
```
local w = 200
local h = 300
-- A nice orange. String with the RGB values.
local orange = string.char(0xff) .. string.char(0x80) .. string.char(0x10)
-- Create the texture. Repeat the color string for each pixel.
if gui.new_texture("orange_tx", w, h, "rgb", string.rep(orange, w * h)) then
    local node = gui.get_node("box_node")
    gui.set_texture(node, "orange_tx")
end

```

### gui.set_texture_data
*Type:* FUNCTION
Set the texture buffer data for a dynamically created texture.

**Parameters**

- `texture` (string | hash) - texture id
- `width` (number) - texture width
- `height` (number) - texture height
- `type` (string | constant) - texture type
<ul>
  <li><code>"rgb"</code> - RGB</li>
  <li><code>"rgba"</code> - RGBA</li>
  <li><code>"l"</code> - LUMINANCE</li>
  <li><code>"astc"</code> - ASTC compressed format</li>
</ul>
- `buffer` (string) - texture data
- `flip` (boolean) - flip texture vertically

**Returns**

- `success` (boolean) - setting the data was successful

**Examples**

```
function init(self)
     local w = 200
     local h = 300

     -- Create a dynamic texture, all white.
     if gui.new_texture("dynamic_tx", w, h, "rgb", string.rep(string.char(0xff), w * h * 3)) then
         -- Create a box node and apply the texture to it.
         local n = gui.new_box_node(vmath.vector3(200, 200, 0), vmath.vector3(w, h, 0))
         gui.set_texture(n, "dynamic_tx")

         ...

         -- Change the data in the texture to a nice orange.
         local orange = string.char(0xff) .. string.char(0x80) .. string.char(0x10)
         if gui.set_texture_data("dynamic_tx", w, h, "rgb", string.rep(orange, w * h)) then
             -- Go on and to more stuff
             ...
         end
     else
         -- Something went wrong
         ...
     end
end

```

### gui.set_tracking
*Type:* FUNCTION
Sets the tracking value of a text node. This value is used to
adjust the vertical spacing of characters in the text.

**Parameters**

- `node` (node) - node for which to set the tracking
- `tracking` (number) - a scaling number for the letter spacing (default=0)

### gui.set_visible
*Type:* FUNCTION
Set if a node should be visible or not. Only visible nodes are rendered.

**Parameters**

- `node` (node) - node to be visible or not
- `visible` (boolean) - whether the node should be visible or not

### gui.set_xanchor
*Type:* FUNCTION
The x-anchor specifies how the node is moved when the game is run in a different resolution.

**Parameters**

- `node` (node) - node to set x-anchor for
- `anchor` (constant) - anchor constant
<ul>
<li><code>gui.ANCHOR_NONE</code></li>
<li><code>gui.ANCHOR_LEFT</code></li>
<li><code>gui.ANCHOR_RIGHT</code></li>
</ul>

### gui.set_yanchor
*Type:* FUNCTION
The y-anchor specifies how the node is moved when the game is run in a different resolution.

**Parameters**

- `node` (node) - node to set y-anchor for
- `anchor` (constant) - anchor constant
<ul>
<li><code>gui.ANCHOR_NONE</code></li>
<li><code>gui.ANCHOR_TOP</code></li>
<li><code>gui.ANCHOR_BOTTOM</code></li>
</ul>

### gui.show_keyboard
*Type:* FUNCTION
Shows the on-display touch keyboard.
The specified type of keyboard is displayed if it is available on
the device.
This function is only available on iOS and Android.  .

**Parameters**

- `type` (constant) - keyboard type
<ul>
<li><code>gui.KEYBOARD_TYPE_DEFAULT</code></li>
<li><code>gui.KEYBOARD_TYPE_EMAIL</code></li>
<li><code>gui.KEYBOARD_TYPE_NUMBER_PAD</code></li>
<li><code>gui.KEYBOARD_TYPE_PASSWORD</code></li>
</ul>
- `autoclose` (boolean) - if the keyboard should automatically close when clicking outside

### gui.SIZE_MODE_AUTO
*Type:* CONSTANT
The size of the node is determined by the currently assigned texture.

### gui.SIZE_MODE_MANUAL
*Type:* CONSTANT
The size of the node is determined by the size set in the editor, the constructor or by gui.set_size()

### gui.stop_particlefx
*Type:* FUNCTION
Stops the particle fx for a gui node

**Parameters**

- `node` (node) - node to stop particle fx for
- `options` (table) (optional) - options when stopping the particle fx. Supported options:
<ul>
<li><span class="type">boolean</span> <code>clear</code>: instantly clear spawned particles</li>
</ul>

### gui.TYPE_BOX
*Type:* CONSTANT
box type

### gui.TYPE_CUSTOM
*Type:* CONSTANT
custom type

### gui.TYPE_PARTICLEFX
*Type:* CONSTANT
particlefx type

### gui.TYPE_PIE
*Type:* CONSTANT
pie type

### gui.TYPE_TEXT
*Type:* CONSTANT
text type

### init
*Type:* FUNCTION
This is a callback-function, which is called by the engine when a gui component is initialized. It can be used
to set the initial state of the script and gui scene.

**Parameters**

- `self` (userdata) - reference to the script state to be used for storing data

**Examples**

```
function init(self)
    -- set up useful data
    self.my_value = 1
end

```

### layout_changed
*Type:* MESSAGE
This message is broadcast to every GUI component when a layout change has been initiated
on device.

**Parameters**

- `id` (hash) - the id of the layout the engine is changing to
- `previous_id` (hash) - the id of the layout the engine is changing from

**Examples**

```
function on_message(self, message_id, message, sender)
   if message_id == hash("layout_changed") and message.id == hash("Landscape") then
       -- switching layout to "Landscape"...
       ...
   end
end

```

### material
*Type:* PROPERTY
The main material (the default material assigned to a GUI) used when rendering the gui. The type of the property is hash.

**Examples**

How to set material using a script property (see resource.material)
```
go.property("desaturate_material", resource.material("/desaturate.material"))

function init(self)
  go.set("#gui", "material", self.desaturate_material)
end

```

### materials
*Type:* PROPERTY
The materials used when rendering the gui. The type of the property is hash.
Key must be specified in options table.

**Examples**

How to change a named material resource using a script property from a script
```
go.property("my_material", resource.material("/my_material.material"))

function init(self)
  -- this will update the "my_gui_material" entry in the GUI to use the material
  -- specified in the "my_material" script property.
  go.set("#gui", "materials", self.my_material, { key = "my_gui_material" })
end

```

### on_input
*Type:* FUNCTION
This is a callback-function, which is called by the engine when user input is sent to the instance of the gui component.
It can be used to take action on the input, e.g. modify the gui according to the input.
For an instance to obtain user input, it must first acquire input
focus through the message acquire_input_focus.
Any instance that has obtained input will be put on top of an
input stack. Input is sent to all listeners on the stack until the
end of stack is reached, or a listener returns true
to signal that it wants input to be consumed.
See the documentation of acquire_input_focus for more
information.
The action parameter is a table containing data about the input mapped to the
action_id.
For mapped actions it specifies the value of the input and if it was just pressed or released.
Actions are mapped to input in an input_binding-file.
Mouse movement is specifically handled and uses nil as its action_id.
The action only contains positional parameters in this case, such as x and y of the pointer.
Here is a brief description of the available table fields:

Field
Description

value
The amount of input given by the user. This is usually 1 for buttons and 0-1 for analogue inputs. This is not present for mouse movement and text input.

pressed
If the input was pressed this frame. This is not present for mouse movement and text input.

released
If the input was released this frame. This is not present for mouse movement and text input.

repeated
If the input was repeated this frame. This is similar to how a key on a keyboard is repeated when you hold it down. This is not present for mouse movement and text input.

x
The x value of a pointer device, if present. This is not present for gamepad, key and text input.

y
The y value of a pointer device, if present. This is not present for gamepad, key and text input.

screen_x
The screen space x value of a pointer device, if present. This is not present for gamepad, key and text input.

screen_y
The screen space y value of a pointer device, if present. This is not present for gamepad, key and text input.

dx
The change in x value of a pointer device, if present. This is not present for gamepad, key and text input.

dy
The change in y value of a pointer device, if present. This is not present for gamepad, key and text input.

screen_dx
The change in screen space x value of a pointer device, if present. This is not present for gamepad, key and text input.

screen_dy
The change in screen space y value of a pointer device, if present. This is not present for gamepad, key and text input.

gamepad
The index of the gamepad device that provided the input. See table below about gamepad input.

touch
List of touch input, one element per finger, if present. See table below about touch input

text
Text input from a (virtual) keyboard or similar.

marked_text
Sequence of entered symbols while entering a symbol combination, for example Japanese Kana.

Gamepad specific fields:

Field
Description

gamepad
The index of the gamepad device that provided the input.

userid
Id of the user associated with the controller. Usually only relevant on consoles.

gamepad_unknown
True if the inout originated from an unknown/unmapped gamepad.

gamepad_name
Name of the gamepad

gamepad_axis
List of gamepad axis values. For raw gamepad input only.

gamepadhats
List of gamepad hat values. For raw gamepad input only.

gamepad_buttons
List of gamepad button values. For raw gamepad input only.

Touch input table:

Field
Description

id
A number identifying the touch input during its duration.

pressed
True if the finger was pressed this frame.

released
True if the finger was released this frame.

tap_count
Number of taps, one for single, two for double-tap, etc

x
The x touch location.

y
The y touch location.

dx
The change in x value.

dy
The change in y value.

acc_x
Accelerometer x value (if present).

acc_y
Accelerometer y value (if present).

acc_z
Accelerometer z value (if present).

**Parameters**

- `self` (userdata) - reference to the script state to be used for storing data
- `action_id` (hash) - id of the received input action, as mapped in the input_binding-file
- `action` (table) - a table containing the input data, see above for a description

**Returns**

- `consume` (boolean | nil) - optional boolean to signal if the input should be consumed (not passed on to others) or not, default is false

**Examples**

```
function on_input(self, action_id, action)
    -- check for input
    if action_id == hash("my_action") then
        -- take appropritate action
        self.my_value = action.value
    end
    -- consume input
    return true
end

```

### on_message
*Type:* FUNCTION
This is a callback-function, which is called by the engine whenever a message has been sent to the gui component.
It can be used to take action on the message, e.g. update the gui or send a response back to the sender of the message.
The message parameter is a table containing the message data. If the message is sent from the engine, the
documentation of the message specifies which data is supplied.
See the update function for examples on how to use this callback-function.

**Parameters**

- `self` (userdata) - reference to the script state to be used for storing data
- `message_id` (hash) - id of the received message
- `message` (table) - a table containing the message data

### on_reload
*Type:* FUNCTION
This is a callback-function, which is called by the engine when the gui script is reloaded, e.g. from the editor.
It can be used for live development, e.g. to tweak constants or set up the state properly for the script.

**Parameters**

- `self` (userdata) - reference to the script state to be used for storing data

**Examples**

```
function on_reload(self)
    -- restore some color (or similar)
    gui.set_color(gui.get_node("my_node"), self.my_original_color)
end

```

### textures
*Type:* PROPERTY
The textures used in the gui. The type of the property is hash.
Key must be specified in options table.

**Examples**

How to set texture using a script property (see resource.atlas)
```
go.property("cards_red", resource.atlas("/cards_red.atlas"))
go.property("cards_blue", resource.atlas("/cards_blue.atlas"))

function init(self)
  go.set("#gui", "textures", self.cards_red, {key = "cards"})
end

```

### update
*Type:* FUNCTION
This is a callback-function, which is called by the engine every frame to update the state of a gui component.
It can be used to perform any kind of gui related tasks, e.g. animating nodes.

**Parameters**

- `self` (userdata) - reference to the script state to be used for storing data
- `dt` (number) - the time-step of the frame update

**Examples**

This example demonstrates how to update a text node that displays game score in a counting fashion.
It is assumed that the gui component receives messages from the game when a new score is to be shown.
```
function init(self)
    -- fetch the score text node for later use (assumes it is called "score")
    self.score_node = gui.get_node("score")
    -- keep track of the current score counted up so far
    self.current_score = 0
    -- keep track of the target score we should count up to
    self.target_score = 0
    -- how fast we will update the score, in score/second
    self.score_update_speed = 1
end

function update(self, dt)
    -- check if target score is more than current score
    if self.current_score  self.target_score then
            self.current_score = self.target_score
        end
        -- update the score text node
        gui.set_text(self.score_node, "" .. math.floor(self.current_score))
    end
end

function on_message(self, message_id, message, sender)
    -- check the message
    if message_id == hash("set_score") then
        self.target_score = message.score
    end
end

```

<!-- html5-lua -->

# HTML5 {#apis:html5-lua}

**Namespace:** `html5`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_html5_js.cpp`
**Source:** `engine/script/src/script_html5_js.cpp`

HTML5 platform specific functions.

[icon:html5] The following functions are only available on HTML5 builds, the `html5.*` Lua namespace will not be available on other platforms.

## API

### html5.run
*Type:* FUNCTION
Executes the supplied string as JavaScript inside the browser.
A call to this function is blocking, the result is returned as-is, as a string.
(Internally this will execute the string using the eval() JavaScript function.)

**Parameters**

- `code` (string) - Javascript code to run

**Returns**

- `result` (string) - result as string

**Examples**

```
local res = html5.run("10 + 20") -- returns the string "30"
print(res)
local res_num = tonumber(res) -- convert to number
print(res_num - 20) -- prints 10

```

### html5.set_interaction_listener
*Type:* FUNCTION
Set a JavaScript interaction listener callaback from lua that will be
invoked when a user interacts with the web page by clicking, touching or typing.
The callback can then call DOM restricted actions like requesting a pointer lock,
or start playing sounds the first time the callback is invoked.

**Parameters**

- `callback` (function(self) | nil) - The interaction callback. Pass an empty function or <code>nil</code> if you no longer wish to receive callbacks.
<dl>
<dt><code>self</code></dt>
<dd><span class="type">object</span> The calling script</dd>
</dl>

**Examples**

```
local function on_interaction(self)
    print("on_interaction called")
    html5.set_interaction_listener(nil)
end

function init(self)
    html5.set_interaction_listener(on_interaction)
end

```

<!-- http-lua -->

# HTTP {#apis:http-lua}

**Namespace:** `http`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_http.cpp`
**Source:** `engine/gamesys/src/gamesys/scripts/script_http.cpp`

Functions for performing HTTP and HTTPS requests.

## API

### http.request
*Type:* FUNCTION
Perform a HTTP/HTTPS request.
 If no timeout value is passed, the configuration value "network.http_timeout" is used. If that is not set, the timeout value is 0 (which blocks indefinitely).

**Parameters**

- `url` (string) - target url
- `method` (string) - HTTP/HTTPS method, e.g. "GET", "PUT", "POST" etc.
- `callback` (function(self, id, response)) - response callback function
<dl>
<dt><code>self</code></dt>
<dd><span class="type">object</span> The script instance</dd>
<dt><code>id</code></dt>
<dd><span class="type">hash</span> Internal message identifier. Do not use!</dd>
<dt><code>response</code></dt>
<dd><span class="type">table</span> The response data. Contains the fields:</dd>
</dl>
<ul>
<li><span class="type">number</span> <code>status</code>: the status of the response</li>
<li><span class="type">string</span> <code>response</code>: the response data (if not saved on disc)</li>
<li><span class="type">table</span> <code>headers</code>: all the returned headers (if status is 200 or 206)</li>
<li><span class="type">string</span> <code>path</code>: the stored path (if saved to disc)</li>
<li><span class="type">string</span> <code>error</code>: if any unforeseen errors occurred (e.g. file I/O)</li>
<li><span class="type">number</span> <code>bytes_received</code>: the amount of bytes received/sent for a request, only if option <code>report_progress</code> is true</li>
<li><span class="type">number</span> <code>bytes_total</code>: the total amount of bytes for a request, only if option <code>report_progress</code> is true</li>
<li><span class="type">number</span> <code>range_start</code>: the start offset into the requested file</li>
<li><span class="type">number</span> <code>range_end</code>: the end offset into the requested file (inclusive)</li>
<li><span class="type">number</span> <code>document_size</code>: the full size of the requested file</li>
</ul>
- `headers` (table) (optional) - optional table with custom headers
- `post_data` (string) (optional) - optional data to send
- `options` (table) (optional) - optional table with request parameters. Supported entries:
<ul>
<li><span class="type">number</span> <code>timeout</code>: timeout in seconds</li>
<li><span class="type">string</span> <code>path</code>: path on disc where to download the file. Only overwrites the path if status is 200. <span class="icon-attention"></span> Path should be absolute</li>
<li><span class="type">boolean</span> <code>ignore_cache</code>: don't return cached data if we get a 304. <span class="icon-attention"></span> Not available in HTML5 build</li>
<li><span class="type">boolean</span> <code>chunked_transfer</code>: use chunked transfer encoding for https requests larger than 16kb. Defaults to true. <span class="icon-attention"></span> Not available in HTML5 build</li>
<li><span class="type">boolean</span> <code>report_progress</code>: when it is true, the amount of bytes sent and/or received for a request will be passed into the callback function</li>
</ul>

**Examples**

Basic HTTP-GET request. The callback receives a table with the response
in the fields status, the response (the data) and headers (a table).
```
local function http_result(self, _, response)
    if response.bytes_total ~= nil then
        update_my_progress_bar(self, response.bytes_received / response.bytes_total)
    else
        print(response.status)
        print(response.response)
        pprint(response.headers)
    end
end

function init(self)
    http.request("http://www.google.com", "GET", http_result, nil, nil, { report_progress = true })
end

```

<!-- image-lua -->

# Image {#apis:image-lua}

**Namespace:** `image`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_image.cpp`
**Source:** `engine/gamesys/src/gamesys/scripts/script_image.cpp`

Functions for creating image objects.

## API

### image.get_astc_header
*Type:* FUNCTION
get the header of an .astc buffer

**Parameters**

- `buffer` (string) - .astc file data buffer

**Returns**

- `table` (table | nil) - header or <code>nil</code> if buffer is not a valid .astc. The header has these fields:
<ul>
<li><span class="type">number</span> <code>width</code>: image width</li>
<li><span class="type">number</span> <code>height</code>: image height</li>
<li><span class="type">number</span> <code>depth</code>: image depth</li>
<li><span class="type">number</span> <code>block_size_x</code>: block size x</li>
<li><span class="type">number</span> <code>block_size_y</code>: block size y</li>
<li><span class="type">number</span> <code>block_size_z</code>: block size z</li>
</ul>

**Examples**

How to get the block size and dimensions from a .astc file
```
local s = sys.load_resource("/assets/cat.astc")
local header = image.get_astc_header(s)
pprint(s)

```

### image.load
*Type:* FUNCTION
Load image (PNG or JPEG) from buffer.

**Parameters**

- `buffer` (string) - image data buffer
- `options` (table) (optional) - An optional table containing parameters for loading the image. Supported entries:
<dl>
<dt><code>premultiply_alpha</code></dt>
<dd><span class="type">boolean</span> True if alpha should be premultiplied into the color components. Defaults to <code>false</code>.</dd>
<dt><code>flip_vertically</code></dt>
<dd><span class="type">boolean</span> True if the image contents should be flipped vertically. Defaults to <code>false</code>.</dd>
</dl>

**Returns**

- `image` (table | nil) - object or <code>nil</code> if loading fails. The object is a table with the following fields:
<ul>
<li><span class="type">number</span> <code>width</code>: image width</li>
<li><span class="type">number</span> <code>height</code>: image height</li>
<li><span class="type">constant</span> <code>type</code>: image type<ul>
<li><code>image.TYPE_RGB</code></li>
<li><code>image.TYPE_RGBA</code></li>
<li><code>image.TYPE_LUMINANCE</code></li>
<li><code>image.TYPE_LUMINANCE_ALPHA</code></li>
</ul>
</li>
<li><span class="type">string</span> <code>buffer</code>: the raw image data</li>
</ul>

**Examples**

How to load an image from an URL and create a GUI texture from it:
```
local imgurl = "http://www.site.com/image.png"
http.request(imgurl, "GET", function(self, id, response)
        local img = image.load(response.response)
        local tx = gui.new_texture("image_node", img.width, img.height, img.type, img.buffer)
    end)

```

### image.load_buffer
*Type:* FUNCTION
Load image (PNG or JPEG) from a string buffer.

**Parameters**

- `buffer` (string) - image data buffer
- `options` (table) (optional) - An optional table containing parameters for loading the image. Supported entries:
<dl>
<dt><code>premultiply_alpha</code></dt>
<dd><span class="type">boolean</span> True if alpha should be premultiplied into the color components. Defaults to <code>false</code>.</dd>
<dt><code>flip_vertically</code></dt>
<dd><span class="type">boolean</span> True if the image contents should be flipped vertically. Defaults to <code>false</code>.</dd>
</dl>

**Returns**

- `image` (table | nil) - object or <code>nil</code> if loading fails. The object is a table with the following fields:
<ul>
<li><span class="type">number</span> <code>width</code>: image width</li>
<li><span class="type">number</span> <code>height</code>: image height</li>
<li><span class="type">constant</span> <code>type</code>: image type<ul>
<li><code>image.TYPE_RGB</code></li>
<li><code>image.TYPE_RGBA</code></li>
<li><code>image.TYPE_LUMINANCE</code></li>
<li><code>image.TYPE_LUMINANCE_ALPHA</code></li>
</ul>
</li>
<li><span class="type">buffer</span> <code>buffer</code>: the script buffer that holds the decompressed image data. See <a href="/ref/buffer#buffer.create">buffer.create</a> how to use the buffer.</li>
</ul>

**Examples**

Load an image from an URL as a buffer and create a texture resource from it:
```
local imgurl = "http://www.site.com/image.png"
http.request(imgurl, "GET", function(self, id, response)
        local img = image.load_buffer(response.response, { flip_vertically = true })
        local tparams = {
            width  = img.width,
            height = img.height,
            type   = graphics.TEXTURE_TYPE_2D,
            format = graphics.TEXTURE_FORMAT_RGBA }

        local my_texture_id = resource.create_texture("/my_custom_texture.texturec", tparams, img.buffer)
        -- Apply the texture to a model
        go.set("/go1#model", "texture0", my_texture_id)
    end)

```

### image.TYPE_LUMINANCE
*Type:* CONSTANT
luminance image type

### image.TYPE_LUMINANCE_ALPHA
*Type:* CONSTANT
luminance image type

### image.TYPE_RGB
*Type:* CONSTANT
RGB image type

### image.TYPE_RGBA
*Type:* CONSTANT
RGBA image type

<!-- io-lua -->

# Io {#apis:io-lua}

**Namespace:** `io`
**Language:** Lua
**Type:** Defold Lua
**File:** `lua_io.doc_h`
**Source:** `engine/lua/src/lua_io.doc_h`

Documentation for the Lua io standard library.

From [Lua 5.1 Reference Manual](https://www.lua.org/manual/5.1/)
by Roberto Ierusalimschy, Luiz Henrique de Figueiredo, Waldemar Celes.

Copyright  2006-2012 Lua.org, PUC-Rio.

Freely available under the terms of the [Lua license](https://www.lua.org/license.html).

## API

### file:close
*Type:* FUNCTION
Closes file.
Note that files are automatically closed when
their handles are garbage collected,
but that takes an unpredictable amount of time to happen.

### file:flush
*Type:* FUNCTION
Saves any written data to file.

### file:lines
*Type:* FUNCTION
Returns an iterator function that,
each time it is called,
returns a new line from the file.
Therefore, the construction
```
for line in file:lines() do body end

```

will iterate over all lines of the file.
(Unlike io.lines, this function does not close the file
when the loop ends.)

### file:read
*Type:* FUNCTION
Reads the file file,
according to the given formats, which specify what to read.
For each format,
the function returns a string (or a number) with the characters read,
or  nil if it cannot read data with the specified format.
When called without formats,
it uses a default format that reads the entire next line
(see below).
The available formats are

"*n"
reads a number;
this is the only format that returns a number instead of a string.
"*a"
reads the whole file, starting at the current position.
On end of file, it returns the empty string.
"*l"
reads the next line (skipping the end of line),
returning  nil on end of file.
This is the default format.
number
reads a string with up to this number of characters,
returning  nil on end of file.
If number is zero,
it reads nothing and returns an empty string,
or  nil on end of file.

**Parameters**

- `...`

### file:seek
*Type:* FUNCTION
Sets and gets the file position,
measured from the beginning of the file,
to the position given by offset plus a base
specified by the string whence, as follows:

"set"
base is position 0 (beginning of the file);
"cur"
base is current position;
"end"
base is end of file;

In case of success, function seek returns the final file position,
measured in bytes from the beginning of the file.
If this function fails, it returns  nil,
plus a string describing the error.
The default value for whence is "cur",
and for offset is 0.
Therefore, the call file:seek() returns the current
file position, without changing it;
the call file:seek("set") sets the position to the
beginning of the file (and returns 0);
and the call file:seek("end") sets the position to the
end of the file, and returns its size.

**Parameters**

- `whence` (string) (optional)
- `offset` (number) (optional)

### file:setvbuf
*Type:* FUNCTION
Sets the buffering mode for an output file.
There are three available modes:

"no"
no buffering; the result of any output operation appears immediately.
"full"
full buffering; output operation is performed only
when the buffer is full (or when you explicitly flush the file
).
"line"
line buffering; output is buffered until a newline is output
or there is any input from some special files
(such as a terminal device).

For the last two cases, size
specifies the size of the buffer, in bytes.
The default is an appropriate size.

**Parameters**

- `mode` (string)
- `size` (number) (optional)

### file:write
*Type:* FUNCTION
Writes the value of each of its arguments to
the file.
The arguments must be strings or numbers.
To write other values,
use tostring or string.format before write.

**Parameters**

- `...`

### io.close
*Type:* FUNCTION
Equivalent to file:close().
Without a file, closes the default output file.

**Parameters**

- `file` (file | nil) (optional)

### io.flush
*Type:* FUNCTION
Equivalent to file:flush over the default output file.

### io.input
*Type:* FUNCTION
When called with a file name, it opens the named file (in text mode),
and sets its handle as the default input file.
When called with a file handle,
it simply sets this file handle as the default input file.
When called without parameters,
it returns the current default input file.
In case of errors this function raises the error,
instead of returning an error code.

**Parameters**

- `file` (string | file) (optional)

### io.lines
*Type:* FUNCTION
Opens the given file name in read mode
and returns an iterator function that,
each time it is called,
returns a new line from the file.
Therefore, the construction
```
for line in io.lines(filename) do body end

```

will iterate over all lines of the file.
When the iterator function detects the end of file,
it returns  nil (to finish the loop) and automatically closes the file.
The call io.lines() (with no file name) is equivalent
to io.input():lines();
that is, it iterates over the lines of the default input file.
In this case it does not close the file when the loop ends.

**Parameters**

- `filename` (string) (optional)

### io.open
*Type:* FUNCTION
This function opens a file,
in the mode specified in the string mode.
It returns a new file handle,
or, in case of errors,  nil plus an error message.
The mode string can be any of the following:

"r"
read mode (the default);
"w"
write mode;
"a"
append mode;
"r+"
update mode, all previous data is preserved;
"w+"
update mode, all previous data is erased;
"a+"
append update mode, previous data is preserved,
  writing is only allowed at the end of file.

The mode string can also have a 'b' at the end,
which is needed in some systems to open the file in binary mode.
This string is exactly what is used in the
standard C function fopen.

**Parameters**

- `filename` (string)
- `mode` (string) (optional)

### io.output
*Type:* FUNCTION
Similar to io.input, but operates over the default output file.

**Parameters**

- `file` (file) (optional)

### io.popen
*Type:* FUNCTION
Starts program prog in a separated process and returns
a file handle that you can use to read data from this program
(if mode is "r", the default)
or to write data to this program
(if mode is "w").
This function is system dependent and is not available
on all platforms.

**Parameters**

- `prog` (string)
- `mode` (string) (optional)

### io.read
*Type:* FUNCTION
Equivalent to io.input():read.

**Parameters**

- `...`

### io.tmpfile
*Type:* FUNCTION
Returns a handle for a temporary file.
This file is opened in update mode
and it is automatically removed when the program ends.

### io.type
*Type:* FUNCTION
Checks whether obj is a valid file handle.
Returns the string "file" if obj is an open file handle,
"closed file" if obj is a closed file handle,
or  nil if obj is not a file handle.

**Parameters**

- `obj` (file)

### io.write
*Type:* FUNCTION
Equivalent to io.output():write.

**Parameters**

- `...`

<!-- json-lua -->

# JSON {#apis:json-lua}

**Namespace:** `json`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_json.cpp`
**Source:** `engine/script/src/script_json.cpp`

Manipulation of JSON data strings.

## API

### json.decode
*Type:* FUNCTION
Decode a string of JSON data into a Lua table.
A Lua error is raised for syntax errors.

**Parameters**

- `json` (string) - json data
- `options` (table) (optional) - table with decode options
<ul>
<li><span class="type">boolean</span> <code>decode_null_as_userdata</code>: wether to decode a JSON null value as json.null or nil (default is nil)</li>
</ul>

**Returns**

- `data` (table) - decoded json

**Examples**

Converting a string containing JSON data into a Lua table:
```
function init(self)
    local jsonstring = '{"persons":[{"name":"John Doe"},{"name":"Darth Vader"}]}'
    local data = json.decode(jsonstring)
    pprint(data)
end

```

Results in the following printout:
```
{
  persons = {
    1 = {
      name = John Doe,
    }
    2 = {
      name = Darth Vader,
    }
  }
}

```

### json.encode
*Type:* FUNCTION
Encode a lua table to a JSON string.
A Lua error is raised for syntax errors.

**Parameters**

- `tbl` (table) - lua table to encode
- `options` (table) (optional) - table with encode options
<ul>
<li><span class="type">string</span> <code>encode_empty_table_as_object</code>: wether to encode an empty table as an JSON object or array (default is object)</li>
</ul>

**Returns**

- `json` (string) - encoded json

**Examples**

Convert a lua table to a JSON string:
```
function init(self)
     local tbl = {
          persons = {
               { name = "John Doe"},
               { name = "Darth Vader"}
          }
     }
     local jsonstring = json.encode(tbl)
     pprint(jsonstring)
end

```

Results in the following printout:
```
{"persons":[{"name":"John Doe"},{"name":"Darth Vader"}]}

```

### json.null
*Type:* VARIABLE
Represents the null primitive from a json file

<!-- label-lua -->

# Label {#apis:label-lua}

**Namespace:** `label`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_label.cpp`
**Source:** `engine/gamesys/src/gamesys/scripts/script_label.cpp`

Functions to manipulate a label component.

## API

### color
*Type:* PROPERTY
The color of the label. The type of the property is vector4.

**Examples**

```
function init(self)
   -- Get the current color's y component
   local red_component = go.get("#label", "color.y")
   -- Animate the color
   go.animate("#label", "color", go.PLAYBACK_LOOP_PINGPONG, vmath.vector4(0,1,0,1), go.EASING_INOUTSINE, 1)
end

```

### font
*Type:* PROPERTY
The font used when rendering the label. The type of the property is hash.

**Examples**

How to set font using a script property (see resource.font)
```
go.property("my_font", resource.font("/font.font"))

function init(self)
  go.set("#label", "font", self.my_font)
end

```

### label.get_text
*Type:* FUNCTION
Gets the text from a label component

**Parameters**

- `url` (string | hash | url) - the label to get the text from

**Returns**

- `metrics` (string) - the label text

**Examples**

```
function init(self)
    local text = label.get_text("#label")
    print(text)
end

```

### label.set_text
*Type:* FUNCTION
Sets the text of a label component
 This method uses the message passing that means the value will be set after dispatch messages step.
More information is available in the Application Lifecycle manual.

**Parameters**

- `url` (string | hash | url) - the label that should have a constant set
- `text` (string | number) - the text

**Examples**

```
function init(self)
    label.set_text("#label", "Hello World!")
end

```

### leading
*Type:* PROPERTY
The leading of the label. This value is used to scale the line spacing of text.
The type of the property is number.

**Examples**

How to query a label's leading:
```
function init(self)
 -- get leading from component "label"
 local leading = go.get("#label", "leading")
 -- do something useful
 leading = leading * 1.2
 go.set("#label", "leading", leading)
end

```

### line_break
*Type:* PROPERTY
The line break of the label.
This value is used to adjust the vertical spacing of characters in the text.
The type of the property is boolean.

**Examples**

How to query a label's line break:
```
function init(self)
 -- get line_break from component "label"
 local line_break = go.get("#label", "line_break")
 -- do something useful
 go.set("#label", "line_break", false)
end

```

### material
*Type:* PROPERTY
The material used when rendering the label. The type of the property is hash.

**Examples**

How to set material using a script property (see resource.material)
```
go.property("my_material", resource.material("/material.material"))

function init(self)
  go.set("#label", "material", self.my_material)
end

```

### outline
*Type:* PROPERTY
The outline color of the label. The type of the property is vector4.

**Examples**

```
function init(self)
   -- Get the current outline color
   local outline = go.get("#label", "outline")
   -- Animate the property
   go.animate("#label", "outline", go.PLAYBACK_LOOP_PINGPONG, vmath.vector4(0,1,0,1), go.EASING_INOUTSINE, 1)
end

```

### scale
*Type:* PROPERTY
The scale of the label. The type of the property is number (uniform)
or vector3 (non uniform).

**Examples**

How to scale a label independently along the X and Y axis:
```
function init(self)
   -- Double the y-axis scaling on component "label"
   local yscale = go.get("#label", "scale.y")
   go.set("#label", "scale.y", yscale * 2)
   -- Set the new scale altogether
   go.set("#label", "scale", vmath.vector3(2,2,2))
   -- Animate the scale
   go.animate("#label", "scale", go.PLAYBACK_LOOP_PINGPONG, vmath.vector3(2,2,2), go.EASING_INOUTSINE, 1)
end

```

### shadow
*Type:* PROPERTY
The shadow color of the label. The type of the property is vector4.

**Examples**

```
function init(self)
 -- Get the current shadow color
 local shadow = go.get("#label", "shadow")
 -- Animate the property
 go.animate("#label", "shadow", go.PLAYBACK_LOOP_PINGPONG, vmath.vector4(0,1,0,1), go.EASING_INOUTSINE, 1)
end

```

### size
*Type:* PROPERTY
Returns the size of the label. The size will constrain the text if line break is enabled.
The type of the property is vector3.

**Examples**

How to query a label's size, either as a vector or selecting a specific dimension:
```
function init(self)
 -- get size from component "label"
 local size = go.get("#label", "size")
 local sizex = go.get("#label", "size.x")
 -- do something useful
 assert(size.x == sizex)
end

```

### tracking
*Type:* PROPERTY
The tracking of the label.
This value is used to adjust the vertical spacing of characters in the text.
The type of the property is number.

**Examples**

How to query a label's tracking:
```
function init(self)
 -- get tracking from component "label"
 local tracking = go.get("#label", "tracking")
 -- do something useful
 tracking = tracking * 1.2
 go.set("#label", "tracking", tracking)
end

```

<!-- liveupdate-lua -->

# LiveUpdate {#apis:liveupdate-lua}

**Namespace:** `liveupdate`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_liveupdate.h`
**Source:** `engine/liveupdate/src/script_liveupdate.h`

Functions and constants to access resources.

## API

### liveupdate.add_mount
*Type:* FUNCTION
Adds a resource mount to the resource system.
The mounts are persisted between sessions.
After the mount succeeded, the resources are available to load. (i.e. no reboot required)

**Notes**

- The request is asynchronous
- Names cannot start with '_'
- Priority must be >= 0

**Parameters**

- `name` (string) - Unique name of the mount
- `uri` (string) - The uri of the mount, including the scheme. Currently supported schemes are 'zip' and 'archive'.
- `priority` (number) - Priority of mount. Larger priority takes prescedence
- `callback` (function) - Callback after the asynchronous request completed

**Returns**

- `result` (number) - The result of the request

**Examples**

Add multiple mounts. Higher priority takes precedence.
```
liveupdate.add_mount("common", "zip:/path/to/common_stuff.zip", 10, function (result) end) -- base pack
liveupdate.add_mount("levelpack_1", "zip:/path/to/levels_1_to_20.zip", 20, function (result) end) -- level pack
liveupdate.add_mount("season_pack_1", "zip:/path/to/easter_pack_1.zip", 30, function (result) end) -- season pack, overriding content in the other packs

```

### liveupdate.get_current_manifest
*Type:* FUNCTION
Return a reference to the Manifest that is currently loaded.

**Returns**

- `manifest_reference` (number) - reference to the Manifest that is currently loaded

### liveupdate.get_mounts
*Type:* FUNCTION
Get an array of the current mounts
This can be used to determine if a new mount is needed or not

**Returns**

- `mounts` (table) - Array of mounts

**Examples**

Output the current resource mounts
```
pprint("MOUNTS", liveupdate.get_mounts())

```

Give an output like:
```
DEBUG:SCRIPT: MOUNTS,
{ --[[0x119667bf0]]
  1 = { --[[0x119667c50]]
    name = "liveupdate",
    uri = "zip:/device/path/to/acchives/liveupdate.zip",
    priority = 5
  },
  2 = { --[[0x119667d50]]
    name = "_base",
    uri = "archive:build/default/game.dmanifest",
    priority = -10
  }
}

```

### liveupdate.is_using_liveupdate_data
*Type:* FUNCTION
Is any liveupdate data mounted and currently in use?
This can be used to determine if a new manifest or zip file should be downloaded.

**Notes**

- deprecated

**Returns**

- `bool` (boolean) - true if a liveupdate archive (any format) has been loaded

### liveupdate.LIVEUPDATE_BUNDLED_RESOURCE_MISMATCH
*Type:* CONSTANT
Mismatch between between expected bundled resources and actual bundled resources. The manifest expects a resource to be in the bundle, but it was not found in the bundle. This is typically the case when a non-excluded resource was modified between publishing the bundle and publishing the manifest.

### liveupdate.LIVEUPDATE_ENGINE_VERSION_MISMATCH
*Type:* CONSTANT
Mismatch between running engine version and engine versions supported by manifest.

### liveupdate.LIVEUPDATE_FORMAT_ERROR
*Type:* CONSTANT
Failed to parse manifest data buffer. The manifest was probably produced by a different engine version.

### liveupdate.LIVEUPDATE_INVAL
*Type:* CONSTANT
Argument was invalid

### liveupdate.LIVEUPDATE_INVALID_HEADER
*Type:* CONSTANT
The handled resource is invalid.

### liveupdate.LIVEUPDATE_INVALID_RESOURCE
*Type:* CONSTANT
The header of the resource is invalid.

### liveupdate.LIVEUPDATE_IO_ERROR
*Type:* CONSTANT
I/O operation failed

### liveupdate.LIVEUPDATE_MEM_ERROR
*Type:* CONSTANT
Memory wasn't allocated

### liveupdate.LIVEUPDATE_OK
*Type:* CONSTANT
LIVEUPDATE_OK

### liveupdate.LIVEUPDATE_SCHEME_MISMATCH
*Type:* CONSTANT
Mismatch between scheme used to load resources. Resources are loaded with a different scheme than from manifest, for example over HTTP or directly from file. This is typically the case when running the game directly from the editor instead of from a bundle.

### liveupdate.LIVEUPDATE_SIGNATURE_MISMATCH
*Type:* CONSTANT
Mismatch between manifest expected signature and actual signature.

### liveupdate.LIVEUPDATE_UNKNOWN
*Type:* CONSTANT
Unspecified error

### liveupdate.LIVEUPDATE_VERSION_MISMATCH
*Type:* CONSTANT
Mismatch between manifest expected version and actual version.

### liveupdate.remove_mount
*Type:* FUNCTION
Remove a mount the resource system.
The remaining mounts are persisted between sessions.
Removing a mount does not affect any loaded resources.

**Notes**

- The call is synchronous

**Parameters**

- `name` (string) - Unique name of the mount

**Returns**

- `result` (number) - The result of the call

**Examples**

Add multiple mounts. Higher priority takes precedence.
```
liveupdate.remove_mount("season_pack_1")

```

### liveupdate.store_archive
*Type:* FUNCTION
Stores a zip file and uses it for live update content. The contents of the
zip file will be verified against the manifest to ensure file integrity.
It is possible to opt out of the resource verification using an option passed
to this function.
The path is stored in the (internal) live update location.

**Notes**

- deprecated

**Parameters**

- `path` (string) - the path to the original file on disc
- `callback` (function(self, status)) - the callback function
executed after the storage has completed
<dl>
<dt><code>self</code></dt>
<dd><span class="type">object</span> The current object.</dd>
<dt><code>status</code></dt>
<dd><span class="type">constant</span> the status of the store operation (See liveupdate.store_manifest)</dd>
</dl>
- `options` (table) (optional) - optional table with extra parameters. Supported entries:
<ul>
<li><span class="type">boolean</span> <code>verify</code>: if archive should be verified as well as stored (defaults to true)</li>
</ul>

**Examples**

How to download an archive with HTTP and store it on device.
```
local LIVEUPDATE_URL =

-- This can be anything, but you should keep the platform bundles apart
local ZIP_FILENAME = 'defold.resourcepack.zip'

local APP_SAVE_DIR = "LiveUpdateDemo"

function init(self)
    self.proxy = "levels#level1"

    print("INIT: is_using_liveupdate_data:", liveupdate.is_using_liveupdate_data())
    -- let's download the archive
    msg.post("#", "attempt_download_archive")
end

-- helper function to store headers from the http request (e.g. the ETag)
local function store_http_response_headers(name, data)
    local path = sys.get_save_file(APP_SAVE_DIR, name)
    sys.save(path, data)
end

local function load_http_response_headers(name)
    local path = sys.get_save_file(APP_SAVE_DIR, name)
    return sys.load(path)
end

-- returns headers that can potentially generate a 304
-- without redownloading the file again
local function get_http_request_headers(name)
    local data = load_http_response_headers(name)
    local headers = {}
    for k, v in pairs(data) do
        if string.lower(k) == 'etag' then
            headers['If-None-Match'] = v
        elseif string.lower(k) == 'last-modified' then
            headers['If-Modified-Since'] = v
        end
    end
    return headers
end

local function store_archive_cb(self, path, status)
    if status == true then
        print("Successfully stored live update archive!", path)
        sys.reboot()
    else
        print("Failed to store live update archive, ", path)
        -- remove the path
    end
end

function on_message(self, message_id, message, sender)
    if message_id == hash("attempt_download_archive") then

        -- by supplying the ETag, we don't have to redownload the file again
        -- if we already have downloaded it.
        local headers = get_http_request_headers(ZIP_FILENAME .. '.json')
        if not liveupdate.is_using_liveupdate_data() then
            headers = {} -- live update data has been purged, and we need do a fresh download
        end

        local path = sys.get_save_file(APP_SAVE_DIR, ZIP_FILENAME)
        local options = {
            path = path,        -- a temporary file on disc. will be removed upon successful liveupdate storage
            ignore_cache = true -- we don't want to store a (potentially large) duplicate in our http cache
        }

        local url = LIVEUPDATE_URL .. ZIP_FILENAME
        print("Downloading", url)
        http.request(url, "GET", function(self, id, response)
            if response.status == 304 then
                print(string.format("%d: Archive zip file up-to-date", response.status))
            elseif response.status == 200 and response.error == nil then
                -- register the path to the live update system
                liveupdate.store_archive(response.path, store_archive_cb)
                -- at this point, the "path" has been moved internally to a different location

                -- save the ETag for the next run
                store_http_response_headers(ZIP_FILENAME .. '.json', response.headers)
            else
                print("Error when downloading", url, "to", path, ":", response.status, response.error)
            end

            -- If we got a 200, we would call store_archive_cb() then reboot
            -- Second time, if we get here, it should be after a 304, and then
            -- we can load the missing resources from the liveupdate archive
            if liveupdate.is_using_liveupdate_data() then
                msg.post(self.proxy, "load")
            end
        end,
        headers, nil, options)

```

### liveupdate.store_manifest
*Type:* FUNCTION
Create a new manifest from a buffer. The created manifest is verified
by ensuring that the manifest was signed using the bundled public/private
key-pair during the bundle process and that the manifest supports the current
running engine version. Once the manifest is verified it is stored on device.
The next time the engine starts (or is rebooted) it will look for the stored
manifest before loading resources. Storing a new manifest allows the
developer to update the game, modify existing resources, or add new
resources to the game through LiveUpdate.

**Notes**

- deprecated

**Parameters**

- `manifest_buffer` (string) - the binary data that represents the manifest
- `callback` (function(self, status)) - the callback function
executed once the engine has attempted to store the manifest.
<dl>
<dt><code>self</code></dt>
<dd><span class="type">object</span> The current object.</dd>
<dt><code>status</code></dt>
<dd><span class="type">constant</span> the status of the store operation:</dd>
</dl>
<ul>
<li><code>liveupdate.LIVEUPDATE_OK</code></li>
<li><code>liveupdate.LIVEUPDATE_INVALID_RESOURCE</code></li>
<li><code>liveupdate.LIVEUPDATE_VERSION_MISMATCH</code></li>
<li><code>liveupdate.LIVEUPDATE_ENGINE_VERSION_MISMATCH</code></li>
<li><code>liveupdate.LIVEUPDATE_SIGNATURE_MISMATCH</code></li>
<li><code>liveupdate.LIVEUPDATE_BUNDLED_RESOURCE_MISMATCH</code></li>
<li><code>liveupdate.LIVEUPDATE_FORMAT_ERROR</code></li>
</ul>

**Examples**

How to download a manifest with HTTP and store it on device.
```
local function store_manifest_cb(self, status)
  if status == liveupdate.LIVEUPDATE_OK then
    pprint("Successfully stored manifest. This manifest will be loaded instead of the bundled manifest the next time the engine starts.")
  else
    pprint("Failed to store manifest")
  end
end

local function download_and_store_manifest(self)
  http.request(MANIFEST_URL, "GET", function(self, id, response)
      if response.status == 200 then
        liveupdate.store_manifest(response.response, store_manifest_cb)
      end
    end)
end

```

### liveupdate.store_resource
*Type:* FUNCTION
add a resource to the data archive and runtime index. The resource will be verified
internally before being added to the data archive.

**Notes**

- deprecated

**Parameters**

- `manifest_reference` (number) - The manifest to check against.
- `data` (string) - The resource data that should be stored.
- `hexdigest` (string) - The expected hash for the resource,
retrieved through collectionproxy.missing_resources.
- `callback` (function(self, hexdigest, status)) - The callback
function that is executed once the engine has been attempted to store
the resource.
<dl>
<dt><code>self</code></dt>
<dd><span class="type">object</span> The current object.</dd>
<dt><code>hexdigest</code></dt>
<dd><span class="type">string</span> The hexdigest of the resource.</dd>
<dt><code>status</code></dt>
<dd><span class="type">boolean</span> Whether or not the resource was successfully stored.</dd>
</dl>

**Examples**

```
function init(self)
    self.manifest = liveupdate.get_current_manifest()
end

local function callback_store_resource(self, hexdigest, status)
     if status == true then
          print("Successfully stored resource: " .. hexdigest)
     else
          print("Failed to store resource: " .. hexdigest)
     end
end

local function load_resources(self, target)
     local resources = collectionproxy.missing_resources(target)
     for _, resource_hash in ipairs(resources) do
          local baseurl = "http://example.defold.com:8000/"
          http.request(baseurl .. resource_hash, "GET", function(self, id, response)
               if response.status == 200 then
                    liveupdate.store_resource(self.manifest, response.response, resource_hash, callback_store_resource)
               else
                    print("Failed to download resource: " .. resource_hash)
               end
          end)
     end
end

```

<!-- math-lua -->

# Math {#apis:math-lua}

**Namespace:** `math`
**Language:** Lua
**Type:** Defold Lua
**File:** `lua_math.doc_h`
**Source:** `engine/lua/src/lua_math.doc_h`

Documentation for the Lua math standard library.

From [Lua 5.1 Reference Manual](https://www.lua.org/manual/5.1/)
by Roberto Ierusalimschy, Luiz Henrique de Figueiredo, Waldemar Celes.

Copyright  2006-2012 Lua.org, PUC-Rio.

Freely available under the terms of the [Lua license](https://www.lua.org/license.html).

## API

### math.abs
*Type:* FUNCTION
Returns the absolute value of x.

**Parameters**

- `x` (number)

### math.acos
*Type:* FUNCTION
Returns the arc cosine of x (in radians).

**Parameters**

- `x` (number)

### math.asin
*Type:* FUNCTION
Returns the arc sine of x (in radians).

**Parameters**

- `x` (number)

### math.atan
*Type:* FUNCTION
Returns the arc tangent of x (in radians).

**Parameters**

- `x` (number)

### math.atan2
*Type:* FUNCTION
Returns the arc tangent of y/x (in radians),
but uses the signs of both parameters to find the
quadrant of the result.
(It also handles correctly the case of x being zero.)

**Parameters**

- `y` (number)
- `x` (number)

### math.ceil
*Type:* FUNCTION
Returns the smallest integer larger than or equal to x.

**Parameters**

- `x` (number)

### math.cos
*Type:* FUNCTION
Returns the cosine of x (assumed to be in radians).

**Parameters**

- `x` (number)

### math.cosh
*Type:* FUNCTION
Returns the hyperbolic cosine of x.

**Parameters**

- `x` (number)

### math.deg
*Type:* FUNCTION
Returns the angle x (given in radians) in degrees.

**Parameters**

- `x` (number)

### math.exp
*Type:* FUNCTION
Returns the value ex.

**Parameters**

- `x` (number)

### math.floor
*Type:* FUNCTION
Returns the largest integer smaller than or equal to x.

**Parameters**

- `x` (number)

### math.fmod
*Type:* FUNCTION
Returns the remainder of the division of x by y
that rounds the quotient towards zero.

**Parameters**

- `x` (number)
- `y` (number)

### math.frexp
*Type:* FUNCTION
Returns m and e such that x = m2e,
e is an integer and the absolute value of m is
in the range [0.5, 1)
(or zero when x is zero).

**Parameters**

- `x` (number)

### math.huge
*Type:* VARIABLE
The value HUGE_VAL,
a value larger than or equal to any other numerical value.

### math.ldexp
*Type:* FUNCTION
Returns m2e (e should be an integer).

**Parameters**

- `m` (number)
- `e` (number)

### math.log
*Type:* FUNCTION
Returns the natural logarithm of x.

**Parameters**

- `x` (number)

### math.log10
*Type:* FUNCTION
Returns the base-10 logarithm of x.

**Parameters**

- `x` (number)

### math.max
*Type:* FUNCTION
Returns the maximum value among its arguments.

**Parameters**

- `x` (number)
- `...`

### math.min
*Type:* FUNCTION
Returns the minimum value among its arguments.

**Parameters**

- `x` (number)
- `...`

### math.modf
*Type:* FUNCTION
Returns two numbers,
the integral part of x and the fractional part of x.

**Parameters**

- `x` (number)

### math.pi
*Type:* VARIABLE
The value of PI.

### math.pow
*Type:* FUNCTION
Returns xy.
(You can also use the expression x^y to compute this value.)

**Parameters**

- `x` (number)
- `y` (number)

### math.rad
*Type:* FUNCTION
Returns the angle x (given in degrees) in radians.

**Parameters**

- `x` (number)

### math.random
*Type:* FUNCTION
This function is an interface to the simple
pseudo-random generator function rand provided by ANSI C.
(No guarantees can be given for its statistical properties.)
When called without arguments,
returns a uniform pseudo-random real number
in the range [0,1).
When called with an integer number m,
math.random returns
a uniform pseudo-random integer in the range [1, m].
When called with two integer numbers m and n,
math.random returns a uniform pseudo-random
integer in the range [m, n].

**Parameters**

- `m` (number) (optional)
- `n` (number) (optional)

### math.randomseed
*Type:* FUNCTION
Sets x as the "seed"
for the pseudo-random generator:
equal seeds produce equal sequences of numbers.

**Parameters**

- `x` (number)

### math.sin
*Type:* FUNCTION
Returns the sine of x (assumed to be in radians).

**Parameters**

- `x` (number)

### math.sinh
*Type:* FUNCTION
Returns the hyperbolic sine of x.

**Parameters**

- `x` (number)

### math.sqrt
*Type:* FUNCTION
Returns the square root of x.
(You can also use the expression x^0.5 to compute this value.)

**Parameters**

- `x` (number)

### math.tan
*Type:* FUNCTION
Returns the tangent of x (assumed to be in radians).

**Parameters**

- `x` (number)

### math.tanh
*Type:* FUNCTION
Returns the hyperbolic tangent of x.

**Parameters**

- `x` (number)

<!-- model-lua -->

# Model {#apis:model-lua}

**Namespace:** `model`
**Language:** Lua
**Type:** Defold Lua
**File:** `model_ddf.proto`
**Source:** `engine/gamesys/proto/gamesys/model_ddf.proto`

Model API documentation

## API

### animation
*Type:* PROPERTY
The current animation set on the component. The type of the property is hash.

**Examples**

How to read the current animation from a model component:
```
function init(self)
  -- Get the current animation on component "model"
  local animation = go.get("#model", "animation")
  if animation == hash("run_left") then
    -- Running left. Do something...
  end
end

```

### cursor
*Type:* PROPERTY
The normalized animation cursor. The type of the property is number.
 Please note that model events may not fire as expected when the cursor is manipulated directly.

**Examples**

How to get the normalized cursor value:
```
function init(self)
  -- Get the cursor value on component "model"
  cursor = go.get("#model", "cursor")
end

```

How to animate the cursor from 0.0 to 1.0 using linear easing for 2.0 seconds:
```
function init(self)
  -- Get the current value on component "model"
  go.set("#model", "cursor", 0.0)
  -- Animate the cursor value
  go.animate("#model", "cursor", go.PLAYBACK_LOOP_FORWARD, 1.0, go.EASING_LINEAR, 2)
end

```

### material
*Type:* PROPERTY
The material used when rendering the model. The type of the property is hash.

**Examples**

How to set material using a script property (see resource.material):
```
go.property("my_material", resource.material("/material.material"))
function init(self)
  go.set("#model", "material", self.my_material)
end

```

### model.cancel
*Type:* FUNCTION
Cancels all animation on a model component.

**Parameters**

- `url` (string | hash | url) - the model for which to cancel the animation

### model.get_aabb
*Type:* FUNCTION
Get AABB of the whole model in local coordinate space.
AABB information return as a table with min and max fields, where min and max has type vmath.vector3.

**Parameters**

- `url` (string | hash | url) - the model

**Returns**

- `aabb` (table) - A table containing AABB of the model. If model has no meshes - return vmath.vector3(0,0,0) for min and max fields.

**Examples**

```
model.get_aabb("#model") -> { min = vmath.vector3(-2.5, -3.0, 0), max = vmath.vector3(1.5, 5.5, 0) }
model.get_aabb("#empty") -> { min = vmath.vector3(0, 0, 0), max = vmath.vector3(0, 0, 0) }

```

### model.get_go
*Type:* FUNCTION
Gets the id of the game object that corresponds to a model skeleton bone.
The returned game object can be used for parenting and transform queries.
This function has complexity O(n), where n is the number of bones in the model skeleton.
Game objects corresponding to a model skeleton bone can not be individually deleted.

**Parameters**

- `url` (string | hash | url) - the model to query
- `bone_id` (string | hash) - id of the corresponding bone

**Returns**

- `id` (hash) - id of the game object

**Examples**

The following examples assumes that the model component has id "model".
How to parent the game object of the calling script to the "right_hand" bone of the model in a player game object:
```
function init(self)
    local parent = model.get_go("player#model", "right_hand")
    msg.post(".", "set_parent", {parent_id = parent})
end

```

### model.get_mesh_aabb
*Type:* FUNCTION
Get AABB of all meshes.
AABB information return as a table with min and max fields, where min and max has type vmath.vector3.

**Parameters**

- `url` (string | hash | url) - the model

**Returns**

- `aabb` (table) - A table containing info about all AABB in the format <hash(mesh_id), aabb_info>

**Examples**

```
model.get_mesh_aabb("#model") -> { hash("Sword") = { min = vmath.vector3(-0.5, -0.5, 0), max = vmath.vector3(0.5, 0.5, 0) }, hash("Shield") = { min = vmath.vector3(-0.5, -0.5, -0.5), max = vmath.vector3(0.5, 0.5, 0.5) } }

```

### model.get_mesh_enabled
*Type:* FUNCTION
Get the enabled state of a mesh

**Parameters**

- `url` (string | hash | url) - the model
- `mesh_id` (string | hash | url) - the id of the mesh

**Returns**

- `enabled` (boolean) - true if the mesh is visible, false otherwise

**Examples**

```
function init(self)
    if model.get_mesh_enabled("#model", "Sword") then
       -- set properties specific for the sword
       self.weapon_properties = game.data.weapons["Sword"]
    end
end

```

### model.play_anim
*Type:* FUNCTION
Plays an animation on a model component with specified playback
mode and parameters.
An optional completion callback function can be provided that will be called when
the animation has completed playing. If no function is provided,
a model_animation_done message is sent to the script that started the animation.
 The callback is not called (or message sent) if the animation is
cancelled with model.cancel. The callback is called (or message sent) only for
animations that play with the following playback modes:

go.PLAYBACK_ONCE_FORWARD
go.PLAYBACK_ONCE_BACKWARD
go.PLAYBACK_ONCE_PINGPONG

**Parameters**

- `url` (string | hash | url) - the model for which to play the animation
- `anim_id` (string | hash) - id of the animation to play
- `playback` (constant) - playback mode of the animation
<ul>
<li><code>go.PLAYBACK_ONCE_FORWARD</code></li>
<li><code>go.PLAYBACK_ONCE_BACKWARD</code></li>
<li><code>go.PLAYBACK_ONCE_PINGPONG</code></li>
<li><code>go.PLAYBACK_LOOP_FORWARD</code></li>
<li><code>go.PLAYBACK_LOOP_BACKWARD</code></li>
<li><code>go.PLAYBACK_LOOP_PINGPONG</code></li>
</ul>
- `play_properties` (table) (optional) - optional table with properties
Play properties table:
<dl>
<dt><code>blend_duration</code></dt>
<dd><span class="type">number</span> Duration of a linear blend between the current and new animation.</dd>
<dt><code>offset</code></dt>
<dd><span class="type">number</span> The normalized initial value of the animation cursor when the animation starts playing.</dd>
<dt><code>playback_rate</code></dt>
<dd><span class="type">number</span> The rate with which the animation will be played. Must be positive.</dd>
</dl>
- `complete_function` (function(self, message_id, message, sender)) (optional) - function to call when the animation has completed.
<dl>
<dt><code>self</code></dt>
<dd><span class="type">object</span> The current object.</dd>
<dt><code>message_id</code></dt>
<dd><span class="type">hash</span> The name of the completion message, <code>"model_animation_done"</code>.</dd>
<dt><code>message</code></dt>
<dd><span class="type">table</span> Information about the completion:</dd>
</dl>
<ul>
<li><span class="type">hash</span> <code>animation_id</code> - the animation that was completed.</li>
<li><span class="type">constant</span> <code>playback</code> - the playback mode for the animation.</li>
</ul>
<dl>
<dt><code>sender</code></dt>
<dd><span class="type">url</span> The invoker of the callback: the model component.</dd>
</dl>

**Examples**

The following examples assumes that the model has id "model".
How to play the "jump" animation followed by the "run" animation:
```
local function anim_done(self, message_id, message, sender)
  if message_id == hash("model_animation_done") then
    if message.animation_id == hash("jump") then
      -- open animation done, chain with "run"
      local properties = { blend_duration = 0.2 }
      model.play_anim(url, "run", go.PLAYBACK_LOOP_FORWARD, properties, anim_done)
    end
  end
end

function init(self)
    local url = msg.url("#model")
    local play_properties = { blend_duration = 0.1 }
    -- first blend during 0.1 sec into the jump, then during 0.2 s into the run animation
    model.play_anim(url, "jump", go.PLAYBACK_ONCE_FORWARD, play_properties, anim_done)
end

```

### model.set_mesh_enabled
*Type:* FUNCTION
Enable or disable visibility of a mesh

**Parameters**

- `url` (string | hash | url) - the model
- `mesh_id` (string | hash | url) - the id of the mesh
- `enabled` (boolean) - true if the mesh should be visible, false if it should be hideen

**Examples**

```
function init(self)
    model.set_mesh_enabled("#model", "Sword", false) -- hide the sword
    model.set_mesh_enabled("#model", "Axe", true)    -- show the axe
end

```

### model_animation_done
*Type:* MESSAGE
This message is sent when a Model animation has finished playing back to the script
that started the animation.
 No message is sent if a completion callback function was supplied
when the animation was started. No message is sent if the animation is cancelled with
model.cancel(). This message is sent only for animations that play with
the following playback modes:

go.PLAYBACK_ONCE_FORWARD
go.PLAYBACK_ONCE_BACKWARD
go.PLAYBACK_ONCE_PINGPONG

**Parameters**

- `animation_id` (hash) - the id of the completed animation
- `playback` (constant) - the playback mode of the completed animation

**Examples**

```
function on_message(self, message_id, message, sender)
  if message_id == hash("model_animation_done") then
    if message.animation_id == hash("run") and message.playback == go.PLAYBACK_ONCE_FORWARD then
      -- The animation "run" has finished running forward.
    end
  end
end

```

### playback_rate
*Type:* PROPERTY
The animation playback rate. A multiplier to the animation playback rate. The type of the property is number.

**Examples**

How to set the playback_rate on component "model" to play at double the current speed:
```
function init(self)
  -- Get the current value on component "model"
  playback_rate = go.get("#model", "playback_rate")
  -- Set the playback_rate to double the previous value.
  go.set("#model", "playback_rate", playback_rate * 2)
end

```

The playback_rate is a non-negative number, a negative value will be clamped to 0.

### textureN
*Type:* PROPERTY
The texture hash id of the model. Used for getting/setting model texture for unit 0-7

**Examples**

How to set texture using a script property (see resource.texture):
```
go.property("my_texture", texture("/texture.png"))
function init(self)
  go.set("#model", "texture0", self.my_texture)
end

```

See resource.set_texture for an example on how to set the texture of an atlas.

<!-- msg-lua -->

# Message {#apis:msg-lua}

**Namespace:** `msg`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_msg.cpp`
**Source:** `engine/script/src/script_msg.cpp`

Functions for passing messages and constructing URL objects.

## API

### msg.post
*Type:* FUNCTION
Post a message to a receiving URL. The most common case is to send messages
to a component. If the component part of the receiver is omitted, the message
is broadcast to all components in the game object.
The following receiver shorthands are available:

"." the current game object
"#" the current component

 There is a 2 kilobyte limit to the message parameter table size.

**Parameters**

- `receiver` (string | url | hash) - The receiver must be a string in URL-format, a URL object or a hashed string.
- `message_id` (string | hash) - The id must be a string or a hashed string.
- `message` (table | nil) (optional) - a lua table with message parameters to send.

**Examples**

Send "enable" to the sprite "my_sprite" in "my_gameobject":
```
msg.post("my_gameobject#my_sprite", "enable")

```

Send a "my_message" to an url with some additional data:
```
local params = {my_parameter = "my_value"}
msg.post(my_url, "my_message", params)

```

### msg.url
*Type:* FUNCTION
This is equivalent to msg.url(nil) or msg.url("#"), which creates an url to the current
script component.

**Returns**

- `url` (url) - a new URL

**Examples**

Create a new URL which will address the current script:
```
local my_url = msg.url()
print(my_url) --> url: [current_collection:/my_instance#my_component]

```

### msg.url
*Type:* FUNCTION
The format of the string must be [socket:][path][#fragment], which is similar to a HTTP URL.
When addressing instances:

socket is the name of a valid world (a collection)
path is the id of the instance, which can either be relative the instance of the calling script or global
fragment would be the id of the desired component

In addition, the following shorthands are available:

"." the current game object
"#" the current component

**Parameters**

- `urlstring` (string) - string to create the url from

**Returns**

- `url` (url) - a new URL

**Examples**

```
local my_url = msg.url("#my_component")
print(my_url) --> url: [current_collection:/my_instance#my_component]

local my_url = msg.url("my_collection:/my_sub_collection/my_instance#my_component")
print(my_url) --> url: [my_collection:/my_sub_collection/my_instance#my_component]

local my_url = msg.url("my_socket:")
print(my_url) --> url: [my_collection:]

```

### msg.url
*Type:* FUNCTION
creates a new URL from separate arguments

**Parameters**

- `socket` (string | hash) (optional) - socket of the URL
- `path` (string | hash) (optional) - path of the URL
- `fragment` (string | hash) (optional) - fragment of the URL

**Returns**

- `url` (url) - a new URL

**Examples**

```
local my_socket = "main" -- specify by valid name
local my_path = hash("/my_collection/my_gameobject") -- specify as string or hash
local my_fragment = "component" -- specify as string or hash
local my_url = msg.url(my_socket, my_path, my_fragment)

print(my_url) --> url: [main:/my_collection/my_gameobject#component]
print(my_url.socket) --> 786443 (internal numeric value)
print(my_url.path) --> hash: [/my_collection/my_gameobject]
print(my_url.fragment) --> hash: [component]

```

<!-- os-lua -->

# Os {#apis:os-lua}

**Namespace:** `os`
**Language:** Lua
**Type:** Defold Lua
**File:** `lua_os.doc_h`
**Source:** `engine/lua/src/lua_os.doc_h`

Documentation for the Lua os standard library.

From [Lua 5.1 Reference Manual](https://www.lua.org/manual/5.1/)
by Roberto Ierusalimschy, Luiz Henrique de Figueiredo, Waldemar Celes.

Copyright  2006-2012 Lua.org, PUC-Rio.

Freely available under the terms of the [Lua license](https://www.lua.org/license.html).

## API

### os.clock
*Type:* FUNCTION
Returns an approximation of the amount in seconds of CPU time
used by the program.

### os.date
*Type:* FUNCTION
Returns a string or a table containing date and time,
formatted according to the given string format.
If the time argument is present,
this is the time to be formatted
(see the os.time function for a description of this value).
Otherwise, date formats the current time.
If format starts with '!',
then the date is formatted in Coordinated Universal Time.
After this optional character,
if format is the string "*t",
then date returns a table with the following fields:
year (four digits), month (1--12), day (1--31),
hour (0--23), min (0--59), sec (0--61),
wday (weekday, Sunday is 1),
yday (day of the year),
and isdst (daylight saving flag, a boolean).
If format is not "*t",
then date returns the date as a string,
formatted according to the same rules as the C function strftime.
When called without arguments,
date returns a reasonable date and time representation that depends on
the host system and on the current locale
(that is, os.date() is equivalent to os.date("%c")).

**Parameters**

- `format` (string) (optional)
- `time` (number) (optional)

### os.difftime
*Type:* FUNCTION
Returns the number of seconds from time t1 to time t2.
In POSIX, Windows, and some other systems,
this value is exactly t2-t1.

**Parameters**

- `t2` (number)
- `t1` (number)

### os.execute
*Type:* FUNCTION
This function is equivalent to the C function system.
It passes command to be executed by an operating system shell.
It returns a status code, which is system-dependent.
If command is absent, then it returns nonzero if a shell is available
and zero otherwise.

**Parameters**

- `command` (string) (optional)

### os.exit
*Type:* FUNCTION
Calls the C function exit,
with an optional code,
to terminate the host program.
The default value for code is the success code.
Calling os.exit will do a hard exit which will not run
the engine shutdown code. This may cause crashes on exit.
The recommended way to terminate your game is by using
the exit message which does a graceful shutdown.
msg.post("@system:", "exit", {code = 0})

**Parameters**

- `code` (number) (optional)

### os.getenv
*Type:* FUNCTION
Returns the value of the process environment variable varname,
or  nil if the variable is not defined.

**Parameters**

- `varname` (string)

### os.remove
*Type:* FUNCTION
Deletes the file or directory with the given name.
Directories must be empty to be removed.
If this function fails, it returns  nil,
plus a string describing the error.

**Parameters**

- `filename` (string)

### os.rename
*Type:* FUNCTION
Renames file or directory named oldname to newname.
If this function fails, it returns  nil,
plus a string describing the error.

**Parameters**

- `oldname` (string)
- `newname` (string)

### os.setlocale
*Type:* FUNCTION
Sets the current locale of the program.
locale is a string specifying a locale;
category is an optional string describing which category to change:
"all", "collate", "ctype",
"monetary", "numeric", or "time";
the default category is "all".
The function returns the name of the new locale,
or  nil if the request cannot be honored.
If locale is the empty string,
the current locale is set to an implementation-defined native locale.
If locale is the string "C",
the current locale is set to the standard C locale.
When called with  nil as the first argument,
this function only returns the name of the current locale
for the given category.

**Parameters**

- `locale` (string)
- `category` (string) (optional)

### os.time
*Type:* FUNCTION
Returns the current time when called without arguments,
or a time representing the date and time specified by the given table.
This table must have fields year, month, and day,
and may have fields hour, min, sec, and isdst
(for a description of these fields, see the os.date function).
The returned value is a number, whose meaning depends on your system.
In POSIX, Windows, and some other systems, this number counts the number
of seconds since some given start time (the "epoch").
In other systems, the meaning is not specified,
and the number returned by time can be used only as an argument to
date and difftime.

**Parameters**

- `table` (table) (optional)

### os.tmpname
*Type:* FUNCTION
Returns a string with a file name that can
be used for a temporary file.
The file must be explicitly opened before its use
and explicitly removed when no longer needed.
On some systems (POSIX),
this function also creates a file with that name,
to avoid security risks.
(Someone else might create the file with wrong permissions
in the time between getting the name and creating the file.)
You still have to open the file to use it
and to remove it (even if you do not use it).
When possible,
you may prefer to use io.tmpfile,
which automatically removes the file when the program ends.

<!-- package-lua -->

# Package {#apis:package-lua}

**Namespace:** `package`
**Language:** Lua
**Type:** Defold Lua
**File:** `lua_package.doc_h`
**Source:** `engine/lua/src/lua_package.doc_h`

Documentation for the Lua package standard library.

From [Lua 5.1 Reference Manual](https://www.lua.org/manual/5.1/)
by Roberto Ierusalimschy, Luiz Henrique de Figueiredo, Waldemar Celes.

Copyright  2006-2012 Lua.org, PUC-Rio.

Freely available under the terms of the [Lua license](https://www.lua.org/license.html).

## API

### package.cpath
*Type:* FUNCTION
The path used by require to search for a C loader.
Lua initializes the C path package.cpath in the same way
it initializes the Lua path package.path,
using the environment variable LUA_CPATH
or a default path defined in luaconf.h.

### package.loaded
*Type:* FUNCTION
A table used by require to control which
modules are already loaded.
When you require a module modname and
package.loaded[modname] is not false,
require simply returns the value stored there.

### package.loaders
*Type:* FUNCTION
A table used by require to control how to load modules.
Each entry in this table is a searcher function.
When looking for a module,
require calls each of these searchers in ascending order,
with the module name (the argument given to require) as its
sole parameter.
The function can return another function (the module loader)
or a string explaining why it did not find that module
(or  nil if it has nothing to say).
Lua initializes this table with four functions.
The first searcher simply looks for a loader in the
package.preload table.
The second searcher looks for a loader as a Lua library,
using the path stored at package.path.
A path is a sequence of templates separated by semicolons.
For each template,
the searcher will change each interrogation
mark in the template by filename,
which is the module name with each dot replaced by a
"directory separator" (such as "/" in Unix);
then it will try to open the resulting file name.
So, for instance, if the Lua path is the string
```
"./?.lua;./?.lc;/usr/local/?/init.lua"

```

the search for a Lua file for module foo
will try to open the files
./foo.lua, ./foo.lc, and
/usr/local/foo/init.lua, in that order.
The third searcher looks for a loader as a C library,
using the path given by the variable package.cpath.
For instance,
if the C path is the string
```
"./?.so;./?.dll;/usr/local/?/init.so"

```

the searcher for module foo
will try to open the files ./foo.so, ./foo.dll,
and /usr/local/foo/init.so, in that order.
Once it finds a C library,
this searcher first uses a dynamic link facility to link the
application with the library.
Then it tries to find a C function inside the library to
be used as the loader.
The name of this C function is the string "luaopen_"
concatenated with a copy of the module name where each dot
is replaced by an underscore.
Moreover, if the module name has a hyphen,
its prefix up to (and including) the first hyphen is removed.
For instance, if the module name is a.v1-b.c,
the function name will be luaopen_b_c.
The fourth searcher tries an all-in-one loader.
It searches the C path for a library for
the root name of the given module.
For instance, when requiring a.b.c,
it will search for a C library for a.
If found, it looks into it for an open function for
the submodule;
in our example, that would be luaopen_a_b_c.
With this facility, a package can pack several C submodules
into one single library,
with each submodule keeping its original open function.

### package.loadlib
*Type:* FUNCTION
Dynamically links the host program with the C library libname.
Inside this library, looks for a function funcname
and returns this function as a C function.
(So, funcname must follow the protocol ).
This is a low-level function.
It completely bypasses the package and module system.
Unlike require,
it does not perform any path searching and
does not automatically adds extensions.
libname must be the complete file name of the C library,
including if necessary a path and extension.
funcname must be the exact name exported by the C library
(which may depend on the C compiler and linker used).
This function is not supported by ANSI C.
As such, it is only available on some platforms
(Windows, Linux, Mac OS X, Solaris, BSD,
plus other Unix systems that support the dlfcn standard).

**Parameters**

- `libname` (string)
- `funcname` (string)

### package.path
*Type:* FUNCTION
The path used by require to search for a Lua loader.
At start-up, Lua initializes this variable with
the value of the environment variable LUA_PATH or
with a default path defined in luaconf.h,
if the environment variable is not defined.
Any ";;" in the value of the environment variable
is replaced by the default path.

### package.preload
*Type:* FUNCTION
A table to store loaders for specific modules
.

### package.seeall
*Type:* FUNCTION
Sets a metatable for module with
its __index field referring to the global environment,
so that this module inherits values
from the global environment.
To be used as an option to function module.

**Parameters**

- `module` (table)

<!-- particlefx-lua -->

# Particle effects {#apis:particlefx-lua}

**Namespace:** `particlefx`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_particlefx.cpp`
**Source:** `engine/gamesys/src/gamesys/scripts/script_particlefx.cpp`

Functions for controlling particle effect component playback and
shader constants.

## API

### particlefx.EMITTER_STATE_POSTSPAWN
*Type:* CONSTANT
The emitter is not spawning any particles, but has particles that are still alive.

### particlefx.EMITTER_STATE_PRESPAWN
*Type:* CONSTANT
The emitter will be in this state when it has been started but before spawning any particles. Normally the emitter is in this state for a short time, depending on if a start delay has been set for this emitter or not.

### particlefx.EMITTER_STATE_SLEEPING
*Type:* CONSTANT
The emitter does not have any living particles and will not spawn any particles in this state.

### particlefx.EMITTER_STATE_SPAWNING
*Type:* CONSTANT
The emitter is spawning particles.

### particlefx.play
*Type:* FUNCTION
Starts playing a particle FX component.
Particle FX started this way need to be manually stopped through particlefx.stop().
Which particle FX to play is identified by the URL.
 A particle FX will continue to emit particles even if the game object the particle FX component belonged to is deleted. You can call particlefx.stop() to stop it from emitting more particles.

**Parameters**

- `url` (string | hash | url) - the particle fx that should start playing.
- `emitter_state_function` (function(self, id, emitter, state)) (optional) - optional callback function that will be called when an emitter attached to this particlefx changes state.
<dl>
<dt><code>self</code></dt>
<dd><span class="type">object</span> The current object</dd>
<dt><code>id</code></dt>
<dd><span class="type">hash</span> The id of the particle fx component</dd>
<dt><code>emitter</code></dt>
<dd><span class="type">hash</span> The id of the emitter</dd>
<dt><code>state</code></dt>
<dd><span class="type">constant</span> the new state of the emitter:</dd>
</dl>
<ul>
<li><code>particlefx.EMITTER_STATE_SLEEPING</code></li>
<li><code>particlefx.EMITTER_STATE_PRESPAWN</code></li>
<li><code>particlefx.EMITTER_STATE_SPAWNING</code></li>
<li><code>particlefx.EMITTER_STATE_POSTSPAWN</code></li>
</ul>

**Examples**

How to play a particle fx when a game object is created.
The callback receives the hash of the path to the particlefx, the hash of the id
of the emitter, and the new state of the emitter as particlefx.EMITTER_STATE_.
```
local function emitter_state_change(self, id, emitter, state)
  if emitter == hash("exhaust") and state == particlefx.EMITTER_STATE_POSTSPAWN then
    -- exhaust is done spawning particles...
  end
end

function init(self)
    particlefx.play("#particlefx", emitter_state_change)
end

```

### particlefx.reset_constant
*Type:* FUNCTION
Resets a shader constant for a particle FX component emitter.
The constant must be defined in the material assigned to the emitter.
Resetting a constant through this function implies that the value defined in the material will be used.
Which particle FX to reset a constant for is identified by the URL.

**Parameters**

- `url` (string | hash | url) - the particle FX that should have a constant reset
- `emitter` (string | hash) - the id of the emitter
- `constant` (string | hash) - the name of the constant

**Examples**

The following examples assumes that the particle FX has id "particlefx", it
contains an emitter with the id "emitter" and that the default-material in builtins is used, which defines the constant "tint".
If you assign a custom material to the sprite, you can reset the constants defined there in the same manner.
How to reset the tinting of particles from an emitter:
```
function init(self)
    particlefx.reset_constant("#particlefx", "emitter", "tint")
end

```

### particlefx.set_constant
*Type:* FUNCTION
Sets a shader constant for a particle FX component emitter.
The constant must be defined in the material assigned to the emitter.
Setting a constant through this function will override the value set for that constant in the material.
The value will be overridden until particlefx.reset_constant is called.
Which particle FX to set a constant for is identified by the URL.

**Parameters**

- `url` (string | hash | url) - the particle FX that should have a constant set
- `emitter` (string | hash) - the id of the emitter
- `constant` (string | hash) - the name of the constant
- `value` (vector4) - the value of the constant

**Examples**

The following examples assumes that the particle FX has id "particlefx", it
contains an emitter with the id "emitter" and that the default-material in builtins is used, which defines the constant "tint".
If you assign a custom material to the sprite, you can reset the constants defined there in the same manner.
How to tint particles from an emitter red:
```
function init(self)
    particlefx.set_constant("#particlefx", "emitter", "tint", vmath.vector4(1, 0, 0, 1))
end

```

### particlefx.stop
*Type:* FUNCTION
Stops a particle FX component from playing.
Stopping a particle FX does not remove already spawned particles.
Which particle FX to stop is identified by the URL.

**Parameters**

- `url` (string | hash | url) - the particle fx that should stop playing
- `options` (table) (optional) - Options when stopping the particle fx. Supported options:
<ul>
<li><span class="type">boolean</span> <code>clear</code>: instantly clear spawned particles</li>
</ul>

**Examples**

How to stop a particle fx when a game object is deleted and immediately also clear
any spawned particles:
```
function final(self)
    particlefx.stop("#particlefx", { clear = true })
end

```

<!-- physics-lua -->

# Collision object {#apis:physics-lua}

**Namespace:** `physics`
**Language:** Lua
**Type:** Defold Lua
**File:** `physics_ddf.proto`
**Source:** `engine/gamesys/proto/gamesys/physics_ddf.proto`

Collision object physics API documentation

## API

### angular_damping
*Type:* PROPERTY
The angular damping value for the collision object. Setting this value alters the damping of
angular motion of the object (rotation). Valid values are between 0 (no damping) and 1 (full damping).

**Examples**

How to decrease a collision object component's angular damping:
```
-- get angular damping from collision object "collisionobject" in gameobject "floater"
local target = "floater#collisionobject"
local damping = go.get(target, "angular_damping")
-- decrease it by 10%
go.set(target, "angular_damping", damping * 0.9)

```

### angular_velocity
*Type:* PROPERTY
The current angular velocity of the collision object component as a vector3.
The velocity is measured as a rotation around the vector with a speed equivalent to the vector length
in radians/s.

**Replaces:** request_velocity and velocity_response

**Examples**

How to query and modify a collision object component's angular velocity:
```
-- get angular velocity from collision object "collisionobject" in gameobject "boulder"
local velocity = go.get("boulder#collisionobject", "angular_velocity")
-- do something interesting
if velocity.z < 0 then
    -- clockwise rotation
    ...
else
    -- counter clockwise rotation
    ...
end
-- decrease it by 10%
velocity.z = velocity.z * 0.9
go.set("boulder#collisionobject", "angular_velocity", velocity * 0.9)

```

### apply_force
*Type:* MESSAGE
Post this message to a collision-object-component to apply the specified force on the collision object.
The collision object must be dynamic.

**Parameters**

- `force` (vector3) - the force to be applied on the collision object, measured in Newton
- `position` (vector3) - the position where the force should be applied

**Examples**

Assuming the instance of the script has a collision-object-component with id "co":
```
-- apply a force of 1 Newton towards world-x at the center of the game object instance
msg.post("#co", "apply_force", {force = vmath.vector3(1, 0, 0), position = go.get_world_position()})

```

### collision_event
*Type:* MESSAGE
See physics.set_event_listener.
This message is sent to a function specified in physics.set_event_listener
when two collision objects collide.
This message only reports that a collision has occurred and will be sent once per frame and per colliding pair.
For more detailed information, check for the contact_point_event.

**Parameters**

- `a` (table) - collision information for object A
<dl>
<dt><code>position</code></dt>
<dd><span class="type">vector3</span> The world position of object A</dd>
<dt><code>id</code></dt>
<dd><span class="type">hash</span> The ID of object A</dd>
<dt><code>group</code></dt>
<dd><span class="type">hash</span> The collision group of object A</dd>
</dl>
- `b` (table) - collision information for object B
<dl>
<dt><code>position</code></dt>
<dd><span class="type">vector3</span> The world position of object B</dd>
<dt><code>id</code></dt>
<dd><span class="type">hash</span> The ID of object B</dd>
<dt><code>group</code></dt>
<dd><span class="type">hash</span> The collision group of object B</dd>
</dl>

**Examples**

How to take action when a collision occurs:
```
physics.set_event_listener(function(self, event, data)
  if event == hash("collision_event") then
      pprint(data)
      -- {
      --  a = {
      --          group = hash: [default],
      --          position = vmath.vector3(183, 666, 0),
      --          id = hash: [/go1]
      --      },
      --  b = {
      --          group = hash: [default],
      --          position = vmath.vector3(185, 704.05865478516, 0),
      --          id = hash: [/go2]
      --      }
      -- }
  end
end)

```

### collision_response
*Type:* MESSAGE
This message is broadcasted to every component of an instance that has a collision object,
when the collision object collides with another collision object. For a script to take action
when such a collision happens, it should check for this message in its on_message callback
function.
This message only reports that a collision actually happened and will only be sent once per
colliding pair and frame.
To retrieve more detailed information, check for the contact_point_response instead.

**Parameters**

- `other_id` (hash) - the id of the instance the collision object collided with
- `other_position` (vector3) - the world position of the instance the collision object collided with
- `other_group` (hash) - the collision group of the other collision object
- `own_group` (hash) - the collision group of the own collision object

**Examples**

How to take action when a collision occurs:
```
function on_message(self, message_id, message, sender)
    -- check for the message
    if message_id == hash("collision_response") then
        -- take action
    end
end

```

### contact_point_event
*Type:* MESSAGE
See physics.set_event_listener.
This message is sent to a function specified in physics.set_event_listener when
a collision object has contact points with another collision object.
Since multiple contact points can occur for two colliding objects, this event can be sent
multiple times in the same frame for the same two colliding objects. To only be notified once
when the collision occurs, check for the collision_event event instead.

**Parameters**

- `applied_impulse` (number) - the impulse the contact resulted in
- `distance` (number) - the penetration distance between the objects, which is always positive
- `a` (table) - contact point information for object A
<dl>
<dt><code>position</code></dt>
<dd><span class="type">vector3</span> The world position of object A</dd>
<dt><code>id</code></dt>
<dd><span class="type">hash</span> The ID of object A</dd>
<dt><code>group</code></dt>
<dd><span class="type">hash</span> The collision group of object A</dd>
<dt><code>relative_velocity</code></dt>
<dd><span class="type">vector3</span> The relative velocity of the collision object A as observed from B object</dd>
<dt><code>mass</code></dt>
<dd><span class="type">number</span> The mass of the collision object A in kg</dd>
<dt><code>normal</code></dt>
<dd><span class="type">vector3</span> normal in world space of the contact point, which points from B object towards A object</dd>
</dl>
- `b` (table) - contact point information for object B
<dl>
<dt><code>position</code></dt>
<dd><span class="type">vector3</span> The world position of object B</dd>
<dt><code>id</code></dt>
<dd><span class="type">hash</span> The ID of object B</dd>
<dt><code>group</code></dt>
<dd><span class="type">hash</span> The collision group of object B</dd>
<dt><code>relative_velocity</code></dt>
<dd><span class="type">vector3</span> The relative velocity of the collision object B as observed from A object</dd>
<dt><code>mass</code></dt>
<dd><span class="type">number</span> The mass of the collision object B in kg</dd>
<dt><code>normal</code></dt>
<dd><span class="type">vector3</span> normal in world space of the contact point, which points from A object towards B object</dd>
</dl>

**Examples**

How to take action when a contact point occurs:
```
physics.set_event_listener(function(self, events)
  for _,event in ipairs(events):
    if event['type'] == hash("contact_point_event") then
        pprint(event)
        -- {
        --  applied_impulse = 310.00769042969,
        --  distance = 0.0714111328125,
        --  a = {
        --      position = vmath.vector3(446, 371, 0),
        --      relative_velocity = vmath.vector3(1.1722083854693e-06, -20.667181015015, -0),
        --      mass = 0,
        --      group = hash: [default],
        --      id = hash: [/flat],
        --      normal = vmath.vector3(-0, -1, -0)
        --  },
        --  b = {
        --      position = vmath.vector3(185, 657.92858886719, 0),
        --      relative_velocity = vmath.vector3(-1.1722083854693e-06, 20.667181015015, 0),
        --      mass = 10,
        --      group = hash: [default],
        --      id = hash: [/go2],
        --      normal = vmath.vector3(0, 1, 0)
        --  },
        --  type = hash: [contact_point_event]
        -- }
     end
   end
end)

```

### contact_point_response
*Type:* MESSAGE
This message is broadcasted to every component of an instance that has a collision object,
when the collision object has contact points with respect to another collision object.
For a script to take action when such contact points occur, it should check for this message
in its on_message callback function.
Since multiple contact points can occur for two colliding objects, this message can be sent
multiple times in the same frame for the same two colliding objects. To only be notified once
when the collision occurs, check for the collision_response message instead.

**Parameters**

- `position` (vector3) - world position of the contact point
- `normal` (vector3) - normal in world space of the contact point, which points from the other object towards the current object
- `relative_velocity` (vector3) - the relative velocity of the collision object as observed from the other object
- `distance` (number) - the penetration distance between the objects, which is always positive
- `applied_impulse` (number) - the impulse the contact resulted in
- `life_time` (number) - life time of the contact, <strong>not currently used</strong>
- `mass` (number) - the mass of the current collision object in kg
- `other_mass` (number) - the mass of the other collision object in kg
- `other_id` (hash) - the id of the instance the collision object is in contact with
- `other_position` (vector3) - the world position of the other collision object
- `other_group` (hash) - the collision group of the other collision object
- `own_group` (hash) - the collision group of the own collision object

**Examples**

How to take action when a contact point occurs:
```
function on_message(self, message_id, message, sender)
    -- check for the message
    if message_id == hash("contact_point_response") then
        -- take action
    end
end

```

### linear_damping
*Type:* PROPERTY
The linear damping value for the collision object. Setting this value alters the damping of
linear motion of the object. Valid values are between 0 (no damping) and 1 (full damping).

**Examples**

How to increase a collision object component's linear damping:
```
-- get linear damping from collision object "collisionobject" in gameobject "floater"
local target = "floater#collisionobject"
local damping = go.get(target, "linear_damping")
-- increase it by 10% if it's below 0.9
if damping <= 0.9 then
    go.set(target, "linear_damping", damping * 1.1)
end

```

### linear_velocity
*Type:* PROPERTY
The current linear velocity of the collision object component as a vector3.
The velocity is measured in units/s (pixels/s).

**Replaces:** request_velocity and velocity_response

**Examples**

How to query and modify a collision object component's linear velocity:
```
-- get linear velocity from collision object "collisionobject" in gameobject "ship"
local source = "ship#collisionobject"
local velocity = go.get(source, "linear_velocity")
-- decrease it by 10%
go.set(source, "linear_velocity", velocity * 0.9)
-- apply the velocity on target game object "boulder"'s collision object as a force
local target = "boulder#collisionobject"
local pos = go.get_position(target)
msg.post(target, "apply_force", { force = velocity, position = pos })

```

### mass
*Type:* PROPERTY
READ ONLY Returns the defined physical mass of the collision object component as a number.

**Examples**

How to query a collision object component's mass:
```
-- get mass from collision object component "boulder"
local mass = go.get("#boulder", "mass")
-- do something useful
assert(mass > 1)

```

### physics.create_joint
*Type:* FUNCTION
Create a physics joint between two collision object components.
Note: Currently only supported in 2D physics.

**Parameters**

- `joint_type` (number) - the joint type
- `collisionobject_a` (string | hash | url) - first collision object
- `joint_id` (string | hash) - id of the joint
- `position_a` (vector3) - local position where to attach the joint on the first collision object
- `collisionobject_b` (string | hash | url) - second collision object
- `position_b` (vector3) - local position where to attach the joint on the second collision object
- `properties` (table) (optional) - optional joint specific properties table
See each joint type for possible properties field. The one field that is accepted for all joint types is:
- <span class="type">boolean</span> <code>collide_connected</code>: Set this flag to true if the attached bodies should collide.

### physics.destroy_joint
*Type:* FUNCTION
Destroy an already physics joint. The joint has to be created before a
destroy can be issued.
Note: Currently only supported in 2D physics.

**Parameters**

- `collisionobject` (string | hash | url) - collision object where the joint exist
- `joint_id` (string | hash) - id of the joint

### physics.get_gravity
*Type:* FUNCTION
Get the gravity in runtime. The gravity returned is not global, it will return
the gravity for the collection that the function is called from.
Note: For 2D physics the z component will always be zero.

**Returns**

- `gravity` (vector3) - gravity vector of collection

**Examples**

```
function init(self)
    local gravity = physics.get_gravity()
    -- Inverse gravity!
    gravity = -gravity
    physics.set_gravity(gravity)
end

```

### physics.get_group
*Type:* FUNCTION
Returns the group name of a collision object as a hash.

**Parameters**

- `url` (string | hash | url) - the collision object to return the group of.

**Returns**

- `group` (hash) - hash value of the group.
<div class="codehilite"><pre><span></span><code><span class="kd">local</span> <span class="kr">function</span> <span class="nf">check_is_enemy</span><span class="p">()</span>
    <span class="kd">local</span> <span class="n">group</span> <span class="o">=</span> <span class="n">physics</span><span class="p">.</span><span class="n">get_group</span><span class="p">(</span><span class="s2">&quot;#collisionobject&quot;</span><span class="p">)</span>
    <span class="kr">return</span> <span class="n">group</span> <span class="o">==</span> <span class="n">hash</span><span class="p">(</span><span class="s2">&quot;enemy&quot;</span><span class="p">)</span>
<span class="kr">end</span>
</code></pre></div>

### physics.get_joint_properties
*Type:* FUNCTION
Get a table for properties for a connected joint. The joint has to be created before
properties can be retrieved.
Note: Currently only supported in 2D physics.

**Parameters**

- `collisionobject` (string | hash | url) - collision object where the joint exist
- `joint_id` (string | hash) - id of the joint

**Returns**

- `properties` (table) - properties table. See the joint types for what fields are available, the only field available for all types is:
<ul>
<li><span class="type">boolean</span> <code>collide_connected</code>: Set this flag to true if the attached bodies should collide.</li>
</ul>

### physics.get_joint_reaction_force
*Type:* FUNCTION
Get the reaction force for a joint. The joint has to be created before
the reaction force can be calculated.
Note: Currently only supported in 2D physics.

**Parameters**

- `collisionobject` (string | hash | url) - collision object where the joint exist
- `joint_id` (string | hash) - id of the joint

**Returns**

- `force` (vector3) - reaction force for the joint

### physics.get_joint_reaction_torque
*Type:* FUNCTION
Get the reaction torque for a joint. The joint has to be created before
the reaction torque can be calculated.
Note: Currently only supported in 2D physics.

**Parameters**

- `collisionobject` (string | hash | url) - collision object where the joint exist
- `joint_id` (string | hash) - id of the joint

**Returns**

- `torque` (number) - the reaction torque on bodyB in N*m.

### physics.get_maskbit
*Type:* FUNCTION
Returns true if the specified group is set in the mask of a collision
object, false otherwise.

**Parameters**

- `url` (string | hash | url) - the collision object to check the mask of.
- `group` (string) - the name of the group to check for.

**Returns**

- `maskbit` (boolean) - boolean value of the maskbit. 'true' if present, 'false' otherwise.
<div class="codehilite"><pre><span></span><code><span class="kd">local</span> <span class="kr">function</span> <span class="nf">is_invincible</span><span class="p">()</span>
    <span class="c1">-- check if the collisionobject would collide with the &quot;bullet&quot; group</span>
    <span class="kd">local</span> <span class="n">invincible</span> <span class="o">=</span> <span class="n">physics</span><span class="p">.</span><span class="n">get_maskbit</span><span class="p">(</span><span class="s2">&quot;#collisionobject&quot;</span><span class="p">,</span> <span class="s2">&quot;bullet&quot;</span><span class="p">)</span>
    <span class="kr">return</span> <span class="n">invincible</span>
<span class="kr">end</span>
</code></pre></div>

### physics.get_shape
*Type:* FUNCTION
Gets collision shape data from a collision object

**Parameters**

- `url` (string | hash | url) - the collision object.
- `shape` (string | hash) - the name of the shape to get data for.

**Returns**

- `table` (table) - A table containing meta data about the physics shape
<dl>
<dt><code>type</code></dt>
<dd><span class="type">number</span> The shape type. Supported values:</dd>
</dl>
<ul>
<li><code>physics.SHAPE_TYPE_SPHERE</code></li>
<li><code>physics.SHAPE_TYPE_BOX</code></li>
<li><code>physics.SHAPE_TYPE_CAPSULE</code> <em>Only supported for 3D physics</em></li>
<li><code>physics.SHAPE_TYPE_HULL</code></li>
</ul>
The returned table contains different fields depending on which type the shape is.
If the shape is a sphere:
<dl>
<dt><code>diameter</code></dt>
<dd><span class="type">number</span> the diameter of the sphere shape</dd>
</dl>
If the shape is a box:
<dl>
<dt><code>dimensions</code></dt>
<dd><span class="type">vector3</span> a <code>vmath.vector3</code> of the box dimensions</dd>
</dl>
If the shape is a capsule:
<dl>
<dt><code>diameter</code></dt>
<dd><span class="type">number</span> the diameter of the capsule poles</dd>
<dt><code>height</code></dt>
<dd><span class="type">number</span> the height of the capsule</dd>
</dl>
<div class="codehilite"><pre><span></span><code><span class="kd">local</span> <span class="kr">function</span> <span class="nf">get_shape_meta</span><span class="p">()</span>
    <span class="kd">local</span> <span class="n">sphere</span> <span class="o">=</span> <span class="n">physics</span><span class="p">.</span><span class="n">get_shape</span><span class="p">(</span><span class="s2">&quot;#collisionobject&quot;</span><span class="p">,</span> <span class="s2">&quot;my_sphere_shape&quot;</span><span class="p">)</span>
    <span class="c1">-- returns a table with sphere.diameter</span>
    <span class="kr">return</span> <span class="n">sphere</span>
<span class="kr">end</span>
</code></pre></div>

### physics.JOINT_TYPE_FIXED
*Type:* CONSTANT
The following properties are available when connecting a joint of JOINT_TYPE_FIXED type:

**Parameters**

- `max_length` (number) - The maximum length of the rope.

### physics.JOINT_TYPE_HINGE
*Type:* CONSTANT
The following properties are available when connecting a joint of JOINT_TYPE_HINGE type:

**Parameters**

- `reference_angle` (number) - The bodyB angle minus bodyA angle in the reference state (radians).
- `lower_angle` (number) - The lower angle for the joint limit (radians).
- `upper_angle` (number) - The upper angle for the joint limit (radians).
- `max_motor_torque` (number) - The maximum motor torque used to achieve the desired motor speed. Usually in N-m.
- `motor_speed` (number) - The desired motor speed. Usually in radians per second.
- `enable_limit` (boolean) - A flag to enable joint limits.
- `enable_motor` (boolean) - A flag to enable the joint motor.
- `joint_angle` (number) - <span class="mark">READ ONLY</span>Current joint angle in radians.
(Read only field, available from <code>physics.get_joint_properties()</code>)
- `joint_speed` (number) - <span class="mark">READ ONLY</span>Current joint angle speed in radians per second.
(Read only field, available from <code>physics.get_joint_properties()</code>)

### physics.JOINT_TYPE_SLIDER
*Type:* CONSTANT
The following properties are available when connecting a joint of JOINT_TYPE_SLIDER type:

**Parameters**

- `local_axis_a` (vector3) - The local translation unit axis in bodyA.
- `reference_angle` (number) - The constrained angle between the bodies: bodyB_angle - bodyA_angle.
- `enable_limit` (boolean) - Enable/disable the joint limit.
- `lower_translation` (number) - The lower translation limit, usually in meters.
- `upper_translation` (number) - The upper translation limit, usually in meters.
- `enable_motor` (boolean) - Enable/disable the joint motor.
- `max_motor_force` (number) - The maximum motor torque, usually in N-m.
- `motor_speed` (number) - The desired motor speed in radians per second.
- `joint_translation` (number) - <span class="mark">READ ONLY</span>Current joint translation, usually in meters.
(Read only field, available from <code>physics.get_joint_properties()</code>)
- `joint_speed` (number) - <span class="mark">READ ONLY</span>Current joint translation speed, usually in meters per second.
(Read only field, available from <code>physics.get_joint_properties()</code>)

### physics.JOINT_TYPE_SPRING
*Type:* CONSTANT
The following properties are available when connecting a joint of JOINT_TYPE_SPRING type:

**Parameters**

- `length` (number) - The natural length between the anchor points.
- `frequency` (number) - The mass-spring-damper frequency in Hertz. A value of 0 disables softness.
- `damping` (number) - The damping ratio. 0 = no damping, 1 = critical damping.

### physics.JOINT_TYPE_WELD
*Type:* CONSTANT
The following properties are available when connecting a joint of JOINT_TYPE_WELD type:

**Parameters**

- `reference_angle` (number) - <span class="mark">READ ONLY</span>The bodyB angle minus bodyA angle in the reference state (radians).
- `frequency` (number) - The mass-spring-damper frequency in Hertz. Rotation only. Disable softness with a value of 0.
- `damping` (number) - The damping ratio. 0 = no damping, 1 = critical damping.

### physics.JOINT_TYPE_WHEEL
*Type:* CONSTANT
The following properties are available when connecting a joint of JOINT_TYPE_WHEEL type:

**Parameters**

- `local_axis_a` (vector3) - The local translation unit axis in bodyA.
- `max_motor_torque` (number) - The maximum motor torque used to achieve the desired motor speed. Usually in N-m.
- `motor_speed` (number) - The desired motor speed in radians per second.
- `enable_motor` (boolean) - Enable/disable the joint motor.
- `frequency` (number) - The mass-spring-damper frequency in Hertz. Rotation only. Disable softness with a value of 0.
- `damping` (number) - The spring damping ratio. 0 = no damping, 1 = critical damping.
- `joint_translation` (number) - <span class="mark">READ ONLY</span>Current joint translation, usually in meters.
(Read only field, available from <code>physics.get_joint_properties()</code>)
- `joint_speed` (number) - <span class="mark">READ ONLY</span>Current joint translation speed, usually in meters per second.
(Read only field, available from <code>physics.get_joint_properties()</code>)

### physics.raycast
*Type:* FUNCTION
Ray casts are used to test for intersections against collision objects in the physics world.
Collision objects of types kinematic, dynamic and static are tested against. Trigger objects
do not intersect with ray casts.
Which collision objects to hit is filtered by their collision groups and can be configured
through groups.
NOTE: Ray casts will ignore collision objects that contain the starting point of the ray. This is a limitation in Box2D.

**Parameters**

- `from` (vector3) - the world position of the start of the ray
- `to` (vector3) - the world position of the end of the ray
- `groups` (table) - a lua table containing the hashed groups for which to test collisions against
- `options` (table) (optional) - a lua table containing options for the raycast.
<dl>
<dt><code>all</code></dt>
<dd><span class="type">boolean</span> Set to <code>true</code> to return all ray cast hits. If <code>false</code>, it will only return the closest hit.</dd>
</dl>

**Returns**

- `result` (table | nil) - It returns a list. If missed it returns <code>nil</code>. See <a href="#ray_cast_response">ray_cast_response</a> for details on the returned values.

**Examples**

How to perform a ray cast synchronously:
```
function init(self)
    self.groups = {hash("world"), hash("enemy")}
end

function update(self, dt)
    -- request ray cast
    local result = physics.raycast(from, to, self.groups, {all=true})
    if result ~= nil then
        -- act on the hit (see 'ray_cast_response')
        for _,result in ipairs(results) do
            handle_result(result)
        end
    end
end

```

### physics.raycast_async
*Type:* FUNCTION
Ray casts are used to test for intersections against collision objects in the physics world.
Collision objects of types kinematic, dynamic and static are tested against. Trigger objects
do not intersect with ray casts.
Which collision objects to hit is filtered by their collision groups and can be configured
through groups.
The actual ray cast will be performed during the physics-update.

If an object is hit, the result will be reported via a ray_cast_response message.
If there is no object hit, the result will be reported via a ray_cast_missed message.

NOTE: Ray casts will ignore collision objects that contain the starting point of the ray. This is a limitation in Box2D.

**Parameters**

- `from` (vector3) - the world position of the start of the ray
- `to` (vector3) - the world position of the end of the ray
- `groups` (table) - a lua table containing the hashed groups for which to test collisions against
- `request_id` (number) (optional) - a number in range [0,255]. It will be sent back in the response for identification, 0 by default

**Examples**

How to perform a ray cast asynchronously:
```
function init(self)
    self.my_groups = {hash("my_group1"), hash("my_group2")}
end

function update(self, dt)
    -- request ray cast
    physics.raycast_async(my_start, my_end, self.my_groups)
end

function on_message(self, message_id, message, sender)
    -- check for the response
    if message_id == hash("ray_cast_response") then
        -- act on the hit
    elseif message_id == hash("ray_cast_missed") then
        -- act on the miss
    end
end

```

### physics.set_event_listener
*Type:* FUNCTION
Only one physics world event listener can be set at a time.

**Parameters**

- `callback` (function(self, events) | nil) - A callback that receives an information about all the physics interactions in this physics world.
<dl>
<dt><code>self</code></dt>
<dd><span class="type">object</span> The calling script</dd>
<dt><code>event</code></dt>
<dd><span class="type">constant</span> The type of event. Can be one of these messages:</dd>
</dl>
<ul>
<li><a href="#contact_point_event">contact_point_event</a></li>
<li><a href="#collision_event">collision_event</a></li>
<li><a href="#trigger_event">trigger_event</a></li>
<li><a href="#ray_cast_response">ray_cast_response</a></li>
<li><a href="#ray_cast_missed">ray_cast_missed</a></li>
</ul>
<dl>
<dt><code>data</code></dt>
<dd><span class="type">table</span> The callback value data is a table that contains event-related data. See the documentation for details on the messages.</dd>
</dl>

**Examples**

```
local function physics_world_listener(self, events)
  for _,event in ipairs(events):
      local event_type = event['type']
      if event_type == hash("contact_point_event") then
          pprint(event)
          -- {
          --  distance = 2.1490633487701,
          --  applied_impulse = 0
          --  a = { --[[0x113f7c6c0]]
          --    group = hash: [box],
          --    id = hash: [/box]
          --    mass = 0,
          --    normal = vmath.vector3(0.379, 0.925, -0),
          --    position = vmath.vector3(517.337, 235.068, 0),
          --    instance_position = vmath.vector3(480, 144, 0),
          --    relative_velocity = vmath.vector3(-0, -0, -0),
          --  },
          --  b = { --[[0x113f7c840]]
          --    group = hash: [circle],
          --    id = hash: [/circle]
          --    mass = 0,
          --    normal = vmath.vector3(-0.379, -0.925, 0),
          --    position = vmath.vector3(517.337, 235.068, 0),
          --    instance_position = vmath.vector3(-0.0021, 0, -0.0022),
          --    relative_velocity = vmath.vector3(0, 0, 0),
          --  },
          -- }
      elseif event == hash("collision_event") then
          pprint(event)
          -- {
          --  a = {
          --          group = hash: [default],
          --          position = vmath.vector3(183, 666, 0),
          --          id = hash: [/go1]
          --      },
          --  b = {
          --          group = hash: [default],
          --          position = vmath.vector3(185, 704.05865478516, 0),
          --          id = hash: [/go2]
          --      }
          -- }
      elseif event ==  hash("trigger_event") then
          pprint(event)
          -- {
          --  enter = true,
          --  b = {
          --      group = hash: [default],
          --      id = hash: [/go2]
          --  },
          --  a = {
          --      group = hash: [default],
          --      id = hash: [/go1]
          --  }
          -- },
      elseif event ==  hash("ray_cast_response") then
          pprint(event)
          --{
          --  group = hash: [default],
          --  request_id = 0,
          --  position = vmath.vector3(249.92222595215, 249.92222595215, 0),
          --  fraction = 0.68759721517563,
          --  normal = vmath.vector3(0, 1, 0),
          --  id = hash: [/go]
          -- }
      elseif event ==  hash("ray_cast_missed") then
          pprint(event)
          -- {
          --  request_id = 0
          --},
      end
end

function init(self)
    physics.set_event_listener(physics_world_listener)
end

```

### physics.set_gravity
*Type:* FUNCTION
Set the gravity in runtime. The gravity change is not global, it will only affect
the collection that the function is called from.
Note: For 2D physics the z component of the gravity vector will be ignored.

**Parameters**

- `gravity` (vector3) - the new gravity vector

**Examples**

```
function init(self)
    -- Set "upside down" gravity for this collection.
    physics.set_gravity(vmath.vector3(0, 10.0, 0))
end

```

### physics.set_group
*Type:* FUNCTION
Updates the group property of a collision object to the specified
string value. The group name should exist i.e. have been used in
a collision object in the editor.

**Parameters**

- `url` (string | hash | url) - the collision object affected.
- `group` (string) - the new group name to be assigned.
<div class="codehilite"><pre><span></span><code><span class="kd">local</span> <span class="kr">function</span> <span class="nf">change_collision_group</span><span class="p">()</span>
     <span class="n">physics</span><span class="p">.</span><span class="n">set_group</span><span class="p">(</span><span class="s2">&quot;#collisionobject&quot;</span><span class="p">,</span> <span class="s2">&quot;enemy&quot;</span><span class="p">)</span>
<span class="kr">end</span>
</code></pre></div>

### physics.set_hflip
*Type:* FUNCTION
Flips the collision shapes horizontally for a collision object

**Parameters**

- `url` (string | hash | url) - the collision object that should flip its shapes
- `flip` (boolean) - <code>true</code> if the collision object should flip its shapes, <code>false</code> if not

**Examples**

```
function init(self)
    self.fliph = true -- set on some condition
    physics.set_hflip("#collisionobject", self.fliph)
end

```

### physics.set_joint_properties
*Type:* FUNCTION
Updates the properties for an already connected joint. The joint has to be created before
properties can be changed.
Note: Currently only supported in 2D physics.

**Parameters**

- `collisionobject` (string | hash | url) - collision object where the joint exist
- `joint_id` (string | hash) - id of the joint
- `properties` (table) - joint specific properties table
Note: The <code>collide_connected</code> field cannot be updated/changed after a connection has been made.

### physics.set_maskbit
*Type:* FUNCTION
Sets or clears the masking of a group (maskbit) in a collision object.

**Parameters**

- `url` (string | hash | url) - the collision object to change the mask of.
- `group` (string) - the name of the group (maskbit) to modify in the mask.
- `maskbit` (boolean) - boolean value of the new maskbit. 'true' to enable, 'false' to disable.
<div class="codehilite"><pre><span></span><code><span class="kd">local</span> <span class="kr">function</span> <span class="nf">make_invincible</span><span class="p">()</span>
    <span class="c1">-- no longer collide with the &quot;bullet&quot; group</span>
    <span class="n">physics</span><span class="p">.</span><span class="n">set_maskbit</span><span class="p">(</span><span class="s2">&quot;#collisionobject&quot;</span><span class="p">,</span> <span class="s2">&quot;bullet&quot;</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span>
<span class="kr">end</span>
</code></pre></div>

### physics.set_shape
*Type:* FUNCTION
Sets collision shape data for a collision object. Please note that updating data in 3D
can be quite costly for box and capsules. Because of the physics engine, the cost
comes from having to recreate the shape objects when certain shapes needs to be updated.

**Parameters**

- `url` (string | hash | url) - the collision object.
- `shape` (string | hash) - the name of the shape to get data for.
- `table` (table) - the shape data to update the shape with.
See <a href="/ref/physics#physics.get_shape">physics.get_shape</a> for a detailed description of each field in the data table.
<div class="codehilite"><pre><span></span><code><span class="kd">local</span> <span class="kr">function</span> <span class="nf">set_shape_data</span><span class="p">()</span>
    <span class="c1">-- set capsule shape data</span>
    <span class="kd">local</span> <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">data</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">physics</span><span class="p">.</span><span class="n">SHAPE_TYPE_CAPSULE</span>
    <span class="n">data</span><span class="p">.</span><span class="n">diameter</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">data</span><span class="p">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">physics</span><span class="p">.</span><span class="n">set_shape</span><span class="p">(</span><span class="s2">&quot;#collisionobject&quot;</span><span class="p">,</span> <span class="s2">&quot;my_capsule_shape&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

    <span class="c1">-- set sphere shape data</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">data</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">physics</span><span class="p">.</span><span class="n">SHAPE_TYPE_SPHERE</span>
    <span class="n">data</span><span class="p">.</span><span class="n">diameter</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">physics</span><span class="p">.</span><span class="n">set_shape</span><span class="p">(</span><span class="s2">&quot;#collisionobject&quot;</span><span class="p">,</span> <span class="s2">&quot;my_sphere_shape&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

    <span class="c1">-- set box shape data</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">data</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">physics</span><span class="p">.</span><span class="n">SHAPE_TYPE_BOX</span>
    <span class="n">data</span><span class="p">.</span><span class="n">dimensions</span> <span class="o">=</span> <span class="n">vmath</span><span class="p">.</span><span class="n">vector3</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
    <span class="n">physics</span><span class="p">.</span><span class="n">set_shape</span><span class="p">(</span><span class="s2">&quot;#collisionobject&quot;</span><span class="p">,</span> <span class="s2">&quot;my_box_shape&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="kr">end</span>
</code></pre></div>

### physics.set_vflip
*Type:* FUNCTION
Flips the collision shapes vertically for a collision object

**Parameters**

- `url` (string | hash | url) - the collision object that should flip its shapes
- `flip` (boolean) - <code>true</code> if the collision object should flip its shapes, <code>false</code> if not

**Examples**

```
function init(self)
    self.flipv = true -- set on some condition
    physics.set_vflip("#collisionobject", self.flipv)
end

```

### physics.SHAPE_TYPE_BOX
*Type:* CONSTANT

### physics.SHAPE_TYPE_CAPSULE
*Type:* CONSTANT

### physics.SHAPE_TYPE_HULL
*Type:* CONSTANT

### physics.SHAPE_TYPE_SPHERE
*Type:* CONSTANT

### physics.update_mass
*Type:* FUNCTION
The function recalculates the density of each shape based on the total area of all shapes and the specified mass, then updates the mass of the body accordingly.
Note: Currently only supported in 2D physics.

**Parameters**

- `collisionobject` (string | hash | url) - the collision object whose mass needs to be updated.
- `mass` (number) - the new mass value to set for the collision object.

**Examples**

```
 physics.update_mass("#collisionobject", 14)

```

### physics.wakeup
*Type:* FUNCTION
Collision objects tend to fall asleep when inactive for a small period of time for
efficiency reasons. This function wakes them up.

**Parameters**

- `url` (string | hash | url) - the collision object to wake.
<div class="codehilite"><pre><span></span><code><span class="kr">function</span> <span class="nf">on_input</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">action_id</span><span class="p">,</span> <span class="n">action</span><span class="p">)</span>
    <span class="kr">if</span> <span class="n">action_id</span> <span class="o">==</span> <span class="n">hash</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">action</span><span class="p">.</span><span class="n">pressed</span> <span class="kr">then</span>
        <span class="n">physics</span><span class="p">.</span><span class="n">wakeup</span><span class="p">(</span><span class="s2">&quot;#collisionobject&quot;</span><span class="p">)</span>
    <span class="kr">end</span>
<span class="kr">end</span>
</code></pre></div>

### ray_cast_missed
*Type:* MESSAGE
This message is sent back to the sender of a ray_cast_request, or to the physics world listener
if it is set (see physics.set_event_listener), if the ray didn't hit any collision object.
See physics.raycast_async for examples of how to use it.

**Parameters**

- `request_id` (number) - id supplied when the ray cast was requested

### ray_cast_response
*Type:* MESSAGE
This message is sent back to the sender of a ray_cast_request, or to the physics world listener
if it is set (see physics.set_event_listener), if the ray hits a collision object.
See physics.raycast_async for examples of how to use it.

**Parameters**

- `fraction` (number) - the fraction of the hit measured along the ray, where 0 is the start of the ray and 1 is the end
- `position` (vector3) - the world position of the hit
- `normal` (vector3) - the normal of the surface of the collision object where it was hit
- `id` (hash) - the instance id of the hit collision object
- `group` (hash) - the collision group of the hit collision object as a hashed name
- `request_id` (number) - id supplied when the ray cast was requested

### trigger_event
*Type:* MESSAGE
See physics.set_event_listener.
This message is sent to a function specified in physics.set_event_listener
when a collision object interacts with another collision object and one of them is a trigger.
This message only reports that an interaction actually happened and will be sent once per colliding pair and frame.
For more detailed information, check for the contact_point_event.

**Parameters**

- `enter` (boolean) - if the interaction was an entry or not
- `a` (table) - <dl>
<dt>interaction information for object A</dt>
<dt><code>id</code></dt>
<dd><span class="type">hash</span> The ID of object A</dd>
<dt><code>group</code></dt>
<dd><span class="type">hash</span> The collision group of object A</dd>
</dl>
- `b` (table) - collision information for object B
<dl>
<dt><code>id</code></dt>
<dd><span class="type">hash</span> The ID of object B</dd>
<dt><code>group</code></dt>
<dd><span class="type">hash</span> The collision group of object B</dd>
</dl>

**Examples**

How to take action when a trigger interaction occurs:
```
physics.set_event_listener(function(self, event, data)
 if event ==  hash("trigger_event") then
     if data.enter then
        -- take action for entry
     else
        -- take action for exit
     end
     pprint(data)
     -- {
     --  enter = true,
     --  b = {
     --      group = hash: [default],
     --      id = hash: [/go2]
     --  },
     --  a = {
     --      group = hash: [default],
     --      id = hash: [/go1]
     --  }
     -- },
  end
end)

```

### trigger_response
*Type:* MESSAGE
This message is broadcasted to every component of an instance that has a collision object,
when the collision object interacts with another collision object and one of them is a trigger.
For a script to take action when such an interaction happens, it should check for this message
in its on_message callback function.
This message only reports that an interaction actually happened and will only be sent once per
colliding pair and frame. To retrieve more detailed information, check for the
contact_point_response instead.

**Parameters**

- `other_id` (hash) - the id of the instance the collision object collided with
- `enter` (boolean) - if the interaction was an entry or not
- `other_group` (hash) - the collision group of the triggering collision object
- `own_group` (hash) - the collision group of the own collision object

**Examples**

How to take action when a trigger interaction occurs:
```
function on_message(self, message_id, message, sender)
    -- check for the message
    if message_id == hash("trigger_response") then
        if message.enter then
            -- take action for entry
        else
            -- take action for exit
        end
    end
end

```

<!-- profiler-lua -->

# Profiler {#apis:profiler-lua}

**Namespace:** `profiler`
**Language:** Lua
**Type:** Defold Lua
**File:** `profiler.cpp`
**Source:** `engine/profiler/src/profiler.cpp`

Functions for getting profiling data in runtime.
More detailed [profiling](https://www.defold.com/manuals/profiling/) and [debugging](http://www.defold.com/manuals/debugging/) information available in the manuals.

## API

### profiler.dump_frame
*Type:* FUNCTION
logs the current frame to the console

**Examples**

```
profiler.dump_frame()

```

### profiler.enable
*Type:* FUNCTION
The profiler is a real-time tool that shows the numbers of milliseconds spent
in each scope per frame as well as counters. The profiler is very useful for
tracking down performance and resource problems.

**Parameters**

- `enabled` (boolean) - true to enable, false to disable

**Examples**

```
-- Show the profiler UI
profiler.enable(true)

```

### profiler.enable_ui
*Type:* FUNCTION
Creates and shows or hides and destroys the on-sceen profiler ui
The profiler is a real-time tool that shows the numbers of milliseconds spent
in each scope per frame as well as counters. The profiler is very useful for
tracking down performance and resource problems.

**Parameters**

- `enabled` (boolean) - true to enable, false to disable

**Examples**

```
-- Show the profiler UI
profiler.enable_ui(true)

```

### profiler.get_cpu_usage
*Type:* FUNCTION
Get the percent of CPU usage by the application, as reported by the OS.
 This function is not available on  HTML5.
For some platforms ( Android,  Linux and  Windows), this information is only available
by default in the debug version of the engine. It can be enabled in release version as well
by checking track_cpu under profiler in the game.project file.
(This means that the engine will sample the CPU usage in intervalls during execution even in release mode.)

**Returns**

- `percent` (number) - of CPU used by the application

### profiler.get_memory_usage
*Type:* FUNCTION
Get the amount of memory used (resident/working set) by the application in bytes, as reported by the OS.
 This function is not available on  HTML5.
The values are gathered from internal OS functions which correspond to the following;

OS
Value

 iOS MacOSAndroid Linux
Resident memory

 Windows
Working set

 HTML5
 Not available

**Returns**

- `bytes` (number) - used by the application

**Examples**

Get memory usage before and after loading a collection:
```
print(profiler.get_memory_usage())
msg.post("#collectionproxy", "load")
...
print(profiler.get_memory_usage()) -- will report a higher number than the initial call

```

### profiler.log_text
*Type:* FUNCTION
Send a text to the connected profiler

**Parameters**

- `text` (string) - the string to send to the connected profiler

**Examples**

```
profiler.log_text("Event: " .. name)

```

### profiler.MODE_PAUSE
*Type:* CONSTANT
pause on current frame

### profiler.MODE_RECORD
*Type:* CONSTANT
start recording

### profiler.MODE_RUN
*Type:* CONSTANT
continously show latest frame

### profiler.MODE_SHOW_PEAK_FRAME
*Type:* CONSTANT
pause at peak frame

### profiler.recorded_frame_count
*Type:* FUNCTION
Get the number of recorded frames in the on-screen profiler ui recording buffer

**Returns**

- `frame_count` (number) - the number of recorded frames, zero if on-screen profiler is disabled

**Examples**

```
-- Show the last recorded frame
local recorded_frame_count = profiler.recorded_frame_count()
profiler.view_recorded_frame(recorded_frame_count)

```

### profiler.scope_begin
*Type:* FUNCTION
Starts a profile scope.

**Notes**

- Must be correctly matched with a corresponding call to `profiler.scope_end()`

**Parameters**

- `name` (string) - The name of the scope

**Examples**

```
-- Go back one frame
profiler.scope_begin("test_function")
  test_function()
profiler.scope_end()

```

### profiler.scope_end
*Type:* FUNCTION
End the current profile scope.

### profiler.set_ui_mode
*Type:* FUNCTION
Set the on-screen profile mode - run, pause, record or show peak frame

**Parameters**

- `mode` (constant) - the mode to set the ui profiler in
<ul>
<li><code>profiler.MODE_RUN</code> This is default mode that continously shows the last frame</li>
<li><code>profiler.MODE_PAUSE</code> Pauses on the currently displayed frame</li>
<li><code>profiler.MODE_SHOW_PEAK_FRAME</code> Pauses on the currently displayed frame but shows a new frame if that frame is slower</li>
<li><code>profiler.MODE_RECORD</code> Records all incoming frames to the recording buffer</li>
</ul>
To stop recording, switch to a different mode such as <code>MODE_PAUSE</code> or <code>MODE_RUN</code>.
You can also use the <code>view_recorded_frame</code> function to display a recorded frame. Doing so stops the recording as well.
Every time you switch to recording mode the recording buffer is cleared.

**Examples**

```
function start_recording()
     profiler.set_ui_mode(profiler.MODE_RECORD)
end

function stop_recording()
     profiler.set_ui_mode(profiler.MODE_PAUSE)
end

```

### profiler.set_ui_view_mode
*Type:* FUNCTION
Set the on-screen profile view mode - minimized or expanded

**Parameters**

- `mode` (constant) - the view mode to set the ui profiler in
<ul>
<li><code>profiler.VIEW_MODE_FULL</code> The default mode which displays all the ui profiler details</li>
<li><code>profiler.VIEW_MODE_MINIMIZED</code> Minimized mode which only shows the top header (fps counters and ui profiler mode)</li>
</ul>

**Examples**

```
-- Minimize the profiler view
profiler.set_ui_view_mode(profiler.VIEW_MODE_MINIMIZED)

```

### profiler.set_ui_vsync_wait_visible
*Type:* FUNCTION
Shows or hides the time the engine waits for vsync in the on-screen profiler
Each frame the engine waits for vsync and depending on your vsync settings and how much time
your game logic takes this time can dwarf the time in the game logic making it hard to
see details in the on-screen profiler graph and lists.
Also, by hiding this the FPS times in the header show the time spent each time excuding the
time spent waiting for vsync. This shows you how long time your game is spending actively
working each frame.
This setting also effects the display of recorded frames but does not affect the actual
recorded frames so it is possible to toggle this on and off when viewing recorded frames.
By default the vsync wait times is displayed in the profiler.

**Parameters**

- `visible` (boolean) - true to include it in the display, false to hide it.

**Examples**

```
-- Exclude frame wait time form the profiler ui
profiler.set_ui_vsync_wait_visible(false)

```

### profiler.VIEW_MODE_FULL
*Type:* CONSTANT
show full profiler ui

### profiler.VIEW_MODE_MINIMIZED
*Type:* CONSTANT
show mimimal profiler ui

### profiler.view_recorded_frame
*Type:* FUNCTION
Pauses and displays a frame from the recording buffer in the on-screen profiler ui
The frame to show can either be an absolute frame or a relative frame to the current frame.

**Parameters**

- `frame_index` (table) - a table where you specify one of the following parameters:
<ul>
<li><code>distance</code> The offset from the currently displayed frame (this is truncated between zero and the number of recorded frames)</li>
<li><code>frame</code> The frame index in the recording buffer (1 is first recorded frame)</li>
</ul>

**Examples**

```
-- Go back one frame
profiler.view_recorded_frame({distance = -1})

```

<!-- render-lua -->

# Render {#apis:render-lua}

**Namespace:** `render`
**Language:** Lua
**Type:** Defold Lua
**File:** `render_ddf.proto`
**Source:** `engine/render/proto/render/render_ddf.proto`

Rendering API documentation

## API

### clear_color
*Type:* MESSAGE
Set render clear color. This is the color that appears on the screen where nothing is rendered, i.e. background.

**Parameters**

- `color` (vector4) - color to use as clear color

**Examples**

```
msg.post("@render:", "clear_color", { color = vmath.vector4(1, 0, 0, 0) } )

```

### constant_buffer
*Type:* TYPEDEF
Constant buffer

**Parameters**

- `value` (userdata)

### draw_debug_text
*Type:* MESSAGE
Draw a text on the screen. This should be used for debugging purposes only.

**Parameters**

- `position` (vector3) - position of the text
- `text` (string) - the text to draw
- `color` (vector4) - color of the text

**Examples**

```
msg.post("@render:", "draw_debug_text", { text = "Hello world!", position = vmath.vector3(200, 200, 0), color = vmath.vector4(1, 0, 0, 1) } )

```

### draw_line
*Type:* MESSAGE
Draw a line on the screen. This should mostly be used for debugging purposes.

**Parameters**

- `start_point` (vector3) - start point of the line
- `end_point` (vector3) - end point of the line
- `color` (vector4) - color of the line

**Examples**

```
-- draw a white line from (200, 200) to (200, 300)
msg.post("@render:", "draw_line", { start_point = vmath.vector3(200, 200, 0), end_point = vmath.vector3(200, 300, 0), color = vmath.vector4(1, 1, 1, 1) } )

```

### render.clear
*Type:* FUNCTION
Clear buffers in the currently enabled render target with specified value. If the render target has been created with multiple
color attachments, all buffers will be cleared with the same value.

**Parameters**

- `buffers` (table) - table with keys specifying which buffers to clear and values set to clear values. Available keys are:
<ul>
<li><code>graphics.BUFFER_TYPE_COLOR0_BIT</code></li>
<li><code>graphics.BUFFER_TYPE_DEPTH_BIT</code></li>
<li><code>graphics.BUFFER_TYPE_STENCIL_BIT</code></li>
</ul>

**Examples**

Clear the color buffer and the depth buffer.
```
render.clear({[graphics.BUFFER_TYPE_COLOR0_BIT] = vmath.vector4(0, 0, 0, 0), [graphics.BUFFER_TYPE_DEPTH_BIT] = 1})

```

### render.constant_buffer
*Type:* FUNCTION
Constant buffers are used to set shader program variables and are optionally passed to the render.draw() function.
The buffer's constant elements can be indexed like an ordinary Lua table, but you can't iterate over them with pairs() or ipairs().

**Returns**

- `buffer` (constant_buffer) - new constant buffer

**Examples**

Set a "tint" constant in a constant buffer in the render script:
```
local constants = render.constant_buffer()
constants.tint = vmath.vector4(1, 1, 1, 1)

```

Then use the constant buffer when drawing a predicate:
```
render.draw(self.my_pred, {constants = constants})

```

The constant buffer also supports array values by specifying constants in a table:
```
local constants = render.constant_buffer()
constants.light_colors    = {}
constants.light_colors[1] = vmath.vector4(1, 0, 0, 1)
constants.light_colors[2] = vmath.vector4(0, 1, 0, 1)
constants.light_colors[3] = vmath.vector4(0, 0, 1, 1)

```

You can also create the table by passing the vectors directly when creating the table:
```
local constants = render.constant_buffer()
constants.light_colors    = {
     vmath.vector4(1, 0, 0, 1)
     vmath.vector4(0, 1, 0, 1)
     vmath.vector4(0, 0, 1, 1)
}

-- Add more constant to the array
constants.light_colors[4] = vmath.vector4(1, 1, 1, 1)

```

### render.delete_render_target
*Type:* FUNCTION
Deletes a render target created by a render script.
You cannot delete a render target resource.

**Parameters**

- `render_target` (render_target) - render target to delete

**Examples**

How to delete a render target:
```
 render.delete_render_target(self.my_render_target)

```

### render.disable_material
*Type:* FUNCTION
If a material is currently enabled, disable it.
The name of the material must be specified in the ".render" resource set
in the "game.project" setting.

**Examples**

Enable material named "glow", then draw my_pred with it.
```
render.enable_material("glow")
render.draw(self.my_pred)
render.disable_material()

```

### render.disable_state
*Type:* FUNCTION
Disables a render state.

**Parameters**

- `state` (constant) - state to disable
<ul>
<li><code>graphics.STATE_DEPTH_TEST</code></li>
<li><code>graphics.STATE_STENCIL_TEST</code></li>
<li><code>graphics.STATE_BLEND</code></li>
<li><code>graphics.STATE_ALPHA_TEST</code> (<span class="icon-ios"></span><span class="icon-android"></span> not available on iOS and Android)</li>
<li><code>graphics.STATE_CULL_FACE</code></li>
<li><code>graphics.STATE_POLYGON_OFFSET_FILL</code></li>
</ul>

**Examples**

Disable face culling when drawing the tile predicate:
```
render.disable_state(graphics.STATE_CULL_FACE)
render.draw(self.tile_pred)

```

### render.disable_texture
*Type:* FUNCTION
Disables a texture that has previourly been enabled.

**Parameters**

- `binding` (texture | string | hash) - texture binding, either by texture unit, string or hash that should be disabled

**Examples**

```
function update(self, dt)
    render.enable_texture(0, self.my_render_target, graphics.BUFFER_TYPE_COLOR0_BIT)
    -- draw a predicate with the render target available as texture 0 in the predicate
    -- material shader.
    render.draw(self.my_pred)
    -- done, disable the texture
    render.disable_texture(0)
end

```

### render.dispatch_compute
*Type:* FUNCTION
Dispatches the currently enabled compute program. The dispatch call takes three arguments x,y,z which constitutes
the 'global working group' of the compute dispatch. Together with the 'local working group' specified in the compute shader
as a layout qualifier, these two sets of parameters forms the number of invocations the compute shader will execute.
An optional constant buffer can be provided to override the default constants. If no constants buffer is provided, a default
system constants buffer is used containing constants as defined in the compute program.

**Parameters**

- `x` (number) - global work group size X
- `y` (number) - global work group size Y
- `z` (number) - global work group size Z
- `options` (table) (optional) - optional table with properties:
<dl>
<dt><code>constants</code></dt>
<dd><span class="type">constant_buffer</span> optional constants to use while rendering</dd>
</dl>

**Examples**

```
function init(self)
    local color_params = { format = graphics.TEXTURE_FORMAT_RGBA,
                           width = render.get_window_width(),
                           height = render.get_window_height()}
    self.scene_rt = render.render_target({[graphics.BUFFER_TYPE_COLOR0_BIT] = color_params})
end

function update(self, dt)
    render.set_compute("bloom")
    render.enable_texture(0, self.backing_texture)
    render.enable_texture(1, self.scene_rt)
    render.dispatch_compute(128, 128, 1)
    render.set_compute()
end

```

Dispatch a compute program with a constant buffer:
```
local constants = render.constant_buffer()
constants.tint = vmath.vector4(1, 1, 1, 1)
render.dispatch_compute(32, 32, 32, {constants = constants})

```

### render.draw
*Type:* FUNCTION
Draws all objects that match a specified predicate. An optional constant buffer can be
provided to override the default constants. If no constants buffer is provided, a default
system constants buffer is used containing constants as defined in materials and set through
go.set (or particlefx.set_constant) on visual components.

**Parameters**

- `predicate` (number) - predicate to draw for
- `options` (table) (optional) - optional table with properties:
<dl>
<dt><code>frustum</code></dt>
<dd><span class="type">matrix4</span> A frustum matrix used to cull renderable items. (E.g. <code>local frustum = proj * view</code>). default=nil</dd>
<dt><code>frustum_planes</code></dt>
<dd><span class="type">int</span> Determines which sides of the frustum will be used. Default is render.FRUSTUM_PLANES_SIDES.</dd>
</dl>
<ul>
<li>render.FRUSTUM_PLANES_SIDES : The left, right, top and bottom sides of the frustum.</li>
<li>render.FRUSTUM_PLANES_ALL : All 6 sides of the frustum.</li>
</ul>
<dl>
<dt><code>constants</code></dt>
<dd><span class="type">constant_buffer</span> optional constants to use while rendering</dd>
<dt><code>sort_order</code></dt>
<dd><span class="type">int</span> How to sort draw order for world-ordered entries. Default uses the renderer's preferred world sorting (back-to-front).</dd>
</dl>

**Examples**

```
function init(self)
    -- define a predicate matching anything with material tag "my_tag"
    self.my_pred = render.predicate({hash("my_tag")})
end

function update(self, dt)
    -- draw everything in the my_pred predicate
    render.draw(self.my_pred)
end

```

Draw predicate with constants:
```
local constants = render.constant_buffer()
constants.tint = vmath.vector4(1, 1, 1, 1)
render.draw(self.my_pred, {constants = constants})

```

Draw with predicate and frustum culling (without near+far planes):
```
local frustum = self.proj * self.view
render.draw(self.my_pred, {frustum = frustum})

```

Draw with predicate and frustum culling (with near+far planes):
```
local frustum = self.proj * self.view
render.draw(self.my_pred, {frustum = frustum, frustum_planes = render.FRUSTUM_PLANES_ALL})

```

### render.draw_debug3d
*Type:* FUNCTION
Draws all 3d debug graphics such as lines drawn with "draw_line" messages and physics visualization.

**Parameters**

- `options` (table) (optional) - optional table with properties:
<dl>
<dt><code>frustum</code></dt>
<dd><span class="type">matrix4</span> A frustum matrix used to cull renderable items. (E.g. <code>local frustum = proj * view</code>). May be nil.</dd>
<dt><code>frustum_planes</code></dt>
<dd><span class="type">int</span> Determines which sides of the frustum will be used. Default is render.FRUSTUM_PLANES_SIDES.</dd>
</dl>
<ul>
<li>render.FRUSTUM_PLANES_SIDES : The left, right, top and bottom sides of the frustum.</li>
<li>render.FRUSTUM_PLANES_ALL : All sides of the frustum.</li>
</ul>

**Replaces:** render.draw_debug2d

**Examples**

```
function update(self, dt)
    -- draw debug visualization
    render.draw_debug3d()
end

```

### render.enable_material
*Type:* FUNCTION
If another material was already enabled, it will be automatically disabled
and the specified material is used instead.
The name of the material must be specified in the ".render" resource set
in the "game.project" setting.

**Parameters**

- `material_id` (string | hash) - material id to enable

**Examples**

Enable material named "glow", then draw my_pred with it.
```
render.enable_material("glow")
render.draw(self.my_pred)
render.disable_material()

```

### render.enable_state
*Type:* FUNCTION
Enables a particular render state. The state will be enabled until disabled.

**Parameters**

- `state` (constant) - state to enable
<ul>
<li><code>graphics.STATE_DEPTH_TEST</code></li>
<li><code>graphics.STATE_STENCIL_TEST</code></li>
<li><code>graphics.STATE_BLEND</code></li>
<li><code>graphics.STATE_ALPHA_TEST</code> (<span class="icon-ios"></span><span class="icon-android"></span> not available on iOS and Android)</li>
<li><code>graphics.STATE_CULL_FACE</code></li>
<li><code>graphics.STATE_POLYGON_OFFSET_FILL</code></li>
</ul>

**Examples**

Enable stencil test when drawing the gui predicate, then disable it:
```
render.enable_state(graphics.STATE_STENCIL_TEST)
render.draw(self.gui_pred)
render.disable_state(graphics.STATE_STENCIL_TEST)

```

### render.enable_texture
*Type:* FUNCTION
Sets the specified texture handle for a render target attachment or a regular texture
that should be used for rendering. The texture can be bound to either a texture unit
or to a sampler name by a hash or a string.
A texture can be bound to multiple units and sampler names at the same time,
the actual binding will be applied to the shaders when a shader program is bound.
When mixing binding using both units and sampler names, you might end up in situations
where two different textures will be applied to the same bind location in the shader.
In this case, the texture set to the named sampler will take precedence over the unit.
Note that you can bind multiple sampler names to the same texture, in case you want to reuse
the same texture for differnt use-cases. It is however recommended that you use the same name
everywhere for the textures that should be shared across different materials.

**Parameters**

- `binding` (number | string | hash) - texture binding, either by texture unit, string or hash for the sampler name that the texture should be bound to
- `handle_or_name` (texture | string | hash) - render target or texture handle that should be bound, or a named resource in the "Render Resource" table in the currently assigned .render file
- `buffer_type` (graphics.BUFFER_TYPE_COLOR0_BIT | graphics.BUFFER_TYPE_COLOR1_BIT | graphics.BUFFER_TYPE_COLOR2_BIT | graphics.BUFFER_TYPE_COLOR3_BIT | graphics.BUFFER_TYPE_DEPTH_BIT | graphics.BUFFER_TYPE_STENCIL_BIT) (optional) - optional buffer type from which to enable the texture. Note that this argument only applies to render targets. Defaults to <code>graphics.BUFFER_TYPE_COLOR0_BIT</code>. These values are supported:
<ul>
<li><code>graphics.BUFFER_TYPE_COLOR0_BIT</code></li>
</ul>
If The render target has been created as depth and/or stencil textures, these buffer types can be used:
<ul>
<li><code>graphics.BUFFER_TYPE_DEPTH_BIT</code></li>
<li><code>graphics.BUFFER_TYPE_STENCIL_BIT</code></li>
</ul>
If the render target has been created with multiple color attachments, these buffer types can be used
to enable those textures as well. Currently 4 color attachments are supported:
<ul>
<li><code>graphics.BUFFER_TYPE_COLOR0_BIT</code></li>
<li><code>graphics.BUFFER_TYPE_COLOR1_BIT</code></li>
<li><code>graphics.BUFFER_TYPE_COLOR2_BIT</code></li>
<li><code>graphics.BUFFER_TYPE_COLOR3_BIT</code></li>
</ul>

**Examples**

```
function update(self, dt)
    -- enable target so all drawing is done to it
    render.set_render_target(self.my_render_target)

    -- draw a predicate to the render target
    render.draw(self.my_pred)

    -- disable target
    render.set_render_target(render.RENDER_TARGET_DEFAULT)

    render.enable_texture(0, self.my_render_target, graphics.BUFFER_TYPE_COLOR0_BIT)
    -- draw a predicate with the render target available as texture 0 in the predicate
    -- material shader.
    render.draw(self.my_pred)
end

```

```
function update(self, dt)
    -- enable render target by resource id
    render.set_render_target('my_rt_resource')
    render.draw(self.my_pred)
    render.set_render_target(render.RENDER_TARGET_DEFAULT)

    render.enable_texture(0, 'my_rt_resource', graphics.BUFFER_TYPE_COLOR0_BIT)
    -- draw a predicate with the render target available as texture 0 in the predicate
    -- material shader.
    render.draw(self.my_pred)
end

```

```
function update(self, dt)
    -- bind a texture to the texture unit 0
    render.enable_texture(0, self.my_texture_handle)
    -- bind the same texture to a named sampler
    render.enable_texture("my_texture_sampler", self.my_texture_handle)
end

```

### render.FRUSTUM_PLANES_ALL
*Type:* CONSTANT

### render.FRUSTUM_PLANES_SIDES
*Type:* CONSTANT

### render.get_height
*Type:* FUNCTION
Returns the logical window height that is set in the "game.project" settings.
Note that the actual window pixel size can change, either by device constraints
or user input.

**Returns**

- `height` (number) - specified window height

**Examples**

Get the height of the window
```
local h = render.get_height()

```

### render.get_render_target_height
*Type:* FUNCTION
Returns the specified buffer height from a render target.

**Parameters**

- `render_target` (render_target) - render target from which to retrieve the buffer height
- `buffer_type` (graphics.BUFFER_TYPE_COLOR0_BIT | graphics.BUFFER_TYPE_COLOR1_BIT | graphics.BUFFER_TYPE_COLOR2_BIT | graphics.BUFFER_TYPE_COLOR3_BIT | graphics.BUFFER_TYPE_DEPTH_BIT | graphics.BUFFER_TYPE_STENCIL_BIT) - which type of buffer to retrieve the height from
<ul>
<li><code>graphics.BUFFER_TYPE_COLOR0_BIT</code></li>
<li><code>graphics.BUFFER_TYPE_DEPTH_BIT</code></li>
<li><code>graphics.BUFFER_TYPE_STENCIL_BIT</code></li>
</ul>

**Returns**

- `height` (number) - the height of the render target buffer texture

**Examples**

```
-- get the height of the render target color buffer
local h = render.get_render_target_height(self.target_right, graphics.BUFFER_TYPE_COLOR0_BIT)
-- get the height of a render target resource
local w = render.get_render_target_height('my_rt_resource', graphics.BUFFER_TYPE_COLOR0_BIT)

```

### render.get_render_target_width
*Type:* FUNCTION
Returns the specified buffer width from a render target.

**Parameters**

- `render_target` (render_target) - render target from which to retrieve the buffer width
- `buffer_type` (graphics.BUFFER_TYPE_COLOR0_BIT | graphics.BUFFER_TYPE_COLOR1_BIT | graphics.BUFFER_TYPE_COLOR2_BIT | graphics.BUFFER_TYPE_COLOR3_BIT | graphics.BUFFER_TYPE_DEPTH_BIT | graphics.BUFFER_TYPE_STENCIL_BIT) - which type of buffer to retrieve the width from
<ul>
<li><code>graphics.BUFFER_TYPE_COLOR0_BIT</code></li>
<li><code>graphics.BUFFER_TYPE_COLOR[x]_BIT</code> (x: [0..3], if supported!)</li>
<li><code>graphics.BUFFER_TYPE_DEPTH_BIT</code></li>
<li><code>graphics.BUFFER_TYPE_STENCIL_BIT</code></li>
</ul>

**Returns**

- `width` (number) - the width of the render target buffer texture

**Examples**

```
-- get the width of the render target color buffer
local w = render.get_render_target_width(self.target_right, graphics.BUFFER_TYPE_COLOR0_BIT)
-- get the width of a render target resource
local w = render.get_render_target_width('my_rt_resource', graphics.BUFFER_TYPE_COLOR0_BIT)

```

### render.get_width
*Type:* FUNCTION
Returns the logical window width that is set in the "game.project" settings.
Note that the actual window pixel size can change, either by device constraints
or user input.

**Returns**

- `width` (number) - specified window width (number)

**Examples**

Get the width of the window.
```
local w = render.get_width()

```

### render.get_window_height
*Type:* FUNCTION
Returns the actual physical window height.
Note that this value might differ from the logical height that is set in the
"game.project" settings.

**Returns**

- `height` (number) - actual window height

**Examples**

Get the actual height of the window
```
local h = render.get_window_height()

```

### render.get_window_width
*Type:* FUNCTION
Returns the actual physical window width.
Note that this value might differ from the logical width that is set in the
"game.project" settings.

**Returns**

- `width` (number) - actual window width

**Examples**

Get the actual width of the window
```
local w = render.get_window_width()

```

### render.predicate
*Type:* FUNCTION
This function returns a new render predicate for objects with materials matching
the provided material tags. The provided tags are combined into a bit mask
for the predicate. If multiple tags are provided, the predicate matches materials
with all tags ANDed together.
The current limit to the number of tags that can be defined is 64.

**Parameters**

- `tags` (table) - table of tags that the predicate should match. The tags can be of either hash or string type

**Returns**

- `predicate` (number) - new predicate

**Examples**

Create a new render predicate containing all visual objects that
have a material with material tags "opaque" AND "smoke".
```
local p = render.predicate({hash("opaque"), hash("smoke")})

```

### render.render_target
*Type:* FUNCTION
Creates a new render target according to the supplied
specification table.
The table should contain keys specifying which buffers should be created
with what parameters. Each buffer key should have a table value consisting
of parameters. The following parameter keys are available:

Key
Values

format
graphics.TEXTURE_FORMAT_LUMINANCEgraphics.TEXTURE_FORMAT_RGBgraphics.TEXTURE_FORMAT_RGBAgraphics.TEXTURE_FORMAT_DEPTHgraphics.TEXTURE_FORMAT_STENCILgraphics.TEXTURE_FORMAT_RGBA32Fgraphics.TEXTURE_FORMAT_RGBA16F

width
number

height
number

min_filter (optional)
graphics.TEXTURE_FILTER_LINEARgraphics.TEXTURE_FILTER_NEAREST

mag_filter (optional)
graphics.TEXTURE_FILTER_LINEARgraphics.TEXTURE_FILTER_NEAREST

u_wrap     (optional)
graphics.TEXTURE_WRAP_CLAMP_TO_BORDERgraphics.TEXTURE_WRAP_CLAMP_TO_EDGEgraphics.TEXTURE_WRAP_MIRRORED_REPEATgraphics.TEXTURE_WRAP_REPEAT

v_wrap     (optional)
graphics.TEXTURE_WRAP_CLAMP_TO_BORDERgraphics.TEXTURE_WRAP_CLAMP_TO_EDGEgraphics.TEXTURE_WRAP_MIRRORED_REPEATgraphics.TEXTURE_WRAP_REPEAT

flags      (optional)
render.TEXTURE_BIT (only applicable to depth and stencil buffers)

The render target can be created to support multiple color attachments. Each attachment can have different format settings and texture filters,
but attachments must be added in sequence, meaning you cannot create a render target at slot 0 and 3.
Instead it has to be created with all four buffer types ranging from [0..3] (as denoted by graphics.BUFFER_TYPE_COLORX_BIT where 'X' is the attachment you want to create).
It is not guaranteed that the device running the script can support creating render targets with multiple color attachments. To check if the device can support multiple attachments,
you can check if the render table contains any of the BUFFER_TYPE_COLOR1_BIT, BUFFER_TYPE_COLOR2_BIT or BUFFER_TYPE_COLOR3_BIT constants:
```
function init(self)
    if graphics.BUFFER_TYPE_COLOR1_BIT == nil then
        -- this devices does not support multiple color attachments
    end
end

```

**Parameters**

- `name` (string) - render target name
- `parameters` (table) - table of buffer parameters, see the description for available keys and values

**Returns**

- `render_target` (render_target) - new render target

**Examples**

How to create a new render target and draw to it:
```
function init(self)
    -- render target buffer parameters
    local color_params = { format = graphics.TEXTURE_FORMAT_RGBA,
                           width = render.get_window_width(),
                           height = render.get_window_height(),
                           min_filter = graphics.TEXTURE_FILTER_LINEAR,
                           mag_filter = graphics.TEXTURE_FILTER_LINEAR,
                           u_wrap = graphics.TEXTURE_WRAP_CLAMP_TO_EDGE,
                           v_wrap = graphics.TEXTURE_WRAP_CLAMP_TO_EDGE }
    local depth_params = { format = graphics.TEXTURE_FORMAT_DEPTH,
                           width = render.get_window_width(),
                           height = render.get_window_height(),
                           u_wrap = graphics.TEXTURE_WRAP_CLAMP_TO_EDGE,
                           v_wrap = graphics.TEXTURE_WRAP_CLAMP_TO_EDGE }
    self.my_render_target = render.render_target({[graphics.BUFFER_TYPE_COLOR0_BIT] = color_params, [graphics.BUFFER_TYPE_DEPTH_BIT] = depth_params })
end

function update(self, dt)
    -- enable target so all drawing is done to it
    render.set_render_target(self.my_render_target)

    -- draw a predicate to the render target
    render.draw(self.my_pred)
end

```

How to create a render target with multiple outputs:
```
function init(self)
    -- render target buffer parameters
    local color_params_rgba = { format = graphics.TEXTURE_FORMAT_RGBA,
                                width = render.get_window_width(),
                                height = render.get_window_height(),
                                min_filter = graphics.TEXTURE_FILTER_LINEAR,
                                mag_filter = graphics.TEXTURE_FILTER_LINEAR,
                                u_wrap = graphics.TEXTURE_WRAP_CLAMP_TO_EDGE,
                                v_wrap = graphics.TEXTURE_WRAP_CLAMP_TO_EDGE }
    local color_params_float = { format = graphics.TEXTURE_FORMAT_RG32F,
                           width = render.get_window_width(),
                           height = render.get_window_height(),
                           min_filter = graphics.TEXTURE_FILTER_LINEAR,
                           mag_filter = graphics.TEXTURE_FILTER_LINEAR,
                           u_wrap = graphics.TEXTURE_WRAP_CLAMP_TO_EDGE,
                           v_wrap = graphics.TEXTURE_WRAP_CLAMP_TO_EDGE }

    -- Create a render target with three color attachments
    -- Note: No depth buffer is attached here
    self.my_render_target = render.render_target({
           [graphics.BUFFER_TYPE_COLOR0_BIT] = color_params_rgba,
           [graphics.BUFFER_TYPE_COLOR1_BIT] = color_params_rgba,
           [graphics.BUFFER_TYPE_COLOR2_BIT] = color_params_float, })
end

function update(self, dt)
    -- enable target so all drawing is done to it
    render.enable_render_target(self.my_render_target)

    -- draw a predicate to the render target
    render.draw(self.my_pred)
end

```

### render.RENDER_TARGET_DEFAULT
*Type:* CONSTANT

### render.set_blend_func
*Type:* FUNCTION
Specifies the arithmetic used when computing pixel values that are written to the frame
buffer. In RGBA mode, pixels can be drawn using a function that blends the source RGBA
pixel values with the destination pixel values already in the frame buffer.
Blending is initially disabled.
source_factor specifies which method is used to scale the source color components.
destination_factor specifies which method is used to scale the destination color
components.
Source color components are referred to as (Rs,Gs,Bs,As).
Destination color components are referred to as (Rd,Gd,Bd,Ad).
The color specified by setting the blendcolor is referred to as (Rc,Gc,Bc,Ac).
The source scale factor is referred to as (sR,sG,sB,sA).
The destination scale factor is referred to as (dR,dG,dB,dA).
The color values have integer values between 0 and (kR,kG,kB,kA), where kc = 2mc - 1 and mc is the number of bitplanes for that color. I.e for 8 bit color depth, color values are between 0 and 255.
Available factor constants and corresponding scale factors:

Factor constant
Scale factor (fR,fG,fB,fA)

graphics.BLEND_FACTOR_ZERO
(0,0,0,0)

graphics.BLEND_FACTOR_ONE
(1,1,1,1)

graphics.BLEND_FACTOR_SRC_COLOR
(Rs/kR,Gs/kG,Bs/kB,As/kA)

graphics.BLEND_FACTOR_ONE_MINUS_SRC_COLOR
(1,1,1,1) - (Rs/kR,Gs/kG,Bs/kB,As/kA)

graphics.BLEND_FACTOR_DST_COLOR
(Rd/kR,Gd/kG,Bd/kB,Ad/kA)

graphics.BLEND_FACTOR_ONE_MINUS_DST_COLOR
(1,1,1,1) - (Rd/kR,Gd/kG,Bd/kB,Ad/kA)

graphics.BLEND_FACTOR_SRC_ALPHA
(As/kA,As/kA,As/kA,As/kA)

graphics.BLEND_FACTOR_ONE_MINUS_SRC_ALPHA
(1,1,1,1) - (As/kA,As/kA,As/kA,As/kA)

graphics.BLEND_FACTOR_DST_ALPHA
(Ad/kA,Ad/kA,Ad/kA,Ad/kA)

graphics.BLEND_FACTOR_ONE_MINUS_DST_ALPHA
(1,1,1,1) - (Ad/kA,Ad/kA,Ad/kA,Ad/kA)

graphics.BLEND_FACTOR_CONSTANT_COLOR
(Rc,Gc,Bc,Ac)

graphics.BLEND_FACTOR_ONE_MINUS_CONSTANT_COLOR
(1,1,1,1) - (Rc,Gc,Bc,Ac)

graphics.BLEND_FACTOR_CONSTANT_ALPHA
(Ac,Ac,Ac,Ac)

graphics.BLEND_FACTOR_ONE_MINUS_CONSTANT_ALPHA
(1,1,1,1) - (Ac,Ac,Ac,Ac)

graphics.BLEND_FACTOR_SRC_ALPHA_SATURATE
(i,i,i,1) where i = min(As, kA - Ad) /kA

The blended RGBA values of a pixel comes from the following equations:

Rd = min(kR, Rs * sR + Rd * dR)
Gd = min(kG, Gs * sG + Gd * dG)
Bd = min(kB, Bs * sB + Bd * dB)
Ad = min(kA, As * sA + Ad * dA)

Blend function (graphics.BLEND_FACTOR_SRC_ALPHA, graphics.BLEND_FACTOR_ONE_MINUS_SRC_ALPHA) is useful for
drawing with transparency when the drawn objects are sorted from farthest to nearest.
It is also useful for drawing antialiased points and lines in arbitrary order.

**Parameters**

- `source_factor` (number) - source factor
- `destination_factor` (number) - destination factor

**Examples**

Set the blend func to the most common one:
```
render.set_blend_func(graphics.BLEND_FACTOR_SRC_ALPHA, graphics.BLEND_FACTOR_ONE_MINUS_SRC_ALPHA)

```

### render.set_camera
*Type:* FUNCTION
Sets the current render camera to be used for rendering. If a render camera
has been set by the render script, the renderer will be using its projection and view matrix
during rendering. If a projection and/or view matrix has been set by the render script,
they will not be used until the current render camera has been reset by calling render.set_camera().
If the 'use_frustum' flag in the options table has been set to true, the renderer will automatically use the
camera frustum for frustum culling regardless of what frustum is being passed into the render.draw() function.
Note that the frustum plane option in render.draw can still be used together with the camera.

**Parameters**

- `camera` (url | number | nil) - camera id to use, or nil to reset
- `options` (table) (optional) - optional table with properties:
<dl>
<dt><code>use_frustum</code></dt>
<dd><span class="type">boolean</span> If true, the renderer will use the cameras view-projection matrix for frustum culling (default: false)</dd>
</dl>

**Examples**

Set the current camera to be used for rendering
```
render.set_camera("main:/my_go#camera")
render.draw(self.my_pred)
render.set_camera(nil)

```

Use the camera frustum for frustum culling together with a specific frustum plane option for the draw command
```
-- The camera frustum will take precedence over the frustum plane option in render.draw
render.set_camera("main:/my_go#camera", { use_frustum = true })
-- However, we can still customize the frustum planes regardless of the camera option!
render.draw(self.my_pred, { frustum_planes = render.FRUSTUM_PLANES_ALL })
render.set_camera()

```

### render.set_color_mask
*Type:* FUNCTION
Specifies whether the individual color components in the frame buffer is enabled for writing (true) or disabled (false). For example, if blue is false, nothing is written to the blue component of any pixel in any of the color buffers, regardless of the drawing operation attempted. Note that writing are either enabled or disabled for entire color components, not the individual bits of a component.
The component masks are all initially true.

**Parameters**

- `red` (boolean) - red mask
- `green` (boolean) - green mask
- `blue` (boolean) - blue mask
- `alpha` (boolean) - alpha mask

**Examples**

```
-- alpha cannot be written to frame buffer
render.set_color_mask(true, true, true, false)

```

### render.set_compute
*Type:* FUNCTION
The name of the compute program must be specified in the ".render" resource set
in the "game.project" setting. If nil (or no arguments) are passed to this function,
the current compute program will instead be disabled.

**Parameters**

- `compute` (string | hash | nil) - compute id to use, or nil to disable

**Examples**

Enable compute program named "fractals", then dispatch it.
```
render.set_compute("fractals")
render.enable_texture(0, self.backing_texture)
render.dispatch_compute(128, 128, 1)
render.set_compute()

```

### render.set_cull_face
*Type:* FUNCTION
Specifies whether front- or back-facing polygons can be culled
when polygon culling is enabled. Polygon culling is initially disabled.
If mode is graphics.FACE_TYPE_FRONT_AND_BACK, no polygons are drawn, but other
primitives such as points and lines are drawn. The initial value for
face_type is graphics.FACE_TYPE_BACK.

**Parameters**

- `face_type` (number) - face type
<ul>
<li><code>graphics.FACE_TYPE_FRONT</code></li>
<li><code>graphics.FACE_TYPE_BACK</code></li>
<li><code>graphics.FACE_TYPE_FRONT_AND_BACK</code></li>
</ul>

**Examples**

How to enable polygon culling and set front face culling:
```
render.enable_state(graphics.STATE_CULL_FACE)
render.set_cull_face(graphics.FACE_TYPE_FRONT)

```

### render.set_depth_func
*Type:* FUNCTION
Specifies the function that should be used to compare each incoming pixel
depth value with the value present in the depth buffer.
The comparison is performed only if depth testing is enabled and specifies
the conditions under which a pixel will be drawn.
Function constants:

graphics.COMPARE_FUNC_NEVER (never passes)
graphics.COMPARE_FUNC_LESS (passes if the incoming depth value is less than the stored value)
graphics.COMPARE_FUNC_LEQUAL (passes if the incoming depth value is less than or equal to the stored value)
graphics.COMPARE_FUNC_GREATER (passes if the incoming depth value is greater than the stored value)
graphics.COMPARE_FUNC_GEQUAL (passes if the incoming depth value is greater than or equal to the stored value)
graphics.COMPARE_FUNC_EQUAL (passes if the incoming depth value is equal to the stored value)
graphics.COMPARE_FUNC_NOTEQUAL (passes if the incoming depth value is not equal to the stored value)
graphics.COMPARE_FUNC_ALWAYS (always passes)

The depth function is initially set to graphics.COMPARE_FUNC_LESS.

**Parameters**

- `func` (number) - depth test function, see the description for available values

**Examples**

Enable depth test and set the depth test function to "not equal".
```
render.enable_state(graphics.STATE_DEPTH_TEST)
render.set_depth_func(graphics.COMPARE_FUNC_NOTEQUAL)

```

### render.set_depth_mask
*Type:* FUNCTION
Specifies whether the depth buffer is enabled for writing. The supplied mask governs
if depth buffer writing is enabled (true) or disabled (false).
The mask is initially true.

**Parameters**

- `depth` (boolean) - depth mask

**Examples**

How to turn off writing to the depth buffer:
```
render.set_depth_mask(false)

```

### render.set_listener
*Type:* FUNCTION
Set or remove listener. Currenly only only two type of events can arrived:
render.CONTEXT_EVENT_CONTEXT_LOST - when rendering context lost. Rending paused and all graphics resources become invalid.
render.CONTEXT_EVENT_CONTEXT_RESTORED - when rendering context was restored. Rendering still paused and graphics resources still
invalid but can be reloaded.

**Parameters**

- `callback` (function(self, event_type) | nil) - A callback that receives all render related events.
Pass <code>nil</code> if want to remove listener.
<dl>
<dt><code>self</code></dt>
<dd><span class="type">object</span> The render script</dd>
<dt><code>event_type</code></dt>
<dd><span class="type">string</span> Rendering event. Possible values: <code>render.CONTEXT_EVENT_CONTEXT_LOST</code>, <code>render.CONTEXT_EVENT_CONTEXT_RESTORED</code></dd>
</dl>

**Examples**

Set listener and handle render context events.
```
--- custom.render_script
function init(self)
   render.set_listener(function(self, event_type)
       if event_type == render.CONTEXT_EVENT_CONTEXT_LOST then
           --- Some stuff when rendering context is lost
       elseif event_type == render.CONTEXT_EVENT_CONTEXT_RESTORED then
           --- Start reload resources, reload game, etc.
       end
   end)
end

```

### render.set_polygon_offset
*Type:* FUNCTION
Sets the scale and units used to calculate depth values.
If graphics.STATE_POLYGON_OFFSET_FILL is enabled, each fragment's depth value
is offset from its interpolated value (depending on the depth value of the
appropriate vertices). Polygon offset can be used when drawing decals, rendering
hidden-line images etc.
factor specifies a scale factor that is used to create a variable depth
offset for each polygon. The initial value is 0.
units is multiplied by an implementation-specific value to create a
constant depth offset. The initial value is 0.
The value of the offset is computed as factor  DZ + r  units
DZ is a measurement of the depth slope of the polygon which is the change in z (depth)
values divided by the change in either x or y coordinates, as you traverse a polygon.
The depth values are in window coordinates, clamped to the range [0, 1].
r is the smallest value that is guaranteed to produce a resolvable difference.
It's value is an implementation-specific constant.
The offset is added before the depth test is performed and before the
value is written into the depth buffer.

**Parameters**

- `factor` (number) - polygon offset factor
- `units` (number) - polygon offset units

**Examples**

```
render.enable_state(graphics.STATE_POLYGON_OFFSET_FILL)
render.set_polygon_offset(1.0, 1.0)

```

### render.set_projection
*Type:* FUNCTION
Sets the projection matrix to use when rendering.

**Parameters**

- `matrix` (matrix4) - projection matrix

**Examples**

How to set the projection to orthographic with world origo at lower left,
width and height as set in project settings and depth (z) between -1 and 1:
```
render.set_projection(vmath.matrix4_orthographic(0, render.get_width(), 0, render.get_height(), -1, 1))

```

### render.set_render_target
*Type:* FUNCTION
Sets a render target. Subsequent draw operations will be to the
render target until it is replaced by a subsequent call to set_render_target.
This function supports render targets created by a render script, or a render target resource.

**Parameters**

- `render_target` (render_target) - render target to set. render.RENDER_TARGET_DEFAULT to set the default render target
- `options` (table) (optional) - optional table with behaviour parameters
<dl>
<dt><code>transient</code></dt>
<dd><span class="type">table</span> Transient frame buffer types are only valid while the render target is active, i.e becomes undefined when a new target is set by a subsequent call to set_render_target.
 Default is all non-transient. Be aware that some hardware uses a combined depth stencil buffer and when this is the case both are considered non-transient if exclusively selected!
 A buffer type defined that doesn't exist in the render target is silently ignored.</dd>
</dl>
<ul>
<li><code>graphics.BUFFER_TYPE_COLOR0_BIT</code></li>
<li><code>graphics.BUFFER_TYPE_DEPTH_BIT</code></li>
<li><code>graphics.BUFFER_TYPE_STENCIL_BIT</code></li>
</ul>

**Examples**

How to set a render target and draw to it and then switch back to the default render target
The render target defines the depth/stencil buffers as transient, when set_render_target is called the next time the buffers may be invalidated and allow for optimisations depending on driver support
```
function update(self, dt)
    -- set render target so all drawing is done to it
    render.set_render_target(self.my_render_target, { transient = { graphics.BUFFER_TYPE_DEPTH_BIT, graphics.BUFFER_TYPE_STENCIL_BIT } } )

    -- draw a predicate to the render target
    render.draw(self.my_pred)

    -- set default render target. This also invalidates the depth and stencil buffers of the current target (self.my_render_target)
    --  which can be an optimisation on some hardware
    render.set_render_target(render.RENDER_TARGET_DEFAULT)

end

```

```
function update(self, dt)
    -- set render target by a render target resource identifier
    render.set_render_target('my_rt_resource')

    -- draw a predicate to the render target
    render.draw(self.my_pred)

    -- reset the render target to the default backbuffer
    render.set_render_target(render.RENDER_TARGET_DEFAULT)

end

```

### render.set_render_target_size
*Type:* FUNCTION
Sets the render target size for a render target created from
either a render script, or from a render target resource.

**Parameters**

- `render_target` (render_target) - render target to set size for
- `width` (number) - new render target width
- `height` (number) - new render target height

**Examples**

Resize render targets to the current window size:
```
render.set_render_target_size(self.my_render_target, render.get_window_width(), render.get_window_height())
render.set_render_target_size('my_rt_resource', render.get_window_width(), render.get_window_height())

```

### render.set_stencil_func
*Type:* FUNCTION
Stenciling is similar to depth-buffering as it enables and disables drawing on a
per-pixel basis. First, GL drawing primitives are drawn into the stencil planes.
Second, geometry and images are rendered but using the stencil planes to mask out
where to draw.
The stencil test discards a pixel based on the outcome of a comparison between the
reference value ref and the corresponding value in the stencil buffer.
func specifies the comparison function. See the table below for values.
The initial value is graphics.COMPARE_FUNC_ALWAYS.
ref specifies the reference value for the stencil test. The value is clamped to
the range [0, 2n-1], where n is the number of bitplanes in the stencil buffer.
The initial value is 0.
mask is ANDed with both the reference value and the stored stencil value when the test
is done. The initial value is all 1's.
Function constant:

graphics.COMPARE_FUNC_NEVER (never passes)
graphics.COMPARE_FUNC_LESS (passes if (ref & mask)
graphics.COMPARE_FUNC_LEQUAL (passes if (ref & mask)
graphics.COMPARE_FUNC_GREATER (passes if (ref & mask) > (stencil & mask))
graphics.COMPARE_FUNC_GEQUAL (passes if (ref & mask) >= (stencil & mask))
graphics.COMPARE_FUNC_EQUAL (passes if (ref & mask) = (stencil & mask))
graphics.COMPARE_FUNC_NOTEQUAL (passes if (ref & mask) != (stencil & mask))
graphics.COMPARE_FUNC_ALWAYS (always passes)

**Parameters**

- `func` (number) - stencil test function, see the description for available values
- `ref` (number) - reference value for the stencil test
- `mask` (number) - mask that is ANDed with both the reference value and the stored stencil value when the test is done

**Examples**

```
-- let only 0's pass the stencil test
render.set_stencil_func(graphics.COMPARE_FUNC_EQUAL, 0, 1)

```

### render.set_stencil_mask
*Type:* FUNCTION
The stencil mask controls the writing of individual bits in the stencil buffer.
The least significant n bits of the parameter mask, where n is the number of
bits in the stencil buffer, specify the mask.
Where a 1 bit appears in the mask, the corresponding
bit in the stencil buffer can be written. Where a 0 bit appears in the mask,
the corresponding bit in the stencil buffer is never written.
The mask is initially all 1's.

**Parameters**

- `mask` (number) - stencil mask

**Examples**

```
-- set the stencil mask to all 1:s
render.set_stencil_mask(0xff)

```

### render.set_stencil_op
*Type:* FUNCTION
The stencil test discards a pixel based on the outcome of a comparison between the
reference value ref and the corresponding value in the stencil buffer.
To control the test, call render.set_stencil_func.
This function takes three arguments that control what happens to the stored stencil
value while stenciling is enabled. If the stencil test fails, no change is made to the
pixel's color or depth buffers, and sfail specifies what happens to the stencil buffer
contents.
Operator constants:

graphics.STENCIL_OP_KEEP (keeps the current value)
graphics.STENCIL_OP_ZERO (sets the stencil buffer value to 0)
graphics.STENCIL_OP_REPLACE (sets the stencil buffer value to ref, as specified by render.set_stencil_func)
graphics.STENCIL_OP_INCR (increments the stencil buffer value and clamp to the maximum representable unsigned value)
graphics.STENCIL_OP_INCR_WRAP (increments the stencil buffer value and wrap to zero when incrementing the maximum representable unsigned value)
graphics.STENCIL_OP_DECR (decrements the current stencil buffer value and clamp to 0)
graphics.STENCIL_OP_DECR_WRAP (decrements the current stencil buffer value and wrap to the maximum representable unsigned value when decrementing zero)
graphics.STENCIL_OP_INVERT (bitwise inverts the current stencil buffer value)

dppass and dpfail specify the stencil buffer actions depending on whether subsequent
depth buffer tests succeed (dppass) or fail (dpfail).
The initial value for all operators is graphics.STENCIL_OP_KEEP.

**Parameters**

- `sfail` (number) - action to take when the stencil test fails
- `dpfail` (number) - the stencil action when the stencil test passes
- `dppass` (number) - the stencil action when both the stencil test and the depth test pass, or when the stencil test passes and either there is no depth buffer or depth testing is not enabled

**Examples**

Set the stencil function to never pass and operator to always draw 1's
on test fail.
```
render.set_stencil_func(graphics.COMPARE_FUNC_NEVER, 1, 0xFF)
-- always draw 1's on test fail
render.set_stencil_op(graphics.STENCIL_OP_REPLACE, graphics.STENCIL_OP_KEEP, graphics.STENCIL_OP_KEEP)

```

### render.set_view
*Type:* FUNCTION
Sets the view matrix to use when rendering.

**Parameters**

- `matrix` (matrix4) - view matrix to set

**Examples**

How to set the view and projection matrices according to
the values supplied by a camera.
```
function init(self)
  self.view = vmath.matrix4()
  self.projection = vmath.matrix4()
end

function update(self, dt)
  -- set the view to the stored view value
  render.set_view(self.view)
  -- now we can draw with this view
end

function on_message(self, message_id, message)
  if message_id == hash("set_view_projection") then
     -- camera view and projection arrives here.
     self.view = message.view
     self.projection = message.projection
  end
end

```

### render.set_viewport
*Type:* FUNCTION
Set the render viewport to the specified rectangle.

**Parameters**

- `x` (number) - left corner
- `y` (number) - bottom corner
- `width` (number) - viewport width
- `height` (number) - viewport height

**Examples**

```
-- Set the viewport to the window dimensions.
render.set_viewport(0, 0, render.get_window_width(), render.get_window_height())

```

### render.SORT_BACK_TO_FRONT
*Type:* CONSTANT
Depth sort far-to-near (default; good for transparent passes).

### render.SORT_FRONT_TO_BACK
*Type:* CONSTANT
Depth sort near-to-far (good for opaque passes to reduce overdraw).

### render.SORT_NONE
*Type:* CONSTANT
No per-call sorting; draw entries in insertion order.

### render_target
*Type:* TYPEDEF
Render target

**Parameters**

- `value` (number)

### resize
*Type:* MESSAGE
Set the size of the game window. Only works on desktop platforms.

**Parameters**

- `height` (number) - the new window height
- `width` (number) - the new window width

**Examples**

```
msg.post("@render:", "resize", { width = 1024, height = 768 } )

```

### texture
*Type:* TYPEDEF
Texture handle

**Parameters**

- `value` (number)

### window_resized
*Type:* MESSAGE
Reports a change in window size. This is initiated on window resize on desktop or by orientation changes
on mobile devices.

**Parameters**

- `height` (number) - the new window height
- `width` (number) - the new window width

**Examples**

```
function on_message(self, message_id, message)
    -- check for the message
    if message_id == hash("window_resized") then
        -- the window was resized.
    end
end

```

<!-- resource-lua -->

# Resource {#apis:resource-lua}

**Namespace:** `resource`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_resource.cpp`
**Source:** `engine/gamesys/src/gamesys/scripts/script_resource.cpp`

Functions and constants to access resources.

## API

### resource.atlas
*Type:* FUNCTION
Constructor-like function with two purposes:

Load the specified resource as part of loading the script
Return a hash to the run-time version of the resource

 This function can only be called within go.property function calls.

**Parameters**

- `path` (string) (optional) - optional resource path string to the resource

**Returns**

- `path` (hash) - a path hash to the binary version of the resource

**Examples**

Load an atlas and set it to a sprite:
```
go.property("my_atlas", resource.atlas("/atlas.atlas"))
function init(self)
  go.set("#sprite", "image", self.my_atlas)
end

```

Load an atlas and set it to a gui:
```
go.property("my_atlas", resource.atlas("/atlas.atlas"))
function init(self)
  go.set("#gui", "textures", self.my_atlas, {key = "my_atlas"})
end

```

### resource.buffer
*Type:* FUNCTION
Constructor-like function with two purposes:

Load the specified resource as part of loading the script
Return a hash to the run-time version of the resource

 This function can only be called within go.property function calls.

**Parameters**

- `path` (string) (optional) - optional resource path string to the resource

**Returns**

- `path` (hash) - a path hash to the binary version of the resource

**Examples**

Set a unique buffer it to a sprite:
```
go.property("my_buffer", resource.buffer("/cube.buffer"))
function init(self)
  go.set("#mesh", "vertices", self.my_buffer)
end

```

### resource.create_atlas
*Type:* FUNCTION
This function creates a new atlas resource that can be used in the same way as any atlas created during build time.
The path used for creating the atlas must be unique, trying to create a resource at a path that is already
registered will trigger an error. If the intention is to instead modify an existing atlas, use the resource.set_atlas
function. Also note that the path to the new atlas resource must have a '.texturesetc' extension,
meaning "/path/my_atlas" is not a valid path but "/path/my_atlas.texturesetc" is.
When creating the atlas, at least one geometry and one animation is required, and an error will be
raised if these requirements are not met. A reference to the resource will be held by the collection
that created the resource and will automatically be released when that collection is destroyed.
Note that releasing a resource essentially means decreasing the reference count of that resource,
and not necessarily that it will be deleted.

**Notes**

- The index values are zero based where zero refers to the first entry of the vertex and uv lists

**Parameters**

- `path` (string) - The path to the resource.
- `table` (table) - A table containing info about how to create the atlas. Supported entries:
<ul>
<li>
<dl>
<dt><code>texture</code></dt>
<dd><span class="type">string | hash</span> the path to the texture resource, e.g "/main/my_texture.texturec"</dd>
</dl>
</li>
<li>
<dl>
<dt><code>animations</code></dt>
<dd><span class="type">table</span> a list of the animations in the atlas. Supports the following fields:</dd>
</dl>
</li>
<li>
<dl>
<dt><code>id</code></dt>
<dd><span class="type">string</span> the id of the animation, used in e.g sprite.play_animation</dd>
</dl>
</li>
<li>
<dl>
<dt><code>width</code></dt>
<dd><span class="type">number</span> the width of the animation</dd>
</dl>
</li>
<li>
<dl>
<dt><code>height</code></dt>
<dd><span class="type">number</span> the height of the animation</dd>
</dl>
</li>
<li>
<dl>
<dt><code>frame_start</code></dt>
<dd><span class="type">number</span> index to the first geometry of the animation. Indices are lua based and must be in the range of 1 .. <number-of-geometries> in atlas.</dd>
</dl>
</li>
<li>
<dl>
<dt><code>frame_end</code></dt>
<dd><span class="type">number</span> index to the last geometry of the animation (non-inclusive). Indices are lua based and must be in the range of 1 .. <number-of-geometries> in atlas.</dd>
</dl>
</li>
<li>
<dl>
<dt><code>playback</code></dt>
<dd><span class="type">constant</span> optional playback mode of the animation, the default value is <a href="/ref/go#go.PLAYBACK_ONCE_FORWARD">go.PLAYBACK_ONCE_FORWARD</a></dd>
</dl>
</li>
<li>
<dl>
<dt><code>fps</code></dt>
<dd><span class="type">number</span> optional fps of the animation, the default value is 30</dd>
</dl>
</li>
<li>
<dl>
<dt><code>flip_vertical</code></dt>
<dd><span class="type">boolean</span> optional flip the animation vertically, the default value is false</dd>
</dl>
</li>
<li>
<dl>
<dt><code>flip_horizontal</code></dt>
<dd><span class="type">boolean</span> optional flip the animation horizontally, the default value is false</dd>
</dl>
</li>
<li>
<dl>
<dt><code>geometries</code></dt>
<dd><span class="type">table</span> A list of the geometries that should map to the texture data. Supports the following fields:</dd>
</dl>
</li>
<li>
<dl>
<dt><code>id</code></dt>
<dd><span class="type">string</span> The name of the geometry. Used when matching animations between multiple atlases</dd>
</dl>
</li>
<li>
<dl>
<dt><code>width</code></dt>
<dd><span class="type">number</span> The width of the image the sprite geometry represents</dd>
</dl>
</li>
<li>
<dl>
<dt><code>height</code></dt>
<dd><span class="type">number</span> The height of the image the sprite geometry represents</dd>
</dl>
</li>
<li>
<dl>
<dt><code>pivot_x</code></dt>
<dd><span class="type">number</span> The pivot x value of the image in unit coords. (0,0) is upper left corner, (1,1) is bottom right. Default is 0.5.</dd>
</dl>
</li>
<li>
<dl>
<dt><code>pivot_y</code></dt>
<dd><span class="type">number</span> The pivot y value of the image in unit coords. (0,0) is upper left corner, (1,1) is bottom right. Default is 0.5.</dd>
</dl>
</li>
<li>
<dl>
<dt><code>rotated</code></dt>
<dd><span class="type">boolean</span> Whether the image is rotated 90 degrees counter-clockwise in the atlas. This affects UV coordinate generation for proper rendering. Default is false.</dd>
</dl>
</li>
<li>
<dl>
<dt><code>vertices</code></dt>
<dd><span class="type">table</span> a list of the vertices in image space of the geometry in the form {px0, py0, px1, py1, ..., pxn, pyn}</dd>
</dl>
</li>
<li>
<dl>
<dt><code>uvs</code></dt>
<dd><span class="type">table</span> a list of the uv coordinates in image space of the geometry in the form of {u0, v0, u1, v1, ..., un, vn}.</dd>
</dl>
</li>
<li>
<dl>
<dt><code>indices</code></dt>
<dd><span class="type">table</span> a list of the indices of the geometry in the form {i0, i1, i2, ..., in}. Each tripe in the list represents a triangle.</dd>
</dl>
</li>
</ul>

**Returns**

- `path` (hash) - Returns the atlas resource path

**Examples**

Create a backing texture and an atlas
```
function init(self)
    -- create an empty texture
    local tparams = {
        width          = 128,
        height         = 128,
        type           = graphics.TEXTURE_TYPE_2D,
        format         = graphics.TEXTURE_FORMAT_RGBA,
    }
    local my_texture_id = resource.create_texture("/my_texture.texturec", tparams)

    -- optionally use resource.set_texture to upload data to texture

    -- create an atlas with one animation and one square geometry
    -- note that the function doesn't support hashes for the texture,
    -- you need to use a string for the texture path here aswell
    local aparams = {
        texture = "/my_texture.texturec",
        animations = {
            {
                id          = "my_animation",
                width       = 128,
                height      = 128,
                frame_start = 1,
                frame_end   = 2,
            }
        },
        geometries = {
            {
                id = 'idle0',
                width = 128,
                height = 128,
                pivot_x = 0.5,
                pivot_y = 0.5,
                vertices  = {
                    0,   0,
                    0,   128,
                    128, 128,
                    128, 0
                },
                uvs = {
                    0,   0,
                    0,   128,
                    128, 128,
                    128, 0
                },
                indices = {0,1,2,0,2,3}
            }
        }
    }
    local my_atlas_id = resource.create_atlas("/my_atlas.texturesetc", aparams)

    -- assign the atlas to the 'sprite' component on the same go
    go.set("#sprite", "image", my_atlas_id)
end

```

### resource.create_buffer
*Type:* FUNCTION
This function creates a new buffer resource that can be used in the same way as any buffer created during build time.
The function requires a valid buffer created from either buffer.create or another pre-existing buffer resource.
By default, the new resource will take ownership of the buffer lua reference, meaning the buffer will not automatically be removed
when the lua reference to the buffer is garbage collected. This behaviour can be overruled by specifying 'transfer_ownership = false'
in the argument table. If the new buffer resource is created from a buffer object that is created by another resource,
the buffer object will be copied and the new resource will effectively own a copy of the buffer instead.
Note that the path to the new resource must have the '.bufferc' extension, "/path/my_buffer" is not a valid path but "/path/my_buffer.bufferc" is.
The path must also be unique, attempting to create a buffer with the same name as an existing resource will raise an error.

**Parameters**

- `path` (string) - The path to the resource.
- `table` (table) (optional) - A table containing info about how to create the buffer. Supported entries:
<ul>
<li>
<dl>
<dt><code>buffer</code></dt>
<dd><span class="type">buffer</span> the buffer to bind to this resource</dd>
</dl>
</li>
<li>
<dl>
<dt><code>transfer_ownership</code></dt>
<dd><span class="type">boolean</span> optional flag to determine wether or not the resource should take over ownership of the buffer object (default true)</dd>
</dl>
</li>
</ul>

**Returns**

- `path` (hash) - Returns the buffer resource path

**Examples**

Create a buffer object and bind it to a buffer resource
```
function init(self)
    local size = 1
    local positions = {
        -- triangle 1
         size,  size, 0,
        -size, -size, 0,
         size, -size, 0,
        -- triangle 2
         size, size,  0,
        -size,  size, 0,
        -size, -size, 0,
    }

    local buffer_handle = buffer.create(#positions, {
        {
            name  = hash("position"),
            type  = buffer.VALUE_TYPE_FLOAT32,
            count = 3
        }
    })

    local stream = buffer.get_stream(buffer_handle, hash("position"))

    -- transfer vertex data to buffer
    for k=1,#positions do
        stream[k] = positions[k]
    end

    local my_buffer = resource.create_buffer("/my_buffer.bufferc", { buffer = buffer_handle })
    go.set("/go#mesh", "vertices", my_buffer)
end
```Create a buffer resource from existing resource

```lua
function init(self)
    local res = resource.get_buffer("/my_buffer_path.bufferc")
    -- create a cloned buffer resource from another resource buffer
    local buf = reource.create_buffer("/my_cloned_buffer.bufferc", { buffer = res })
    -- assign cloned buffer to a mesh component
    go.set("/go#mesh", "vertices", buf)
end

```

### resource.create_sound_data
*Type:* FUNCTION
Creates a sound data resource
Supported formats are .oggc, .opusc and .wavc

**Parameters**

- `path` (string) - the path to the resource. Must not already exist.
- `options` (table) (optional) - A table containing parameters for the text. Supported entries:
<dl>
<dt><code>data</code></dt>
<dd><span class="type">string</span> The raw data of the file. May be partial, but must include the header of the file</dd>
<dt><code>filesize</code></dt>
<dd><span class="type">number</span> If the file is partial, it must also specify the full size of the complete file.</dd>
<dt><code>partial</code></dt>
<dd><span class="type">boolean</span> Is the data not representing the full file, but just the initial chunk?</dd>
</dl>

**Returns**

- `path_hash` (hash) - the resulting path hash to the resource

**Examples**

```
function init(self)
    -- create a new sound resource, given the initial chunk of the file
    local relative_path = "/a/unique/resource/name.oggc"
    local hash = resource.create_sound_data(relative_path, { data = data, filesize = filesize, partial = true })
    go.set("#music", "sound", hash) -- override the previous sound resource
    sound.play("#music") -- start the playing
end

```

### resource.create_texture
*Type:* FUNCTION
Creates a new texture resource that can be used in the same way as any texture created during build time.
The path used for creating the texture must be unique, trying to create a resource at a path that is already
registered will trigger an error. If the intention is to instead modify an existing texture, use the resource.set_texture
function. Also note that the path to the new texture resource must have a '.texturec' extension,
meaning "/path/my_texture" is not a valid path but "/path/my_texture.texturec" is.
If the texture is created without a buffer, the pixel data will be blank.

**Parameters**

- `path` (string) - The path to the resource.
- `table` (table) - A table containing info about how to create the texture. Supported entries:
<dl>
<dt><code>type</code></dt>
<dd><span class="type">number</span> The texture type. Supported values:</dd>
</dl>
<ul>
<li><code>graphics.TEXTURE_TYPE_2D</code></li>
<li><code>graphics.TEXTURE_TYPE_IMAGE_2D</code></li>
<li><code>graphics.TEXTURE_TYPE_3D</code></li>
<li><code>graphics.TEXTURE_TYPE_IMAGE_3D</code></li>
<li><code>graphics.TEXTURE_TYPE_CUBE_MAP</code></li>
</ul>
<dl>
<dt><code>width</code></dt>
<dd><span class="type">number</span> The width of the texture (in pixels). Must be larger than 0.</dd>
<dt><code>height</code></dt>
<dd><span class="type">number</span> The width of the texture (in pixels). Must be larger than 0.</dd>
<dt><code>depth</code></dt>
<dd><span class="type">number</span> The depth of the texture (in pixels). Must be larger than 0. Only used when <code>type</code> is <code>graphics.TEXTURE_TYPE_3D</code> or <code>graphics.TEXTURE_TYPE_IMAGE_3D</code>.</dd>
<dt><code>format</code></dt>
<dd><span class="type">number</span> The texture format, note that some of these formats might not be supported by the running device. Supported values:</dd>
</dl>
<ul>
<li><code>graphics.TEXTURE_FORMAT_LUMINANCE</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGB</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGBA</code></li>
</ul>
These constants might not be available on the device:
<ul>
<li><code>graphics.TEXTURE_FORMAT_RGB_PVRTC_2BPPV1</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGB_PVRTC_4BPPV1</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGBA_PVRTC_2BPPV1</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGBA_PVRTC_4BPPV1</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGB_ETC1</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGBA_ETC2</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGBA_ASTC_4X4</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGB_BC1</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGBA_BC3</code></li>
<li><code>graphics.TEXTURE_FORMAT_R_BC4</code></li>
<li><code>graphics.TEXTURE_FORMAT_RG_BC5</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGBA_BC7</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGB16F</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGB32F</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGBA16F</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGBA32F</code></li>
<li><code>graphics.TEXTURE_FORMAT_R16F</code></li>
<li><code>graphics.TEXTURE_FORMAT_RG16F</code></li>
<li><code>graphics.TEXTURE_FORMAT_R32F</code></li>
<li><code>graphics.TEXTURE_FORMAT_RG32F</code></li>
</ul>
You can test if the device supports these values by checking if a specific enum is nil or not:
<div class="codehilite"><pre><span></span><code><span class="kr">if</span> <span class="n">graphics</span><span class="p">.</span><span class="n">TEXTURE_FORMAT_RGBA16F</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="c1">-- it is safe to use this format</span>
<span class="kr">end</span>
</code></pre></div>

<dl>
<dt><code>flags</code></dt>
<dd><span class="type">number</span> Texture creation flags that can be used to dictate how the texture is created. The default value is <a href="/ref/graphics#graphics.TEXTURE_USAGE_FLAG_SAMPLE">graphics.TEXTURE_USAGE_FLAG_SAMPLE</a>, which means that the texture can be sampled from a shader.
These flags may or may not be supported on the running device and/or the underlying graphics API and is simply used internally as a 'hint' when creating the texture. There is no guarantee that any of these will have any effect. Supported values:</dd>
</dl>
<ul>
<li><code>graphics.TEXTURE_USAGE_FLAG_SAMPLE</code> - The texture can be sampled from a shader (default)</li>
<li><code>graphics.TEXTURE_USAGE_FLAG_MEMORYLESS</code> - The texture can be used as a memoryless texture, i.e only transient memory for the texture is used during rendering</li>
<li><code>graphics.TEXTURE_USAGE_FLAG_STORAGE</code> - The texture can be used as a storage texture, which is required for a shader to write to the texture</li>
</ul>
<dl>
<dt><code>max_mipmaps</code></dt>
<dd><span class="type">number</span> optional max number of mipmaps. Defaults to zero, i.e no mipmap support</dd>
<dt><code>compression_type</code></dt>
<dd><span class="type">number</span> optional specify the compression type for the data in the buffer object that holds the texture data. Will only be used when a compressed buffer has been passed into the function.
Creating an empty texture with no buffer data is not supported as a core feature. Defaults to graphics.COMPRESSION_TYPE_DEFAULT, i.e no compression. Supported values:</dd>
</dl>
<ul>
<li><code>COMPRESSION_TYPE_DEFAULT</code></li>
<li><code>COMPRESSION_TYPE_BASIS_UASTC</code></li>
</ul>
- `buffer` (buffer) - optional buffer of precreated pixel data

**Returns**

- `path` (hash) - The path to the resource.
<span class="icon-attention"></span> 3D Textures are currently only supported on OpenGL and Vulkan adapters. To check if your device supports 3D textures, use:
```lua
if graphics.TEXTURE_TYPE_3D ~= nil then
    -- Device and graphics adapter support 3D textures
end

**Examples**

How to create an 128x128 RGBA texture resource and assign it to a model
```
function init(self)
    local tparams = {
       width          = 128,
       height         = 128,
       type           = graphics.TEXTURE_TYPE_2D,
       format         = graphics.TEXTURE_FORMAT_RGBA,
   }
   local my_texture_id = resource.create_texture("/my_custom_texture.texturec", tparams)
   go.set("#model", "texture0", my_texture_id)
end
```How to create an 128x128 floating point texture (RGBA32F) resource from a buffer object

```lua
function init(self)
    -- Create a new buffer with 4 components and FLOAT32 type
    local tbuffer = buffer.create(128 * 128, { {name=hash("rgba"), type=buffer.VALUE_TYPE_FLOAT32, count=4} } )
    local tstream = buffer.get_stream(tbuffer, hash("rgba"))

    -- Fill the buffer stream with some float values
    for y=1,128 do
        for x=1,128 do
            local index = (y-1) * 128 * 4 + (x-1) * 4 + 1
            tstream[index + 0] = 999.0
            tstream[index + 1] = -1.0
            tstream[index + 2] = 0.5
            tstream[index + 3] = 1.0
        end
    end

    -- Create a 2D Texture with a RGBA23F format
    local tparams = {
       width          = 128,
       height         = 128,
       type           = graphics.TEXTURE_TYPE_2D,
       format         = graphics.TEXTURE_FORMAT_RGBA32F,
   }

   -- Note that we pass the buffer as the last argument here!
   local my_texture_id = resource.create_texture("/my_custom_texture.texturec", tparams, tbuffer)

   -- assign the texture to a model
   go.set("#model", "texture0", my_texture_id)
end
```How to create a 32x32x32 floating point 3D texture that can be used to generate volumetric data in a compute shader

```lua
function init(self)
    local t_volume = resource.create_texture("/my_backing_texture.texturec", {
        type   = graphics.TEXTURE_TYPE_IMAGE_3D,
        width  = 32,
        height = 32,
        depth  = 32,
        format = resource.TEXTURE_FORMAT_RGBA32F,
        flags  = resource.TEXTURE_USAGE_FLAG_STORAGE + resource.TEXTURE_USAGE_FLAG_SAMPLE,
    })

    -- pass the backing texture to the render script
    msg.post("@render:", "add_textures", { t_volume })
end
```How to create 512x512 texture array with 5 pages.

```lua
        local new_tex = resource.create_texture("/runtime/example_array.texturec", {
            type = graphics.TEXTURE_TYPE_2D_ARRAY,
            width = 512,
            height = 512,
            page_count = 5,
            format = graphics.TEXTURE_FORMAT_RGB,
        })

```

### resource.create_texture_async
*Type:* FUNCTION
Creates a new texture resource that can be used in the same way as any texture created during build time.
The path used for creating the texture must be unique, trying to create a resource at a path that is already
registered will trigger an error. If the intention is to instead modify an existing texture, use the resource.set_texture
function. Also note that the path to the new texture resource must have a '.texturec' extension,
meaning "/path/my_texture" is not a valid path but "/path/my_texture.texturec" is.
If the texture is created without a buffer, the pixel data will be blank.
The difference between the async version and resource.create_texture is that the texture data will be uploaded
in a graphics worker thread. The function will return a resource immediately that contains a 1x1 blank texture which can be used
immediately after the function call. When the new texture has been uploaded, the initial blank texture will be deleted and replaced with the
new texture. Be careful when using the initial texture handle handle as it will not be valid after the upload has finished.

**Parameters**

- `path` (string | hash) - The path to the resource.
- `table` (table) - <dl>
<dt>A table containing info about how to create the texture. Supported entries:</dt>
<dt><code>type</code></dt>
<dd><span class="type">number</span> The texture type. Supported values:</dd>
</dl>
<ul>
<li><code>graphics.TEXTURE_TYPE_2D</code></li>
<li><code>graphics.TEXTURE_TYPE_IMAGE_2D</code></li>
<li><code>graphics.TEXTURE_TYPE_3D</code></li>
<li><code>graphics.TEXTURE_TYPE_IMAGE_3D</code></li>
<li><code>graphics.TEXTURE_TYPE_CUBE_MAP</code></li>
</ul>
<dl>
<dt><code>width</code></dt>
<dd><span class="type">number</span> The width of the texture (in pixels). Must be larger than 0.</dd>
<dt><code>height</code></dt>
<dd><span class="type">number</span> The width of the texture (in pixels). Must be larger than 0.</dd>
<dt><code>depth</code></dt>
<dd><span class="type">number</span> The depth of the texture (in pixels). Must be larger than 0. Only used when <code>type</code> is <code>graphics.TEXTURE_TYPE_3D</code> or <code>graphics.TEXTURE_TYPE_IMAGE_3D</code>.</dd>
<dt><code>format</code></dt>
<dd><span class="type">number</span> The texture format, note that some of these formats might not be supported by the running device. Supported values:</dd>
</dl>
<ul>
<li><code>graphics.TEXTURE_FORMAT_LUMINANCE</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGB</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGBA</code></li>
</ul>
These constants might not be available on the device:
<ul>
<li><code>graphics.TEXTURE_FORMAT_RGB_PVRTC_2BPPV1</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGB_PVRTC_4BPPV1</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGBA_PVRTC_2BPPV1</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGBA_PVRTC_4BPPV1</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGB_ETC1</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGBA_ETC2</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGBA_ASTC_4X4</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGB_BC1</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGBA_BC3</code></li>
<li><code>graphics.TEXTURE_FORMAT_R_BC4</code></li>
<li><code>graphics.TEXTURE_FORMAT_RG_BC5</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGBA_BC7</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGB16F</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGB32F</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGBA16F</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGBA32F</code></li>
<li><code>graphics.TEXTURE_FORMAT_R16F</code></li>
<li><code>graphics.TEXTURE_FORMAT_RG16F</code></li>
<li><code>graphics.TEXTURE_FORMAT_R32F</code></li>
<li><code>graphics.TEXTURE_FORMAT_RG32F</code></li>
</ul>
You can test if the device supports these values by checking if a specific enum is nil or not:
<div class="codehilite"><pre><span></span><code><span class="kr">if</span> <span class="n">graphics</span><span class="p">.</span><span class="n">TEXTURE_FORMAT_RGBA16F</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="c1">-- it is safe to use this format</span>
<span class="kr">end</span>
</code></pre></div>

<dl>
<dt><code>flags</code></dt>
<dd><span class="type">number</span> Texture creation flags that can be used to dictate how the texture is created. Supported values:</dd>
</dl>
<ul>
<li><code>graphics.TEXTURE_USAGE_FLAG_SAMPLE</code> - The texture can be sampled from a shader (default)</li>
<li><code>graphics.TEXTURE_USAGE_FLAG_MEMORYLESS</code> - The texture can be used as a memoryless texture, i.e only transient memory for the texture is used during rendering</li>
<li><code>graphics.TEXTURE_USAGE_FLAG_STORAGE</code> - The texture can be used as a storage texture, which is required for a shader to write to the texture</li>
</ul>
<dl>
<dt><code>max_mipmaps</code></dt>
<dd><span class="type">number</span> optional max number of mipmaps. Defaults to zero, i.e no mipmap support</dd>
<dt><code>compression_type</code></dt>
<dd><span class="type">number</span> optional specify the compression type for the data in the buffer object that holds the texture data. Will only be used when a compressed buffer has been passed into the function.
Creating an empty texture with no buffer data is not supported as a core feature. Defaults to graphics.COMPRESSION_TYPE_DEFAULT, i.e no compression. Supported values:</dd>
</dl>
<ul>
<li><code>COMPRESSION_TYPE_DEFAULT</code></li>
<li><code>COMPRESSION_TYPE_BASIS_UASTC</code></li>
</ul>
- `buffer` (buffer) - optional buffer of precreated pixel data
- `callback` (function) - callback function when texture is created (self, request_id, resource)

**Returns**

- `path` (hash) - The path to the texture resource.
- `request_id` (number) - The request id for the async request.
<span class="icon-attention"></span> 3D Textures are currently only supported on OpenGL and Vulkan adapters. To check if your device supports 3D textures, use:
```lua
if graphics.TEXTURE_TYPE_3D ~= nil then
    -- Device and graphics adapter support 3D textures
end

**Examples**

Create a texture resource asyncronously with a buffer and a callback
```
function callback(self, request_id, resource)
    -- The resource has been updated with a new texture,
    -- so we can update other systems with the new handle,
    -- or update components to use the resource if we want
    local tinfo = resource.get_texture_info(resource)
    msg.post("@render:", "set_backing_texture", tinfo.handle)
end
function init(self)
    -- Create a texture resource async
    local tparams = {
        width          = 128,
        height         = 128,
        type           = graphics.TEXTURE_TYPE_2D,
        format         = graphics.TEXTURE_FORMAT_RGBA,
    }

    -- Create a new buffer with 4 components
    local tbuffer = buffer.create(tparams.width * tparams.height, { {name=hash("rgba"), type=buffer.VALUE_TYPE_UINT8, count=4} } )
    local tstream = buffer.get_stream(tbuffer, hash("rgba"))

    -- Fill the buffer stream with some float values
    for y=1,tparams.width do
        for x=1,tparams.height do
            local index = (y-1) * 128 * 4 + (x-1) * 4 + 1
            tstream[index + 0] = 255
            tstream[index + 1] = 0
            tstream[index + 2] = 255
            tstream[index + 3] = 255
        end
    end
    -- create the texture
    local tpath, request_id = resource.create_texture_async("/my_texture.texturec", tparams, tbuffer, callback)
    -- at this point you can use the resource as-is, but note that the texture will be a blank 1x1 texture
    -- that will be removed once the new texture has been updated
    go.set("#model", "texture0", tpath)
end
```Create a texture resource asyncronously without a callback

```lua
function init(self)
    -- Create a texture resource async
    local tparams = {
        width          = 128,
        height         = 128,
        type           = graphics.TEXTURE_TYPE_2D,
        format         = graphics.TEXTURE_FORMAT_RGBA,
    }

    -- Create a new buffer with 4 components
    local tbuffer = buffer.create(tparams.width * tparams.height, { {name=hash("rgba"), type=buffer.VALUE_TYPE_UINT8, count=4} } )
    local tstream = buffer.get_stream(tbuffer, hash("rgba"))

    -- Fill the buffer stream with some float values
    for y=1,tparams.width do
        for x=1,tparams.height do
            local index = (y-1) * 128 * 4 + (x-1) * 4 + 1
            tstream[index + 0] = 255
            tstream[index + 1] = 0
            tstream[index + 2] = 255
            tstream[index + 3] = 255
        end
    end
    -- create the texture
    local tpath, request_id = resource.create_texture_async("/my_texture.texturec", tparams, tbuffer)
    -- at this point you can use the resource as-is, but note that the texture will be a blank 1x1 texture
    -- that will be removed once the new texture has been updated
    go.set("#model", "texture0", tpath)
end

```

### resource.font
*Type:* FUNCTION
Constructor-like function with two purposes:

Load the specified resource as part of loading the script
Return a hash to the run-time version of the resource

 This function can only be called within go.property function calls.

**Parameters**

- `path` (string) (optional) - optional resource path string to the resource

**Returns**

- `path` (hash) - a path hash to the binary version of the resource

**Examples**

Load a font and set it to a label:
```
go.property("my_font", resource.font("/font.font"))
function init(self)
  go.set("#label", "font", self.my_font)
end

```

Load a font and set it to a gui:
```
go.property("my_font", resource.font("/font.font"))
function init(self)
  go.set("#gui", "fonts", self.my_font, {key = "my_font"})
end

```

### resource.get_atlas
*Type:* FUNCTION
Returns the atlas data for an atlas

**Parameters**

- `path` (hash | string) - The path to the atlas resource

**Returns**

- `data` (table) - A table with the following entries:
<ul>
<li>texture</li>
<li>geometries</li>
<li>animations</li>
</ul>
See <a href="/ref/resource#resource.set_atlas">resource.set_atlas</a> for a detailed description of each field

### resource.get_buffer
*Type:* FUNCTION
gets the buffer from a resource

**Parameters**

- `path` (hash | string) - The path to the resource

**Returns**

- `buffer` (buffer) - The resource buffer

**Examples**

How to get the data from a buffer
```
function init(self)

    local res_path = go.get("#mesh", "vertices")
    local buf = resource.get_buffer(res_path)
    local stream_positions = buffer.get_stream(buf, "position")

    for i=1,#stream_positions do
        print(i, stream_positions[i])
    end
end

```

### resource.get_render_target_info
*Type:* FUNCTION
Gets render target info from a render target resource path or a render target handle

**Parameters**

- `path` (hash | string | number) - The path to the resource or a render target handle

**Returns**

- `table` (table) - A table containing info about the render target:
<dl>
<dt><code>handle</code></dt>
<dd><span class="type">number</span> the opaque handle to the texture resource</dd>
<dt>'attachments'</dt>
<dd><span class="type">table</span> a table of attachments, where each attachment contains the following entries:</dd>
<dt><code>width</code></dt>
<dd><span class="type">number</span> width of the texture</dd>
<dt><code>height</code></dt>
<dd><span class="type">number</span> height of the texture</dd>
<dt><code>depth</code></dt>
<dd><span class="type">number</span> depth of the texture (i.e 1 for a 2D texture and 6 for a cube map)</dd>
<dt><code>mipmaps</code></dt>
<dd><span class="type">number</span> number of mipmaps of the texture</dd>
<dt><code>type</code></dt>
<dd><span class="type">number</span> The texture type. Supported values:</dd>
</dl>
<ul>
<li><code>graphics.TEXTURE_TYPE_2D</code></li>
<li><code>graphics.TEXTURE_TYPE_CUBE_MAP</code></li>
<li><code>graphics.TEXTURE_TYPE_2D_ARRAY</code></li>
</ul>
<dl>
<dt><code>buffer_type</code></dt>
<dd><span class="type">number</span> The attachment buffer type. Supported values:</dd>
</dl>
<ul>
<li><code>resource.BUFFER_TYPE_COLOR0</code></li>
<li><code>resource.BUFFER_TYPE_COLOR1</code></li>
<li><code>resource.BUFFER_TYPE_COLOR2</code></li>
<li><code>resource.BUFFER_TYPE_COLOR3</code></li>
<li><code>resource.BUFFER_TYPE_DEPTH</code></li>
<li>
<code>resource.BUFFER_TYPE_STENCIL</code>
</li>
<li>
<dl>
<dt><code>texture</code></dt>
<dd><span class="type">hash</span> The hashed path to the attachment texture resource. This field is only available if the render target passed in is a resource.</dd>
</dl>
</li>
</ul>

**Examples**

Get the metadata from a render target resource
```
function init(self)
    local info = resource.get_render_target_info("/my_render_target.render_targetc")
    -- the info table contains meta data about all the render target attachments
    -- so it's not necessary to use resource.get_texture here, but we do it here
    -- just to show that it's possible:
    local info_attachment_1 = resource.get_texture_info(info.attachments[1].handle)
end
```Get a texture attachment from a render target and set it on a model component

```lua
function init(self)
    local info = resource.get_render_target_info("/my_render_target.render_targetc")
    local attachment = info.attachments[1].texture
    -- you can also get texture info from the 'texture' field, since it's a resource hash
    local texture_info = resource.get_texture_info(attachment)
    go.set("#model", "texture0", attachment)
end

```

### resource.get_text_metrics
*Type:* FUNCTION
Gets the text metrics from a font

**Parameters**

- `url` (hash) - the font to get the (unscaled) metrics from
- `text` (string) - text to measure
- `options` (table) (optional) - A table containing parameters for the text. Supported entries:
<dl>
<dt><code>width</code></dt>
<dd><span class="type">number</span> The width of the text field. Not used if <code>line_break</code> is false.</dd>
<dt><code>leading</code></dt>
<dd><span class="type">number</span> The leading (default 1.0)</dd>
<dt><code>tracking</code></dt>
<dd><span class="type">number</span> The tracking (default 0.0)</dd>
<dt><code>line_break</code></dt>
<dd><span class="type">boolean</span> If the calculation should consider line breaks (default false)</dd>
</dl>

**Returns**

- `metrics` (table) - a table with the following fields:
<ul>
<li>width</li>
<li>height</li>
<li>max_ascent</li>
<li>max_descent</li>
</ul>

**Examples**

```
function init(self)
    local font = go.get("#label", "font")
    local metrics = resource.get_text_metrics(font, "The quick brown fox\n jumps over the lazy dog")
    pprint(metrics)
end

```

### resource.get_texture_info
*Type:* FUNCTION
Gets texture info from a texture resource path or a texture handle

**Parameters**

- `path` (hash | string | number) - The path to the resource or a texture handle

**Returns**

- `table` (table) - A table containing info about the texture:
<dl>
<dt><code>handle</code></dt>
<dd><span class="type">number</span> the opaque handle to the texture resource</dd>
<dt><code>width</code></dt>
<dd><span class="type">number</span> width of the texture</dd>
<dt><code>height</code></dt>
<dd><span class="type">number</span> height of the texture</dd>
<dt><code>depth</code></dt>
<dd><span class="type">number</span> depth of the texture (i.e 1 for a 2D texture, 6 for a cube map, the actual depth of a 3D texture)</dd>
<dt><code>page_count</code></dt>
<dd><span class="type">number</span> number of pages of the texture array. For 2D texture value is 1. For cube map - 6</dd>
<dt><code>mipmaps</code></dt>
<dd><span class="type">number</span> number of mipmaps of the texture</dd>
<dt><code>flags</code></dt>
<dd><span class="type">number</span> usage hints of the texture.</dd>
<dt><code>type</code></dt>
<dd><span class="type">number</span> The texture type. Supported values:</dd>
</dl>
<ul>
<li><code>graphics.TEXTURE_TYPE_2D</code></li>
<li><code>graphics.TEXTURE_TYPE_2D_ARRAY</code></li>
<li><code>graphics.TEXTURE_TYPE_IMAGE_2D</code></li>
<li><code>graphics.TEXTURE_TYPE_3D</code></li>
<li><code>graphics.TEXTURE_TYPE_IMAGE_3D</code></li>
<li><code>graphics.TEXTURE_TYPE_CUBE_MAP</code></li>
</ul>

**Examples**

Create a new texture and get the metadata from it
```
function init(self)
    -- create an empty texture
    local tparams = {
        width          = 128,
        height         = 128,
        type           = graphics.TEXTURE_TYPE_2D,
        format         = graphics.TEXTURE_FORMAT_RGBA,
    }

    local my_texture_path = resource.create_texture("/my_texture.texturec", tparams)
    local my_texture_info = resource.get_texture_info(my_texture_path)

    -- my_texture_info now contains
    -- {
    --      handle = ,
    --      width = 128,
    --      height = 128,
    --      depth = 1
    --      mipmaps = 1,
    --      page_count = 1,
    --      type = graphics.TEXTURE_TYPE_2D,
    --      flags = graphics.TEXTURE_USAGE_FLAG_SAMPLE
    -- }
end
```Get the meta data from an atlas resource

```lua
function init(self)
    local my_atlas_info   = resource.get_atlas("/my_atlas.a.texturesetc")
    local my_texture_info = resource.get_texture_info(my_atlas_info.texture)

    -- my_texture_info now contains the information about the texture that is backing the atlas
end

```

### resource.load
*Type:* FUNCTION
Loads the resource data for a specific resource.

**Parameters**

- `path` (string) - The path to the resource

**Returns**

- `buffer` (buffer) - Returns the buffer stored on disc

**Examples**

```
-- read custom resource data into buffer
local buffer = resource.load("/resources/datafile")

```

In order for the engine to include custom resources in the build process, you need
to specify them in the "game.project" settings file:
```
[project]
title = My project
version = 0.1
custom_resources = resources/,assets/level_data.json

```

### resource.material
*Type:* FUNCTION
Constructor-like function with two purposes:

Load the specified resource as part of loading the script
Return a hash to the run-time version of the resource

 This function can only be called within go.property function calls.

**Parameters**

- `path` (string) (optional) - optional resource path string to the resource

**Returns**

- `path` (hash) - a path hash to the binary version of the resource

**Examples**

Load a material and set it to a sprite:
```
go.property("my_material", resource.material("/material.material"))
function init(self)
  go.set("#sprite", "material", self.my_material)
end

```

Load a material resource and update a named material with the resource:
```
go.property("my_material", resource.material("/material.material"))
function init(self)
  go.set("#gui", "materials", self.my_material, {key = "my_material"})
end

```

### resource.release
*Type:* FUNCTION
Release a resource.
 This is a potentially dangerous operation, releasing resources currently being used can cause unexpected behaviour.

**Parameters**

- `path` (hash | string) - The path to the resource.

### resource.render_target
*Type:* FUNCTION
Constructor-like function with two purposes:

Load the specified resource as part of loading the script
Return a hash to the run-time version of the resource

 This function can only be called within go.property function calls.

**Parameters**

- `path` (string) (optional) - optional resource path string to the resource

**Returns**

- `path` (hash) - a path hash to the binary version of the resource

**Examples**

Set a render target color attachment as a model texture:
```
go.property("my_render_target", resource.render_target("/rt.render_target"))
function init(self)
  local rt_info = resource.get_render_target_info(self.my_render_target)
  go.set("#model", "texture0", rt_info.attachments[1].texture)
end

```

### resource.set
*Type:* FUNCTION
Sets the resource data for a specific resource

**Parameters**

- `path` (string | hash) - The path to the resource
- `buffer` (buffer) - The buffer of precreated data, suitable for the intended resource type

**Examples**

Assuming the folder "/res" is added to the project custom resources:
```
-- load a texture resource and set it on a sprite
local buffer = resource.load("/res/new.texturec")
resource.set(go.get("#sprite", "texture0"), buffer)

```

### resource.set_atlas
*Type:* FUNCTION
Sets the data for a specific atlas resource. Setting new atlas data is specified by passing in
a texture path for the backing texture of the atlas, a list of geometries and a list of animations
that map to the entries in the geometry list. The geometry entries are represented by three lists:
vertices, uvs and indices that together represent triangles that are used in other parts of the
engine to produce render objects from.
Vertex and uv coordinates for the geometries are expected to be
in pixel coordinates where 0,0 is the top left corner of the texture.
There is no automatic padding or margin support when setting custom data,
which could potentially cause filtering artifacts if used with a material sampler that has linear filtering.
If that is an issue, you need to calculate padding and margins manually before passing in the geometry data to
this function.

**Notes**

- Custom atlas data is not compatible with slice-9 for sprites
- The index values are zero based where zero refers to the first entry of the vertex and uv lists

**Parameters**

- `path` (hash | string) - The path to the atlas resource
- `table` (table) - A table containing info about the atlas. Supported entries:
<ul>
<li>
<dl>
<dt><code>texture</code></dt>
<dd><span class="type">string | hash</span> the path to the texture resource, e.g "/main/my_texture.texturec"</dd>
</dl>
</li>
<li>
<dl>
<dt><code>animations</code></dt>
<dd><span class="type">table</span> a list of the animations in the atlas. Supports the following fields:</dd>
</dl>
</li>
<li>
<dl>
<dt><code>id</code></dt>
<dd><span class="type">string</span> the id of the animation, used in e.g sprite.play_animation</dd>
</dl>
</li>
<li>
<dl>
<dt><code>width</code></dt>
<dd><span class="type">number</span> the width of the animation</dd>
</dl>
</li>
<li>
<dl>
<dt><code>height</code></dt>
<dd><span class="type">number</span> the height of the animation</dd>
</dl>
</li>
<li>
<dl>
<dt><code>frame_start</code></dt>
<dd><span class="type">number</span> index to the first geometry of the animation. Indices are lua based and must be in the range of 1 .. <number-of-geometries> in atlas.</dd>
</dl>
</li>
<li>
<dl>
<dt><code>frame_end</code></dt>
<dd><span class="type">number</span> index to the last geometry of the animation (non-inclusive). Indices are lua based and must be in the range of 1 .. <number-of-geometries> in atlas.</dd>
</dl>
</li>
<li>
<dl>
<dt><code>playback</code></dt>
<dd><span class="type">constant</span> optional playback mode of the animation, the default value is <a href="/ref/go#go.PLAYBACK_ONCE_FORWARD">go.PLAYBACK_ONCE_FORWARD</a></dd>
</dl>
</li>
<li>
<dl>
<dt><code>fps</code></dt>
<dd><span class="type">number</span> optional fps of the animation, the default value is 30</dd>
</dl>
</li>
<li>
<dl>
<dt><code>flip_vertical</code></dt>
<dd><span class="type">boolean</span> optional flip the animation vertically, the default value is false</dd>
</dl>
</li>
<li>
<dl>
<dt><code>flip_horizontal</code></dt>
<dd><span class="type">boolean</span> optional flip the animation horizontally, the default value is false</dd>
</dl>
</li>
<li>
<dl>
<dt><code>geometries</code></dt>
<dd><span class="type">table</span> A list of the geometries that should map to the texture data. Supports the following fields:</dd>
</dl>
</li>
<li>
<dl>
<dt><code>vertices</code></dt>
<dd><span class="type">table</span> a list of the vertices in texture space of the geometry in the form {px0, py0, px1, py1, ..., pxn, pyn}</dd>
</dl>
</li>
<li>
<dl>
<dt><code>uvs</code></dt>
<dd><span class="type">table</span> a list of the uv coordinates in texture space of the geometry in the form of {u0, v0, u1, v1, ..., un, vn}</dd>
</dl>
</li>
<li>
<dl>
<dt><code>indices</code></dt>
<dd><span class="type">table</span> a list of the indices of the geometry in the form {i0, i1, i2, ..., in}. Each tripe in the list represents a triangle.</dd>
</dl>
</li>
</ul>

**Examples**

Add a new animation to an existing atlas
```
function init(self)
    local data = resource.get_atlas("/main/my_atlas.a.texturesetc")
    local my_animation = {
        id          = "my_new_animation",
        width       = 128,
        height      = 128,
        frame_start = 1,
        frame_end   = 6,
        playback    = go.PLAYBACK_LOOP_PINGPONG,
        fps         = 8
    }
    table.insert(data.animations, my_animation)
    resource.set_atlas("/main/my_atlas.a.texturesetc", data)
end
```Sets atlas data for a 256x256 texture with a single animation being rendered as a quad

```lua
function init(self)
    local params = {
        texture = "/main/my_256x256_texture.texturec",
        animations = {
            {
                id          = "my_animation",
                width       = 256,
                height      = 256,
                frame_start = 1,
                frame_end   = 2,
            }
        },
        geometries = {
            {
                vertices = {
                    0,   0,
                    0,   256,
                    256, 256,
                    256, 0
                },
                uvs = {
                    0, 0,
                    0, 256,
                    256, 256,
                    256, 0
                },
                indices = { 0,1,2,0,2,3 }
            }
        }
    }
    resource.set_atlas("/main/test.a.texturesetc", params)
end

```

### resource.set_buffer
*Type:* FUNCTION
Sets the buffer of a resource. By default, setting the resource buffer will either copy the data from the incoming buffer object
to the buffer stored in the destination resource, or make a new buffer object if the sizes between the source buffer and the destination buffer
stored in the resource differs. In some cases, e.g performance reasons, it might be beneficial to just set the buffer object on the resource without copying or cloning.
To achieve this, set the transfer_ownership flag to true in the argument table. Transferring ownership from a lua buffer to a resource with this function
works exactly the same as resource.create_buffer: the destination resource will take ownership of the buffer held by the lua reference, i.e the buffer will not automatically be removed
when the lua reference to the buffer is garbage collected.
Note: When setting a buffer with transfer_ownership = true, the currently bound buffer in the resource will be destroyed.

**Parameters**

- `path` (hash | string) - The path to the resource
- `buffer` (buffer) - The resource buffer
- `table` (table) (optional) - A table containing info about how to set the buffer. Supported entries:
<ul>
<li>
<dl>
<dt><code>transfer_ownership</code></dt>
<dd><span class="type">boolean</span> optional flag to determine wether or not the resource should take over ownership of the buffer object (default false)</dd>
</dl>
</li>
</ul>

**Examples**

How to set the data from a buffer
```
local function fill_stream(stream, verts)
    for key, value in ipairs(verts) do
        stream[key] = verts[key]
    end
end

function init(self)

    local res_path = go.get("#mesh", "vertices")

    local positions = {
         1, -1, 0,
         1,  1, 0,
         -1, -1, 0
    }

    local num_verts = #positions / 3

    -- create a new buffer
    local buf = buffer.create(num_verts, {
        { name = hash("position"), type=buffer.VALUE_TYPE_FLOAT32, count = 3 }
    })

    local buf = resource.get_buffer(res_path)
    local stream_positions = buffer.get_stream(buf, "position")

    fill_stream(stream_positions, positions)

    resource.set_buffer(res_path, buf)
end

```

### resource.set_sound
*Type:* FUNCTION
Update internal sound resource (wavc/oggc/opusc) with new data

**Parameters**

- `path` (hash | string) - The path to the resource
- `buffer` (string) - A lua string containing the binary sound data

### resource.set_texture
*Type:* FUNCTION
Sets the pixel data for a specific texture.

**Parameters**

- `path` (hash | string) - The path to the resource
- `table` (table) - A table containing info about the texture. Supported entries:
<dl>
<dt><code>type</code></dt>
<dd><span class="type">number</span> The texture type. Supported values:</dd>
</dl>
<ul>
<li><code>graphics.TEXTURE_TYPE_2D</code></li>
<li><code>graphics.TEXTURE_TYPE_IMAGE_2D</code></li>
<li><code>graphics.TEXTURE_TYPE_3D</code></li>
<li><code>graphics.TEXTURE_TYPE_IMAGE_3D</code></li>
<li><code>graphics.TEXTURE_TYPE_CUBE_MAP</code></li>
</ul>
<dl>
<dt><code>width</code></dt>
<dd><span class="type">number</span> The width of the texture (in pixels)</dd>
<dt><code>height</code></dt>
<dd><span class="type">number</span> The width of the texture (in pixels)</dd>
<dt><code>format</code></dt>
<dd><span class="type">number</span> The texture format, note that some of these formats are platform specific. Supported values:</dd>
</dl>
<ul>
<li><code>graphics.TEXTURE_FORMAT_LUMINANCE</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGB</code></li>
<li><code>graphics.TEXTURE_FORMAT_RGBA</code></li>
</ul>
These constants might not be available on the device:
- <code>graphics.TEXTURE_FORMAT_RGB_PVRTC_2BPPV1</code>
- <code>graphics.TEXTURE_FORMAT_RGB_PVRTC_4BPPV1</code>
- <code>graphics.TEXTURE_FORMAT_RGBA_PVRTC_2BPPV1</code>
- <code>graphics.TEXTURE_FORMAT_RGBA_PVRTC_4BPPV1</code>
- <code>graphics.TEXTURE_FORMAT_RGB_ETC1</code>
- <code>graphics.TEXTURE_FORMAT_RGBA_ETC2</code>
- <code>graphics.TEXTURE_FORMAT_RGBA_ASTC_4X4</code>
- <code>graphics.TEXTURE_FORMAT_RGB_BC1</code>
- <code>graphics.TEXTURE_FORMAT_RGBA_BC3</code>
- <code>graphics.TEXTURE_FORMAT_R_BC4</code>
- <code>graphics.TEXTURE_FORMAT_RG_BC5</code>
- <code>graphics.TEXTURE_FORMAT_RGBA_BC7</code>
- <code>graphics.TEXTURE_FORMAT_RGB16F</code>
- <code>graphics.TEXTURE_FORMAT_RGB32F</code>
- <code>graphics.TEXTURE_FORMAT_RGBA16F</code>
- <code>graphics.TEXTURE_FORMAT_RGBA32F</code>
- <code>graphics.TEXTURE_FORMAT_R16F</code>
- <code>graphics.TEXTURE_FORMAT_RG16F</code>
- <code>graphics.TEXTURE_FORMAT_R32F</code>
- <code>graphics.TEXTURE_FORMAT_RG32F</code>
You can test if the device supports these values by checking if a specific enum is nil or not:
<div class="codehilite"><pre><span></span><code><span class="kr">if</span> <span class="n">graphics</span><span class="p">.</span><span class="n">TEXTURE_FORMAT_RGBA16F</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="c1">-- it is safe to use this format</span>
<span class="kr">end</span>
</code></pre></div>

<dl>
<dt><code>x</code></dt>
<dd><span class="type">number</span> optional x offset of the texture (in pixels)</dd>
<dt><code>y</code></dt>
<dd><span class="type">number</span> optional y offset of the texture (in pixels)</dd>
<dt><code>z</code></dt>
<dd><span class="type">number</span> optional z offset of the texture (in pixels). Only applies to 3D textures</dd>
<dt><code>page</code></dt>
<dd><span class="type">number</span> optional slice of the array texture. Only applies to 2D texture arrays. Zero-based</dd>
<dt><code>mipmap</code></dt>
<dd><span class="type">number</span> optional mipmap to upload the data to</dd>
<dt><code>compression_type</code></dt>
<dd><span class="type">number</span> optional specify the compression type for the data in the buffer object that holds the texture data. Defaults to graphics.COMPRESSION_TYPE_DEFAULT, i.e no compression. Supported values:</dd>
</dl>
<ul>
<li><code>COMPRESSION_TYPE_DEFAULT</code></li>
<li><code>COMPRESSION_TYPE_BASIS_UASTC</code></li>
</ul>
- `buffer` (buffer) - The buffer of precreated pixel data
<span class="icon-attention"></span> To update a cube map texture you need to pass in six times the amount of data via the buffer, since a cube map has six sides!
<span class="icon-attention"></span> 3D Textures are currently only supported on OpenGL and Vulkan adapters. To check if your device supports 3D textures, use:
```lua
if graphics.TEXTURE_TYPE_3D ~= nil then
    -- Device and graphics adapter support 3D textures
end

**Examples**

How to set all pixels of an atlas
```
function init(self)
  self.height = 128
  self.width = 128
  self.buffer = buffer.create(self.width * self.height, { {name=hash("rgb"), type=buffer.VALUE_TYPE_UINT8, count=3} } )
  self.stream = buffer.get_stream(self.buffer, hash("rgb"))

  for y=1,self.height do
      for x=1,self.width do
          local index = (y-1) * self.width * 3 + (x-1) * 3 + 1
          self.stream[index + 0] = 0xff
          self.stream[index + 1] = 0x80
          self.stream[index + 2] = 0x10
      end
  end

  local resource_path = go.get("#model", "texture0")
  local args = { width=self.width, height=self.height, type=graphics.TEXTURE_TYPE_2D, format=graphics.TEXTURE_FORMAT_RGB, num_mip_maps=1 }
  resource.set_texture( resource_path, args, self.buffer )
end
```How to update a specific region of an atlas by using the x,y values. Assumes the already set atlas is a 128x128 texture.

```lua
function init(self)
  self.x = 16
  self.y = 16
  self.height = 128 - self.x * 2
  self.width = 128 - self.y * 2
  self.buffer = buffer.create(self.width * self.height, { {name=hash("rgb"), type=buffer.VALUE_TYPE_UINT8, count=3} } )
  self.stream = buffer.get_stream(self.buffer, hash("rgb"))

  for y=1,self.height do
      for x=1,self.width do
          local index = (y-1) * self.width * 3 + (x-1) * 3 + 1
          self.stream[index + 0] = 0xff
          self.stream[index + 1] = 0x80
          self.stream[index + 2] = 0x10
      end
  end

  local resource_path = go.get("#model", "texture0")
  local args = { width=self.width, height=self.height, x=self.x, y=self.y, type=graphics.TEXTURE_TYPE_2D, format=graphics.TEXTURE_FORMAT_RGB, num_mip_maps=1 }
  resource.set_texture(resource_path, args, self.buffer )
end
```Update a texture from a buffer resource
```lua
go.property("my_buffer", resource.buffer("/my_default_buffer.buffer"))

function init(self)
    local resource_path = go.get("#model", "texture0")
    -- the "my_buffer" resource is expected to hold 128 * 128 * 3 bytes!
    local args = {
         width  = 128,
         height = 128,
         type   = graphics.TEXTURE_TYPE_2D,
         format = graphics.TEXTURE_FORMAT_RGB
     }
    -- Note that the extra resource.get_buffer call is a requirement here
    -- since the "self.my_buffer" is just pointing to a buffer resource path
    -- and not an actual buffer object or buffer resource.
    resource.set_texture(resource_path, args, resource.get_buffer(self.my_buffer))
end
```Update an existing 3D texture from a lua buffer

```lua

function init(self)
    -- create a buffer that can hold the data of a 8x8x8 texture
    local tbuffer = buffer.create(8 * 8 * 8, { {name=hash("rgba"), type=buffer.VALUE_TYPE_FLOAT32, count=4} } )
    local tstream = buffer.get_stream(tbuffer, hash("rgba"))

    -- populate the buffer with some data
    local index = 1
    for z=1,8 do
        for y=1,8 do
            for x=1,8 do
                tstream[index + 0] = x
                tstream[index + 1] = y
                tstream[index + 2] = z
                tstream[index + 3] = 1.0
                index = index + 4
            end
        end
    end

    local t_args = {
        type   = graphics.TEXTURE_TYPE_IMAGE_3D,
        width  = 8,
        height = 8,
        depth  = 8,
        format = resource.TEXTURE_FORMAT_RGBA32F
    }

    -- This expects that the texture resource "/my_3d_texture.texturec" already exists
    -- and is a 3D texture resource. To create a dynamic 3D texture resource
    -- use the "resource.create_texture" function.
    resource.set_texture("/my_3d_texture.texturec", t_args, tbuffer)
endUpdate texture 2nd array page with loaded texture from png

```lua
    -- new_tex is resource handle of texture which was created via resource.create_resource
    local tex_path = "/bundle_resources/page_02.png"
    local data = sys.load_resource(tex_path)
    local buf = image.load_buffer(data)
    resource.set_texture(new_tex, {
        type = graphics.TEXTURE_TYPE_2D_ARRAY,
        width = buf.width,
        height = buf.height,
        page = 1,
        format = graphics.TEXTURE_FORMAT_RGB
    }, buf.buffer)
    go.set("#mesh", "texture0", new_tex)

```

### resource.texture
*Type:* FUNCTION
Constructor-like function with two purposes:

Load the specified resource as part of loading the script
Return a hash to the run-time version of the resource

 This function can only be called within go.property function calls.

**Parameters**

- `path` (string) (optional) - optional resource path string to the resource

**Returns**

- `path` (hash) - a path hash to the binary version of the resource

**Examples**

Load a texture and set it to a model:
```
go.property("my_texture", resource.texture("/texture.png"))
function init(self)
  go.set("#model", "texture0", self.my_texture)
end

```

### resource.tile_source
*Type:* FUNCTION
Constructor-like function with two purposes:

Load the specified resource as part of loading the script
Return a hash to the run-time version of the resource

 This function can only be called within go.property function calls.

**Parameters**

- `path` (string) (optional) - optional resource path string to the resource

**Returns**

- `path` (hash) - a path hash to the binary version of the resource

**Examples**

Load tile source and set it to a tile map:
```
go.property("my_tile_source", resource.tile_source("/tilesource.tilesource"))
function init(self)
  go.set("#tilemap", "tile_source", self.my_tile_source)
end

```

<!-- socket-lua -->

# LuaSocket {#apis:socket-lua}

**Namespace:** `socket`
**Language:** Lua
**Type:** Defold Lua
**File:** `luasocket.doc_h`
**Source:** `engine/script/src/luasocket/luasocket.doc_h`

[LuaSocket](https://github.com/diegonehab/luasocket) is a Lua extension library that provides
support for the TCP and UDP transport layers. Defold provides the "socket" namespace in
runtime, which contain the core C functionality. Additional LuaSocket support modules for
SMTP, HTTP, FTP etc are not part of the core included, but can be easily added to a project
and used.

Note the included helper module "socket.lua" in "builtins/scripts/socket.lua". Require this
module to add some additional functions and shortcuts to the namespace:

```lua
require "builtins.scripts.socket"
```

LuaSocket is Copyright  2004-2007 Diego Nehab. All rights reserved.
LuaSocket is free software, released under the MIT license (same license as the Lua core).

## API

### client
*Type:* TYPEDEF
TCP client object

**Parameters**

- `value` (userdata)

### client:close
*Type:* FUNCTION
Closes the TCP object. The internal socket used by the object is closed and the local address to which the object was bound is made available to other applications. No further operations (except for further calls to the close method) are allowed on a closed socket.
 It is important to close all used sockets once they are not needed, since, in many systems, each socket uses a file descriptor, which are limited system resources. Garbage-collected objects are automatically closed before destruction, though.

### client:dirty
*Type:* FUNCTION
Check the read buffer status.
 This is an internal method, any use is unlikely to be portable.

**Returns**

- `status` (boolean) - <code>true</code> if there is any data in the read buffer, <code>false</code> otherwise.

### client:getfd
*Type:* FUNCTION
Returns the underlying socket descriptor or handle associated to the object.
 This is an internal method, any use is unlikely to be portable.

**Returns**

- `handle` (number) - the descriptor or handle. In case the object has been closed, the return will be -1.

### client:getoption
*Type:* FUNCTION
Gets options for the TCP object. See client:setoption for description of the option names and values.

**Parameters**

- `option` (string) - the name of the option to get:
<ul>
<li><code>"keepalive"</code></li>
<li><code>"linger"</code></li>
<li><code>"reuseaddr"</code></li>
<li><code>"tcp-nodelay"</code></li>
</ul>

**Returns**

- `value` (any | nil) - the option value, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### client:getpeername
*Type:* FUNCTION
Returns information about the remote side of a connected client object.
 It makes no sense to call this method on server objects.

**Returns**

- `info` (string) - a string with the IP address of the peer, the port number that peer is using for the connection, and the family ("inet" or "inet6"). In case of error, the method returns <code>nil</code>.

### client:getsockname
*Type:* FUNCTION
Returns the local address information associated to the object.

**Returns**

- `info` (string) - a string with local IP address, the local port number, and the family ("inet" or "inet6"). In case of error, the method returns <code>nil</code>.

### client:getstats
*Type:* FUNCTION
Returns accounting information on the socket, useful for throttling of bandwidth.

**Returns**

- `stats` (string) - a string with the number of bytes received, the number of bytes sent, and the age of the socket object in seconds.

### client:receive
*Type:* FUNCTION
Reads data from a client object, according to the specified read pattern. Patterns follow the Lua file I/O format, and the difference in performance between patterns is negligible.

**Parameters**

- `pattern` (string | number) (optional) - the read pattern that can be any of the following:
<dl>
<dt><code>"*a"</code></dt>
<dd>reads from the socket until the connection is closed. No end-of-line translation is performed;</dd>
<dt><code>"*l"</code></dt>
<dd>reads a line of text from the socket. The line is terminated by a LF character (ASCII 10), optionally preceded by a CR character (ASCII 13). The CR and LF characters are not included in the returned line. In fact, all CR characters are ignored by the pattern. This is the default pattern;</dd>
<dt><code>number</code></dt>
<dd>causes the method to read a specified number of bytes from the socket.</dd>
</dl>
- `prefix` (string) (optional) - an optional string to be concatenated to the beginning of any received data before return.

**Returns**

- `data` (string | nil) - the received pattern, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred. The error message can be the string <code>"closed"</code> in case the connection was closed before the transmission was completed or the string <code>"timeout"</code> in case there was a timeout during the operation.
- `partial` (string | nil) - a (possibly empty) string containing the partial that was received, or <code>nil</code> if no error occurred.

### client:send
*Type:* FUNCTION
Sends data through client object.
The optional arguments i and j work exactly like the standard string.sub Lua function to allow the selection of a substring to be sent.
 Output is not buffered. For small strings, it is always better to concatenate them in Lua (with the .. operator) and send the result in one call instead of calling the method several times.

**Parameters**

- `data` (string) - the string to be sent.
- `i` (number) (optional) - optional starting index of the string.
- `j` (number) (optional) - optional end index of string.

**Returns**

- `index` (number | nil) - the index of the last byte within [i, j] that has been sent, or <code>nil</code> in case of error. Notice that, if <code>i</code> is 1 or absent, this is effectively the total number of bytes sent.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred. The error message can be <code>"closed"</code> in case the connection was closed before the transmission was completed or the string <code>"timeout"</code> in case there was a timeout during the operation.
- `lastindex` (number | nil) - in case of error, the index of the last byte within [i, j] that has been sent. You might want to try again from the byte following that. <code>nil</code> if no error occurred.

### client:setfd
*Type:* FUNCTION
Sets the underling socket descriptor or handle associated to the object. The current one is simply replaced, not closed, and no other change to the object state is made

**Parameters**

- `handle` (number) - the descriptor or handle to set.

### client:setoption
*Type:* FUNCTION
Sets options for the TCP object. Options are only needed by low-level or time-critical applications. You should only modify an option if you are sure you need it.

**Parameters**

- `option` (string) - the name of the option to set. The value is provided in the <code>value</code> parameter:
<dl>
<dt><code>"keepalive"</code></dt>
<dd>Setting this option to <code>true</code> enables the periodic transmission of messages on a connected socket. Should the connected party fail to respond to these messages, the connection is considered broken and processes using the socket are notified;</dd>
<dt><code>"linger"</code></dt>
<dd>Controls the action taken when unsent data are queued on a socket and a close is performed. The value is a table with the following keys:</dd>
</dl>
<ul>
<li><span class="type">boolean</span> <code>on</code></li>
<li><span class="type">number</span> <code>timeout</code> (seconds)</li>
</ul>
If the 'on' field is set to true, the system will block the process on the close attempt until it is able to transmit the data or until <code>timeout</code> has passed. If 'on' is false and a close is issued, the system will process the close in a manner that allows the process to continue as quickly as possible. It is not advised to set this to anything other than zero;
<dl>
<dt><code>"reuseaddr"</code></dt>
<dd>Setting this option indicates that the rules used in validating addresses supplied in a call to <code>bind</code> should allow reuse of local addresses;</dd>
<dt><code>"tcp-nodelay"</code></dt>
<dd>Setting this option to <code>true</code> disables the Nagle's algorithm for the connection;</dd>
<dt><code>"ipv6-v6only"</code></dt>
<dd>Setting this option to <code>true</code> restricts an inet6 socket to sending and receiving only IPv6 packets.</dd>
</dl>
- `value` (any) (optional) - the value to set for the specified option.

**Returns**

- `status` (number | nil) - the value <code>1</code>, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### client:setstats
*Type:* FUNCTION
Resets accounting information on the socket, useful for throttling of bandwidth.

**Parameters**

- `received` (number) - the new number of bytes received.
- `sent` (number) - the new number of bytes sent.
- `age` (number) - the new age in seconds.

**Returns**

- `success` (number | nil) - the value <code>1</code> in case of success, or <code>nil</code> in case of error.

### client:settimeout
*Type:* FUNCTION
Changes the timeout values for the object. By default, all I/O operations are blocking. That is, any call to the methods send, receive, and accept will block indefinitely, until the operation completes. The settimeout method defines a limit on the amount of time the I/O methods can block. When a timeout is set and the specified amount of time has elapsed, the affected methods give up and fail with an error code.
There are two timeout modes and both can be used together for fine tuning.
 Although timeout values have millisecond precision in LuaSocket, large blocks can cause I/O functions not to respect timeout values due to the time the library takes to transfer blocks to and from the OS and to and from the Lua interpreter. Also, function that accept host names and perform automatic name resolution might be blocked by the resolver for longer than the specified timeout value.

**Parameters**

- `value` (number) - the amount of time to wait, in seconds. The <code>nil</code> timeout value allows operations to block indefinitely. Negative timeout values have the same effect.
- `mode` (string) (optional) - optional timeout mode to set:
<dl>
<dt><code>"b"</code></dt>
<dd>block timeout. Specifies the upper limit on the amount of time LuaSocket can be blocked by the operating system while waiting for completion of any single I/O operation. This is the default mode;</dd>
<dt><code>"t"</code></dt>
<dd>total timeout. Specifies the upper limit on the amount of time LuaSocket can block a Lua script before returning from a call.</dd>
</dl>

### client:shutdown
*Type:* FUNCTION
Shuts down part of a full-duplex connection.

**Parameters**

- `mode` (string) - which way of the connection should be shut down:
<dl>
<dt><code>"both"</code></dt>
<dd>disallow further sends and receives on the object. This is the default mode;</dd>
<dt><code>"send"</code></dt>
<dd>disallow further sends on the object;</dd>
<dt><code>"receive"</code></dt>
<dd>disallow further receives on the object.</dd>
</dl>

**Returns**

- `status` (number) - the value <code>1</code>.

### connected:close
*Type:* FUNCTION
Closes a UDP object. The internal socket used by the object is closed and the local address to which the object was bound is made available to other applications. No further operations (except for further calls to the close method) are allowed on a closed socket.
 It is important to close all used sockets once they are not needed, since, in many systems, each socket uses a file descriptor, which are limited system resources. Garbage-collected objects are automatically closed before destruction, though.

### connected:getoption
*Type:* FUNCTION
Gets an option value from the UDP object. See connected:setoption for description of the option names and values.

**Parameters**

- `option` (string) - the name of the option to get:
<ul>
<li><code>"dontroute"</code></li>
<li><code>"broadcast"</code></li>
<li><code>"reuseaddr"</code></li>
<li><code>"reuseport"</code></li>
<li><code>"ip-multicast-loop"</code></li>
<li><code>"ipv6-v6only"</code></li>
<li><code>"ip-multicast-if"</code></li>
<li><code>"ip-multicast-ttl"</code></li>
<li><code>"ip-add-membership"</code></li>
<li><code>"ip-drop-membership"</code></li>
</ul>

**Returns**

- `value` (any | nil) - the option value, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### connected:getpeername
*Type:* FUNCTION
Retrieves information about the peer associated with a connected UDP object.
 It makes no sense to call this method on unconnected objects.

**Returns**

- `info` (string) - a string with the IP address of the peer, the port number that peer is using for the connection, and the family ("inet" or "inet6"). In case of error, the method returns <code>nil</code>.

### connected:getsockname
*Type:* FUNCTION
Returns the local address information associated to the object.
 UDP sockets are not bound to any address until the setsockname or the sendto method is called for the first time (in which case it is bound to an ephemeral port and the wild-card address).

**Returns**

- `info` (string) - a string with local IP address, a number with the local port, and the family ("inet" or "inet6"). In case of error, the method returns <code>nil</code>.

### connected:receive
*Type:* FUNCTION
Receives a datagram from the UDP object. If the UDP object is connected, only datagrams coming from the peer are accepted. Otherwise, the returned datagram can come from any host.

**Parameters**

- `size` (number) (optional) - optional maximum size of the datagram to be retrieved. If there are more than size bytes available in the datagram, the excess bytes are discarded. If there are less then size bytes available in the current datagram, the available bytes are returned. If size is omitted, the maximum datagram size is used (which is currently limited by the implementation to 8192 bytes).

**Returns**

- `datagram` (string | nil) - the received datagram, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### connected:send
*Type:* FUNCTION
Sends a datagram to the UDP peer of a connected object.
 In UDP, the send method never blocks and the only way it can fail is if the underlying transport layer refuses to send a message to the specified address (i.e. no interface accepts the address).

**Parameters**

- `datagram` (string) - a string with the datagram contents. The maximum datagram size for UDP is 64K minus IP layer overhead. However datagrams larger than the link layer packet size will be fragmented, which may deteriorate performance and/or reliability.

**Returns**

- `success` (number | nil) - the value <code>1</code> on success, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### connected:setoption
*Type:* FUNCTION
Sets options for the UDP object. Options are only needed by low-level or time-critical applications. You should only modify an option if you are sure you need it.

**Parameters**

- `option` (string) - the name of the option to set. The value is provided in the <code>value</code> parameter:
<dl>
<dt><code>"dontroute"</code></dt>
<dd>Indicates that outgoing messages should bypass the standard routing facilities. Receives a boolean value;</dd>
<dt><code>"broadcast"</code></dt>
<dd>Requests permission to send broadcast datagrams on the socket. Receives a boolean value;</dd>
<dt><code>"reuseaddr"</code></dt>
<dd>Indicates that the rules used in validating addresses supplied in a <code>bind</code> call should allow reuse of local addresses. Receives a boolean value;</dd>
<dt><code>"reuseport"</code></dt>
<dd>Allows completely duplicate bindings by multiple processes if they all set <code>"reuseport"</code> before binding the port. Receives a boolean value;</dd>
<dt><code>"ip-multicast-loop"</code></dt>
<dd>Specifies whether or not a copy of an outgoing multicast datagram is delivered to the sending host as long as it is a member of the multicast group. Receives a boolean value;</dd>
<dt><code>"ipv6-v6only"</code></dt>
<dd>Specifies whether to restrict inet6 sockets to sending and receiving only IPv6 packets. Receive a boolean value;</dd>
<dt><code>"ip-multicast-if"</code></dt>
<dd>Sets the interface over which outgoing multicast datagrams are sent. Receives an IP address;</dd>
<dt><code>"ip-multicast-ttl"</code></dt>
<dd>Sets the Time To Live in the IP header for outgoing multicast datagrams. Receives a number;</dd>
</dl>
<code>"ip-add-membership"</code>: Joins the multicast group specified. Receives a table with fields:
<ul>
<li><span class="type">string</span> <code>multiaddr</code> (IP address)</li>
<li><span class="type">string</span> <code>interface</code> (IP address)</li>
</ul>
<dl>
<dt>"'ip-drop-membership"`</dt>
<dd>Leaves the multicast group specified. Receives a table with fields:</dd>
</dl>
<ul>
<li><span class="type">string</span> <code>multiaddr</code> (IP address)</li>
<li><span class="type">string</span> <code>interface</code> (IP address)</li>
</ul>
- `value` (any) (optional) - the value to set for the specified option.

**Returns**

- `status` (number | nil) - the value <code>1</code>, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### connected:setpeername
*Type:* FUNCTION
Changes the peer of a UDP object. This method turns an unconnected UDP object into a connected UDP object or vice versa.
For connected objects, outgoing datagrams will be sent to the specified peer, and datagrams received from other peers will be discarded by the OS. Connected UDP objects must use the send and receive methods instead of sendto and receivefrom.
 Since the address of the peer does not have to be passed to and from the OS, the use of connected UDP objects is recommended when the same peer is used for several transmissions and can result in up to 30% performance gains.

**Parameters**

- `"*"` (string) - if address is "*" and the object is connected, the peer association is removed and the object becomes an unconnected object again.

**Returns**

- `success` (number | nil) - the value <code>1</code> on success, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### connected:settimeout
*Type:* FUNCTION
Changes the timeout values for the object. By default, the receive and receivefrom  operations are blocking. That is, any call to the methods will block indefinitely, until data arrives. The settimeout function defines a limit on the amount of time the functions can block. When a timeout is set and the specified amount of time has elapsed, the affected methods give up and fail with an error code.
 In UDP, the send and sendto methods never block (the datagram is just passed to the OS and the call returns immediately). Therefore, the settimeout method has no effect on them.

**Parameters**

- `value` (number) - the amount of time to wait, in seconds. The <code>nil</code> timeout value allows operations to block indefinitely. Negative timeout values have the same effect.

### master
*Type:* TYPEDEF
TCP master object

**Parameters**

- `value` (userdata)

### master:bind
*Type:* FUNCTION
Binds a master object to address and port on the local host.

**Parameters**

- `address` (string) - an IP address or a host name. If address is <code>"*"</code>, the system binds to all local interfaces using the <code>INADDR_ANY</code> constant.
- `port` (number) - the port to commect to, in the range [0..64K). If port is 0, the system automatically chooses an ephemeral port.

**Returns**

- `status` (number | nil) - the value <code>1</code>, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### master:close
*Type:* FUNCTION
Closes the TCP object. The internal socket used by the object is closed and the local address to which the object was bound is made available to other applications. No further operations (except for further calls to the close method) are allowed on a closed socket.
 It is important to close all used sockets once they are not needed, since, in many systems, each socket uses a file descriptor, which are limited system resources. Garbage-collected objects are automatically closed before destruction, though.

### master:connect
*Type:* FUNCTION
Attempts to connect a master object to a remote host, transforming it into a client object. Client objects support methods send, receive, getsockname, getpeername, settimeout, and close.
Note that the function socket.connect is available and is a shortcut for the creation of client sockets.

**Parameters**

- `address` (string) - an IP address or a host name. If address is <code>"*"</code>, the system binds to all local interfaces using the <code>INADDR_ANY</code> constant.
- `port` (number) - the port to commect to, in the range [0..64K). If port is 0, the system automatically chooses an ephemeral port.

**Returns**

- `status` (number | nil) - the value <code>1</code>, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### master:dirty
*Type:* FUNCTION
Check the read buffer status.
 This is an internal method, any use is unlikely to be portable.

**Returns**

- `status` (boolean) - <code>true</code> if there is any data in the read buffer, <code>false</code> otherwise.

### master:getfd
*Type:* FUNCTION
Returns the underlying socket descriptor or handle associated to the object.
 This is an internal method, any use is unlikely to be portable.

**Returns**

- `handle` (number) - the descriptor or handle. In case the object has been closed, the return will be -1.

### master:getsockname
*Type:* FUNCTION
Returns the local address information associated to the object.

**Returns**

- `info` (string) - a string with local IP address, the local port number, and the family ("inet" or "inet6"). In case of error, the method returns <code>nil</code>.

### master:getstats
*Type:* FUNCTION
Returns accounting information on the socket, useful for throttling of bandwidth.

**Returns**

- `stats` (string) - a string with the number of bytes received, the number of bytes sent, and the age of the socket object in seconds.

### master:listen
*Type:* FUNCTION
Specifies the socket is willing to receive connections, transforming the object into a server object. Server objects support the accept, getsockname, setoption, settimeout, and close methods.

**Parameters**

- `backlog` (number) - the number of client connections that can be queued waiting for service. If the queue is full and another client attempts connection, the connection is refused.

**Returns**

- `status` (number | nil) - the value <code>1</code>, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### master:setfd
*Type:* FUNCTION
Sets the underling socket descriptor or handle associated to the object. The current one is simply replaced, not closed, and no other change to the object state is made

**Parameters**

- `handle` (number) - the descriptor or handle to set.

### master:setstats
*Type:* FUNCTION
Resets accounting information on the socket, useful for throttling of bandwidth.

**Parameters**

- `received` (number) - the new number of bytes received.
- `sent` (number) - the new number of bytes sent.
- `age` (number) - the new age in seconds.

**Returns**

- `success` (number | nil) - the value <code>1</code> in case of success, or <code>nil</code> in case of error.

### master:settimeout
*Type:* FUNCTION
Changes the timeout values for the object. By default, all I/O operations are blocking. That is, any call to the methods send, receive, and accept will block indefinitely, until the operation completes. The settimeout method defines a limit on the amount of time the I/O methods can block. When a timeout is set and the specified amount of time has elapsed, the affected methods give up and fail with an error code.
There are two timeout modes and both can be used together for fine tuning.
 Although timeout values have millisecond precision in LuaSocket, large blocks can cause I/O functions not to respect timeout values due to the time the library takes to transfer blocks to and from the OS and to and from the Lua interpreter. Also, function that accept host names and perform automatic name resolution might be blocked by the resolver for longer than the specified timeout value.

**Parameters**

- `value` (number) - the amount of time to wait, in seconds. The <code>nil</code> timeout value allows operations to block indefinitely. Negative timeout values have the same effect.
- `mode` (string) (optional) - optional timeout mode to set:
<dl>
<dt><code>"b"</code></dt>
<dd>block timeout. Specifies the upper limit on the amount of time LuaSocket can be blocked by the operating system while waiting for completion of any single I/O operation. This is the default mode;</dd>
<dt><code>"t"</code></dt>
<dd>total timeout. Specifies the upper limit on the amount of time LuaSocket can block a Lua script before returning from a call.</dd>
</dl>

### server:accept
*Type:* FUNCTION
Waits for a remote connection on the server object and returns a client object representing that connection.
 Calling socket.select with a server object in the recvt parameter before a call to accept does not guarantee accept will return immediately. Use the settimeout method or accept might block until another client shows up.

**Returns**

- `tcp_client` (client | nil) - if a connection is successfully initiated, a client object is returned, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred. The error is <code>"timeout"</code> if a timeout condition is met.

### server:close
*Type:* FUNCTION
Closes the TCP object. The internal socket used by the object is closed and the local address to which the object was bound is made available to other applications. No further operations (except for further calls to the close method) are allowed on a closed socket.
 It is important to close all used sockets once they are not needed, since, in many systems, each socket uses a file descriptor, which are limited system resources. Garbage-collected objects are automatically closed before destruction, though.

### server:dirty
*Type:* FUNCTION
Check the read buffer status.
 This is an internal method, any use is unlikely to be portable.

**Returns**

- `status` (boolean) - <code>true</code> if there is any data in the read buffer, <code>false</code> otherwise.

### server:getfd
*Type:* FUNCTION
Returns the underlying socket descriptor or handle associated to the object.
 This is an internal method, any use is unlikely to be portable.

**Returns**

- `handle` (number) - the descriptor or handle. In case the object has been closed, the return will be -1.

### server:getoption
*Type:* FUNCTION
Gets options for the TCP object. See server:setoption for description of the option names and values.

**Parameters**

- `option` (string) - the name of the option to get:
<ul>
<li><code>"keepalive"</code></li>
<li><code>"linger"</code></li>
<li><code>"reuseaddr"</code></li>
<li><code>"tcp-nodelay"</code></li>
</ul>

**Returns**

- `value` (any | nil) - the option value, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### server:getsockname
*Type:* FUNCTION
Returns the local address information associated to the object.

**Returns**

- `info` (string) - a string with local IP address, the local port number, and the family ("inet" or "inet6"). In case of error, the method returns <code>nil</code>.

### server:getstats
*Type:* FUNCTION
Returns accounting information on the socket, useful for throttling of bandwidth.

**Returns**

- `stats` (string) - a string with the number of bytes received, the number of bytes sent, and the age of the socket object in seconds.

### server:setfd
*Type:* FUNCTION
Sets the underling socket descriptor or handle associated to the object. The current one is simply replaced, not closed, and no other change to the object state is made

**Parameters**

- `handle` (number) - the descriptor or handle to set.

### server:setoption
*Type:* FUNCTION
Sets options for the TCP object. Options are only needed by low-level or time-critical applications. You should only modify an option if you are sure you need it.

**Parameters**

- `option` (string) - the name of the option to set. The value is provided in the <code>value</code> parameter:
<dl>
<dt><code>"keepalive"</code></dt>
<dd>Setting this option to <code>true</code> enables the periodic transmission of messages on a connected socket. Should the connected party fail to respond to these messages, the connection is considered broken and processes using the socket are notified;</dd>
<dt><code>"linger"</code></dt>
<dd>Controls the action taken when unsent data are queued on a socket and a close is performed. The value is a table with the following keys:</dd>
</dl>
<ul>
<li><span class="type">boolean</span> <code>on</code></li>
<li><span class="type">number</span> <code>timeout</code> (seconds)</li>
</ul>
If the 'on' field is set to true, the system will block the process on the close attempt until it is able to transmit the data or until <code>timeout</code> has passed. If 'on' is false and a close is issued, the system will process the close in a manner that allows the process to continue as quickly as possible. It is not advised to set this to anything other than zero;
<dl>
<dt><code>"reuseaddr"</code></dt>
<dd>Setting this option indicates that the rules used in validating addresses supplied in a call to <code>bind</code> should allow reuse of local addresses;</dd>
<dt><code>"tcp-nodelay"</code></dt>
<dd>Setting this option to <code>true</code> disables the Nagle's algorithm for the connection;</dd>
<dt><code>"ipv6-v6only"</code></dt>
<dd>Setting this option to <code>true</code> restricts an inet6 socket to sending and receiving only IPv6 packets.</dd>
</dl>
- `value` (any) (optional) - the value to set for the specified option.

**Returns**

- `status` (number | nil) - the value <code>1</code>, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### server:setstats
*Type:* FUNCTION
Resets accounting information on the socket, useful for throttling of bandwidth.

**Parameters**

- `received` (number) - the new number of bytes received.
- `sent` (number) - the new number of bytes sent.
- `age` (number) - the new age in seconds.

**Returns**

- `success` (number | nil) - the value <code>1</code> in case of success, or <code>nil</code> in case of error.

### server:settimeout
*Type:* FUNCTION
Changes the timeout values for the object. By default, all I/O operations are blocking. That is, any call to the methods send, receive, and accept will block indefinitely, until the operation completes. The settimeout method defines a limit on the amount of time the I/O methods can block. When a timeout is set and the specified amount of time has elapsed, the affected methods give up and fail with an error code.
There are two timeout modes and both can be used together for fine tuning.
 Although timeout values have millisecond precision in LuaSocket, large blocks can cause I/O functions not to respect timeout values due to the time the library takes to transfer blocks to and from the OS and to and from the Lua interpreter. Also, function that accept host names and perform automatic name resolution might be blocked by the resolver for longer than the specified timeout value.

**Parameters**

- `value` (number) - the amount of time to wait, in seconds. The <code>nil</code> timeout value allows operations to block indefinitely. Negative timeout values have the same effect.
- `mode` (string) (optional) - optional timeout mode to set:
<dl>
<dt><code>"b"</code></dt>
<dd>block timeout. Specifies the upper limit on the amount of time LuaSocket can be blocked by the operating system while waiting for completion of any single I/O operation. This is the default mode;</dd>
<dt><code>"t"</code></dt>
<dd>total timeout. Specifies the upper limit on the amount of time LuaSocket can block a Lua script before returning from a call.</dd>
</dl>

### socket._SETSIZE
*Type:* CONSTANT
This constant contains the maximum number of sockets that the select function can handle.

### socket._VERSION
*Type:* CONSTANT
This constant has a string describing the current LuaSocket version.

### socket.connect
*Type:* FUNCTION
This function is a shortcut that creates and returns a TCP client object connected to a remote
address at a given port. Optionally, the user can also specify the local address and port to
bind (locaddr and locport), or restrict the socket family to "inet" or "inet6".
Without specifying family to connect, whether a tcp or tcp6 connection is created depends on
your system configuration.

**Parameters**

- `address` (string) - the address to connect to.
- `port` (number) - the port to connect to.
- `locaddr` (string) (optional) - optional local address to bind to.
- `locport` (number) (optional) - optional local port to bind to.
- `family` (string) (optional) - optional socket family to use, <code>"inet"</code> or <code>"inet6"</code>.

**Returns**

- `tcp_client` (client | nil) - a new IPv6 TCP client object, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### socket.dns.getaddrinfo
*Type:* FUNCTION
This function converts a host name to IPv4 or IPv6 address.
The supplied address can be an IPv4 or IPv6 address or host name.
The function returns a table with all information returned by the resolver:
```
{
 [1] = {
    family = family-name-1,
    addr = address-1
  },
  ...
  [n] = {
    family = family-name-n,
    addr = address-n
  }
}

```

Here, family contains the string "inet" for IPv4 addresses, and "inet6" for IPv6 addresses.
In case of error, the function returns nil followed by an error message.

**Parameters**

- `address` (string) - a hostname or an IPv4 or IPv6 address.

**Returns**

- `resolved` (table | nil) - a table with all information returned by the resolver, or if an error occurs, <code>nil</code>.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### socket.dns.gethostname
*Type:* FUNCTION
Returns the standard host name for the machine as a string.

**Returns**

- `hostname` (string) - the host name for the machine.

### socket.dns.getnameinfo
*Type:* FUNCTION
This function converts an address to host name.
The supplied address can be an IPv4 or IPv6 address or host name.
The function returns a table with all information returned by the resolver:
```
{
  [1] = host-name-1,
  ...
  [n] = host-name-n,
}

```

**Parameters**

- `address` (string) - a hostname or an IPv4 or IPv6 address.

**Returns**

- `resolved` (table | nil) - a table with all information returned by the resolver, or if an error occurs, <code>nil</code>.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### socket.dns.tohostname
*Type:* FUNCTION
This function converts from an IPv4 address to host name.
The address can be an IPv4 address or a host name.

**Parameters**

- `address` (string) - an IPv4 address or host name.

**Returns**

- `hostname` (string | nil) - the canonic host name of the given address, or <code>nil</code> in case of an error.
- `resolved` (table | string) - a table with all information returned by the resolver, or if an error occurs, the error message string.

### socket.dns.toip
*Type:* FUNCTION
This function converts a host name to IPv4 address.
The address can be an IP address or a host name.

**Parameters**

- `address` (string) - a hostname or an IP address.

**Returns**

- `ip_address` (string | nil) - the first IP address found for the hostname, or <code>nil</code> in case of an error.
- `resolved` (table | string) - a table with all information returned by the resolver, or if an error occurs, the error message string.

### socket.gettime
*Type:* FUNCTION
Returns the time in seconds, relative to the system epoch (Unix epoch time since January 1, 1970 (UTC) or Windows file time since January 1, 1601 (UTC)).
You should use the values returned by this function for relative measurements only.

**Returns**

- `seconds` (number) - the number of seconds elapsed.

**Examples**

How to use the gettime() function to measure running time:
```
t = socket.gettime()
-- do stuff
print(socket.gettime() - t .. " seconds elapsed")

```

### socket.newtry
*Type:* FUNCTION
This function creates and returns a clean try function that allows for cleanup before the exception is raised.
The finalizer function will be called in protected mode (see protect).

**Parameters**

- `finalizer` (function()) - a function that will be called before the try throws the exception.

**Returns**

- `try` (function) - the customized try function.

**Examples**

Perform operations on an open socket c:
```
-- create a try function that closes 'c' on error
local try = socket.newtry(function() c:close() end)
-- do everything reassured c will be closed
try(c:send("hello there?\r\n"))
local answer = try(c:receive())
...
try(c:send("good bye\r\n"))
c:close()

```

### socket.protect
*Type:* FUNCTION
Converts a function that throws exceptions into a safe function. This function only catches exceptions thrown by try functions. It does not catch normal Lua errors.
 Beware that if your function performs some illegal operation that raises an error, the protected function will catch the error and return it as a string. This is because try functions uses errors as the mechanism to throw exceptions.

**Parameters**

- `func` (function) - a function that calls a try function (or assert, or error) to throw exceptions.

**Returns**

- `safe_func` (function(function())) - an equivalent function that instead of throwing exceptions, returns <code>nil</code> followed by an error message.

**Examples**

```
local dostuff = socket.protect(function()
    local try = socket.newtry()
    local c = try(socket.connect("myserver.com", 80))
    try = socket.newtry(function() c:close() end)
    try(c:send("hello?\r\n"))
    local answer = try(c:receive())
    c:close()
end)

local n, error = dostuff()

```

### socket.select
*Type:* FUNCTION
The function returns a list with the sockets ready for reading, a list with the sockets ready for writing and an error message. The error message is "timeout" if a timeout condition was met and nil otherwise. The returned tables are doubly keyed both by integers and also by the sockets themselves, to simplify the test if a specific socket has changed status.
Recvt and sendt parameters can be empty tables or nil. Non-socket values (or values with non-numeric indices) in these arrays will be silently ignored.
The returned tables are doubly keyed both by integers and also by the sockets themselves, to simplify the test if a specific socket has changed status.
 This function can monitor a limited number of sockets, as defined by the constant socket._SETSIZE. This number may be as high as 1024 or as low as 64 by default, depending on the system. It is usually possible to change this at compile time. Invoking select with a larger number of sockets will raise an error.
 A known bug in WinSock causes select to fail on non-blocking TCP sockets. The function may return a socket as writable even though the socket is not ready for sending.
 Calling select with a server socket in the receive parameter before a call to accept does not guarantee accept will return immediately. Use the settimeout method or accept might block forever.
 If you close a socket and pass it to select, it will be ignored.
(Using select with non-socket objects: Any object that implements getfd and dirty can be used with select, allowing objects from other libraries to be used within a socket.select driven loop.)

**Parameters**

- `recvt` (table) - array with the sockets to test for characters available for reading.
- `sendt` (table) - array with sockets that are watched to see if it is OK to immediately write on them.
- `timeout` (number) (optional) - the maximum amount of time (in seconds) to wait for a change in status. Nil, negative or omitted timeout value allows the function to block indefinitely.

**Returns**

- `sockets_r` (table) - a list with the sockets ready for reading.
- `sockets_w` (table) - a list with the sockets ready for writing.
- `error` (string | nil) - an error message. "timeout" if a timeout condition was met, otherwise <code>nil</code>.

### socket.skip
*Type:* FUNCTION
This function drops a number of arguments and returns the remaining.
It is useful to avoid creation of dummy variables:
D is the number of arguments to drop. Ret1 to retN are the arguments.
The function returns retD+1 to retN.

**Parameters**

- `d` (number) - the number of arguments to drop.
- `ret1` (any) (optional) - argument 1.
- `ret2` (any) (optional) - argument 2.
- `retN` (any) (optional) - argument N.

**Returns**

- `retD+1` (any | nil) - argument D+1.
- `retD+2` (any | nil) - argument D+2.
- `retN` (any | nil) - argument N.

**Examples**

Instead of doing the following with dummy variables:
```
-- get the status code and separator from SMTP server reply
local dummy1, dummy2, code, sep = string.find(line, "^(%d%d%d)(.?)")

```

You can skip a number of variables:
```
-- get the status code and separator from SMTP server reply
local code, sep = socket.skip(2, string.find(line, "^(%d%d%d)(.?)"))

```

### socket.sleep
*Type:* FUNCTION
Freezes the program execution during a given amount of time.

**Parameters**

- `time` (number) - the number of seconds to sleep for.

### socket.tcp
*Type:* FUNCTION
Creates and returns an IPv4 TCP master object. A master object can be transformed into a server object with the method listen (after a call to bind) or into a client object with the method connect. The only other method supported by a master object is the close method.

**Returns**

- `tcp_master` (master | nil) - a new IPv4 TCP master object, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### socket.tcp6
*Type:* FUNCTION
Creates and returns an IPv6 TCP master object. A master object can be transformed into a server object with the method listen (after a call to bind) or into a client object with the method connect. The only other method supported by a master object is the close method.
Note: The TCP object returned will have the option "ipv6-v6only" set to true.

**Returns**

- `tcp_master` (master | nil) - a new IPv6 TCP master object, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### socket.udp
*Type:* FUNCTION
Creates and returns an unconnected IPv4 UDP object. Unconnected objects support the sendto, receive, receivefrom, getoption, getsockname, setoption, settimeout, setpeername, setsockname, and close methods. The setpeername method is used to connect the object.

**Returns**

- `udp_unconnected` (unconnected | nil) - a new unconnected IPv4 UDP object, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### socket.udp6
*Type:* FUNCTION
Creates and returns an unconnected IPv6 UDP object. Unconnected objects support the sendto, receive, receivefrom, getoption, getsockname, setoption, settimeout, setpeername, setsockname, and close methods. The setpeername method is used to connect the object.
Note: The UDP object returned will have the option "ipv6-v6only" set to true.

**Returns**

- `udp_unconnected` (unconnected | nil) - a new unconnected IPv6 UDP object, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### unconnected
*Type:* TYPEDEF
unconnected UDP object

**Parameters**

- `value` (userdata)

### unconnected:close
*Type:* FUNCTION
Closes a UDP object. The internal socket used by the object is closed and the local address to which the object was bound is made available to other applications. No further operations (except for further calls to the close method) are allowed on a closed socket.
 It is important to close all used sockets once they are not needed, since, in many systems, each socket uses a file descriptor, which are limited system resources. Garbage-collected objects are automatically closed before destruction, though.

### unconnected:getoption
*Type:* FUNCTION
Gets an option value from the UDP object. See unconnected:setoption for description of the option names and values.

**Parameters**

- `option` (string) - the name of the option to get:
<ul>
<li><code>"dontroute"</code></li>
<li><code>"broadcast"</code></li>
<li><code>"reuseaddr"</code></li>
<li><code>"reuseport"</code></li>
<li><code>"ip-multicast-loop"</code></li>
<li><code>"ipv6-v6only"</code></li>
<li><code>"ip-multicast-if"</code></li>
<li><code>"ip-multicast-ttl"</code></li>
<li><code>"ip-add-membership"</code></li>
<li><code>"ip-drop-membership"</code></li>
</ul>

**Returns**

- `value` (any | nil) - the option value, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### unconnected:getsockname
*Type:* FUNCTION
Returns the local address information associated to the object.
 UDP sockets are not bound to any address until the setsockname or the sendto method is called for the first time (in which case it is bound to an ephemeral port and the wild-card address).

**Returns**

- `info` (string) - a string with local IP address, a number with the local port, and the family ("inet" or "inet6"). In case of error, the method returns <code>nil</code>.

### unconnected:receive
*Type:* FUNCTION
Receives a datagram from the UDP object. If the UDP object is connected, only datagrams coming from the peer are accepted. Otherwise, the returned datagram can come from any host.

**Parameters**

- `size` (number) (optional) - optional maximum size of the datagram to be retrieved. If there are more than size bytes available in the datagram, the excess bytes are discarded. If there are less then size bytes available in the current datagram, the available bytes are returned. If size is omitted, the maximum datagram size is used (which is currently limited by the implementation to 8192 bytes).

**Returns**

- `datagram` (string | nil) - the received datagram, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### unconnected:receivefrom
*Type:* FUNCTION
Works exactly as the receive method, except it returns the IP address and port as extra return values (and is therefore slightly less efficient).

**Parameters**

- `size` (number) (optional) - optional maximum size of the datagram to be retrieved.

**Returns**

- `datagram` (string | nil) - the received datagram, or <code>nil</code> in case of error.
- `ip_or_error` (string) - the IP address, or the error message in case of error.
- `port` (number | nil) - the port number, or <code>nil</code> in case of error.

### unconnected:sendto
*Type:* FUNCTION
Sends a datagram to the specified IP address and port number.
 In UDP, the send method never blocks and the only way it can fail is if the underlying transport layer refuses to send a message to the specified address (i.e. no interface accepts the address).

**Parameters**

- `datagram` (string) - a string with the datagram contents. The maximum datagram size for UDP is 64K minus IP layer overhead. However datagrams larger than the link layer packet size will be fragmented, which may deteriorate performance and/or reliability.
- `ip` (string) - the IP address of the recipient. Host names are not allowed for performance reasons.
- `port` (number) - the port number at the recipient.

**Returns**

- `success` (number | nil) - the value <code>1</code> on success, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### unconnected:setoption
*Type:* FUNCTION
Sets options for the UDP object. Options are only needed by low-level or time-critical applications. You should only modify an option if you are sure you need it.

**Parameters**

- `option` (string) - the name of the option to set. The value is provided in the <code>value</code> parameter:
<dl>
<dt><code>"dontroute"</code></dt>
<dd>Indicates that outgoing messages should bypass the standard routing facilities. Receives a boolean value;</dd>
<dt><code>"broadcast"</code></dt>
<dd>Requests permission to send broadcast datagrams on the socket. Receives a boolean value;</dd>
<dt><code>"reuseaddr"</code></dt>
<dd>Indicates that the rules used in validating addresses supplied in a <code>bind</code> call should allow reuse of local addresses. Receives a boolean value;</dd>
<dt><code>"reuseport"</code></dt>
<dd>Allows completely duplicate bindings by multiple processes if they all set <code>"reuseport"</code> before binding the port. Receives a boolean value;</dd>
<dt><code>"ip-multicast-loop"</code></dt>
<dd>Specifies whether or not a copy of an outgoing multicast datagram is delivered to the sending host as long as it is a member of the multicast group. Receives a boolean value;</dd>
<dt><code>"ipv6-v6only"</code></dt>
<dd>Specifies whether to restrict inet6 sockets to sending and receiving only IPv6 packets. Receive a boolean value;</dd>
<dt><code>"ip-multicast-if"</code></dt>
<dd>Sets the interface over which outgoing multicast datagrams are sent. Receives an IP address;</dd>
<dt><code>"ip-multicast-ttl"</code></dt>
<dd>Sets the Time To Live in the IP header for outgoing multicast datagrams. Receives a number;</dd>
</dl>
<code>"ip-add-membership"</code>: Joins the multicast group specified. Receives a table with fields:
<ul>
<li><span class="type">string</span> <code>multiaddr</code> (IP address)</li>
<li><span class="type">string</span> <code>interface</code> (IP address)</li>
</ul>
<dl>
<dt>"'ip-drop-membership"`</dt>
<dd>Leaves the multicast group specified. Receives a table with fields:</dd>
</dl>
<ul>
<li><span class="type">string</span> <code>multiaddr</code> (IP address)</li>
<li><span class="type">string</span> <code>interface</code> (IP address)</li>
</ul>
- `value` (any) (optional) - the value to set for the specified option.

**Returns**

- `status` (number | nil) - the value <code>1</code>, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### unconnected:setpeername
*Type:* FUNCTION
Changes the peer of a UDP object. This method turns an unconnected UDP object into a connected UDP object or vice versa.
For connected objects, outgoing datagrams will be sent to the specified peer, and datagrams received from other peers will be discarded by the OS. Connected UDP objects must use the send and receive methods instead of sendto and receivefrom.
 Since the address of the peer does not have to be passed to and from the OS, the use of connected UDP objects is recommended when the same peer is used for several transmissions and can result in up to 30% performance gains.

**Parameters**

- `address` (string) - an IP address or a host name.
- `port` (number) - the port number.

**Returns**

- `success` (number | nil) - the value <code>1</code> on success, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### unconnected:setsockname
*Type:* FUNCTION
Binds the UDP object to a local address.
 This method can only be called before any datagram is sent through the UDP object, and only once. Otherwise, the system automatically binds the object to all local interfaces and chooses an ephemeral port as soon as the first datagram is sent. After the local address is set, either automatically by the system or explicitly by setsockname, it cannot be changed.

**Parameters**

- `address` (string) - an IP address or a host name. If address is "*" the system binds to all local interfaces using the constant <code>INADDR_ANY</code>.
- `port` (number) - the port number. If port is 0, the system chooses an ephemeral port.

**Returns**

- `success` (number | nil) - the value <code>1</code> on success, or <code>nil</code> in case of error.
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred.

### unconnected:settimeout
*Type:* FUNCTION
Changes the timeout values for the object. By default, the receive and receivefrom  operations are blocking. That is, any call to the methods will block indefinitely, until data arrives. The settimeout function defines a limit on the amount of time the functions can block. When a timeout is set and the specified amount of time has elapsed, the affected methods give up and fail with an error code.
 In UDP, the send and sendto methods never block (the datagram is just passed to the OS and the call returns immediately). Therefore, the settimeout method has no effect on them.

**Parameters**

- `value` (number) - the amount of time to wait, in seconds. The <code>nil</code> timeout value allows operations to block indefinitely. Negative timeout values have the same effect.

<!-- sound-lua -->

# Sound {#apis:sound-lua}

**Namespace:** `sound`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_sound.cpp`
**Source:** `engine/gamesys/src/gamesys/scripts/script_sound.cpp`

Functions and messages for controlling sound components and
mixer groups.

## API

### gain
*Type:* PROPERTY
The gain on the sound-component. Note that gain is in linear scale,
between 0 and 1.

**Examples**

```
function init(self)
  local gain = go.get("#sound", "gain")
  go.set("#sound", "gain", gain * 1.5)
end

```

### pan
*Type:* PROPERTY
The pan on the sound-component. The valid range is from -1.0 to 1.0,
representing -45 degrees left, to +45 degrees right.

**Examples**

```
function init(self)
  local pan = go.get("#sound", "pan")
  go.set("#sound", "pan", pan * -1)
end

```

### play_sound
*Type:* MESSAGE
Post this message to a sound-component to make it play its sound. Multiple voices is supported. The limit is set to 32 voices per sound component.
 Note that gain is in linear scale, between 0 and 1.
To get the dB value from the gain, use the formula 20 * log(gain).
Inversely, to find the linear value from a dB value, use the formula
10db/20.
 A sound will continue to play even if the game object the sound component belonged to is deleted. You can send a stop_sound to stop the sound.
 play_id should be specified in case you want to receive sound_done or sound_stopped in on_message().

**Parameters**

- `delay` (number) (optional) - delay in seconds before the sound starts playing, default is 0.
- `gain` (number) (optional) - sound gain between 0 and 1, default is 1.
- `play_id` (number) (optional) - the identifier of the sound, can be used to distinguish between consecutive plays from the same component.
- `start_time` (number) (optional) - optional start offset (seconds). Mutually exclusive with <code>start_frame</code>.
- `start_frame` (number) (optional) - optional start offset (frames). If both are provided, <code>start_frame</code> is used.

**Examples**

Assuming the script belongs to an instance with a sound-component with id "sound", this will make the component play its sound after 1 second:
```
msg.post("#sound", "play_sound", {delay = 1, gain = 0.5})

```

```
-- use `play_id` and `msg.post()` if you want to recieve `sound_done` or `sound_stopped` in on_message()
function init()
 msg.post("#sound", "play_sound", {play_id = 1, delay = 1, gain = 0.5})
end

function on_message(self, message_id, message)
 if message_id == hash("sound_done") then
     print("Sound play id: "..message.play_id)
 end
end

```

### set_gain
*Type:* MESSAGE
Post this message to a sound-component to set gain on all active playing voices.
 Note that gain is in linear scale, between 0 and 1.
To get the dB value from the gain, use the formula 20 * log(gain).
Inversely, to find the linear value from a dB value, use the formula
10db/20.

**Parameters**

- `gain` (number) (optional) - sound gain between 0 and 1, default is 1.

**Examples**

Assuming the script belongs to an instance with a sound-component with id "sound", this will set the gain to 0.5
```
msg.post("#sound", "set_gain", {gain = 0.5})

```

### sound
*Type:* PROPERTY
The sound data used when playing the sound. The type of the property is hash.

**Examples**

How to change the sound:
```
function init(self)
  -- load a wav file bundled as a custom resource
  local wav = sys.load_resource("foo.wav")
  -- get resource path to the sound component
  local resource_path = go.get("#sound", "sound")
  -- update the resource with the loaded wav file
  resource.set_sound(resource_path, wav)
  -- play the updated sound
  sound.play("#sound")
end

```

### sound.get_group_gain
*Type:* FUNCTION
Get mixer group gain

**Parameters**

- `group` (string | hash) - group name

**Returns**

- `gain` (number) - gain in [0 1] range ([-60dB.. 0dB])

**Examples**

Get the mixer group gain for the "soundfx" and convert to dB:
```
local gain = sound.get_group_gain("soundfx")
local gain_db = 60 * gain

```

### sound.get_group_name
*Type:* FUNCTION
Get a mixer group name as a string.
 This function is to be used for debugging and
development tooling only. The function does a reverse hash lookup, which does not
return a proper string value when the game is built in release mode.

**Parameters**

- `group` (string | hash) - group name

**Returns**

- `name` (string) - group name

**Examples**

Get the mixer group string names so we can show them as labels on a dev mixer overlay:
```
local groups = sound.get_groups()
for _,group in ipairs(groups) do
    local name = sound.get_group_name(group)
    msg.post("/mixer_overlay#gui", "set_mixer_label", { group = group, label = name})
end

```

### sound.get_groups
*Type:* FUNCTION
Get a table of all mixer group names (hashes).

**Returns**

- `groups` (table) - table of mixer group names

**Examples**

Get the mixer groups, set all gains to 0 except for "master" and "soundfx"
where gain is set to 1:
```
local groups = sound.get_groups()
for _,group in ipairs(groups) do
    if group == hash("master") or group == hash("soundfx") then
        sound.set_group_gain(group, 1)
    else
        sound.set_group_gain(group, 0)
    end
end

```

### sound.get_peak
*Type:* FUNCTION
Get peak value from mixer group.
 Note that gain is in linear scale, between 0 and 1.
To get the dB value from the gain, use the formula 20 * log(gain).
Inversely, to find the linear value from a dB value, use the formula
10db/20.
Also note that the returned value might be an approximation and in particular
the effective window might be larger than specified.

**Parameters**

- `group` (string | hash) - group name
- `window` (number) - window length in seconds

**Returns**

- `peak_l` (number) - peak value for left channel
- `peak_r` (number) - peak value for right channel

**Examples**

Get the peak gain from the "master" group and convert to dB for displaying:
```
local left_p, right_p = sound.get_peak("master", 0.1)
left_p_db = 20 * log(left_p)
right_p_db = 20 * log(right_p)

```

### sound.get_rms
*Type:* FUNCTION
Get RMS (Root Mean Square) value from mixer group. This value is the
square root of the mean (average) value of the squared function of
the instantaneous values.
For instance: for a sinewave signal with a peak gain of -1.94 dB (0.8 linear),
the RMS is 0.8  1/sqrt(2) which is about 0.566.
 Note the returned value might be an approximation and in particular
the effective window might be larger than specified.

**Parameters**

- `group` (string | hash) - group name
- `window` (number) - window length in seconds

**Returns**

- `rms_l` (number) - RMS value for left channel
- `rms_r` (number) - RMS value for right channel

**Examples**

Get the RMS from the "master" group where a mono -1.94 dB sinewave is playing:
```
local rms = sound.get_rms("master", 0.1) -- throw away right channel.
print(rms) --> 0.56555819511414

```

### sound.is_music_playing
*Type:* FUNCTION
Checks if background music is playing, e.g. from iTunes.
 On non mobile platforms,
this function always return false.
 On Android you can only get a correct reading
of this state if your game is not playing any sounds itself. This is a limitation
in the Android SDK. If your game is playing any sounds, even with a gain of zero, this
function will return false.
The best time to call this function is:

In the init function of your main collection script before any sounds are triggered
In a window listener callback when the window.WINDOW_EVENT_FOCUS_GAINED event is received

Both those times will give you a correct reading of the state even when your application is
swapped out and in while playing sounds and it works equally well on Android and iOS.

**Returns**

- `playing` (boolean) - <code>true</code> if music is playing, otherwise <code>false</code>.

**Examples**

If music is playing, mute "master":
```
if sound.is_music_playing() then
    -- mute "master"
    sound.set_group_gain("master", 0)
end

```

### sound.is_phone_call_active
*Type:* FUNCTION
Checks if a phone call is active. If there is an active phone call all
other sounds will be muted until the phone call is finished.
 On non mobile platforms,
this function always return false.

**Returns**

- `call_active` (boolean) - <code>true</code> if there is an active phone call, <code>false</code> otherwise.

**Examples**

Test if a phone call is on-going:
```
if sound.is_phone_call_active() then
    -- do something sensible.
end

```

### sound.pause
*Type:* FUNCTION
Pause all active voices

**Parameters**

- `url` (string | hash | url) - the sound that should pause
- `pause` (boolean) - true if the sound should pause

**Examples**

Assuming the script belongs to an instance with a sound-component with id "sound", this will make the component pause all playing voices:
```
sound.pause("#sound", true)

```

### sound.play
*Type:* FUNCTION
Make the sound component play its sound. Multiple voices are supported. The limit is set to 32 voices per sound component.
 A sound will continue to play even if the game object the sound component belonged to is deleted. You can call sound.stop() to stop the sound.

**Notes**

- Sounds are panned using a constant power panning (non linear fade). 0 means left/right channels are balanced at 71%/71% each.
At -1 (full left) the channels are at 100%/0%, and 1 they're at 0%/100%.

**Parameters**

- `url` (string | hash | url) - the sound that should play
- `play_properties` (table) (optional) - <dl>
<dt>optional table with properties:</dt>
<dt><code>delay</code></dt>
<dd><span class="type">number</span> delay in seconds before the sound starts playing, default is 0.</dd>
<dt><code>gain</code></dt>
<dd><span class="type">number</span> sound gain between 0 and 1, default is 1. The final gain of the sound will be a combination of this gain, the group gain and the master gain.</dd>
<dt><code>pan</code></dt>
<dd><span class="type">number</span> sound pan between -1 and 1, default is 0. The final pan of the sound will be an addition of this pan and the sound pan.</dd>
<dt><code>speed</code></dt>
<dd><span class="type">number</span> sound speed where 1.0 is normal speed, 0.5 is half speed and 2.0 is double speed. The final speed of the sound will be a multiplication of this speed and the sound speed.</dd>
<dt><code>start_time</code></dt>
<dd><span class="type">number</span> start playback offset (seconds). Optional, mutually exclusive with <code>start_frame</code>.</dd>
<dt><code>start_frame</code></dt>
<dd><span class="type">number</span> start playback offset (frames/samples). Optional, mutually exclusive with <code>start_time</code>. If both are provided, <code>start_frame</code> is used.</dd>
</dl>
- `complete_function` (function(self, message_id, message, sender)) (optional) - function to call when the sound has finished playing or stopped manually via <a href="/ref/sound#sound.stop">sound.stop</a>.
<dl>
<dt><code>self</code></dt>
<dd><span class="type">object</span> The current object.</dd>
<dt><code>message_id</code></dt>
<dd><span class="type">hash</span> The name of the completion message, which can be either <code>"sound_done"</code> if the sound has finished playing, or <code>"sound_stopped"</code> if it was stopped manually.</dd>
<dt><code>message</code></dt>
<dd><span class="type">table</span> Information about the completion:</dd>
</dl>
<ul>
<li><span class="type">number</span> <code>play_id</code> - the sequential play identifier that was given by the sound.play function.</li>
</ul>
<dl>
<dt><code>sender</code></dt>
<dd><span class="type">url</span> The invoker of the callback: the sound component.</dd>
</dl>

**Returns**

- `play_id` (number) - The identifier for the sound voice

**Examples**

Assuming the script belongs to an instance with a sound-component with id "sound", this will make the component play its sound after 1 second:
```
sound.play("#sound", { delay = 1, gain = 0.9, pan = -1.0 } )

```

Using the callback argument, you can chain several sounds together:
```
local function sound_done(self, message_id, message, sender)
  -- play 'boom' sound fx when the countdown has completed
  if message_id == hash("sound_done") and message.play_id == self.countdown_id then
    sound.play("#boom", nil, sound_done)
  end
end

function init(self)
  self.countdown_id = sound.play("#countdown", nil, sound_done)
end

```

### sound.set_gain
*Type:* FUNCTION
Set gain on all active playing voices of a sound.

**Parameters**

- `url` (string | hash | url) - the sound to set the gain of
- `gain` (number) (optional) - sound gain between 0 and 1 [-60dB .. 0dB]. The final gain of the sound will be a combination of this gain, the group gain and the master gain.

**Examples**

Assuming the script belongs to an instance with a sound-component with id "sound", this will set the gain to 0.9
```
sound.set_gain("#sound", 0.9)

```

### sound.set_group_gain
*Type:* FUNCTION
Set mixer group gain

**Parameters**

- `group` (string | hash) - group name
- `gain` (number) - gain in range [0..1] mapped to [0 .. -60dB]

**Examples**

Set mixer group gain on the "soundfx" group to 50% (-30dB):
```
sound.set_group_gain("soundfx", 0.5)

```

### sound.set_pan
*Type:* FUNCTION
Set panning on all active playing voices of a sound.
The valid range is from -1.0 to 1.0, representing -45 degrees left, to +45 degrees right.

**Notes**

- Sounds are panned using a constant power panning (non linear fade). 0 means left/right channels are balanced at 71%/71% each.
At -1 (full left) the channels are at 100%/0%, and 1 they're at 0%/100%.

**Parameters**

- `url` (string | hash | url) - the sound to set the panning value to
- `pan` (number) (optional) - sound panning between -1.0 and 1.0

**Examples**

Assuming the script belongs to an instance with a sound-component with id "sound", this will set the gain to 0.5
```
sound.set_pan("#sound", 0.5) -- pan to the right

```

### sound.stop
*Type:* FUNCTION
Stop playing all active voices or just one voice if play_id provided

**Parameters**

- `url` (string | hash | url) - the sound component that should stop
- `stop_properties` (table) (optional) - <dl>
<dt>optional table with properties:</dt>
<dt><code>play_id</code></dt>
<dd><span class="type">number</span> the sequential play identifier that should be stopped (was given by the sound.play() function)</dd>
</dl>

**Examples**

Assuming the script belongs to an instance with a sound-component with id "sound", this will make the component stop all playing voices:
```
sound.stop("#sound")
local id = sound.play("#sound")
sound.stop("#sound", {play_id = id})

```

### sound_done
*Type:* MESSAGE
This message is sent back to the sender of a play_sound message
if the sound could be played to completion and a play_id was provided with the play_sound message.

**Parameters**

- `play_id` (number) (optional) - id number supplied when the message was posted.

### sound_stopped
*Type:* MESSAGE
This message is sent back to the sender of a play_sound message, if the sound
has been manually stopped and a play_id was provided with the play_sound message.

**Parameters**

- `play_id` (number) (optional) - id number supplied when the message was posted.

### speed
*Type:* PROPERTY
The speed on the sound-component where 1.0 is normal speed, 0.5 is half
speed and 2.0 is double speed.

**Examples**

```
function init(self)
  local speed = go.get("#sound", "speed")
  go.set("#sound", "speed", speed * 0.5)
end

```

### stop_sound
*Type:* MESSAGE
Post this message to a sound-component to make it stop playing all active voices

**Examples**

Assuming the script belongs to an instance with a sound-component with id "sound", this will make the component stop all playing voices:
```
msg.post("#sound", "stop_sound")

```

<!-- sprite-lua -->

# Sprite {#apis:sprite-lua}

**Namespace:** `sprite`
**Language:** Lua
**Type:** Defold Lua
**File:** `sprite_ddf.proto`
**Source:** `engine/gamesys/proto/gamesys/sprite_ddf.proto`

Sprite API documentation

## API

### animation
*Type:* PROPERTY
READ ONLY The current animation id. An animation that plays currently for the sprite. The type of the property is hash.

**Examples**

How to get the animation on component "sprite":
```
function init(self)
  local animation = go.get("#sprite", "animation")
end

```

### animation_done
*Type:* MESSAGE
This message is sent to the sender of a play_animation message when the
animation has completed.
Note that this message is sent only for animations that play with the following
playback modes:

Once Forward
Once Backward
Once Ping Pong

See play_animation for more information and examples of how to use
this message.

**Parameters**

- `current_tile` (number) - the current tile of the sprite
- `id` (hash) - id of the animation that was completed

**Examples**

How to sequence two animations together.
```
function init(self)
  -- play jump animation at init
  msg.post("#sprite", "play_animation", {id = hash("jump")})
end

function on_message(self, message_id, message, sender)
  -- check for animation done response
  if message_id == hash("animation_done") then
    -- start the walk animation
    msg.post("#sprite", "play_animation", { id = hash("walk") })
  end
end

```

### cursor
*Type:* PROPERTY
The normalized animation cursor. The type of the property is number.

**Examples**

How to get the normalized cursor value:
```
function init(self)
  -- Get the cursor value on component "sprite"
  local cursor = go.get("#sprite", "cursor")
end

```

How to animate the cursor from 0.0 to 1.0 using linear easing for 2.0 seconds:
```
function init(self)
  -- Set the cursor on component "sprite" to make the animation go from 0
  go.set("#sprite", "cursor", 0.0)
  -- Animate the cursor value
  go.animate("#sprite", "cursor", go.PLAYBACK_LOOP_FORWARD, 1.0, go.EASING_LINEAR, 2)
end

```

### frame_count
*Type:* PROPERTY
READ ONLY The frame count of the currently playing animation.

**Examples**

How to get the frame_count on component "sprite":
```
function init(self)
  local frame_count = go.get("#sprite", "frame_count")
end

```

### image
*Type:* PROPERTY
The image used when rendering the sprite. The type of the property is hash.

**Examples**

How to set image using a script property (see resource.atlas)
```
go.property("my_image", resource.atlas("/atlas.atlas"))
function init(self)
  go.set("#sprite", "image", self.my_image)
end

```

See resource.set_texture for an example on how to set the texture of an atlas.

### material
*Type:* PROPERTY
The material used when rendering the sprite. The type of the property is hash.

**Examples**

How to set material using a script property (see resource.material)
```
go.property("my_material", resource.material("/material.material"))
function init(self)
  go.set("#sprite", "material", self.my_material)
end

```

### play_animation
*Type:* MESSAGE
Post this message to a sprite component to make it play an animation from its tile set.

**Parameters**

- `id` (hash) - the id of the animation to play
- `offset` (number) - the normalized initial value of the animation cursor when the animation starts playing
- `playback_rate` (number) - the rate with which the animation will be played. Must be positive

**Examples**

In the example, it is assumed that the instance of the script has a sprite-component with id "sprite". The sprite itself is assumed to be bound to a tile set with animations "walk" and "jump".
```
msg.post("#sprite", "play_animation", {id = hash("jump")})

```

### playback_rate
*Type:* PROPERTY
The animation playback rate. A multiplier to the animation playback rate. The type of the property is number.
The playback_rate is a non-negative number, a negative value will be clamped to 0.

**Examples**

How to set the playback_rate on component "sprite" to play at double the current speed:
```
function init(self)
  -- Get the current value on component "sprite"
  playback_rate = go.get("#sprite", "playback_rate")
  -- Set the playback_rate to double the previous value.
  go.set("#sprite", "playback_rate", playback_rate * 2)
end

```

### scale
*Type:* PROPERTY
The non-uniform scale of the sprite. The type of the property is vector3.

**Examples**

How to scale a sprite independently along the X and Y axis:
```
function init(self)
  -- Double the y-axis scaling on component "sprite"
     local yscale = go.get("#sprite", "scale.y")
     go.set("#sprite", "scale.y", yscale * 2)
end

```

### size
*Type:* PROPERTY
The size of the sprite, not allowing for any additional scaling that may be applied.
The type of the property is vector3. It is not possible to set the size if the size mode
of the sprite is set to auto.

**Examples**

How to query a sprite's size, either as a vector or selecting a specific dimension:
```
function init(self)
  -- get size from component "sprite"
  local size = go.get("#sprite", "size")
  local sx = go.get("#sprite", "size.x")
  -- do something useful
  assert(size.x == sx)
end

```

### slice
*Type:* PROPERTY
The slice values of the sprite. The type of the property is a vector4 that corresponds to
the left, top, right, bottom values of the sprite in the editor.
It is not possible to set the slice property if the size mode of the sprite is set to auto.

**Examples**

How to query a sprite's slice values, either as a vector or selecting a specific dimension:
```
function init(self)
  local slice = go.get("#sprite", "slice")
  local slicex = go.get("#sprite", "slice.x")
  assert(slice.x == slicex)
end

```

Animate the slice property with go.animate:
```
function init(self)
  -- animate the entire slice vector at once
  go.animate("#sprite", "slice", go.PLAYBACK_LOOP_PINGPONG, vmath.vector4(96, 96, 96, 96), go.EASING_INCUBIC, 2)
  -- or animate a single component
  go.animate("#sprite", "slice.y", go.PLAYBACK_LOOP_PINGPONG, 32, go.EASING_INCUBIC, 8)
end

```

### sprite.play_flipbook
*Type:* FUNCTION
Play an animation on a sprite component from its tile set
An optional completion callback function can be provided that will be called when
the animation has completed playing. If no function is provided,
a animation_done message is sent to the script that started the animation.

**Parameters**

- `url` (string | hash | url) - the sprite that should play the animation
- `id` (string | hash) - hashed id of the animation to play
- `complete_function` (function(self, message_id, message, sender)) (optional) - function to call when the animation has completed.
<dl>
<dt><code>self</code></dt>
<dd><span class="type">object</span> The current object.</dd>
<dt><code>message_id</code></dt>
<dd><span class="type">hash</span> The name of the completion message, <code>"animation_done"</code>.</dd>
<dt><code>message</code></dt>
<dd><span class="type">table</span> Information about the completion:</dd>
</dl>
<ul>
<li><span class="type">number</span> <code>current_tile</code> - the current tile of the sprite.</li>
<li><span class="type">hash</span> <code>id</code> - id of the animation that was completed.</li>
</ul>
<dl>
<dt><code>sender</code></dt>
<dd><span class="type">url</span> The invoker of the callback: the sprite component.</dd>
</dl>
- `play_properties` (table) (optional) - optional table with properties:
<dl>
<dt><code>offset</code></dt>
<dd><span class="type">number</span> the normalized initial value of the animation cursor when the animation starts playing.</dd>
<dt><code>playback_rate</code></dt>
<dd><span class="type">number</span> the rate with which the animation will be played. Must be positive.</dd>
</dl>

**Examples**

The following examples assumes that the model has id "sprite".
How to play the "jump" animation followed by the "run" animation:
```
local function anim_done(self, message_id, message, sender)
  if message_id == hash("animation_done") then
    if message.id == hash("jump") then
      -- jump animation done, chain with "run"
      sprite.play_flipbook(url, "run")
    end
  end
end

```

```
function init(self)
  local url = msg.url("#sprite")
  sprite.play_flipbook(url, "jump", anim_done)
end

```

### sprite.set_hflip
*Type:* FUNCTION
Sets horizontal flipping of the provided sprite's animations.
The sprite is identified by its URL.
If the currently playing animation is flipped by default, flipping it again will make it appear like the original texture.

**Parameters**

- `url` (string | hash | url) - the sprite that should flip its animations
- `flip` (boolean) - <code>true</code> if the sprite should flip its animations, <code>false</code> if not

**Examples**

How to flip a sprite so it faces the horizontal movement:
```
function update(self, dt)
  -- calculate self.velocity somehow
  sprite.set_hflip("#sprite", self.velocity.x < 0)
end

```

It is assumed that the sprite component has id "sprite" and that the original animations faces right.

### sprite.set_vflip
*Type:* FUNCTION
Sets vertical flipping of the provided sprite's animations.
The sprite is identified by its URL.
If the currently playing animation is flipped by default, flipping it again will make it appear like the original texture.

**Parameters**

- `url` (string | hash | url) - the sprite that should flip its animations
- `flip` (boolean) - <code>true</code> if the sprite should flip its animations, <code>false</code> if not

**Examples**

How to flip a sprite in a game which negates gravity as a game mechanic:
```
function update(self, dt)
  -- calculate self.up_side_down somehow, then:
  sprite.set_vflip("#sprite", self.up_side_down)
end

```

It is assumed that the sprite component has id "sprite" and that the original animations are up-right.

<!-- string-lua -->

# String {#apis:string-lua}

**Namespace:** `string`
**Language:** Lua
**Type:** Defold Lua
**File:** `lua_string.doc_h`
**Source:** `engine/lua/src/lua_string.doc_h`

Documentation for the Lua string standard library.

From [Lua 5.1 Reference Manual](https://www.lua.org/manual/5.1/)
by Roberto Ierusalimschy, Luiz Henrique de Figueiredo, Waldemar Celes.

Copyright  2006-2012 Lua.org, PUC-Rio.

Freely available under the terms of the [Lua license](https://www.lua.org/license.html).

### Patterns

_Character Class:_

A character class is used to represent a set of characters.
The following combinations are allowed in describing a character class:

x
: (where x is not one of the magic characters `^$()%.[]*+-?`)
  represents the character x itself.

`.`
: (a dot) represents all characters.

`%a`
: represents all letters.

`%c`
: represents all control characters.

`%d`
: represents all digits.

`%l`
: represents all lowercase letters.

`%p`
: represents all punctuation characters.

`%s`
: represents all space characters.

`%u`
: represents all uppercase letters.

`%w`
: represents all alphanumeric characters.

`%x`
: represents all hexadecimal digits.

`%z`
: represents the character with representation 0.

`%x`
: (where x is any non-alphanumeric character) represents the character x.
  This is the standard way to escape the magic characters.
  Any punctuation character (even the non magic) can be preceded by a '%'
  when used to represent itself in a pattern.

`[set]`
: represents the class which is the union of all characters in set.
  A range of characters can be specified by separating the end characters
  of the range with a '-'.
  All classes `%`x described above can also be used as components in set.
  All other characters in set represent themselves.
  For example, `[%w_]` (or `[_%w]`) represents all alphanumeric characters
  plus the underscore, `[0-7]` represents the octal digits,
  and `[0-7%l%-]` represents the octal digits plus the lowercase letters
  plus the '-' character.

  The interaction between ranges and classes is not defined.
  Therefore, patterns like `[%a-z]` or `[a-%%]` have no meaning.

`[^set]`
: represents the complement of set,
  where set is interpreted as above.

For all classes represented by single letters (`%a`, `%c`, etc.),
the corresponding uppercase letter represents the complement of the class.
For instance, `%S` represents all non-space characters.

The definitions of letter, space, and other character groups
depend on the current locale. In particular, the class `[a-z]` may not be
equivalent to `%l`.

_Pattern Item:_

A pattern item can be

- a single character class, which matches any single character in the class;

- a single character class followed by '*',
  which matches 0 or more repetitions of characters in the class.
  These repetition items will always match the longest possible sequence;

- a single character class followed by '+',
  which matches 1 or more repetitions of characters in the class.
  These repetition items will always match the longest possible sequence;

- a single character class followed by '-',
  which also matches 0 or more repetitions of characters in the class.
  Unlike '*', these repetition items will always match the shortest
  possible sequence;

- a single character class followed by '?',
  which matches 0 or 1 occurrence of a character in the class;

- `%n`, for n between 1 and 9; such item matches a substring equal to the
  n-th captured string (see below);

- `%bxy`, where x and y are two distinct characters;
  such item matches strings that start with x, end with y,
  and where the x and y are balanced.
  This means that, if one reads the string from left to right,
  counting +1 for an x and -1 for a y,
  the ending y is the first y where the count reaches 0.
  For instance, the item `%b()` matches expressions with balanced parentheses.

_Pattern:_

A pattern is a sequence of pattern items.
A '^' at the beginning of a pattern anchors the match at the
beginning of the subject string.
A '$' at the end of a pattern anchors the match at the
end of the subject string.
At other positions, '^' and '$' have no special meaning and represent themselves.

_Captures:_

A pattern can contain sub-patterns enclosed in parentheses;
they describe captures.
When a match succeeds, the substrings of the subject string
that match captures are stored (captured) for future use.
Captures are numbered according to their left parentheses.
For instance, in the pattern `"(a*(.)%w(%s*))"`,
the part of the string matching `"a*(.)%w(%s*)"` is
stored as the first capture (and therefore has number 1);
the character matching "." is captured with number 2,
and the part matching "%s*" has number 3.

As a special case, the empty capture `()` captures
the current string position (a number).
For instance, if we apply the pattern `"()aa()"` on the
string `"flaaap"`, there will be two captures: 3 and 5.

A pattern cannot contain embedded zeros.  Use `%z` instead.

## API

### string.byte
*Type:* FUNCTION
Returns the internal numerical codes of the characters s[i],
s[i+1], ..., s[j].
The default value for i is 1;
the default value for j is i.
Note that numerical codes are not necessarily portable across platforms.

**Parameters**

- `s` (string)
- `i` (number) (optional)
- `j` (number) (optional)

### string.char
*Type:* FUNCTION
Receives zero or more integers.
Returns a string with length equal to the number of arguments,
in which each character has the internal numerical code equal
to its corresponding argument.
Note that numerical codes are not necessarily portable across platforms.

**Parameters**

- `...`

### string.dump
*Type:* FUNCTION
Returns a string containing a binary representation of the given function,
so that a later loadstring on this string returns
a copy of the function.
function must be a Lua function without upvalues.

**Parameters**

- `function` (function)

### string.find
*Type:* FUNCTION
Looks for the first match of
pattern in the string s.
If it finds a match, then find returns the indices of s
where this occurrence starts and ends;
otherwise, it returns  nil.
A third, optional numerical argument init specifies
where to start the search;
its default value is 1 and can be negative.
A value of  true as a fourth, optional argument plain
turns off the pattern matching facilities,
so the function does a plain "find substring" operation,
with no characters in pattern being considered "magic".
Note that if plain is given, then init must be given as well.
If the pattern has captures,
then in a successful match
the captured values are also returned,
after the two indices.

**Parameters**

- `s` (string)
- `pattern` (string)
- `init` (number) (optional)
- `plain` (boolean) (optional)

### string.format
*Type:* FUNCTION
Returns a formatted version of its variable number of arguments
following the description given in its first argument (which must be a string).
The format string follows the same rules as the printf family of
standard C functions.
The only differences are that the options/modifiers
*, l, L, n, p,
and h are not supported
and that there is an extra option, q.
The q option formats a string in a form suitable to be safely read
back by the Lua interpreter:
the string is written between double quotes,
and all double quotes, newlines, embedded zeros,
and backslashes in the string
are correctly escaped when written.
For instance, the call
```
string.format('%q', 'a string with "quotes" and \n new line')

```

will produce the string:
```
"a string with \"quotes\" and \
 new line"

```

The options c, d, E, e, f,
g, G, i, o, u, X, and x all
expect a number as argument,
whereas q and s expect a string.
This function does not accept string values
containing embedded zeros,
except as arguments to the q option.

**Parameters**

- `formatstring` (string)
- `...`

### string.gmatch
*Type:* FUNCTION
Returns an iterator function that,
each time it is called,
returns the next captures from pattern over string s.
If pattern specifies no captures,
then the whole match is produced in each call.
As an example, the following loop
```
s = "hello world from Lua"
for w in string.gmatch(s, "%a+") do
  print(w)
end

```

will iterate over all the words from string s,
printing one per line.
The next example collects all pairs key=value from the
given string into a table:
```
t = {}
s = "from=world, to=Lua"
for k, v in string.gmatch(s, "(%w+)=(%w+)") do
  t[k] = v
end

```

For this function, a '^' at the start of a pattern does not
work as an anchor, as this would prevent the iteration.

**Parameters**

- `s` (string)
- `pattern` (string)

### string.gsub
*Type:* FUNCTION
Returns a copy of s
in which all (or the first n, if given)
occurrences of the pattern have been
replaced by a replacement string specified by repl,
which can be a string, a table, or a function.
gsub also returns, as its second value,
the total number of matches that occurred.
If repl is a string, then its value is used for replacement.
The character % works as an escape character:
any sequence in repl of the form %n,
with n between 1 and 9,
stands for the value of the n-th captured substring (see below).
The sequence %0 stands for the whole match.
The sequence %% stands for a single %.
If repl is a table, then the table is queried for every match,
using the first capture as the key;
if the pattern specifies no captures,
then the whole match is used as the key.
If repl is a function, then this function is called every time a
match occurs, with all captured substrings passed as arguments,
in order;
if the pattern specifies no captures,
then the whole match is passed as a sole argument.
If the value returned by the table query or by the function call
is a string or a number,
then it is used as the replacement string;
otherwise, if it is false or  nil,
then there is no replacement
(that is, the original match is kept in the string).
Here are some examples:
```
x = string.gsub("hello world", "(%w+)", "%1 %1")
--> x="hello hello world world"

x = string.gsub("hello world", "%w+", "%0 %0", 1)
--> x="hello hello world"

x = string.gsub("hello world from Lua", "(%w+)%s*(%w+)", "%2 %1")
--> x="world hello Lua from"

x = string.gsub("home = $HOME, user = $USER", "%$(%w+)", os.getenv)
--> x="home = /home/roberto, user = roberto"

x = string.gsub("4+5 = $return 4+5$", "%$(.-)%$", function (s)
      return loadstring(s)()
    end)
--> x="4+5 = 9"

local t = {name="lua", version="5.1"}
x = string.gsub("$name-$version.tar.gz", "%$(%w+)", t)
--> x="lua-5.1.tar.gz"

```

**Parameters**

- `s` (string)
- `pattern` (string)
- `repl` (string)
- `n` (number) (optional)

### string.len
*Type:* FUNCTION
Receives a string and returns its length.
The empty string "" has length 0.
Embedded zeros are counted,
so "a\000bc\000" has length 5.

**Parameters**

- `s` (string)

### string.lower
*Type:* FUNCTION
Receives a string and returns a copy of this string with all
uppercase letters changed to lowercase.
All other characters are left unchanged.
The definition of what an uppercase letter is depends on the current locale.

**Parameters**

- `s` (string)

### string.match
*Type:* FUNCTION
Looks for the first match of
pattern in the string s.
If it finds one, then match returns
the captures from the pattern;
otherwise it returns  nil.
If pattern specifies no captures,
then the whole match is returned.
A third, optional numerical argument init specifies
where to start the search;
its default value is 1 and can be negative.

**Parameters**

- `s` (string)
- `pattern` (string)
- `init` (number) (optional)

### string.rep
*Type:* FUNCTION
Returns a string that is the concatenation of n copies of
the string s.

**Parameters**

- `s` (string)
- `n` (number)

### string.reverse
*Type:* FUNCTION
Returns a string that is the string s reversed.

**Parameters**

- `s` (string)

### string.sub
*Type:* FUNCTION
Returns the substring of s that
starts at i  and continues until j;
i and j can be negative.
If j is absent, then it is assumed to be equal to -1
(which is the same as the string length).
In particular,
the call string.sub(s,1,j) returns a prefix of s
with length j,
and string.sub(s, -i) returns a suffix of s
with length i.

**Parameters**

- `s` (string)
- `i` (number)
- `j` (number) (optional)

### string.upper
*Type:* FUNCTION
Receives a string and returns a copy of this string with all
lowercase letters changed to uppercase.
All other characters are left unchanged.
The definition of what a lowercase letter is depends on the current locale.

**Parameters**

- `s` (string)

<!-- sys-lua -->

# System {#apis:sys-lua}

**Namespace:** `sys`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_engine.cpp`
**Source:** `engine/engine/src/script/script_engine.cpp`

Functions and messages for using system resources, controlling the engine,
error handling and debugging.

## API

### exit
*Type:* MESSAGE
Terminates the game application and reports the specified code to the OS.
This message can only be sent to the designated @system socket.

**Parameters**

- `code` (number) - exit code to report to the OS, 0 means clean exit

**Examples**

This examples demonstrates how to exit the application when some kind of quit messages is received (maybe from gui or similar):
```
function on_message(self, message_id, message, sender)
    if message_id == hash("quit") then
        msg.post("@system:", "exit", {code = 0})
    end
end

```

### reboot
*Type:* MESSAGE
Reboots the game engine with a specified set of arguments.
Arguments will be translated into command line arguments. Sending the reboot
command is equivalent to starting the engine with the same arguments.
On startup the engine reads configuration from "game.project" in the
project root.
This message can only be sent to the designated @system socket.

**Parameters**

- `arg1` (string) - argument 1
- `arg2` (string) - argument 2
- `arg3` (string) - argument 3
- `arg4` (string) - argument 4
- `arg5` (string) - argument 5
- `arg6` (string) - argument 6

**Examples**

How to reboot engine with a specific bootstrap collection.
```
local arg1 = '--config=bootstrap.main_collection=/my.collectionc'
local arg2 = 'build/game.projectc'
msg.post("@system:", "reboot", {arg1 = arg1, arg2 = arg2})

```

### resume_rendering
*Type:* MESSAGE
Resume rendering.
This message can only be sent to the designated @system socket.

**Examples**

msg.post("@system:", "resume_rendering")

### set_update_frequency
*Type:* MESSAGE
Set game update-frequency (frame cap). This option is equivalent to display.update_frequency in
the "game.project" settings but set in run-time. If Vsync checked in "game.project", the rate will
be clamped to a swap interval that matches any detected main monitor refresh rate. If Vsync is
unchecked the engine will try to respect the rate in software using timers. There is no
guarantee that the frame cap will be achieved depending on platform specifics and hardware settings.
This message can only be sent to the designated @system socket.

**Parameters**

- `frequency` (number) - target frequency. 60 for 60 fps

**Examples**

msg.post("@system:", "set_update_frequency", { frequency = 60 } )

### set_vsync
*Type:* MESSAGE
Set the vsync swap interval. The interval with which to swap the front and back buffers
in sync with vertical blanks (v-blank), the hardware event where the screen image is updated
with data from the front buffer. A value of 1 swaps the buffers at every v-blank, a value of
2 swaps the buffers every other v-blank and so on. A value of 0 disables waiting for v-blank
before swapping the buffers. Default value is 1.
When setting the swap interval to 0 and having vsync disabled in
"game.project", the engine will try to respect the set frame cap value from
"game.project" in software instead.
This setting may be overridden by driver settings.
This message can only be sent to the designated @system socket.

**Parameters**

- `swap_interval` (number) - target swap interval.

**Examples**

msg.post("@system:", "set_vsync", { swap_interval = 1 } )

### start_record
*Type:* MESSAGE
Starts video recording of the game frame-buffer to file. Current video format is the
open vp8 codec in the ivf container. It's possible to upload this format directly
to YouTube. The VLC video player has native support but with the known issue that
not the entire file is played back. It's probably an issue with VLC.
The Miro Video Converter has support for vp8/ivf.
   Video recording is only supported on desktop platforms.
 Audio is currently not supported
 Window width and height must be a multiple of 8 to be able to record video.
This message can only be sent to the designated @system socket.

**Parameters**

- `file_name` (string) - file name to write the video to
- `frame_period` (number) - frame period to record, ie write every nth frame. Default value is <code>2</code>
- `fps` (number) - frames per second. Playback speed for the video. Default value is <code>30</code>. The fps value doens't affect the recording. It's only meta-data in the written video file.

**Examples**

Record a video in 30 fps given that the native game fps is 60:
```
msg.post("@system:", "start_record", { file_name = "test_rec.ivf" } )

```

To write a video in 60 fps given that the native game fps is 60:
```
msg.post("@system:", "start_record", { file_name = "test_rec.ivf", frame_period = 1, fps = 60 } )

```

### stop_record
*Type:* MESSAGE
Stops the currently active video recording.
   Video recording is only supported on desktop platforms.
This message can only be sent to the designated @system socket.

**Examples**

```
msg.post("@system:", "stop_record")

```

### sys.deserialize
*Type:* FUNCTION
This function will raise a Lua error if an error occurs while deserializing the buffer.

**Parameters**

- `buffer` (string) - buffer to deserialize from

**Returns**

- `table` (table) - lua table with deserialized data

**Examples**

Deserialize a lua table that was previously serialized:
```
local buffer = sys.serialize(my_table)
local table = sys.deserialize(buffer)

```

### sys.exists
*Type:* FUNCTION
Check if a path exists
Good for checking if a file exists before loading a large file

**Parameters**

- `path` (string) - path to check

**Returns**

- `result` (boolean) - <code>true</code> if the path exists, <code>false</code> otherwise

**Examples**

Load data but return nil if path didn't exist
```
if not sys.exists(path) then
    return nil
end
return sys.load(path) -- returns {} if it failed

```

### sys.exit
*Type:* FUNCTION
Terminates the game application and reports the specified code to the OS.

**Parameters**

- `code` (number) - exit code to report to the OS, 0 means clean exit

**Examples**

This examples demonstrates how to exit the application when some kind of quit messages is received (maybe from gui or similar):
```
function on_message(self, message_id, message, sender)
    if message_id == hash("quit") then
        sys.exit(0)
    end
end

```

### sys.get_application_info
*Type:* FUNCTION
Returns a table with application information for the requested app.
 On iOS, the app_string is an url scheme for the app that is queried. Your
game needs to list the schemes that are queried in an LSApplicationQueriesSchemes array
in a custom "Info.plist".
 On Android, the app_string is the package identifier for the app.

**Parameters**

- `app_string` (string) - platform specific string with application package or query, see above for details.

**Returns**

- `app_info` (table) - table with application information in the following fields:
<dl>
<dt><code>installed</code></dt>
<dd><span class="type">boolean</span> <code>true</code> if the application is installed, <code>false</code> otherwise.</dd>
</dl>

**Examples**

Check if twitter is installed:
```
sysinfo = sys.get_sys_info()
twitter = {}

if sysinfo.system_name == "Android" then
  twitter = sys.get_application_info("com.twitter.android")
elseif sysinfo.system_name == "iPhone OS" then
  twitter = sys.get_application_info("twitter:")
end

if twitter.installed then
  -- twitter is installed!
end

```

 Info.plist for the iOS app needs to list the schemes that are queried:
```
...
LSApplicationQueriesSchemes

   twitter

...

```

### sys.get_application_path
*Type:* FUNCTION
The path from which the application is run.
This function will raise a Lua error if unable to get the application support path.

**Returns**

- `path` (string) - path to application executable

**Examples**

Find a path where we can store data (the example path is on the macOS platform):
```
-- macOS: /Applications/my_game.app
local application_path = sys.get_application_path()
print(application_path) --> /Applications/my_game.app

-- Windows: C:\Program Files\my_game\my_game.exe
print(application_path) --> C:\Program Files\my_game

-- Linux: /home/foobar/my_game/my_game
print(application_path) --> /home/foobar/my_game

-- Android package name: com.foobar.my_game
print(application_path) --> /data/user/0/com.foobar.my_game

-- iOS: my_game.app
print(application_path) --> /var/containers/Bundle/Applications/123456AB-78CD-90DE-12345678ABCD/my_game.app

-- HTML5: http://www.foobar.com/my_game/
print(application_path) --> http://www.foobar.com/my_game

```

### sys.get_config_boolean
*Type:* FUNCTION
Get boolean config value from the game.project configuration file with optional default value

**Parameters**

- `key` (string) - key to get value for. The syntax is SECTION.KEY
- `default_value` (boolean) (optional) - (optional) default value to return if the value does not exist

**Returns**

- `value` (boolean) - config value as a boolean. default_value if the config key does not exist. false if no default value was supplied.

**Examples**

Get user config value
```
local vsync = sys.get_config_boolean("display.vsync", false)

```

### sys.get_config_int
*Type:* FUNCTION
Get integer config value from the game.project configuration file with optional default value

**Parameters**

- `key` (string) - key to get value for. The syntax is SECTION.KEY
- `default_value` (number) (optional) - (optional) default value to return if the value does not exist

**Returns**

- `value` (number) - config value as an integer. default_value if the config key does not exist. 0 if no default value was supplied.

**Examples**

Get user config value
```
local speed = sys.get_config_int("my_game.speed", 20) -- with default value

```

```
local testmode = sys.get_config_int("my_game.testmode") -- without default value
if testmode ~= nil then
    -- do stuff
end

```

### sys.get_config_number
*Type:* FUNCTION
Get number config value from the game.project configuration file with optional default value

**Parameters**

- `key` (string) - key to get value for. The syntax is SECTION.KEY
- `default_value` (number) (optional) - (optional) default value to return if the value does not exist

**Returns**

- `value` (number) - config value as an number. default_value if the config key does not exist. 0 if no default value was supplied.

**Examples**

Get user config value
```
local speed = sys.get_config_number("my_game.speed", 20.0)

```

### sys.get_config_string
*Type:* FUNCTION
Get string config value from the game.project configuration file with optional default value

**Parameters**

- `key` (string) - key to get value for. The syntax is SECTION.KEY
- `default_value` (string) (optional) - (optional) default value to return if the value does not exist

**Returns**

- `value` (string) - config value as a string. default_value if the config key does not exist. nil if no default value was supplied.

**Examples**

Get user config value
```
local text = sys.get_config_string("my_game.text", "default text"))

```

Start the engine with a bootstrap config override and add a custom config value
```
$ dmengine --config=bootstrap.main_collection=/mytest.collectionc --config=mygame.testmode=1

```

Read the custom config value from the command line
```
local testmode = sys.get_config_int("mygame.testmode")

```

### sys.get_connectivity
*Type:* FUNCTION
Returns the current network connectivity status
on mobile platforms.
On desktop, this function always return sys.NETWORK_CONNECTED.

**Returns**

- `status` (constant) - network connectivity status:
<ul>
<li><code>sys.NETWORK_DISCONNECTED</code> (no network connection is found)</li>
<li><code>sys.NETWORK_CONNECTED_CELLULAR</code> (connected through mobile cellular)</li>
<li><code>sys.NETWORK_CONNECTED</code> (otherwise, Wifi)</li>
</ul>

**Examples**

Check if we are connected through a cellular connection
```
if (sys.NETWORK_CONNECTED_CELLULAR == sys.get_connectivity()) then
  print("Connected via cellular, avoid downloading big files!")
end

```

### sys.get_engine_info
*Type:* FUNCTION
Returns a table with engine information.

**Returns**

- `engine_info` (table) - table with engine information in the following fields:
<dl>
<dt><code>version</code></dt>
<dd><span class="type">string</span> The current Defold engine version, i.e. "1.2.96"</dd>
<dt><code>version_sha1</code></dt>
<dd><span class="type">string</span> The SHA1 for the current engine build, i.e. "0060183cce2e29dbd09c85ece83cbb72068ee050"</dd>
<dt><code>is_debug</code></dt>
<dd><span class="type">boolean</span> If the engine is a debug or release version</dd>
</dl>

**Examples**

How to retrieve engine information:
```
-- Update version text label so our testers know what version we're running
local engine_info = sys.get_engine_info()
local version_str = "Defold " .. engine_info.version .. "\n" .. engine_info.version_sha1
gui.set_text(gui.get_node("version"), version_str)

```

### sys.get_host_path
*Type:* FUNCTION
Create a path to the host device for unit testing
Useful for saving logs etc during development

**Notes**

- Only enabled in debug builds. In release builds returns the string unchanged

**Parameters**

- `filename` (string) - file to read from

**Returns**

- `host_path` (string) - the path prefixed with the proper host mount

**Examples**

Save data on the host
```
local host_path = sys.get_host_path("logs/test.txt")
sys.save(host_path, mytable)

```

Load data from the host
```
local host_path = sys.get_host_path("logs/test.txt")
local table = sys.load(host_path)

```

### sys.get_ifaddrs
*Type:* FUNCTION
Returns an array of tables with information on network interfaces.

**Returns**

- `ifaddrs` (table) - an array of tables. Each table entry contain the following fields:
<dl>
<dt><code>name</code></dt>
<dd><span class="type">string</span> Interface name</dd>
<dt><code>address</code></dt>
<dd><span class="type">string</span> IP address. <span class="icon-attention"></span> might be <code>nil</code> if not available.</dd>
<dt><code>mac</code></dt>
<dd><span class="type">string</span> Hardware MAC address. <span class="icon-attention"></span> might be nil if not available.</dd>
<dt><code>up</code></dt>
<dd><span class="type">boolean</span> <code>true</code> if the interface is up (available to transmit and receive data), <code>false</code> otherwise.</dd>
<dt><code>running</code></dt>
<dd><span class="type">boolean</span> <code>true</code> if the interface is running, <code>false</code> otherwise.</dd>
</dl>

**Examples**

How to get the IP address of interface "en0":
```
ifaddrs = sys.get_ifaddrs()
for _,interface in ipairs(ifaddrs) do
  if interface.name == "en0" then
    local ip = interface.address
  end
end

```

### sys.get_save_file
*Type:* FUNCTION
The save-file path is operating system specific and is typically located under the user's home directory.
This function will raise a Lua error if unable to get the save file path.

**Notes**

- Setting the environment variable `DM_SAVE_HOME` overrides the default application support path.

**Parameters**

- `application_id` (string) - user defined id of the application, which helps define the location of the save-file
- `file_name` (string) - file-name to get path for

**Returns**

- `path` (string) - path to save-file

**Examples**

Find a path where we can store data:
```
local my_file_path = sys.get_save_file("my_game", "my_file")
-- macOS: /Users/foobar/Library/Application Support/my_game/my_file
print(my_file_path) --> /Users/foobar/Library/Application Support/my_game/my_file

-- Windows: C:\Users\foobar\AppData\Roaming\my_game\my_file
print(my_file_path) --> C:\Users\foobar\AppData\Roaming\my_game\my_file

-- Linux: $XDG_DATA_HOME/my_game/my_file or /home/foobar/.my_game/my_file
-- Linux: Defaults to /home/foobar/.local/share/my_game/my_file if neither exist.
print(my_file_path) --> /home/foobar/.local/share/my_game/my_file

-- Android package name: com.foobar.packagename
print(my_file_path) --> /data/data/0/com.foobar.packagename/files/my_file

-- iOS: my_game.app
print(my_file_path) --> /var/mobile/Containers/Data/Application/123456AB-78CD-90DE-12345678ABCD/my_game/my_file

-- HTML5 path inside the IndexedDB: /data/.my_game/my_file or /.my_game/my_file
print(my_file_path) --> /data/.my_game/my_file

```

### sys.get_sys_info
*Type:* FUNCTION
Returns a table with system information.

**Parameters**

- `options` (table) (optional) - optional options table
- ignore_secure <span class="type">boolean</span> this flag ignores values might be secured by OS e.g. <code>device_ident</code>

**Returns**

- `sys_info` (table) - table with system information in the following fields:
<dl>
<dt><code>device_model</code></dt>
<dd><span class="type">string</span> <span class="icon-ios"></span><span class="icon-android"></span> Only available on iOS and Android.</dd>
<dt><code>manufacturer</code></dt>
<dd><span class="type">string</span> <span class="icon-ios"></span><span class="icon-android"></span> Only available on iOS and Android.</dd>
<dt><code>system_name</code></dt>
<dd><span class="type">string</span> The system name: "Darwin", "Linux", "Windows", "HTML5", "Android" or "iPhone OS"</dd>
<dt><code>system_version</code></dt>
<dd><span class="type">string</span> The system OS version.</dd>
<dt><code>api_version</code></dt>
<dd><span class="type">string</span> The API version on the system.</dd>
<dt><code>language</code></dt>
<dd><span class="type">string</span> Two character ISO-639 format, i.e. "en".</dd>
<dt><code>device_language</code></dt>
<dd><span class="type">string</span> Two character ISO-639 format (i.e. "sr") and, if applicable, followed by a dash (-) and an ISO 15924 script code (i.e. "sr-Cyrl" or "sr-Latn"). Reflects the device preferred language.</dd>
<dt><code>territory</code></dt>
<dd><span class="type">string</span> Two character ISO-3166 format, i.e. "US".</dd>
<dt><code>gmt_offset</code></dt>
<dd><span class="type">number</span> The current offset from GMT (Greenwich Mean Time), in minutes.</dd>
<dt><code>device_ident</code></dt>
<dd><span class="type">string</span> This value secured by OS. <span class="icon-ios"></span> "identifierForVendor" on iOS. <span class="icon-android"></span> "android_id" on Android. On Android, you need to add <code>READ_PHONE_STATE</code> permission to be able to get this data. We don't use this permission in Defold.</dd>
<dt><code>user_agent</code></dt>
<dd><span class="type">string</span> <span class="icon-html5"></span> The HTTP user agent, i.e. "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_3) AppleWebKit/602.4.8 (KHTML, like Gecko) Version/10.0.3 Safari/602.4.8"</dd>
</dl>

**Examples**

How to get system information:
```
local info = sys.get_sys_info()
if info.system_name == "HTML5" then
  -- We are running in a browser.
end

```

### sys.load
*Type:* FUNCTION
If the file exists, it must have been created by sys.save to be loaded.
This function will raise a Lua error if an error occurs while loading the file.

**Parameters**

- `filename` (string) - file to read from

**Returns**

- `loaded` (table) - lua table, which is empty if the file could not be found

**Examples**

Load data that was previously saved, e.g. an earlier game session:
```
local my_file_path = sys.get_save_file("my_game", "my_file")
local my_table = sys.load(my_file_path)
if not next(my_table) then
  -- empty table
end

```

### sys.load_buffer
*Type:* FUNCTION
The sys.load_buffer function will first try to load the resource
from any of the mounted resource locations and return the data if
any matching entries found. If not, the path will be tried
as is from the primary disk on the device.
In order for the engine to include custom resources in the build process, you need
to specify them in the "custom_resources" key in your "game.project" settings file.
You can specify single resource files or directories. If a directory is included
in the resource list, all files and directories in that directory is recursively
included:
For example "main/data/,assets/level_data.json".

**Parameters**

- `path` (string) - the path to load the buffer from

**Returns**

- `buffer` (buffer) - the buffer with data

**Examples**

Load binary data from a custom project resource:
```
local my_buffer = sys.load_buffer("/assets/my_level_data.bin")
local data_str = buffer.get_bytes(my_buffer, "data")
local has_my_header = string.sub(data_str,1,6) == "D3F0LD"

```

Load binary data from non-custom resource files on disk:
```
local asset_1 = sys.load_buffer("folder_next_to_binary/my_level_asset.txt")
local asset_2 = sys.load_buffer("/my/absolute/path")

```

### sys.load_buffer_async
*Type:* FUNCTION
The sys.load_buffer function will first try to load the resource
from any of the mounted resource locations and return the data if
any matching entries found. If not, the path will be tried
as is from the primary disk on the device.
In order for the engine to include custom resources in the build process, you need
to specify them in the "custom_resources" key in your "game.project" settings file.
You can specify single resource files or directories. If a directory is included
in the resource list, all files and directories in that directory is recursively
included:
For example "main/data/,assets/level_data.json".
Note that issuing multiple requests of the same resource will yield
individual buffers per request. There is no implic caching of the buffers
based on request path.

**Parameters**

- `path` (string) - the path to load the buffer from
- `status_callback` (function(self, request_id, result)) - A status callback that will be invoked when a request has been handled, or an error occured. The result is a table containing:
<dl>
<dt><code>status</code></dt>
<dd><span class="type">number</span> The status of the request, supported values are:</dd>
</dl>
<ul>
<li><code>resource.REQUEST_STATUS_FINISHED</code></li>
<li><code>resource.REQUEST_STATUS_ERROR_IO_ERROR</code></li>
<li><code>resource.REQUEST_STATUS_ERROR_NOT_FOUND</code></li>
</ul>
<dl>
<dt><code>buffer</code></dt>
<dd><span class="type">buffer</span> If the request was successfull, this will contain the request payload in a buffer object, and nil otherwise. Make sure to check the status before doing anything with the buffer value!</dd>
</dl>

**Returns**

- `handle` (number) - a handle to the request

**Examples**

Load binary data from a custom project resource and update a texture resource:
```
function my_callback(self, request_id, result)
  if result.status == resource.REQUEST_STATUS_FINISHED then
     resource.set_texture("/my_texture", { ... }, result.buf)
  end
end

local my_request = sys.load_buffer_async("/assets/my_level_data.bin", my_callback)

```

Load binary data from non-custom resource files on disk:
```
function my_callback(self, request_id, result)
  if result.status ~= sys.REQUEST_STATUS_FINISHED then
    -- uh oh! File could not be found, do something graceful
  elseif request_id == self.first_asset then
    -- result.buffer contains data from my_level_asset.bin
  elif request_id == self.second_asset then
    -- result.buffer contains data from 'my_level.bin'
  end
end

function init(self)
  self.first_asset = hash("folder_next_to_binary/my_level_asset.bin")
  self.second_asset = hash("/some_absolute_path/my_level.bin")
  self.first_request = sys.load_buffer_async(self.first_asset, my_callback)
  self.second_request = sys.load_buffer_async(self.second_asset, my_callback)
end

```

### sys.load_resource
*Type:* FUNCTION
Loads a custom resource. Specify the full filename of the resource that you want
to load. When loaded, the file data is returned as a string.
If loading fails, the function returns nil plus the error message.
In order for the engine to include custom resources in the build process, you need
to specify them in the "custom_resources" key in your "game.project" settings file.
You can specify single resource files or directories. If a directory is included
in the resource list, all files and directories in that directory is recursively
included:
For example "main/data/,assets/level_data.json".

**Parameters**

- `filename` (string) - resource to load, full path

**Returns**

- `data` (string | nil) - loaded data, or <code>nil</code> if the resource could not be loaded
- `error` (string | nil) - the error message, or <code>nil</code> if no error occurred

**Examples**

```
-- Load level data into a string
local data, error = sys.load_resource("/assets/level_data.json")
-- Decode json string to a Lua table
if data then
  local data_table = json.decode(data)
  pprint(data_table)
else
  print(error)
end

```

### sys.NETWORK_CONNECTED
*Type:* CONSTANT
network connected through other, non cellular, connection

### sys.NETWORK_CONNECTED_CELLULAR
*Type:* CONSTANT
network connected through mobile cellular

### sys.NETWORK_DISCONNECTED
*Type:* CONSTANT
no network connection found

### sys.open_url
*Type:* FUNCTION
Open URL in default application, typically a browser

**Parameters**

- `url` (string) - url to open
- `attributes` (table) (optional) - table with attributes
<code>target</code>
- <span class="type">string</span> <span class="icon-html5"></span>: Optional. Specifies the target attribute or the name of the window. The following values are supported:
- <code>_self</code> - (default value) URL replaces the current page.
- <code>_blank</code> - URL is loaded into a new window, or tab.
- <code>_parent</code> - URL is loaded into the parent frame.
- <code>_top</code> - URL replaces any framesets that may be loaded.
- <code>name</code> - The name of the window (Note: the name does not specify the title of the new window).

**Returns**

- `success` (boolean) - a boolean indicating if the url could be opened or not

**Examples**

Open an URL:
```
local success = sys.open_url("http://www.defold.com", {target = "_blank"})
if not success then
  -- could not open the url...
end

```

### sys.reboot
*Type:* FUNCTION
Reboots the game engine with a specified set of arguments.
Arguments will be translated into command line arguments. Calling reboot
function is equivalent to starting the engine with the same arguments.
On startup the engine reads configuration from "game.project" in the
project root.

**Parameters**

- `arg1` (string) (optional) - argument 1
- `arg2` (string) (optional) - argument 2
- `arg3` (string) (optional) - argument 3
- `arg4` (string) (optional) - argument 4
- `arg5` (string) (optional) - argument 5
- `arg6` (string) (optional) - argument 6

**Examples**

How to reboot engine with a specific bootstrap collection.
```
local arg1 = '--config=bootstrap.main_collection=/my.collectionc'
local arg2 = 'build/game.projectc'
sys.reboot(arg1, arg2)

```

### sys.REQUEST_STATUS_ERROR_IO_ERROR
*Type:* CONSTANT
an asyncronous request is unable to read the resource

### sys.REQUEST_STATUS_ERROR_NOT_FOUND
*Type:* CONSTANT
an asyncronous request is unable to locate the resource

### sys.REQUEST_STATUS_FINISHED
*Type:* CONSTANT
an asyncronous request has finished successfully

### sys.save
*Type:* FUNCTION
The table can later be loaded by sys.load.
Use sys.get_save_file to obtain a valid location for the file.
Internally, this function uses a workspace buffer sized output file sized 512kb.
This size reflects the output file size which must not exceed this limit.
Additionally, the total number of rows that any one table may contain is limited to 65536
(i.e. a 16 bit range). When tables are used to represent arrays, the values of
keys are permitted to fall within a 32 bit range, supporting sparse arrays, however
the limit on the total number of rows remains in effect.
This function will raise a Lua error if an error occurs while saving the table.

**Parameters**

- `filename` (string) - file to write to
- `table` (table) - lua table to save

**Examples**

Save data:
```
local my_table = {}
table.insert(my_table, "my_value")
local my_file_path = sys.get_save_file("my_game", "my_file")
sys.save(my_file_path, my_table)

```

### sys.serialize
*Type:* FUNCTION
The buffer can later deserialized by sys.deserialize.
This function has all the same limitations as sys.save.
This function will raise a Lua error if an error occurs while serializing the table.

**Parameters**

- `table` (table) - lua table to serialize

**Returns**

- `buffer` (string) - serialized data buffer

**Examples**

Serialize table:
```
local my_table = {}
table.insert(my_table, "my_value")
local buffer = sys.serialize(my_table)

```

### sys.set_connectivity_host
*Type:* FUNCTION
Sets the host that is used to check for network connectivity against.

**Parameters**

- `host` (string) - hostname to check against

**Examples**

```
sys.set_connectivity_host("www.google.com")

```

### sys.set_engine_throttle
*Type:* FUNCTION
Enables engine throttling.

**Notes**

- It will automatically wake up on input events
- It will automatically throttle again after the cooldown period
- It skips entire update+render loop on the main thread. E.g loading of assets, callbacks from threads (http)
- On threaded systems, Sound will continue to play any started non-streaming sounds. (e.g. looping background music)

**Parameters**

- `enable` (boolean) - true if throttling should be enabled
- `cooldown` (number) - the time period to do update + render for (seconds)

**Examples**

Disable throttling
```
sys.set_engine_throttle(false)

```

Enable throttling
```
sys.set_engine_throttle(true, 1.5)

```

### sys.set_error_handler
*Type:* FUNCTION
Set the Lua error handler function.
The error handler is a function which is called whenever a lua runtime error occurs.

**Parameters**

- `error_handler` (function(source, message, traceback)) - the function to be called on error
<dl>
<dt><code>source</code></dt>
<dd><span class="type">string</span> The runtime context of the error. Currently, this is always <code>"lua"</code>.</dd>
<dt><code>message</code></dt>
<dd><span class="type">string</span> The source file, line number and error message.</dd>
<dt><code>traceback</code></dt>
<dd><span class="type">string</span> The stack traceback.</dd>
</dl>

**Examples**

Install error handler that just prints the errors
```
local function my_error_handler(source, message, traceback)
  print(source)    --> lua
  print(message)   --> main/my.script:10: attempt to perform arithmetic on a string value
  print(traceback) --> stack traceback:
                   -->         main/test.script:10: in function 'boom'
                   -->         main/test.script:15: in function
end

local function boom()
  return 10 + "string"
end

function init(self)
  sys.set_error_handler(my_error_handler)
  boom()
end

```

### sys.set_render_enable
*Type:* FUNCTION
Disables rendering

**Notes**

- It will will leave the back buffer as-is

**Parameters**

- `enable` (boolean) - true if throttling should be enabled

**Examples**

Disable rendering
```
sys.set_render_enable(false)

```

### sys.set_update_frequency
*Type:* FUNCTION
Set game update-frequency (frame cap). This option is equivalent to display.update_frequency in
the "game.project" settings but set in run-time. If Vsync checked in "game.project", the rate will
be clamped to a swap interval that matches any detected main monitor refresh rate. If Vsync is
unchecked the engine will try to respect the rate in software using timers. There is no
guarantee that the frame cap will be achieved depending on platform specifics and hardware settings.

**Parameters**

- `frequency` (number) - target frequency. 60 for 60 fps

**Examples**

Setting the update frequency to 60 frames per second
```
sys.set_update_frequency(60)

```

### sys.set_vsync_swap_interval
*Type:* FUNCTION
Set the vsync swap interval. The interval with which to swap the front and back buffers
in sync with vertical blanks (v-blank), the hardware event where the screen image is updated
with data from the front buffer. A value of 1 swaps the buffers at every v-blank, a value of
2 swaps the buffers every other v-blank and so on. A value of 0 disables waiting for v-blank
before swapping the buffers. Default value is 1.
When setting the swap interval to 0 and having vsync disabled in
"game.project", the engine will try to respect the set frame cap value from
"game.project" in software instead.
This setting may be overridden by driver settings.

**Parameters**

- `swap_interval` (number) - target swap interval.

**Examples**

Setting the swap intervall to swap every v-blank
```
sys.set_vsync_swap_interval(1)

```

### toggle_physics_debug
*Type:* MESSAGE
Toggles the on-screen physics visual debugging mode which is very useful for
tracking down issues related to physics. This mode visualizes
all collision object shapes and normals at detected contact points. Toggling
this mode on is equal to setting physics.debug in the "game.project" settings,
but set in run-time.
This message can only be sent to the designated @system socket.

**Examples**

```
msg.post("@system:", "toggle_physics_debug")

```

### toggle_profile
*Type:* MESSAGE
Toggles the on-screen profiler.
The profiler is a real-time tool that shows the numbers of milliseconds spent
in each scope per frame as well as counters. The profiler is very useful for
tracking down performance and resource problems.
In addition to the on-screen profiler, Defold includes a web-based profiler that
allows you to sample a series of data points and then analyze them in detail.
The web profiler is available at http://:8002 where  is
the IP address of the device you are running your game on.
This message can only be sent to the designated @system socket.

**Examples**

```
msg.post("@system:", "toggle_profile")

```

<!-- table-lua -->

# Table {#apis:table-lua}

**Namespace:** `table`
**Language:** Lua
**Type:** Defold Lua
**File:** `lua_table.doc_h`
**Source:** `engine/lua/src/lua_table.doc_h`

Documentation for the Lua table standard library.

From [Lua 5.1 Reference Manual](https://www.lua.org/manual/5.1/)
by Roberto Ierusalimschy, Luiz Henrique de Figueiredo, Waldemar Celes.

Copyright  2006-2012 Lua.org, PUC-Rio.

Freely available under the terms of the [Lua license](https://www.lua.org/license.html).

## API

### table.concat
*Type:* FUNCTION
Given an array where all elements are strings or numbers,
returns table[i]..sep..table[i+1] ... sep..table[j].
The default value for sep is the empty string,
the default for i is 1,
and the default for j is the length of the table.
If i is greater than j, returns the empty string.

**Parameters**

- `table` (table)
- `sep` (string) (optional)
- `i` (number) (optional)
- `j` (number) (optional)

### table.insert
*Type:* FUNCTION
Inserts element value at position pos in table,
shifting up other elements to open space, if necessary.
The default value for pos is n+1,
where n is the length of the table ,
so that a call table.insert(t,x) inserts x at the end
of table t.

**Parameters**

- `table` (table)
- `pos` (number) (optional)
- `value` (any)

### table.maxn
*Type:* FUNCTION
Returns the largest positive numerical index of the given table,
or zero if the table has no positive numerical indices.
(To do its job this function does a linear traversal of
the whole table.)

**Parameters**

- `table` (table)

### table.remove
*Type:* FUNCTION
Removes from table the element at position pos,
shifting down other elements to close the space, if necessary.
Returns the value of the removed element.
The default value for pos is n,
where n is the length of the table,
so that a call table.remove(t) removes the last element
of table t.

**Parameters**

- `table` (table)
- `pos` (number) (optional)

### table.sort
*Type:* FUNCTION
Sorts table elements in a given order, in-place,
from table[1] to table[n],
where n is the length of the table.
If comp is given,
then it must be a function that receives two table elements,
and returns true
when the first is less than the second
(so that not comp(a[i+1],a[i]) will be true after the sort).
If comp is not given,
then the standard Lua operator  is used instead.
The sort algorithm is not stable;
that is, elements considered equal by the given order
may have their relative positions changed by the sort.

**Parameters**

- `table` (table)
- `comp` (function) (optional)

<!-- tilemap-lua -->

# Tilemap {#apis:tilemap-lua}

**Namespace:** `tilemap`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_tilemap.cpp`
**Source:** `engine/gamesys/src/gamesys/scripts/script_tilemap.cpp`

Functions and messages used to manipulate tile map components.

## API

### material
*Type:* PROPERTY
The material used when rendering the tile map. The type of the property is hash.

**Examples**

How to set material using a script property (see resource.material)
```
go.property("my_material", resource.material("/material.material"))
function init(self)
  go.set("#tilemap", "material", self.my_material)
end

```

### tile_source
*Type:* PROPERTY
The tile source used when rendering the tile map. The type of the property is hash.

**Examples**

How to set tile source using a script property (see resource.tile_source)
```
go.property("my_tile_source", resource.tile_source("/tilesource.tilesource"))
function init(self)
  go.set("#tilemap", "tile_source", self.my_tile_source)
end

```

### tilemap.get_bounds
*Type:* FUNCTION
Get the bounds for a tile map. This function returns multiple values:
The lower left corner index x and y coordinates (1-indexed),
the tile map width and the tile map height.
The resulting values take all tile map layers into account, meaning that
the bounds are calculated as if all layers were collapsed into one.

**Parameters**

- `url` (string | hash | url) - the tile map

**Returns**

- `x` (number) - x coordinate of the bottom left corner
- `y` (number) - y coordinate of the bottom left corner
- `w` (number) - number of columns (width) in the tile map
- `h` (number) - number of rows (height) in the tile map

**Examples**

```
-- get the level bounds.
local x, y, w, h = tilemap.get_bounds("/level#tilemap")

```

### tilemap.get_tile
*Type:* FUNCTION
Get the tile set at the specified position in the tilemap.
The position is identified by the tile index starting at origin
with index 1, 1. (see tilemap.set_tile())
Which tile map and layer to query is identified by the URL and the
layer name parameters.

**Parameters**

- `url` (string | hash | url) - the tile map
- `layer` (string | hash) - name of the layer for the tile
- `x` (number) - x-coordinate of the tile
- `y` (number) - y-coordinate of the tile

**Returns**

- `tile` (number) - index of the tile

**Examples**

```
-- get the tile under the player.
local tileno = tilemap.get_tile("/level#tilemap", "foreground", self.player_x, self.player_y)

```

### tilemap.get_tile_info
*Type:* FUNCTION
Get the tile information at the specified position in the tilemap.
The position is identified by the tile index starting at origin
with index 1, 1. (see tilemap.set_tile())
Which tile map and layer to query is identified by the URL and the
layer name parameters.

**Parameters**

- `url` (string | hash | url) - the tile map
- `layer` (string | hash) - name of the layer for the tile
- `x` (number) - x-coordinate of the tile
- `y` (number) - y-coordinate of the tile

**Returns**

- `tile_info` (table) - index of the tile

**Examples**

```
-- get the tile under the player.
local tile_info = tilemap.get_tile_info("/level#tilemap", "foreground", self.player_x, self.player_y)
pprint(tile_info)
-- {
--    index = 0,
--    h_flip = false,
--    v_flip = true,
--    rotate_90 = false
-- }

```

### tilemap.get_tiles
*Type:* FUNCTION
Retrieves all the tiles for the specified layer in the tilemap.
It returns a table of rows where the keys are the
tile positions (see tilemap.get_bounds()).
You can iterate it using tiles[row_index][column_index].

**Parameters**

- `url` (string | hash | url) - the tilemap
- `layer` (string | hash) - the name of the layer for the tiles

**Returns**

- `tiles` (table) - a table of rows representing the layer

**Examples**

```
local left, bottom, columns_count, rows_count = tilemap.get_bounds("#tilemap")
local tiles = tilemap.get_tiles("#tilemap", "layer")
local tile, count = 0, 0
for row_index = bottom, bottom + rows_count - 1 do
    for column_index = left, left + columns_count - 1 do
        tile = tiles[row_index][column_index]
        count = count + 1
    end
end

```

### tilemap.H_FLIP
*Type:* CONSTANT
flip tile horizontally

### tilemap.ROTATE_180
*Type:* CONSTANT
rotate tile 180 degrees clockwise

### tilemap.ROTATE_270
*Type:* CONSTANT
rotate tile 270 degrees clockwise

### tilemap.ROTATE_90
*Type:* CONSTANT
rotate tile 90 degrees clockwise

### tilemap.set_tile
*Type:* FUNCTION
Replace a tile in a tile map with a new tile.
The coordinates of the tiles are indexed so that the "first" tile just
above and to the right of origin has coordinates 1,1.
Tiles to the left of and below origin are indexed 0, -1, -2 and so forth.

+-------+-------+------+------+
|  0,3  |  1,3  | 2,3  | 3,3  |
+-------+-------+------+------+
|  0,2  |  1,2  | 2,2  | 3,2  |
+-------+-------+------+------+
|  0,1  |  1,1  | 2,1  | 3,1  |
+-------O-------+------+------+
|  0,0  |  1,0  | 2,0  | 3,0  |
+-------+-------+------+------+

The coordinates must be within the bounds of the tile map as it were created.
That is, it is not possible to extend the size of a tile map by setting tiles outside the edges.
To clear a tile, set the tile to number 0. Which tile map and layer to manipulate is identified by the URL and the layer name parameters.
Transform bitmask is arithmetic sum of one or both FLIP constants (tilemap.H_FLIP, tilemap.V_FLIP) and/or one of ROTATION constants
(tilemap.ROTATE_90, tilemap.ROTATE_180, tilemap.ROTATE_270).
Flip always applies before rotation (clockwise).

**Parameters**

- `url` (string | hash | url) - the tile map
- `layer` (string | hash) - name of the layer for the tile
- `x` (number) - x-coordinate of the tile
- `y` (number) - y-coordinate of the tile
- `tile` (number) - index of new tile to set. 0 resets the cell
- `transform_bitmask` (number) (optional) - optional flip and/or rotation should be applied to the tile

**Examples**

```
-- Clear the tile under the player.
tilemap.set_tile("/level#tilemap", "foreground", self.player_x, self.player_y, 0)

-- Set tile with different combination of flip and rotation
tilemap.set_tile("#tilemap", "layer1", x, y, 0, tilemap.H_FLIP + tilemap.V_FLIP + tilemap.ROTATE_90)
tilemap.set_tile("#tilemap", "layer1", x, y, 0, tilemap.H_FLIP + tilemap.ROTATE_270)
tilemap.set_tile("#tilemap", "layer1", x, y, 0, tilemap.V_FLIP + tilemap.H_FLIP)
tilemap.set_tile("#tilemap", "layer1", x, y, 0, tilemap.ROTATE_180)

```

### tilemap.set_visible
*Type:* FUNCTION
Sets the visibility of the tilemap layer

**Parameters**

- `url` (string | hash | url) - the tile map
- `layer` (string | hash) - name of the layer for the tile
- `visible` (boolean) - should the layer be visible

**Examples**

```
-- Disable rendering of the layer
tilemap.set_visible("/level#tilemap", "foreground", false)

```

### tilemap.V_FLIP
*Type:* CONSTANT
flip tile vertically

<!-- timer-lua -->

# Timer {#apis:timer-lua}

**Namespace:** `timer`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_timer.cpp`
**Source:** `engine/script/src/script_timer.cpp`

Timers allow you to set a delay and a callback to be called when the timer completes.

The timers created with this API are updated with the collection timer where they
are created. If you pause or speed up the collection (using `set_time_step`) it will
also affect the new timer.

## API

### timer.cancel
*Type:* FUNCTION
You may cancel a timer from inside a timer callback.
Cancelling a timer that is already executed or cancelled is safe.

**Parameters**

- `handle` (number) - the timer handle returned by timer.delay()

**Returns**

- `true` (boolean) - if the timer was active, false if the timer is already cancelled / complete

**Examples**

```
self.handle = timer.delay(1, true, function() print("print every second") end)
...
local result = timer.cancel(self.handle)
if not result then
   print("the timer is already cancelled")
end

```

### timer.delay
*Type:* FUNCTION
Adds a timer and returns a unique handle.
You may create more timers from inside a timer callback.
Using a delay of 0 will result in a timer that triggers at the next frame just before
script update functions.
If you want a timer that triggers on each frame, set delay to 0.0f and repeat to true.
Timers created within a script will automatically die when the script is deleted.

**Parameters**

- `delay` (number) - time interval in seconds
- `repeating` (boolean) - true = repeat timer until cancel, false = one-shot timer
- `callback` (function(self, handle, time_elapsed)) - timer callback function
<dl>
<dt><code>self</code></dt>
<dd><span class="type">object</span> The current object</dd>
<dt><code>handle</code></dt>
<dd><span class="type">number</span> The handle of the timer</dd>
<dt><code>time_elapsed</code></dt>
<dd><span class="type">number</span> The elapsed time - on first trigger it is time since timer.delay call, otherwise time since last trigger</dd>
</dl>

**Returns**

- `handle` (number) - identifier for the create timer, returns timer.INVALID_TIMER_HANDLE if the timer can not be created

**Examples**

A simple one-shot timer
```
timer.delay(1, false, function() print("print in one second") end)

```

Repetitive timer which canceled after 10 calls
```
local function call_every_second(self, handle, time_elapsed)
  self.counter = self.counter + 1
  print("Call #", self.counter)
  if self.counter == 10 then
    timer.cancel(handle) -- cancel timer after 10 calls
  end
end

self.counter = 0
timer.delay(1, true, call_every_second)

```

### timer.get_info
*Type:* FUNCTION
Get information about timer.

**Parameters**

- `handle` (number) - the timer handle returned by timer.delay()

**Returns**

- `data` (table | nil) - table or <code>nil</code> if timer is cancelled/completed. table with data in the following fields:
<dl>
<dt><code>time_remaining</code></dt>
<dd><span class="type">number</span> Time remaining until the next time a timer.delay() fires.</dd>
<dt><code>delay</code></dt>
<dd><span class="type">number</span> Time interval.</dd>
<dt><code>repeating</code></dt>
<dd><span class="type">boolean</span> true = repeat timer until cancel, false = one-shot timer.</dd>
</dl>

**Examples**

```
self.handle = timer.delay(1, true, function() print("print every second") end)
...
local result = timer.get_info(self.handle)
if not result then
   print("the timer is already cancelled or complete")
else
   pprint(result) -- delay, time_remaining, repeating
end

```

### timer.INVALID_TIMER_HANDLE
*Type:* CONSTANT
Indicates an invalid timer handle

### timer.trigger
*Type:* FUNCTION
Manual triggering a callback for a timer.

**Parameters**

- `handle` (number) - the timer handle returned by timer.delay()

**Returns**

- `true` (boolean) - if the timer was active, false if the timer is already cancelled / complete

**Examples**

```
self.handle = timer.delay(1, true, function() print("print every second or manually by timer.trigger") end)
...
local result = timer.trigger(self.handle)
if not result then
   print("the timer is already cancelled or complete")
end

```

<!-- types-lua -->

# Types {#apis:types-lua}

**Namespace:** `types`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_types.cpp`
**Source:** `engine/script/src/script_types.cpp`

Functions for checking Defold userdata types.

## API

### types.is_hash
*Type:* FUNCTION
Check if passed type is hash.

**Parameters**

- `var` (any) - Variable to check type

**Returns**

- `result` (boolean) - True if passed type is hash

### types.is_matrix4
*Type:* FUNCTION
Check if passed type is matrix4.

**Parameters**

- `var` (any) - Variable to check type

**Returns**

- `result` (boolean) - True if passed type is matrix4

### types.is_quat
*Type:* FUNCTION
Check if passed type is quaternion.

**Parameters**

- `var` (any) - Variable to check type

**Returns**

- `result` (boolean) - True if passed type is quaternion

### types.is_url
*Type:* FUNCTION
Check if passed type is URL.

**Parameters**

- `var` (any) - Variable to check type

**Returns**

- `result` (boolean) - True if passed type is URL

### types.is_vector
*Type:* FUNCTION
Check if passed type is vector.

**Notes**

- 'vector3' and 'vector4' types is not a 'vector' type under the hood.
So if called `types.is_vector(vmath.vector3())` it returns 'false'

**Parameters**

- `var` (any) - Variable to check type

**Returns**

- `result` (boolean) - True if passed type is vector

### types.is_vector3
*Type:* FUNCTION
Check if passed type is vector3.

**Parameters**

- `var` (any) - Variable to check type

**Returns**

- `result` (boolean) - True if passed type is vector3

### types.is_vector4
*Type:* FUNCTION
Check if passed type is vector4.

**Parameters**

- `var` (any) - Variable to check type

**Returns**

- `result` (boolean) - True if passed type is vector4

<!-- vmath-lua -->

# Vector math {#apis:vmath-lua}

**Namespace:** `vmath`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_vmath.cpp`
**Source:** `engine/script/src/script_vmath.cpp`

Functions for mathematical operations on vectors, matrices and quaternions.

- The vector types (`vmath.vector3` and `vmath.vector4`) supports addition and subtraction
  with vectors of the same type. Vectors can be negated and multiplied (scaled) or divided by numbers.
- The quaternion type (`vmath.quat`) supports multiplication with other quaternions.
- The matrix type (`vmath.matrix4`) can be multiplied with numbers, other matrices
  and `vmath.vector4` values.
- All types performs equality comparison by each component value.

The following components are available for the various types:

vector3
: `x`, `y` and `z`. Example: `v.y`

vector4
: `x`, `y`, `z`, and `w`. Example: `v.w`

quaternion
: `x`, `y`, `z`, and `w`. Example: `q.w`

matrix4
: `m00` to `m33` where the first number is the row (starting from 0) and the second
number is the column. Columns can be accessed with `c0` to `c3`, returning a `vector4`.
Example: `m.m21` which is equal to `m.c1.z`

vector
: indexed by number 1 to the vector length. Example: `v[3]`

## API

### vmath.clamp
*Type:* FUNCTION
Clamp input value to be in range of [min, max]. In case if input value has vector3|vector4 type
return new vector3|vector4 with clamped value at every vector's element.
Min/max arguments can be vector3|vector4. In that case clamp excuted per every vector's element

**Parameters**

- `value` (number | vector3 | vector4) - Input value or vector of values
- `min` (number | vector3 | vector4) - Min value(s) border
- `max` (number | vector3 | vector4) - Max value(s) border

**Returns**

- `clamped_value` (number | vector3 | vector4) - Clamped value or vector

**Examples**

```
local value1 = 56
print(vmath.clamp(value1, 89, 134)) -> 89
local v2 = vmath.vector3(190, 190, -10)
print(vmath.clamp(v2, -50, 150)) -> vmath.vector3(150, 150, -10)
local v3 = vmath.vector4(30, -30, 45, 1)
print(vmath.clamp(v3, 0, 20)) -> vmath.vector4(20, 0, 20, 1)

local min_v = vmath.vector4(0, -10, -10, 1)
print(vmath.clamp(v3, min_v, 20)) -> vmath.vector4(20, -10, 20, 1)

```

### vmath.conj
*Type:* FUNCTION
Calculates the conjugate of a quaternion. The result is a
quaternion with the same magnitudes but with the sign of
the imaginary (vector) parts changed:
q* = [w, -v]

**Parameters**

- `q1` (quaternion) - quaternion of which to calculate the conjugate

**Returns**

- `q` (quaternion) - the conjugate

**Examples**

```
local quat = vmath.quat(1, 2, 3, 4)
print(vmath.conj(quat)) --> vmath.quat(-1, -2, -3, 4)

```

### vmath.cross
*Type:* FUNCTION
Given two linearly independent vectors P and Q, the cross product,
P  Q, is a vector that is perpendicular to both P and Q and
therefore normal to the plane containing them.
If the two vectors have the same direction (or have the exact
opposite direction from one another, i.e. are not linearly independent)
or if either one has zero length, then their cross product is zero.

**Parameters**

- `v1` (vector3) - first vector
- `v2` (vector3) - second vector

**Returns**

- `v` (vector3) - a new vector representing the cross product

**Examples**

```
local vec1 = vmath.vector3(1, 0, 0)
local vec2 = vmath.vector3(0, 1, 0)
print(vmath.cross(vec1, vec2)) --> vmath.vector3(0, 0, 1)
local vec3 = vmath.vector3(-1, 0, 0)
print(vmath.cross(vec1, vec3)) --> vmath.vector3(0, -0, 0)

```

### vmath.dot
*Type:* FUNCTION
The returned value is a scalar defined as:
P  Q = |P| |Q| cos 
where  is the angle between the vectors P and Q.

If the dot product is positive then the angle between the vectors is below 90 degrees.
If the dot product is zero the vectors are perpendicular (at right-angles to each other).
If the dot product is negative then the angle between the vectors is more than 90 degrees.

**Parameters**

- `v1` (vector3 | vector4) - first vector
- `v2` (vector3 | vector4) - second vector

**Returns**

- `n` (number) - dot product

**Examples**

```
if vmath.dot(vector1, vector2) == 0 then
    -- The two vectors are perpendicular (at right-angles to each other)
    ...
end

```

### vmath.euler_to_quat
*Type:* FUNCTION
Converts euler angles (x, y, z) in degrees into a quaternion
The error is guaranteed to be less than 0.001.
If the first argument is vector3, its values are used as x, y, z angles.

**Parameters**

- `x` (number | vector3) - rotation around x-axis in degrees or vector3 with euler angles in degrees
- `y` (number) - rotation around y-axis in degrees
- `z` (number) - rotation around z-axis in degrees

**Returns**

- `q` (quaternion) - quaternion describing an equivalent rotation (231 (YZX) rotation sequence)

**Examples**

```
local q = vmath.euler_to_quat(0, 45, 90)
print(q) --> vmath.quat(0.27059805393219, 0.27059805393219, 0.65328145027161, 0.65328145027161)

local v = vmath.vector3(0, 0, 90)
print(vmath.euler_to_quat(v)) --> vmath.quat(0, 0, 0.70710676908493, 0.70710676908493)

```

### vmath.inv
*Type:* FUNCTION
The resulting matrix is the inverse of the supplied matrix.
 For ortho-normal matrices, e.g. regular object transformation,
use vmath.ortho_inv() instead.
The specialized inverse for ortho-normalized matrices is much faster
than the general inverse.

**Parameters**

- `m1` (matrix4) - matrix to invert

**Returns**

- `m` (matrix4) - inverse of the supplied matrix

**Examples**

```
local mat1 = vmath.matrix4_rotation_z(3.141592653)
local mat2 = vmath.inv(mat1)
-- M * inv(M) = identity matrix
print(mat1 * mat2) --> vmath.matrix4(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)

```

### vmath.length
*Type:* FUNCTION
Returns the length of the supplied vector or quaternion.
If you are comparing the lengths of vectors or quaternions, you should compare
the length squared instead as it is slightly more efficient to calculate
(it eliminates a square root calculation).

**Parameters**

- `v` (vector3 | vector4 | quaternion) - value of which to calculate the length

**Returns**

- `n` (number) - length

**Examples**

```
if vmath.length(self.velocity) < max_velocity then
    -- The speed (velocity vector) is below max.

    -- TODO: max_velocity can be expressed as squared
    -- so we can compare with length_sqr() instead.
    ...
end

```

### vmath.length_sqr
*Type:* FUNCTION
Returns the squared length of the supplied vector or quaternion.

**Parameters**

- `v` (vector3 | vector4 | quaternion) - value of which to calculate the squared length

**Returns**

- `n` (number) - squared length

**Examples**

```
if vmath.length_sqr(vector1) < vmath.length_sqr(vector2) then
    -- Vector 1 has less magnitude than vector 2
    ...
end

```

### vmath.lerp
*Type:* FUNCTION
Linearly interpolate between two vectors. The function
treats the vectors as positions and interpolates between
the positions in a straight line. Lerp is useful to describe
transitions from one place to another over time.
 The function does not clamp t between 0 and 1.

**Parameters**

- `t` (number) - interpolation parameter, 0-1
- `v1` (vector3 | vector4) - vector to lerp from
- `v2` (vector3 | vector4) - vector to lerp to

**Returns**

- `v` (vector3 | vector4) - the lerped vector

**Examples**

```
function init(self)
    self.t = 0
end

function update(self, dt)
    self.t = self.t + dt
    if self.t <= 1 then
        local startpos = vmath.vector3(0, 600, 0)
        local endpos = vmath.vector3(600, 0, 0)
        local pos = vmath.lerp(self.t, startpos, endpos)
        go.set_position(pos, "go")
    end
end

```

### vmath.lerp
*Type:* FUNCTION
Linearly interpolate between two quaternions. Linear
interpolation of rotations are only useful for small
rotations. For interpolations of arbitrary rotations,
vmath.slerp yields much better results.
 The function does not clamp t between 0 and 1.

**Parameters**

- `t` (number) - interpolation parameter, 0-1
- `q1` (quaternion) - quaternion to lerp from
- `q2` (quaternion) - quaternion to lerp to

**Returns**

- `q` (quaternion) - the lerped quaternion

**Examples**

```
function init(self)
    self.t = 0
end

function update(self, dt)
    self.t = self.t + dt
    if self.t <= 1 then
        local startrot = vmath.quat_rotation_z(0)
        local endrot = vmath.quat_rotation_z(3.141592653)
        local rot = vmath.lerp(self.t, startrot, endrot)
        go.set_rotation(rot, "go")
    end
end

```

### vmath.lerp
*Type:* FUNCTION
Linearly interpolate between two values. Lerp is useful
to describe transitions from one value to another over time.
 The function does not clamp t between 0 and 1.

**Parameters**

- `t` (number) - interpolation parameter, 0-1
- `n1` (number) - number to lerp from
- `n2` (number) - number to lerp to

**Returns**

- `n` (number) - the lerped number

**Examples**

```
function init(self)
    self.t = 0
end

function update(self, dt)
    self.t = self.t + dt
    if self.t <= 1 then
        local startx = 0
        local endx = 600
        local x = vmath.lerp(self.t, startx, endx)
        go.set_position(vmath.vector3(x, 100, 0), "go")
    end
end

```

### vmath.matrix4
*Type:* FUNCTION
The resulting identity matrix describes a transform with
no translation or rotation.

**Returns**

- `m` (matrix4) - identity matrix

**Examples**

```
local mat = vmath.matrix4()
print(mat) --> vmath.matrix4(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)
-- get column 0:
print(mat.c0) --> vmath.vector4(1, 0, 0, 0)
-- get the value in row 3 and column 2:
print(mat.m32) --> 0

```

### vmath.matrix4
*Type:* FUNCTION
Creates a new matrix with all components set to the
corresponding values from the supplied matrix. I.e.
the function creates a copy of the given matrix.

**Parameters**

- `m1` (matrix4) - existing matrix

**Returns**

- `m` (matrix4) - matrix which is a copy of the specified matrix

**Examples**

```
local mat1 = vmath.matrix4_rotation_x(3.141592653)
local mat2 = vmath.matrix4(mat1)
if mat1 == mat2 then
    -- yes, they are equal
    print(mat2) --> vmath.matrix4(1, 0, 0, 0, 0, -1, 8.7422776573476e-08, 0, 0, -8.7422776573476e-08, -1, 0, 0, 0, 0, 1)
end

```

### vmath.matrix4_axis_angle
*Type:* FUNCTION
The resulting matrix describes a rotation around the axis by the specified angle.

**Parameters**

- `v` (vector3) - axis
- `angle` (number) - angle in radians

**Returns**

- `m` (matrix4) - matrix represented by axis and angle

**Examples**

```
local vec = vmath.vector4(1, 1, 0, 0)
local axis = vmath.vector3(0, 0, 1) -- z-axis
local mat = vmath.matrix4_axis_angle(axis, 3.141592653)
print(mat * vec) --> vmath.vector4(-0.99999994039536, -1.0000001192093, 0, 0)

```

### vmath.matrix4_compose
*Type:* FUNCTION
Creates a new matrix constructed from separate
translation vector, roation quaternion and scale vector

**Parameters**

- `translation` (vector3 | vector4) - translation
- `rotation` (quaternion) - rotation
- `scale` (vector3) - scale

**Returns**

- `matrix` (matrix4) - new matrix4

**Examples**

```
local translation = vmath.vector3(103, -95, 14)
local quat = vmath.quat(1, 2, 3, 4)
local scale = vmath.vector3(1, 0.5, 0.5)
local result = vmath.matrix4_compose(translation, quat, scale)
print(result) --> vmath.matrix4(-25, -10, 11, 103, 28, -9.5, 2, -95, -10, 10, -4.5, 14, 0, 0, 0, 1)

```

### vmath.matrix4_frustum
*Type:* FUNCTION
Constructs a frustum matrix from the given values. The left, right,
top and bottom coordinates of the view cone are expressed as distances
from the center of the near clipping plane. The near and far coordinates
are expressed as distances from the tip of the view frustum cone.

**Parameters**

- `left` (number) - coordinate for left clipping plane
- `right` (number) - coordinate for right clipping plane
- `bottom` (number) - coordinate for bottom clipping plane
- `top` (number) - coordinate for top clipping plane
- `near` (number) - coordinate for near clipping plane
- `far` (number) - coordinate for far clipping plane

**Returns**

- `m` (matrix4) - matrix representing the frustum

**Examples**

```
-- Construct a projection frustum with a vertical and horizontal
-- FOV of 45 degrees. Useful for rendering a square view.
local proj = vmath.matrix4_frustum(-1, 1, -1, 1, 1, 1000)
render.set_projection(proj)

```

### vmath.matrix4_look_at
*Type:* FUNCTION
The resulting matrix is created from the supplied look-at parameters.
This is useful for constructing a view matrix for a camera or
rendering in general.

**Parameters**

- `eye` (vector3) - eye position
- `look_at` (vector3) - look-at position
- `up` (vector3) - up vector

**Returns**

- `m` (matrix4) - look-at matrix

**Examples**

```
-- Set up a perspective camera at z 100 with 45 degrees (pi/2) FOV
-- Aspect ratio 4:3
local eye = vmath.vector3(0, 0, 100)
local look_at = vmath.vector3(0, 0, 0)
local up = vmath.vector3(0, 1, 0)
local view = vmath.matrix4_look_at(eye, look_at, up)
render.set_view(view)
local proj = vmath.matrix4_perspective(3.141592/2, 4/3, 1, 1000)
render.set_projection(proj)

```

### vmath.matrix4_orthographic
*Type:* FUNCTION
Creates an orthographic projection matrix.
This is useful to construct a projection matrix for a camera or rendering in general.

**Parameters**

- `left` (number) - coordinate for left clipping plane
- `right` (number) - coordinate for right clipping plane
- `bottom` (number) - coordinate for bottom clipping plane
- `top` (number) - coordinate for top clipping plane
- `near` (number) - coordinate for near clipping plane
- `far` (number) - coordinate for far clipping plane

**Returns**

- `m` (matrix4) - orthographic projection matrix

**Examples**

```
-- Set up an orthographic projection based on the width and height
-- of the game window.
local w = render.get_width()
local h = render.get_height()
local proj = vmath.matrix4_orthographic(- w / 2, w / 2, -h / 2, h / 2, -1000, 1000)
render.set_projection(proj)

```

### vmath.matrix4_perspective
*Type:* FUNCTION
Creates a perspective projection matrix.
This is useful to construct a projection matrix for a camera or rendering in general.

**Parameters**

- `fov` (number) - angle of the full vertical field of view in radians
- `aspect` (number) - aspect ratio
- `near` (number) - coordinate for near clipping plane
- `far` (number) - coordinate for far clipping plane

**Returns**

- `m` (matrix4) - perspective projection matrix

**Examples**

```
-- Set up a perspective camera at z 100 with 45 degrees (pi/2) FOV
-- Aspect ratio 4:3
local eye = vmath.vector3(0, 0, 100)
local look_at = vmath.vector3(0, 0, 0)
local up = vmath.vector3(0, 1, 0)
local view = vmath.matrix4_look_at(eye, look_at, up)
render.set_view(view)
local proj = vmath.matrix4_perspective(3.141592/2, 4/3, 1, 1000)
render.set_projection(proj)

```

### vmath.matrix4_quat
*Type:* FUNCTION
The resulting matrix describes the same rotation as the quaternion, but does not have any translation (also like the quaternion).

**Parameters**

- `q` (quaternion) - quaternion to create matrix from

**Returns**

- `m` (matrix4) - matrix represented by quaternion

**Examples**

```
local vec = vmath.vector4(1, 1, 0, 0)
local quat = vmath.quat_rotation_z(3.141592653)
local mat = vmath.matrix4_quat(quat)
print(mat * vec) --> vmath.matrix4_frustum(-1, 1, -1, 1, 1, 1000)

```

### vmath.matrix4_rotation_x
*Type:* FUNCTION
The resulting matrix describes a rotation around the x-axis
by the specified angle.

**Parameters**

- `angle` (number) - angle in radians around x-axis

**Returns**

- `m` (matrix4) - matrix from rotation around x-axis

**Examples**

```
local vec = vmath.vector4(1, 1, 0, 0)
local mat = vmath.matrix4_rotation_x(3.141592653)
print(mat * vec) --> vmath.vector4(1, -1, -8.7422776573476e-08, 0)

```

### vmath.matrix4_rotation_y
*Type:* FUNCTION
The resulting matrix describes a rotation around the y-axis
by the specified angle.

**Parameters**

- `angle` (number) - angle in radians around y-axis

**Returns**

- `m` (matrix4) - matrix from rotation around y-axis

**Examples**

```
local vec = vmath.vector4(1, 1, 0, 0)
local mat = vmath.matrix4_rotation_y(3.141592653)
print(mat * vec) --> vmath.vector4(-1, 1, 8.7422776573476e-08, 0)

```

### vmath.matrix4_rotation_z
*Type:* FUNCTION
The resulting matrix describes a rotation around the z-axis
by the specified angle.

**Parameters**

- `angle` (number) - angle in radians around z-axis

**Returns**

- `m` (matrix4) - matrix from rotation around z-axis

**Examples**

```
local vec = vmath.vector4(1, 1, 0, 0)
local mat = vmath.matrix4_rotation_z(3.141592653)
print(mat * vec) --> vmath.vector4(-0.99999994039536, -1.0000001192093, 0, 0)

```

### vmath.matrix4_scale
*Type:* FUNCTION
Creates a new matrix constructed from scale vector

**Parameters**

- `scale` (vector3) - scale

**Returns**

- `matrix` (matrix4) - new matrix4

**Examples**

```
local scale = vmath.vector3(1, 0.5, 0.5)
local result = vmath.matrix4_scale(scale)
print(result) --> vmath.matrix4(1, 0, 0, 0, 0, 0.5, 0, 0, 0, 0, 0.5, 0, 0, 0, 0, 1)

```

### vmath.matrix4_scale
*Type:* FUNCTION
creates a new matrix4 from uniform scale

**Parameters**

- `scale` (number) - scale

**Returns**

- `matrix` (matrix4) - new matrix4

**Examples**

```
local result = vmath.matrix4_scale(0.5)
print(result) --> vmath.matrix4(0.5, 0, 0, 0, 0, 0.5, 0, 0, 0, 0, 0.5, 0, 0, 0, 0, 1)

```

### vmath.matrix4_scale
*Type:* FUNCTION
Creates a new matrix4 from three scale components

**Parameters**

- `scale_x` (number) - scale along X axis
- `scale_y` (number) - sclae along Y axis
- `scale_z` (number) - scale along Z asis

**Returns**

- `matrix` (matrix4) - new matrix4

**Examples**

```
local result = vmath.matrix4_scale(1, 0.5, 0.5)
print(result) --> vmath.matrix4(1, 0, 0, 0, 0, 0.5, 0, 0, 0, 0, 0.5, 0, 0, 0, 0, 1)

```

### vmath.matrix4_translation
*Type:* FUNCTION
The resulting matrix describes a translation of a point
in euclidean space.

**Parameters**

- `position` (vector3 | vector4) - position vector to create matrix from

**Returns**

- `m` (matrix4) - matrix from the supplied position vector

**Examples**

```
-- Set camera view from custom view and translation matrices
local mat_trans = vmath.matrix4_translation(vmath.vector3(0, 10, 100))
local mat_view  = vmath.matrix4_rotation_y(-3.141592/4)
render.set_view(mat_view * mat_trans)

```

### vmath.mul_per_elem
*Type:* FUNCTION
Performs an element wise multiplication between two vectors of the same type
The returned value is a vector defined as (e.g. for a vector3):
v = vmath.mul_per_elem(a, b) = vmath.vector3(a.x * b.x, a.y * b.y, a.z * b.z)

**Parameters**

- `v1` (vector3 | vector4) - first vector
- `v2` (vector3 | vector4) - second vector

**Returns**

- `v` (vector3 | vector4) - multiplied vector

**Examples**

```
local blend_color = vmath.mul_per_elem(color1, color2)

```

### vmath.normalize
*Type:* FUNCTION
Normalizes a vector, i.e. returns a new vector with the same
direction as the input vector, but with length 1.
 The length of the vector must be above 0, otherwise a
division-by-zero will occur.

**Parameters**

- `v1` (vector3 | vector4 | quaternion) - vector to normalize

**Returns**

- `v` (vector3 | vector4 | quaternion) - new normalized vector

**Examples**

```
local vec = vmath.vector3(1, 2, 3)
local norm_vec = vmath.normalize(vec)
print(norm_vec) --> vmath.vector3(0.26726123690605, 0.5345224738121, 0.80178368091583)
print(vmath.length(norm_vec)) --> 0.99999994039536

```

### vmath.ortho_inv
*Type:* FUNCTION
The resulting matrix is the inverse of the supplied matrix.
The supplied matrix has to be an ortho-normal matrix, e.g.
describe a regular object transformation.
 For matrices that are not ortho-normal
use the general inverse vmath.inv() instead.

**Parameters**

- `m1` (matrix4) - ortho-normalized matrix to invert

**Returns**

- `m` (matrix4) - inverse of the supplied matrix

**Examples**

```
local mat1 = vmath.matrix4_rotation_z(3.141592653)
local mat2 = vmath.ortho_inv(mat1)
-- M * inv(M) = identity matrix
print(mat1 * mat2) --> vmath.matrix4(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)

```

### vmath.project
*Type:* FUNCTION
Calculates the extent the projection of the first vector onto the second.
The returned value is a scalar p defined as:
p = |P| cos  / |Q|
where  is the angle between the vectors P and Q.

**Parameters**

- `v1` (vector3) - vector to be projected on the second
- `v2` (vector3) - vector onto which the first will be projected, must not have zero length

**Returns**

- `n` (number) - the projected extent of the first vector onto the second

**Examples**

```
local v1 = vmath.vector3(1, 1, 0)
local v2 = vmath.vector3(2, 0, 0)
print(vmath.project(v1, v2)) --> 0.5

```

### vmath.quat
*Type:* FUNCTION
Creates a new identity quaternion. The identity
quaternion is equal to:
vmath.quat(0, 0, 0, 1)

**Returns**

- `q` (quaternion) - new identity quaternion

**Examples**

```
local quat = vmath.quat()
print(quat) --> vmath.quat(0, 0, 0, 1)
print(quat.w) --> 1

```

### vmath.quat
*Type:* FUNCTION
Creates a new quaternion with all components set to the
corresponding values from the supplied quaternion. I.e.
This function creates a copy of the given quaternion.

**Parameters**

- `q1` (quaternion) - existing quaternion

**Returns**

- `q` (quaternion) - new quaternion

**Examples**

```
local quat1 = vmath.quat(1, 2, 3, 4)
local quat2 = vmath.quat(quat1)
if quat1 == quat2 then
    -- yes, they are equal
    print(quat2) --> vmath.quat(1, 2, 3, 4)
end

```

### vmath.quat
*Type:* FUNCTION
Creates a new quaternion with the components set
according to the supplied parameter values.

**Parameters**

- `x` (number) - x coordinate
- `y` (number) - y coordinate
- `z` (number) - z coordinate
- `w` (number) - w coordinate

**Returns**

- `q` (quaternion) - new quaternion

**Examples**

```
local quat = vmath.quat(1, 2, 3, 4)
print(quat) --> vmath.quat(1, 2, 3, 4)

```

### vmath.quat_axis_angle
*Type:* FUNCTION
The resulting quaternion describes a rotation of angle
radians around the axis described by the unit vector v.

**Parameters**

- `v` (vector3) - axis
- `angle` (number) - angle

**Returns**

- `q` (quaternion) - quaternion representing the axis-angle rotation

**Examples**

```
local axis = vmath.vector3(1, 0, 0)
local rot = vmath.quat_axis_angle(axis, 3.141592653)
local vec = vmath.vector3(1, 1, 0)
print(vmath.rotate(rot, vec)) --> vmath.vector3(1, -1, -8.7422776573476e-08)

```

### vmath.quat_basis
*Type:* FUNCTION
The resulting quaternion describes the rotation from the
identity quaternion (no rotation) to the coordinate system
as described by the given x, y and z base unit vectors.

**Parameters**

- `x` (vector3) - x base vector
- `y` (vector3) - y base vector
- `z` (vector3) - z base vector

**Returns**

- `q` (quaternion) - quaternion representing the rotation of the specified base vectors

**Examples**

```
-- Axis rotated 90 degrees around z.
local rot_x = vmath.vector3(0, -1, 0)
local rot_y = vmath.vector3(1, 0, 0)
local z = vmath.vector3(0, 0, 1)
local rot1 = vmath.quat_basis(rot_x, rot_y, z)
local rot2 = vmath.quat_from_to(vmath.vector3(0, 1, 0), vmath.vector3(1, 0, 0))
if rot1 == rot2 then
    -- These quaternions are equal!
    print(rot2) --> vmath.quat(0, 0, -0.70710676908493, 0.70710676908493)
end

```

### vmath.quat_from_to
*Type:* FUNCTION
The resulting quaternion describes the rotation that,
if applied to the first vector, would rotate the first
vector to the second. The two vectors must be unit
vectors (of length 1).
 The result is undefined if the two vectors point in opposite directions

**Parameters**

- `v1` (vector3) - first unit vector, before rotation
- `v2` (vector3) - second unit vector, after rotation

**Returns**

- `q` (quaternion) - quaternion representing the rotation from first to second vector

**Examples**

```
local v1 = vmath.vector3(1, 0, 0)
local v2 = vmath.vector3(0, 1, 0)
local rot = vmath.quat_from_to(v1, v2)
print(vmath.rotate(rot, v1)) --> vmath.vector3(0, 0.99999994039536, 0)

```

### vmath.quat_matrix4
*Type:* FUNCTION
Creates a new quaternion with the components set
according to the supplied parameter values.

**Parameters**

- `matrix` (matrix4) - source matrix4

**Returns**

- `q` (quaternion) - new quaternion

### vmath.quat_rotation_x
*Type:* FUNCTION
The resulting quaternion describes a rotation of angle
radians around the x-axis.

**Parameters**

- `angle` (number) - angle in radians around x-axis

**Returns**

- `q` (quaternion) - quaternion representing the rotation around the x-axis

**Examples**

```
local rot = vmath.quat_rotation_x(3.141592653)
local vec = vmath.vector3(1, 1, 0)
print(vmath.rotate(rot, vec)) --> vmath.vector3(1, -1, -8.7422776573476e-08)

```

### vmath.quat_rotation_y
*Type:* FUNCTION
The resulting quaternion describes a rotation of angle
radians around the y-axis.

**Parameters**

- `angle` (number) - angle in radians around y-axis

**Returns**

- `q` (quaternion) - quaternion representing the rotation around the y-axis

**Examples**

```
local rot = vmath.quat_rotation_y(3.141592653)
local vec = vmath.vector3(1, 1, 0)
print(vmath.rotate(rot, vec)) --> vmath.vector3(-1, 1, 8.7422776573476e-08)

```

### vmath.quat_rotation_z
*Type:* FUNCTION
The resulting quaternion describes a rotation of angle
radians around the z-axis.

**Parameters**

- `angle` (number) - angle in radians around z-axis

**Returns**

- `q` (quaternion) - quaternion representing the rotation around the z-axis

**Examples**

```
local rot = vmath.quat_rotation_z(3.141592653)
local vec = vmath.vector3(1, 1, 0)
print(vmath.rotate(rot, vec)) --> vmath.vector3(-0.99999988079071, -1, 0)

```

### vmath.quat_to_euler
*Type:* FUNCTION
Converts a quaternion into euler angles (r0, r1, r2), based on YZX rotation order.
To handle gimbal lock (singularity at r1 ~ +/- 90 degrees), the cut off is at r0 = +/- 88.85 degrees, which snaps to +/- 90.
The provided quaternion is expected to be normalized.
The error is guaranteed to be less than +/- 0.02 degrees

**Parameters**

- `q` (quaternion) - source quaternion

**Returns**

- `x` (number) - euler angle x in degrees
- `y` (number) - euler angle y in degrees
- `z` (number) - euler angle z in degrees

**Examples**

```
local q = vmath.quat_rotation_z(math.rad(90))
print(vmath.quat_to_euler(q)) --> 0 0 90

local q2 = vmath.quat_rotation_y(math.rad(45)) * vmath.quat_rotation_z(math.rad(90))
local v = vmath.vector3(vmath.quat_to_euler(q2))
print(v) --> vmath.vector3(0, 45, 90)

```

### vmath.rotate
*Type:* FUNCTION
Returns a new vector from the supplied vector that is
rotated by the rotation described by the supplied
quaternion.

**Parameters**

- `q` (quaternion) - quaternion
- `v1` (vector3) - vector to rotate

**Returns**

- `v` (vector3) - the rotated vector

**Examples**

```
local vec = vmath.vector3(1, 1, 0)
local rot = vmath.quat_rotation_z(3.141592563)
print(vmath.rotate(rot, vec)) --> vmath.vector3(-1.0000002384186, -0.99999988079071, 0)

```

### vmath.slerp
*Type:* FUNCTION
Spherically interpolates between two vectors. The difference to
lerp is that slerp treats the vectors as directions instead of
positions in space.
The direction of the returned vector is interpolated by the angle
and the magnitude is interpolated between the magnitudes of the
from and to vectors.
 Slerp is computationally more expensive than lerp.
The function does not clamp t between 0 and 1.

**Parameters**

- `t` (number) - interpolation parameter, 0-1
- `v1` (vector3 | vector4) - vector to slerp from
- `v2` (vector3 | vector4) - vector to slerp to

**Returns**

- `v` (vector3 | vector4) - the slerped vector

**Examples**

```
function init(self)
    self.t = 0
end

function update(self, dt)
    self.t = self.t + dt
    if self.t <= 1 then
        local startpos = vmath.vector3(0, 600, 0)
        local endpos = vmath.vector3(600, 0, 0)
        local pos = vmath.slerp(self.t, startpos, endpos)
        go.set_position(pos, "go")
    end
end

```

### vmath.slerp
*Type:* FUNCTION
Slerp travels the torque-minimal path maintaining constant
velocity, which means it travels along the straightest path along
the rounded surface of a sphere. Slerp is useful for interpolation
of rotations.
Slerp travels the torque-minimal path, which means it travels
along the straightest path the rounded surface of a sphere.
 The function does not clamp t between 0 and 1.

**Parameters**

- `t` (number) - interpolation parameter, 0-1
- `q1` (quaternion) - quaternion to slerp from
- `q2` (quaternion) - quaternion to slerp to

**Returns**

- `q` (quaternion) - the slerped quaternion

**Examples**

```
function init(self)
    self.t = 0
end

function update(self, dt)
    self.t = self.t + dt
    if self.t <= 1 then
        local startrot = vmath.quat_rotation_z(0)
        local endrot = vmath.quat_rotation_z(3.141592653)
        local rot = vmath.slerp(self.t, startrot, endrot)
        go.set_rotation(rot, "go")
    end
end

```

### vmath.vector
*Type:* FUNCTION
Creates a vector of arbitrary size. The vector is initialized
with numeric values from a table.
 The table values are converted to floating point
values. If a value cannot be converted, a 0 is stored in that
value position in the vector.

**Parameters**

- `t` (table) - table of numbers

**Returns**

- `v` (vector) - new vector

**Examples**

How to create a vector with custom data to be used for animation easing:
```
local values = { 0, 0.5, 0 }
local vec = vmath.vector(values)
print(vec) --> vmath.vector (size: 3)
print(vec[2]) --> 0.5

```

### vmath.vector3
*Type:* FUNCTION
Creates a new zero vector with all components set to 0.

**Returns**

- `v` (vector3) - new zero vector

**Examples**

```
local vec = vmath.vector3()
pprint(vec) --> vmath.vector3(0, 0, 0)
print(vec.x) --> 0

```

### vmath.vector3
*Type:* FUNCTION
Creates a new vector with all components set to the
supplied scalar value.

**Parameters**

- `n` (number) - scalar value to splat

**Returns**

- `v` (vector3) - new vector

**Examples**

```
local vec = vmath.vector3(1.0)
print(vec) --> vmath.vector3(1, 1, 1)
print(vec.x) --> 1

```

### vmath.vector3
*Type:* FUNCTION
Creates a new vector with all components set to the
corresponding values from the supplied vector. I.e.
This function creates a copy of the given vector.

**Parameters**

- `v1` (vector3) - existing vector

**Returns**

- `v` (vector3) - new vector

**Examples**

```
local vec1 = vmath.vector3(1.0)
local vec2 = vmath.vector3(vec1)
if vec1 == vec2 then
    -- yes, they are equal
    print(vec2) --> vmath.vector3(1, 1, 1)
end

```

### vmath.vector3
*Type:* FUNCTION
Creates a new vector with the components set to the
supplied values.

**Parameters**

- `x` (number) - x coordinate
- `y` (number) - y coordinate
- `z` (number) - z coordinate

**Returns**

- `v` (vector3) - new vector

**Examples**

```
local vec = vmath.vector3(1.0, 2.0, 3.0)
print(vec) --> vmath.vector3(1, 2, 3)
print(-vec) --> vmath.vector3(-1, -2, -3)
print(vec * 2) --> vmath.vector3(2, 4, 6)
print(vec + vmath.vector3(2.0)) --> vmath.vector3(3, 4, 5)
print(vec - vmath.vector3(2.0)) --> vmath.vector3(-1, 0, 1)

```

### vmath.vector4
*Type:* FUNCTION
Creates a new zero vector with all components set to 0.

**Returns**

- `v` (vector4) - new zero vector

**Examples**

```
local vec = vmath.vector4()
print(vec) --> vmath.vector4(0, 0, 0, 0)
print(vec.w) --> 0

```

### vmath.vector4
*Type:* FUNCTION
Creates a new vector with all components set to the
supplied scalar value.

**Parameters**

- `n` (number) - scalar value to splat

**Returns**

- `v` (vector4) - new vector

**Examples**

```
local vec = vmath.vector4(1.0)
print(vec) --> vmath.vector4(1, 1, 1, 1)
print(vec.w) --> 1

```

### vmath.vector4
*Type:* FUNCTION
Creates a new vector with all components set to the
corresponding values from the supplied vector. I.e.
This function creates a copy of the given vector.

**Parameters**

- `v1` (vector4) - existing vector

**Returns**

- `v` (vector4) - new vector

**Examples**

```
local vect1 = vmath.vector4(1.0)
local vect2 = vmath.vector4(vec1)
if vec1 == vec2 then
    -- yes, they are equal
    print(vec2) --> vmath.vector4(1, 1, 1, 1)
end

```

### vmath.vector4
*Type:* FUNCTION
Creates a new vector with the components set to the
supplied values.

**Parameters**

- `x` (number) - x coordinate
- `y` (number) - y coordinate
- `z` (number) - z coordinate
- `w` (number) - w coordinate

**Returns**

- `v` (vector4) - new vector

**Examples**

```
local vec = vmath.vector4(1.0, 2.0, 3.0, 4.0)
print(vec) --> vmath.vector4(1, 2, 3, 4)
print(-vec) --> vmath.vector4(-1, -2, -3, -4)
print(vec * 2) --> vmath.vector4(2, 4, 6, 8)
print(vec + vmath.vector4(2.0)) --> vmath.vector4(3, 4, 5, 6)
print(vec - vmath.vector4(2.0)) --> vmath.vector4(-1, 0, 1, 2)

```

<!-- window-lua -->

# Window {#apis:window-lua}

**Namespace:** `window`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_window.cpp`
**Source:** `engine/gamesys/src/gamesys/scripts/script_window.cpp`

Functions and constants to access the window, window event listeners
and screen dimming.

## API

### window.DIMMING_OFF
*Type:* CONSTANT
Dimming mode is used to control whether or not a mobile device should dim the screen after a period without user interaction.

### window.DIMMING_ON
*Type:* CONSTANT
Dimming mode is used to control whether or not a mobile device should dim the screen after a period without user interaction.

### window.DIMMING_UNKNOWN
*Type:* CONSTANT
Dimming mode is used to control whether or not a mobile device should dim the screen after a period without user interaction.
This mode indicates that the dim mode can't be determined, or that the platform doesn't support dimming.

### window.get_dim_mode
*Type:* FUNCTION
Returns the current dimming mode set on a mobile device.
The dimming mode specifies whether or not a mobile device should dim the screen after a period without user interaction.
On platforms that does not support dimming, window.DIMMING_UNKNOWN is always returned.

**Returns**

- `mode` (constant) - The mode for screen dimming
<ul>
<li><code>window.DIMMING_UNKNOWN</code></li>
<li><code>window.DIMMING_ON</code></li>
<li><code>window.DIMMING_OFF</code></li>
</ul>

### window.get_display_scale
*Type:* FUNCTION
This returns the content scale of the current display.

**Returns**

- `scale` (number) - The display scale

### window.get_mouse_lock
*Type:* FUNCTION
This returns the current lock state of the mouse cursor

**Returns**

- `state` (boolean) - The lock state

### window.get_safe_area
*Type:* FUNCTION
This returns the safe area rectangle (x, y, width, height) and the inset
values relative to the window edges. On platforms without a safe area,
this returns the full window size and zero insets.

**Returns**

- `safe_area` (table) - safe area data
<dl>
<dt><code>safe_area</code></dt>
<dd><span class="type">table</span> table containing these keys:</dd>
</dl>
<ul>
<li><span class="type">number</span> <code>x</code></li>
<li><span class="type">number</span> <code>y</code></li>
<li><span class="type">number</span> <code>width</code></li>
<li><span class="type">number</span> <code>height</code></li>
<li><span class="type">number</span> <code>inset_left</code></li>
<li><span class="type">number</span> <code>inset_top</code></li>
<li><span class="type">number</span> <code>inset_right</code></li>
<li><span class="type">number</span> <code>inset_bottom</code></li>
</ul>

### window.get_size
*Type:* FUNCTION
This returns the current window size (width and height).

**Returns**

- `width` (number) - The window width
- `height` (number) - The window height

### window.set_dim_mode
*Type:* FUNCTION
Sets the dimming mode on a mobile device.
The dimming mode specifies whether or not a mobile device should dim the screen after a period without user interaction. The dimming mode will only affect the mobile device while the game is in focus on the device, but not when the game is running in the background.
This function has no effect on platforms that does not support dimming.

**Parameters**

- `mode` (constant) - The mode for screen dimming
<ul>
<li><code>window.DIMMING_ON</code></li>
<li><code>window.DIMMING_OFF</code></li>
</ul>

### window.set_listener
*Type:* FUNCTION
Sets a window event listener. Only one window event listener can be set at a time.

**Parameters**

- `callback` (function(self, event, data) | nil) - A callback which receives info about window events. Pass an empty function or <code>nil</code> if you no longer wish to receive callbacks.
<dl>
<dt><code>self</code></dt>
<dd><span class="type">object</span> The calling script</dd>
<dt><code>event</code></dt>
<dd><span class="type">constant</span> The type of event. Can be one of these:</dd>
</dl>
<ul>
<li><code>window.WINDOW_EVENT_FOCUS_LOST</code></li>
<li><code>window.WINDOW_EVENT_FOCUS_GAINED</code></li>
<li><code>window.WINDOW_EVENT_RESIZED</code></li>
<li><code>window.WINDOW_EVENT_ICONIFIED</code></li>
<li><code>window.WINDOW_EVENT_DEICONIFIED</code></li>
</ul>
<dl>
<dt><code>data</code></dt>
<dd><span class="type">table</span> The callback value <code>data</code> is a table which currently holds these values</dd>
</dl>
<ul>
<li><span class="type">number</span> <code>width</code>: The width of a resize event. nil otherwise.</li>
<li><span class="type">number</span> <code>height</code>: The height of a resize event. nil otherwise.</li>
</ul>

**Examples**

```
function window_callback(self, event, data)
    if event == window.WINDOW_EVENT_FOCUS_LOST then
        print("window.WINDOW_EVENT_FOCUS_LOST")
    elseif event == window.WINDOW_EVENT_FOCUS_GAINED then
        print("window.WINDOW_EVENT_FOCUS_GAINED")
    elseif event == window.WINDOW_EVENT_ICONFIED then
        print("window.WINDOW_EVENT_ICONFIED")
    elseif event == window.WINDOW_EVENT_DEICONIFIED then
        print("window.WINDOW_EVENT_DEICONIFIED")
    elseif event == window.WINDOW_EVENT_RESIZED then
        print("Window resized: ", data.width, data.height)
    end
end

function init(self)
    window.set_listener(window_callback)
end

```

### window.set_mouse_lock
*Type:* FUNCTION
Set the locking state for current mouse cursor on a PC platform.
This function locks or unlocks the mouse cursor to the center point of the window. While the cursor is locked,
mouse position updates will still be sent to the scripts as usual.

**Parameters**

- `flag` (boolean) - The lock state for the mouse cursor

### window.set_position
*Type:* FUNCTION
Sets the window position.

**Parameters**

- `x` (number) - Horizontal position of window
- `y` (number) - Vertical position of window

### window.set_size
*Type:* FUNCTION
Sets the window size. Works on desktop platforms only.

**Parameters**

- `width` (number) - Width of window
- `height` (number) - Height of window

### window.set_title
*Type:* FUNCTION
Sets the window title. Works on desktop platforms.

**Parameters**

- `title` (string) - The title, encoded as UTF-8

### window.WINDOW_EVENT_DEICONIFIED
*Type:* CONSTANT
This event is sent to a window event listener when the game window or app screen is
restored after being iconified.

### window.WINDOW_EVENT_FOCUS_GAINED
*Type:* CONSTANT
This event is sent to a window event listener when the game window or app screen has
gained focus.
This event is also sent at game startup and the engine gives focus to the game.

### window.WINDOW_EVENT_FOCUS_LOST
*Type:* CONSTANT
This event is sent to a window event listener when the game window or app screen has lost focus.

### window.WINDOW_EVENT_ICONFIED
*Type:* CONSTANT
This event is sent to a window event listener when the game window or app screen is
iconified (reduced to an application icon in a toolbar, application tray or similar).

### window.WINDOW_EVENT_RESIZED
*Type:* CONSTANT
This event is sent to a window event listener when the game window or app screen is resized.
The new size is passed along in the data field to the event listener.

<!-- zlib-lua -->

# Zlib {#apis:zlib-lua}

**Namespace:** `zlib`
**Language:** Lua
**Type:** Defold Lua
**File:** `script_zlib.cpp`
**Source:** `engine/script/src/script_zlib.cpp`

Functions for compression and decompression of string buffers.

## API

### zlib.deflate
*Type:* FUNCTION
A lua error is raised is on error

**Parameters**

- `buf` (string) - buffer to deflate

**Returns**

- `buf` (string) - deflated buffer

**Examples**

```
local data = "This is a string with uncompressed data."
local compressed_data = zlib.deflate(data)
local s = ""
for c in string.gmatch(compressed_data, ".") do
    s = s .. '\\' .. string.byte(c)
end
print(s) --> \120\94\11\201\200\44\86\0\162\68\133\226\146\162 ...

```

### zlib.inflate
*Type:* FUNCTION
A lua error is raised is on error

**Parameters**

- `buf` (string) - buffer to inflate

**Returns**

- `buf` (string) - inflated buffer

**Examples**

```
local data = "\120\94\11\201\200\44\86\0\162\68\133\226\146\162\204\188\116\133\242\204\146\12\133\210\188\228\252\220\130\162\212\226\226\212\20\133\148\196\146\68\61\0\44\67\14\201"
local uncompressed_data = zlib.inflate(data)
print(uncompressed_data) --> This is a string with uncompressed data.

```

<!-- extension-adinfo_adinfo -->

# extension-adinfo {#apis:extension-adinfo_adinfo}

**Namespace:** `adinfo`
**Language:** Lua
**Type:** Extension

Provides functionality to get the advertising id and tracking status. Supported on iOS and Android. [icon:ios] [icon:android]

## API

### adinfo.get
*Type:* FUNCTION
Get a table with advertising information. [icon:attention] function returns nil if values do not ready

**Examples**

```
function init(self)
    adinfo.get(function(self, info)
      print(info.ad_ident, info.ad_tracking_enabled)
    end)
end

```

<!-- extension-admob_admob -->

# extension-admob {#apis:extension-admob_admob}

**Namespace:** `admob`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with [Google AdMob APIs](https://developers.google.com/admob)

## API

### admob.initialize
*Type:* FUNCTION
Initialize the Mobile Ads SDK. Warning: If you need to obtain consent from users in the European Economic Area (EEA), set any request-specific flags, or otherwise take action before loading ads, ensure you do so before initializing the Mobile Ads SDK.
Original docs [Android](https://developers.google.com/admob/android/quick-start#initialize_the_mobile_ads_sdk), [iOS](https://developers.google.com/admob/ios/quick-start#initialize_the_mobile_ads_sdk)

### admob.set_callback
*Type:* FUNCTION
Sets a callback function for receiving events from the SDK. Call `admob.set_callback(nil)` to remove callback

**Parameters**

- `callback` (function) - Callback function that is executed on any event in the SDK.
  - `self` (object) - The calling script instance
  - `message_id` (number) - One of message types: `admob.MSG_INITIALIZATION` initialization, `admob.MSG_INTERSTITIAL` message from Interstitial ad unit, `admob.MSG_REWARDED` message from Rewarded ad unit, `admob.MSG_BANNER` message from Banner ad unit
  - `message` (table) - A table holding the data
    - `event` (number) - One of event types: `admob.EVENT_CLOSED`, `admob.EVENT_FAILED_TO_SHOW`, `admob.EVENT_OPENING`, `admob.EVENT_FAILED_TO_LOAD`, `admob.EVENT_LOADED`, `admob.EVENT_NOT_LOADED`, `admob.EVENT_EARNED_REWARD`, `admob.EVENT_COMPLETE`, `admob.EVENT_CLICKED`, `admob.EVENT_DESTROYED`, `admob.EVENT_IMPRESSION_RECORDED`, `admob.EVENT_JSON_ERROR`
    - `code` (number) - The error code (if an error occurred or `nil` otherwise)
    - `message` (string) - The error message (if an error occurred or `nil` otherwise)

**Examples**

```
local function admob_callback(self, message_id, message)
    pprint(message_id, message)
    if message_id == admob.MSG_INITIALIZATION then
       if message.event == admob.EVENT_COMPLETE then
           print("EVENT_COMPLETE: Initialization complete")
       elseif message.event == admob.EVENT_JSON_ERROR then
           print("EVENT_JSON_ERROR: Internal NE json error "..message.error)
       end
   elseif message_id == admob.MSG_IDFA then
       if message.event == admob.EVENT_STATUS_AUTHORIZED then
           print("EVENT_STATUS_AUTHORIZED: ATTrackingManagerAuthorizationStatusAuthorized")
       elseif message.event == admob.EVENT_STATUS_DENIED then
           print("EVENT_STATUS_DENIED: ATTrackingManagerAuthorizationStatusDenied")
       elseif message.event == admob.EVENT_STATUS_NOT_DETERMINED then
           print("EVENT_STATUS_NOT_DETERMINED: ATTrackingManagerAuthorizationStatusNotDetermined")
       elseif message.event == admob.EVENT_STATUS_RESTRICTED then
           print("EVENT_STATUS_RESTRICTED: ATTrackingManagerAuthorizationStatusRestricted")
       elseif message.event == admob.EVENT_NOT_SUPPORTED then
           print("EVENT_NOT_SUPPORTED: IDFA request not supported on this platform or OS version")
       end
   elseif message_id == admob.MSG_INTERSTITIAL then
       if message.event == admob.EVENT_CLOSED then
           print("EVENT_CLOSED: Interstitial AD closed")
       elseif message.event == admob.EVENT_FAILED_TO_SHOW then
           print("EVENT_FAILED_TO_SHOW: Interstitial AD failed to show\nCode: "..message.code.."\nError: "..message.error)
       elseif message.event == admob.EVENT_OPENING then
           print("EVENT_OPENING: Interstitial AD is opening")
       elseif message.event == admob.EVENT_FAILED_TO_LOAD then
           print("EVENT_FAILED_TO_LOAD: Interstitial AD failed to load\nCode: "..message.code.."\nError: "..message.error)
       elseif message.event == admob.EVENT_LOADED then
           print("EVENT_LOADED: Interstitial AD loaded")
       elseif message.event == admob.EVENT_NOT_LOADED then
           print("EVENT_NOT_LOADED: can't call show_interstitial() before EVENT_LOADED\nError: "..message.error)
       elseif message.event == admob.EVENT_IMPRESSION_RECORDED then
           print("EVENT_IMPRESSION_RECORDED: Interstitial did record impression")
       elseif message.event == admob.EVENT_JSON_ERROR then
           print("EVENT_JSON_ERROR: Internal NE json error: "..message.error)
       end
   elseif message_id == admob.MSG_REWARDED then
       if message.event == admob.EVENT_CLOSED then
           print("EVENT_CLOSED: Rewarded AD closed")
       elseif message.event == admob.EVENT_FAILED_TO_SHOW then
           print("EVENT_FAILED_TO_SHOW: Rewarded AD failed to show\nCode: "..message.code.."\nError: "..message.error)
       elseif message.event == admob.EVENT_OPENING then
           print("EVENT_OPENING: Rewarded AD is opening")
       elseif message.event == admob.EVENT_FAILED_TO_LOAD then
           print("EVENT_FAILED_TO_LOAD: Rewarded AD failed to load\nCode: "..message.code.."\nError: "..message.error)
       elseif message.event == admob.EVENT_LOADED then
           print("EVENT_LOADED: Rewarded AD loaded")
       elseif message.event == admob.EVENT_NOT_LOADED then
           print("EVENT_NOT_LOADED: can't call show_rewarded() before EVENT_LOADED\nError: "..message.error)
       elseif message.event == admob.EVENT_EARNED_REWARD then
           print("EVENT_EARNED_REWARD: Reward: " .. tostring(message.amount) .. " " .. tostring(message.type))
       elseif message.event == admob.EVENT_IMPRESSION_RECORDED then
           print("EVENT_IMPRESSION_RECORDED: Rewarded did record impression")
       elseif message.event == admob.EVENT_JSON_ERROR then
           print("EVENT_JSON_ERROR: Internal NE json error: "..message.error)
       end
   elseif message_id == admob.MSG_BANNER then
       if message.event == admob.EVENT_LOADED then
           print("EVENT_LOADED: Banner AD loaded. Height: "..message.height.."px Width: "..message.width.."px")
       elseif message.event == admob.EVENT_OPENING then
           print("EVENT_OPENING: Banner AD is opening")
       elseif message.event == admob.EVENT_FAILED_TO_LOAD then
           print("EVENT_FAILED_TO_LOAD: Banner AD failed to load\nCode: "..message.code.."\nError: "..message.error)
       elseif message.event == admob.EVENT_CLICKED then
           print("EVENT_CLICKED: Banner AD loaded")
       elseif message.event == admob.EVENT_CLOSED then
           print("EVENT_CLOSED: Banner AD closed")
       elseif message.event == admob.EVENT_DESTROYED then
           print("EVENT_DESTROYED: Banner AD destroyed")
       elseif message.event == admob.EVENT_IMPRESSION_RECORDED then
           print("EVENT_IMPRESSION_RECORDED: Banner did record impression")
       elseif message.event == admob.EVENT_JSON_ERROR then
           print("EVENT_JSON_ERROR: Internal NE json error: "..message.error)
       end
   end
end

function init(self)
    if admob then
        admob.set_callback(admob_callback)
        admob.initialize()
    end
end

```

### admob.set_privacy_settings
*Type:* FUNCTION
Sets user privacy preferences (must be called before `admob.initialize()`). Original docs [Android](https://developers.google.com/admob/android/ccpa), [iOS](https://developers.google.com/admob/ios/ccpa)

**Parameters**

- `bool` (boolean)

### admob.request_idfa
*Type:* FUNCTION
Display the App Tracking Transparency authorization request for accessing the IDFA. Original docs [iOS](https://developers.google.com/admob/ios/ios14#request)

### admob.show_ad_inspector
*Type:* FUNCTION
Show Ad Inspector. This is an in-app overlay that enables authorized devices to perform realtime analysis of test ad requests directly within a mobile app. Ad Inspector only launces on [test devices](https://support.google.com/admob/answer/9691433). Original docs [Android](https://developers.google.com/admob/android/ad-inspector), [iOS](https://developers.google.com/admob/ios/ad-inspector)

### admob.load_appopen
*Type:* FUNCTION
Starts loading an AppOpen Ad, can only be called after `admob.MSG_INITIALIZATION` event Original docs [Android](https://developers.google.com/admob/android/app-open), [iOS](https://developers.google.com/admob/ios/app-open)

**Parameters**

- `ad_unit_id` (string) - Ad unit ID, for test ads use on Android `"ca-app-pub-3940256099942544/9257395921"`, or on iOS `"ca-app-pub-3940256099942544/5575463023"` Original docs [Android](https://developers.google.com/admob/android/app-open), [iOS](https://developers.google.com/admob/ios/app-open)

### admob.show_appopen
*Type:* FUNCTION
Shows loaded AppOpen Ad, can only be called after `admob.EVENT_LOADED` Original docs [Android](https://developers.google.com/admob/android/app-open), [iOS](https://developers.google.com/admob/ios/app-open)

**Examples**

```
if admob and admob.is_appopen_loaded() then
    admob.show_appopen()
end

```

### admob.is_appopen_loaded
*Type:* FUNCTION
Checks if AppOpen Ad is loaded and ready to show Original docs [Android](https://developers.google.com/admob/android/app-open), [iOS](https://developers.google.com/admob/ios/app-open)

**Returns**

- `boolean`

### admob.load_interstitial
*Type:* FUNCTION
Starts loading an Interstitial Ad, can only be called after `admob.MSG_INITIALIZATION` event Original docs [Android](https://developers.google.com/admob/android/interstitial-fullscreen), [iOS](https://developers.google.com/admob/ios/interstitial)

**Parameters**

- `ad_unit_id` (string) - Ad unit ID, for test ads use on Android `"ca-app-pub-3940256099942544/1033173712"`, or on iOS `"ca-app-pub-3940256099942544/4411468910"` Original docs [Android](https://developers.google.com/admob/android/interstitial-fullscreen), [iOS](https://developers.google.com/admob/ios/interstitial)

### admob.show_interstitial
*Type:* FUNCTION
Shows loaded Interstitial Ad, can only be called after `admob.EVENT_LOADED` Original docs [Android](https://developers.google.com/admob/android/interstitial-fullscreen), [iOS](https://developers.google.com/admob/ios/interstitial)

**Examples**

```
if admob and admob.is_interstitial_loaded() then
    admob.show_interstitial()
end

```

### admob.is_interstitial_loaded
*Type:* FUNCTION
Checks if Interstitial Ad is loaded and ready to show Original docs [Android](https://developers.google.com/admob/android/interstitial-fullscreen), [iOS](https://developers.google.com/admob/ios/interstitial)

**Returns**

- `boolean`

### admob.load_rewarded
*Type:* FUNCTION
Starts loading a Rewarded Ad, can only be called after `admob.MSG_INITIALIZATION` event Original docs [Android](https://developers.google.com/admob/android/rewarded-fullscreen), [iOS](https://developers.google.com/admob/ios/rewarded-ads)

**Parameters**

- `ad_unit_id` (string) - Ad unit ID, for test ads use on Android `"ca-app-pub-3940256099942544/1712485313"`, or on iOS `"ca-app-pub-3940256099942544/4411468910"` Original docs [Android](https://developers.google.com/admob/android/rewarded-fullscreen), [iOS](https://developers.google.com/admob/ios/rewarded-ads)
- `options` (table) - ServerSideVerificationOptions [Android](https://developers.google.com/admob/android/rewarded#validate-ssv), [iOS](https://developers.google.com/admob/ios/rewarded#validate-ssv)
  - `user_id` (string) - A unique identifier assigned to each user.
  - `custom_data` (string) - Custom Data attached to server-side reward callbacks.

### admob.show_rewarded
*Type:* FUNCTION
Shows loaded Rewarded Ad, can only be called after `admob.EVENT_LOADED` Original docs [Android](https://developers.google.com/admob/android/rewarded-fullscreen), [iOS](https://developers.google.com/admob/ios/rewarded-ads)

**Examples**

```
if admob and admob.is_rewarded_loaded() then
    admob.show_rewarded()
end

```

### admob.is_rewarded_loaded
*Type:* FUNCTION
Checks if Rewarded Ad is loaded and ready to show Original docs [Android](https://developers.google.com/admob/android/rewarded-fullscreen), [iOS](https://developers.google.com/admob/ios/rewarded-ads)

**Returns**

- `boolean`

### admob.load_rewarded_interstitial
*Type:* FUNCTION
Starts loading a Rewarded Interstitial Ad, can only be called after `admob.MSG_INITIALIZATION` event Original docs [Android](https://developers.google.com/admob/android/rewarded-interstitial#load_an_ad), [iOS](https://developers.google.com/admob/ios/rewarded-interstitial#load_an_ad)

**Parameters**

- `ad_unit_id` (string) - Ad unit ID, for test ads use on Android `"ca-app-pub-3940256099942544/5354046379"`, or on iOS `"ca-app-pub-3940256099942544/6978759866"` Original docs [Android](https://developers.google.com/admob/android/rewarded-interstitial#load_an_ad), [iOS](https://developers.google.com/admob/ios/rewarded-interstitial#load_an_ad)

### admob.show_rewarded_interstitial
*Type:* FUNCTION
Shows loaded Rewarded Interstitial Ad, can only be called after `admob.EVENT_LOADED` Original docs [Android](https://developers.google.com/admob/android/rewarded-interstitial#show_the_ad), [iOS](https://developers.google.com/admob/ios/rewarded-interstitial#display_the_ad_and_handle_the_reward_event)

**Examples**

```
if admob and admob.is_rewarded_interstitial_loaded() then
    admob.show_rewarded_interstitial()
end

```

### admob.is_rewarded_interstitial_loaded
*Type:* FUNCTION
Checks if Rewarded Interstitial Ad is loaded and ready to show Original docs [Android](https://developers.google.com/admob/android/rewarded-interstitial), [iOS](https://developers.google.com/admob/ios/rewarded-interstitial)

**Returns**

- `boolean`

### admob.load_banner
*Type:* FUNCTION
Starts loading a Banner Ad, can only be called after `admob.MSG_INITIALIZATION` event Original docs [Android](https://developers.google.com/admob/android/banner), [iOS](https://developers.google.com/admob/ios/banner)

**Parameters**

- `ad_unit_id` (string) - Ad unit ID, for test ads use on Android `"ca-app-pub-3940256099942544/6300978111"`, or on iOS `"ca-app-pub-3940256099942544/2934735716"` Original docs [Android](https://developers.google.com/admob/android/banner), [iOS](https://developers.google.com/admob/ios/banner)
- `size` (number) - Requested Banner Ad size, possible values: `admob.SIZE_ADAPTIVE_BANNER` (default), `admob.SIZE_BANNER`, `admob.SIZE_FLUID`, `admob.SIZE_FULL_BANNER`, `admob.SIZE_LARGE_BANNER`, `admob.SIZE_LEADEARBOARD`, `admob.SIZE_MEDIUM_RECTANGLE`, `admob.SIZE_SMART_BANNER`. Original docs [Android](https://developers.google.com/admob/android/banner#banner_sizes), [iOS](https://developers.google.com/admob/ios/banner#banner_sizes)

### admob.show_banner
*Type:* FUNCTION
Shows loaded Banner Ad, can only be called after `admob.EVENT_LOADED` Original docs [Android](https://developers.google.com/admob/android/banner), [iOS](https://developers.google.com/admob/ios/banner)

**Parameters**

- `position` (number) - Banner Ad position, possible values: `admob.POS_NONE` (default), `admob.POS_TOP_LEFT`, `admob.POS_TOP_CENTER`, `admob.POS_TOP_RIGHT`, `admob.POS_BOTTOM_LEFT`, `admob.POS_BOTTOM_CENTER`, `admob.POS_BOTTOM_RIGHT`, `admob.POS_CENTER`

**Examples**

```
if admob and admob.is_banner_loaded() then
    admob.show_banner(admob.POS_TOP_CENTER)
end

```

### admob.set_max_ad_content_rating
*Type:* FUNCTION
Sets a maximum ad content rating. AdMob ads returned for your app will have a content rating at or below that level. Original docs [Android](https://developers.google.com/admob/android/targeting#ad_content_filtering), [iOS](https://developers.google.com/admob/ios/targeting#ad_content_filtering)

**Parameters**

- `max_ad_rating` (number) - Max Ad Rating, possible values: `admob.MAX_AD_CONTENT_RATING_G`, `admob.MAX_AD_CONTENT_RATING_PG`, `admob.MAX_AD_CONTENT_RATING_T`, `admob.MAX_AD_CONTENT_RATING_MA`

**Examples**

```
  admob.set_max_ad_content_rating(admob.MAX_AD_CONTENT_RATING_PG)

```

### admob.hide_banner
*Type:* FUNCTION
Temporarily hides Banner Ad, banner can be shown again using `admob.show_banner()` Original docs [Android](https://developers.google.com/admob/android/banner), [iOS](https://developers.google.com/admob/ios/banner)

### admob.is_banner_loaded
*Type:* FUNCTION
Checks if Banner Ad is loaded and ready to show Original docs [Android](https://developers.google.com/admob/android/banner), [iOS](https://developers.google.com/admob/ios/banner)

**Returns**

- `boolean`

### admob.destroy_banner
*Type:* FUNCTION
Hides and unloads Banner Ad (needs to call `admob.load_banner()` later to show Banner Ad) Original docs [Android](https://developers.google.com/admob/android/banner), [iOS](https://developers.google.com/admob/ios/banner)

### MSG_INITIALIZATION
*Type:* VARIABLE

### MSG_INTERSTITIAL
*Type:* VARIABLE

### MSG_REWARDED
*Type:* VARIABLE

### MSG_BANNER
*Type:* VARIABLE

### MSG_IDFA
*Type:* VARIABLE

### MSG_REWARDED_INTERSTITIAL
*Type:* VARIABLE

### MSG_APPOPEN
*Type:* VARIABLE

### EVENT_CLOSED
*Type:* VARIABLE

### EVENT_FAILED_TO_SHOW
*Type:* VARIABLE

### EVENT_OPENING
*Type:* VARIABLE

### EVENT_FAILED_TO_LOAD
*Type:* VARIABLE

### EVENT_LOADED
*Type:* VARIABLE

### EVENT_NOT_LOADED
*Type:* VARIABLE

### EVENT_EARNED_REWARD
*Type:* VARIABLE

### EVENT_COMPLETE
*Type:* VARIABLE

### EVENT_CLICKED
*Type:* VARIABLE

### EVENT_DESTROYED
*Type:* VARIABLE

### EVENT_JSON_ERROR
*Type:* VARIABLE

### EVENT_IMPRESSION_RECORDED
*Type:* VARIABLE

### EVENT_STATUS_AUTHORIZED
*Type:* VARIABLE

### EVENT_STATUS_DENIED
*Type:* VARIABLE

### EVENT_STATUS_NOT_DETERMINED
*Type:* VARIABLE

### EVENT_STATUS_RESTRICTED
*Type:* VARIABLE

### EVENT_NOT_SUPPORTED
*Type:* VARIABLE

### SIZE_ADAPTIVE_BANNER
*Type:* VARIABLE

### SIZE_BANNER
*Type:* VARIABLE

### SIZE_FLUID
*Type:* VARIABLE

### SIZE_FULL_BANNER
*Type:* VARIABLE

### SIZE_LARGE_BANNER
*Type:* VARIABLE

### SIZE_LEADEARBOARD
*Type:* VARIABLE

### SIZE_MEDIUM_RECTANGLE
*Type:* VARIABLE

### SIZE_SMART_BANNER
*Type:* VARIABLE

### POS_NONE
*Type:* VARIABLE

### POS_TOP_LEFT
*Type:* VARIABLE

### POS_TOP_CENTER
*Type:* VARIABLE

### POS_TOP_RIGHT
*Type:* VARIABLE

### POS_BOTTOM_LEFT
*Type:* VARIABLE

### POS_BOTTOM_CENTER
*Type:* VARIABLE

### POS_BOTTOM_RIGHT
*Type:* VARIABLE

### POS_CENTER
*Type:* VARIABLE

### MAX_AD_CONTENT_RATING_G
*Type:* VARIABLE

### MAX_AD_CONTENT_RATING_PG
*Type:* VARIABLE

### MAX_AD_CONTENT_RATING_T
*Type:* VARIABLE

### MAX_AD_CONTENT_RATING_MA
*Type:* VARIABLE

<!-- extension-adpf_adpf -->

# extension-adpf {#apis:extension-adpf_adpf}

**Namespace:** `adpf`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with the Android Device Performance Framework

## API

### adpf.hint.initialize
*Type:* FUNCTION
Initialise performance hints

**Parameters**

- `target_fps_nanos` (number)

**Returns**

- `boolean` - Return true if the PerformanceHintManager API is available on the device

### adpf.hint.update_target_fps
*Type:* FUNCTION
Update the target fps

**Parameters**

- `target_fps_nanos` (number)

###
*Type:* TABLE
Functions and constants for interacting with the PerformanceHintManager

### adpf.thermal.initialize
*Type:* FUNCTION
Initialise thermal

**Parameters**

- `available` (boolean) - Return true if the Thermal API is available on the device

### adpf.thermal.get_headroom
*Type:* FUNCTION
Provides an estimate of how much thermal headroom the device currently has before hitting severe throttling.

**Parameters**

- `forecast_seconds` (number) - how many seconds in the future to forecast

**Returns**

- `number` - a value greater than or equal to 0.0 where 1.0 indicates the SEVERE throttling threshold

### adpf.thermal.get_status
*Type:* FUNCTION
Get the current thermal status of the device

**Returns**

- `number` - The current thermal status of the device. One of THERMAL_STATUS_XYZ.

### THERMAL_STATUS_CRITICAL
*Type:* VARIABLE
Platform has done everything to reduce power.

### THERMAL_STATUS_EMERGENCY
*Type:* VARIABLE
Key components in platform are shutting down due to thermal condition.

### THERMAL_STATUS_LIGHT
*Type:* VARIABLE
Light throttling where UX is not impacted.

### THERMAL_STATUS_MODERATE
*Type:* VARIABLE
Moderate throttling where UX is not largely impacted.

### THERMAL_STATUS_NONE
*Type:* VARIABLE
Not under throttling.

### THERMAL_STATUS_SEVERE
*Type:* VARIABLE
Severe throttling where UX is largely impacted.

### THERMAL_STATUS_SHUTDOWN
*Type:* VARIABLE
Need shutdown immediately

###
*Type:* TABLE
Functions and constants for interacting with the PowerManager ThermalAPI

<!-- extension-camera_camera -->

# extension-camera {#apis:extension-camera_camera}

**Namespace:** `camera`
**Language:** Lua
**Type:** Extension

Provides functionality to capture images using the camera. Supported on macOS, iOS and Android. [icon:ios] [icon:android]

## API

### camera.start_capture
*Type:* FUNCTION
Start camera capture using the specified camera (front/back) and capture quality. This may trigger a camera usage permission popup. When the popup has been dismissed the callback will be invoked with camera start status.

**Examples**

```
camera.start_capture(camera.CAMERA_TYPE_BACK, camera.CAPTURE_QUALITY_HIGH, function(self, message)
    if message == camera.CAMERA_STARTED then
        -- do stuff
    end
end)

```

### camera.stop_capture
*Type:* FUNCTION
Stops a previously started capture session.

**Examples**

```
camera.stop_capture()

```

### camera.get_info
*Type:* FUNCTION
Gets the info from the current capture session.

**Examples**

```
local info = camera.get_info()
print("width", info.width)
print("height", info.height)

```

### camera.get_frame
*Type:* FUNCTION
Get captured frame.

**Examples**

```
self.cameraframe = camera.get_frame()

```

### CAMERA_TYPE_FRONT
*Type:* STRING
Constant for the front camera.

### CAMERA_TYPE_BACK
*Type:* STRING
Constant for the back camera.

### CAPTURE_QUALITY_HIGH
*Type:* STRING
High quality capture session.

### CAPTURE_QUALITY_MEDIUM
*Type:* STRING
Medium quality capture session.

### CAPTURE_QUALITY_LOW
*Type:* STRING
Low quality capture session.

### CAMERA_STARTED
*Type:* STRING
The capture session has started.

### CAMERA_STOPPED
*Type:* STRING
The capture session has stopped.

### CAMERA_NOT_PERMITTED
*Type:* STRING
The user did not give permission to start the capture session.

### CAMERA_ERROR
*Type:* STRING
Something went wrong when starting the capture session.

<!-- extension-crazygames_crazygames -->

# extension-crazygames {#apis:extension-crazygames_crazygames}

**Namespace:** `crazygames`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with the CrazyGames SDK APIs

## API

### crazygames.gameplay_start
*Type:* FUNCTION
The gameplayStart() function has to be called whenever the player starts playing or resumes playing after a break (menu/loading/achievement screen, game paused, etc.)

### crazygames.gameplay_stop
*Type:* FUNCTION
The gameplayStop() function has to be called on every game break (entering a menu, switching level, pausing the game, ...) don't forget to call gameplayStart() when the gameplay resumes

### crazygames.loading_start
*Type:* FUNCTION
The loadingStart() function has to be called whenever you start loading your game.

### crazygames.loading_stop
*Type:* FUNCTION
The loadingStop() function has to be called when the loading is complete and eventually the gameplay starts.

### crazygames.show_rewarded_ad
*Type:* FUNCTION
Show a rewarded ad.

**Parameters**

- `callback` (function)

### crazygames.show_midgame_ad
*Type:* FUNCTION
Show a midgame ad.

**Parameters**

- `callback` (function)

### crazygames.is_ad_blocked
*Type:* FUNCTION
Detect if the user has an adblocker.

**Parameters**

- `callback` (function)

### crazygames.request_banner
*Type:* FUNCTION
Request a banner. The container will be resized to the specified width.

**Parameters**

- `div` (string)
- `width` (number)
- `height` (number)

### crazygames.request_responsive_banner
*Type:* FUNCTION
The responsive banners feature will request ads that fit into your container, without the need to specify or select a size beforehand.

**Parameters**

- `div` (string)

### crazygames.clear_banner
*Type:* FUNCTION
Clear a banner. Will also hide it.

**Parameters**

- `div` (string)

### crazygames.clear_all_banners
*Type:* FUNCTION
Clear all banners.

### crazygames.invite_link
*Type:* FUNCTION
Create a link to your game to invite others to join a multiplayer game.

**Parameters**

- `params` (table)

**Returns**

- `string`

### crazygames.show_invite_button
*Type:* FUNCTION
Display a button in the game footer, that opens a popup containing an invite link.

**Parameters**

- `params` (table)

**Returns**

- `string`

### crazygames.hide_invite_button
*Type:* FUNCTION
Hide the invite button when it is no longer necessary.

### crazygames.get_invite_param
*Type:* FUNCTION
Get an invite link parameters.

**Parameters**

- `key` (string)

**Returns**

- `string`

### crazygames.is_instant_multiplayer
*Type:* FUNCTION
For multiplayer games, if is_instant_multiplayer() returns true, you should instantly create a new room/lobby for the user.

**Returns**

- `boolean`

### crazygames.clear_data
*Type:* FUNCTION
Remove all data items from the local storage.

### crazygames.get_item
*Type:* FUNCTION
Get a data item from the local storage.

**Parameters**

- `key` (string)

**Returns**

- `string`

### crazygames.remove_item
*Type:* FUNCTION
Remove a data item from the local storage.

**Parameters**

- `key` (string)

### crazygames.set_item
*Type:* FUNCTION
Add a data item to the local storage.

**Parameters**

- `key` (string)
- `value` (string)

### crazygames.is_user_account_available
*Type:* FUNCTION
Before using any user account features, you should always ensure that the user account system is available.

**Returns**

- `boolean`

### crazygames.get_user
*Type:* FUNCTION
Retrieve the user currently logged in CrazyGames. If the user is not logged in CrazyGames, the returned user will be null. Will call the provided callback with the logged in user account.

**Parameters**

- `callback` (function) - The function takes two arguments, self and the user table

### crazygames.get_user_token
*Type:* FUNCTION
The user token is in JWT format and contains the userId of the player that is currently logged in to CrazyGames, as well as other useful information. You should send it to your server when required, and verify/decode it there to extract the userId. Will call the provided callback with the token.

**Parameters**

- `callback` (function) - The function takes two arguments, self and the token

### crazygames.get_xsolla_user_token
*Type:* FUNCTION
Generates a custom Xsolla token that you use with the Xsolla SDK. Will call the provided callback with the token.

**Parameters**

- `callback` (function) - The function takes two arguments, self and the xsolla token

### crazygames.show_auth_prompt
*Type:* FUNCTION
By calling this method, the log in or register popup will be displayed on CrazyGames. The user can log in their existing account, or create a new account. Will call the provided callback on log in.

**Parameters**

- `callback` (function) - The function takes two arguments, self and the user table

### crazygames.set_auth_listener
*Type:* FUNCTION
You can register a user auth listener that is triggered when the player logs in to CrazyGames. A log out doesn't trigger the auth listener, since the entire page is refreshed when the player logs out.

**Parameters**

- `callback` (function) - The function takes two arguments, self and the user table

### crazygames.remove_auth_listener
*Type:* FUNCTION
Remove any previously set auth listener.

### crazygames.show_account_link_prompt
*Type:* FUNCTION
Show an account linking prompt to link a CrazyGames account to the in-game account.

<!-- extension-crypt_crypt -->

# extension-crypt {#apis:extension-crypt_crypt}

**Namespace:** `crypt`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with various hash and encode/decode algorithms

## API

### crypt.hash_sha1
*Type:* FUNCTION

**Parameters**

- `buffer` (string)

**Returns**

- `string`

### crypt.hash_sha256
*Type:* FUNCTION

**Parameters**

- `buffer` (string)

**Returns**

- `string`

### crypt.hash_sha512
*Type:* FUNCTION

**Parameters**

- `buffer` (string)

**Returns**

- `string`

### crypt.hash_md5
*Type:* FUNCTION

**Parameters**

- `buffer` (string)

**Returns**

- `string`

### crypt.encode_base64
*Type:* FUNCTION

**Parameters**

- `input` (string)

**Returns**

- `string`

### crypt.decode_base64
*Type:* FUNCTION

**Parameters**

- `input` (string)

**Returns**

- `string`

### crypt.encrypt_xtea
*Type:* FUNCTION

**Parameters**

- `source` (string)
- `key` (string) - key should be <=16

**Returns**

- `string`

### crypt.decrypt_xtea
*Type:* FUNCTION

**Parameters**

- `source` (string)
- `key` (string) - key should be <=16

**Returns**

- `string`

<!-- extension-facebook_facebook -->

# extension-facebook {#apis:extension-facebook_facebook}

**Namespace:** `facebook`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with Facebook APIs

## API

### facebook.login_with_permissions
*Type:* FUNCTION
Login to Facebook and request a set of publish permissions.
The user is prompted to authorize the application using the login dialog of the specific platform. Even if the user is already logged in to Facebook this function can still be used to request additional publish permissions.
A comprehensive list of permissions can be found in the [Facebook permissions](https://developers.facebook.com/docs/facebook-login/permissions) documentation, as well as in their [guide to best practices for login management](https://developers.facebook.com/docs/facebook-login/best-practices).

**Parameters**

- `permissions` (table) - table with the requested publish permission strings.
- `audience` (number) - The audience that should be able to see the publications. Can be any of
- `facebook.AUDIENCE_NONE`
- `facebook.AUDIENCE_ONLYME`
- `facebook.AUDIENCE_FRIENDS`
- `facebook.AUDIENCE_EVERYONE`
- `callback` (function) - Callback function that is executed when the permission request dialog is closed.
  - `self` (object) - The context of the calling script
  - `data` (table) - A table that contains the response

**Examples**

Log in to Facebook with a set of publish permissions
```
local permissions = {"publish_actions"}
facebook.login_with_permissions(permissions, facebook.AUDIENCE_FRIENDS, function(self, data)
    if (data.status == facebook.STATE_OPEN and data.error == nil) then
        print("Successfully logged into Facebook")
        pprint(facebook.permissions())
    else
        print("Failed to get permissions (" .. data.status .. ")")
        pprint(data)
    end
end)

```

Log in to Facebook with a set of read permissions
```
local permissions = {"public_profile", "email", "user_friends"}
facebook.login_with_read_permissions(permissions, facebook.AUDIENCE_EVERYONE, function(self, data)
    if (data.status == facebook.STATE_OPEN and data.error == nil) then
        print("Successfully logged into Facebook")
        pprint(facebook.permissions())
    else
        print("Failed to get permissions (" .. data.status .. ")")
        pprint(data)
    end
end)

```

### facebook.login_with_tracking_preference
*Type:* FUNCTION
iOS ONLY. Login to Facebook and request a set of permissions. Allows developers to signal that a login is limited in terms of tracking users.
The user is prompted to authorize the application using the login dialog of the specific platform. Even if the user is already logged in to Facebook this function can still be used to request additional publish permissions.
A comprehensive list of permissions can be found in the [Facebook permissions](https://developers.facebook.com/docs/facebook-login/permissions) documentation, as well as in their [guide to best practices for login management](https://developers.facebook.com/docs/facebook-login/best-practices). For Limited Login the list of permissions can be found in the [Permissions in Limited Login](https://developers.facebook.com/docs/facebook-login/limited-login/permissions) documentation.

**Parameters**

- `login_tracking` (number) - The tracking type for the login. Can be any of
- `facebook.LOGIN_TRACKING_LIMITED`
- `facebook.LOGIN_TRACKING_ENABLED`
- `permissions` (table) - table with the requested publish permission strings.
- `crypto_nonce` (string) - Nonce that the configuration was created with. A unique nonce will be used if none is provided to the factory method.
- `callback` (function) - Callback function that is executed when the permission request dialog is closed.
  - `self` (object) - The context of the calling script
  - `data` (table) - A table that contains the response

**Examples**

Log in to Facebook with a set of publish permissions
```
local permissions = {"publish_actions"}
facebook.login_with_permissions(permissions, facebook.AUDIENCE_FRIENDS, function(self, data)
    if (data.status == facebook.STATE_OPEN and data.error == nil) then
        print("Successfully logged into Facebook")
        pprint(facebook.permissions())
    else
        print("Failed to get permissions (" .. data.status .. ")")
        pprint(data)
    end
end)

```

Log in to Facebook with a set of read permissions
```
local permissions = {"public_profile", "email", "user_friends"}
facebook.login_with_tracking_preference(facebook.LOGIN_TRACKING_LIMITED, permissions, "customcryptononce", function(self, data)
    if (data.status == facebook.STATE_OPEN and data.error == nil) then
        print("Successfully logged into Facebook")
        pprint(facebook.permissions())
    else
        print("Failed to get permissions (" .. data.status .. ")")
        pprint(data)
    end
end)

```

### facebook.logout
*Type:* FUNCTION
Logout from Facebook

### facebook.set_default_audience
*Type:* FUNCTION
iOS ONLY. The audience that should be able to see the publications. Should be called before `facebook.login_with_tracking_preference()`; Can be any of
- `facebook.AUDIENCE_NONE`
- `facebook.AUDIENCE_ONLYME`
- `facebook.AUDIENCE_FRIENDS`
- `facebook.AUDIENCE_EVERYONE`

### facebook.get_current_authentication_token
*Type:* FUNCTION
iOS ONLY. Get the current AuthenticationToken.
This function returns the currently stored authentication token after a previous successful login. If it returns nil no access token exists and you need to perform a login to get the wanted permissions.

**Returns**

- `string` - the authentication token or nil if the user is not logged in

### facebook.get_current_profile
*Type:* FUNCTION
iOS ONLY. Get the users [FBSDKProfile.currentProfile](https://developers.facebook.com/docs/facebook-login/limited-login/ios/). [Reading From Profile Helper Class](https://developers.facebook.com/docs/facebook-login/limited-login/permissions/profile-helper)

**Returns**

- `table` - After your application receives the logged-in users authentication token, you can use this function to read information that user has granted to your application.

### facebook.init
*Type:* FUNCTION
Initialize Facebook SDK (if facebook.autoinit is 0 in game.project)

### facebook.access_token
*Type:* FUNCTION
Get the current Facebook access token.
This function returns the currently stored access token after a previous successful login. If it returns nil no access token exists and you need to perform a login to get the wanted permissions.

**Returns**

- `string` - the access token or nil if the user is not logged in

**Examples**

Get the current access token, then use it to perform a graph API request.
```
local function get_name_callback(self, id, response)
    -- do something with the response
end
function init(self)
    -- assuming we are already logged in.
    local token = facebook.access_token()
    if token then
        local url = "https://graph.facebook.com/me/?access_token=".. token
        http.request(url, "GET", get_name_callback)
    end
end

```

### facebook.permissions
*Type:* FUNCTION
Get the currently granted permissions.
This function returns a table with all the currently granted permission strings.

**Returns**

- `table` - The permissions

**Examples**

Check the currently granted permissions for a particular permission
```
for _,permission in ipairs(facebook.permissions()) do
    if permission == "user_likes" then
        -- "user_likes" granted...
        break
    end
end

```

### facebook.post_event
*Type:* FUNCTION
Post an event to Facebook Analytics
This function will post an event to Facebook Analytics where it can be used in the Facebook Insights system.

**Parameters**

- `event` (number | string) - An event can either be one of the predefined constants below or a text string which can be used to define a custom event that is registered with Facebook Analytics.
- `facebook.EVENT_ACHIEVED_LEVEL` - `facebook.EVENT_ADDED_PAYMENT_INFO` - `facebook.EVENT_ADDED_TO_CART` - `facebook.EVENT_ADDED_TO_WISHLIST` - `facebook.EVENT_COMPLETED_REGISTRATION` - `facebook.EVENT_COMPLETED_TUTORIAL` - `facebook.EVENT_INITIATED_CHECKOUT` - `facebook.EVENT_PURCHASED` - `facebook.EVENT_RATED` - `facebook.EVENT_SEARCHED` - `facebook.EVENT_SPENT_CREDITS` - `facebook.EVENT_TIME_BETWEEN_SESSIONS` - `facebook.EVENT_UNLOCKED_ACHIEVEMENT` - `facebook.EVENT_VIEWED_CONTENT`
- `value` (number) - A numeric value for the event. This should represent the value of the event, such as the level achieved, price for an item or number of orcs killed.
- `params` (table) - Optional table with parameters and their values. A key in the table can either be one of the predefined constants below or a text which can be used to define a custom parameter.
- `facebook.PARAM_CONTENT_ID` - `facebook.PARAM_CONTENT_TYPE` - `facebook.PARAM_CURRENCY` - `facebook.PARAM_DESCRIPTION` - `facebook.PARAM_LEVEL` - `facebook.PARAM_MAX_RATING_VALUE` - `facebook.PARAM_NUM_ITEMS` - `facebook.PARAM_PAYMENT_INFO_AVAILABLE` - `facebook.PARAM_REGISTRATION_METHOD` - `facebook.PARAM_SEARCH_STRING` - `facebook.PARAM_SOURCE_APPLICATION` - `facebook.PARAM_SUCCESS`

**Examples**

Post a spent credits event to Facebook Analytics
```
params = {[facebook.PARAM_LEVEL] = 30, [facebook.PARAM_NUM_ITEMS] = 2}
facebook.post_event(facebook.EVENT_SPENT_CREDITS, 25, params)

```

### facebook.enable_event_usage
*Type:* FUNCTION
Enable event usage with Facebook Analytics This function will enable event usage for Facebook Analytics which means that Facebook will be able to use event data for ad-tracking.
[icon:attention] Event usage cannot be controlled and is always enabled for the Facebook Canvas platform, therefore this function has no effect on Facebook Canvas.

### facebook.disable_event_usage
*Type:* FUNCTION
Disable event usage with Facebook Analytics This function will disable event usage for Facebook Analytics which means that Facebook won't be able to use event data for ad-tracking. Events will still be sent to Facebook for insights.
[icon:attention] Event usage cannot be controlled and is always enabled for the Facebook Canvas platform, therefore this function has no effect on Facebook Canvas.

### facebook.enable_advertiser_tracking
*Type:* FUNCTION
Enable advertiser tracking This function will set AdvertiserTrackingEnabled (the 'ATE' flag) to true on iOS, to inform Audience Network to use the data to deliver personalized ads for users on iOS 14 and above.

### facebook.disable_advertiser_tracking
*Type:* FUNCTION
Disable advertiser tracking This function will set AdvertiserTrackingEnabled (the 'ATE' flag) to false on iOS, to inform Audience Network not to use the data to deliver personalized ads for users on iOS 14 and above.

### facebook.show_dialog
*Type:* FUNCTION
Show facebook web dialog
Display a Facebook web dialog of the type specified in the `dialog` parameter.

The `param` table should be set up according to the requirements of each dialog type. Note that some parameters are mandatory. Below is the list of available dialogs and where to find Facebook's developer documentation on parameters and response data.

`"apprequests"`
Shows a Game Request dialog. Game Requests allows players to invite their friends to play a game. Available parameters
- [type:string] `title`
- [type:string] `message`
- [type:number] `action_type`
- [type:number] `filters`
- [type:string] `data`
- [type:string] `object_id`
- [type:table] `suggestions`
- [type:table] `recipients`
- [type:string] `to`

On success, the "result" table parameter passed to the callback function will include the following fields
- [type:string] `request_id`
- [type:table] `to`

[Details for each parameter](https://developers.facebook.com/docs/games/services/gamerequests/v2.6#dialogparameters)

`"feed"`
The Feed Dialog allows people to publish individual stories to their timeline.

- [type:string] `caption`
- [type:string] `description`
- [type:string] `picture`
- [type:string] `link`
- [type:table] `people_ids`
- [type:string] `place_id`
- [type:string] `ref`

On success, the "result" table parameter passed to the callback function will include the following fields
- [type:string] `post_id`

[Details for each parameter](https://developers.facebook.com/docs/sharing/reference/feed-dialog/v2.6#params)

`"appinvite"`
The App Invite dialog is available only on iOS and Android. Note that the `url` parameter corresponds to the appLinkURL (iOS) and setAppLinkUrl (Android) properties.
- [type:string] `url`
- [type:string] `preview_image`
[Details for each parameter](https://developers.facebook.com/docs/reference/ios/current/class/FBSDKAppInviteContent)

**Parameters**

- `dialog` (string) - Dialog to show
- `"apprequests"`
- `"feed"`
- `"appinvite"`
- `param` (table) - table with dialog parameters
- `callback` (function) - Callback function that is called when the dialog is closed.
  - `self` (object) - The context of the calling script
  - `result` (table) - table with dialog specific results. See above.
  - `error` (table) - Error message. If there is no error, `error` is `nil`.

**Examples**

Show a dialog allowing the user to share a post to their timeline
```
local function fb_share(self, result, error)
    if error then
        -- something did not go right...
    else
        -- do something sensible
    end
end
function init(self)
    -- assuming we have logged in with publish permissions
    local param = { link = "http://www.mygame.com",picture="http://www.mygame.com/image.jpg" }
    facebook.show_dialog("feed", param, fb_share)
end

```

### facebook.get_version
*Type:* FUNCTION
Get the version of the Facebook SDK used by the extension.

**Returns**

- `string` - The Facebook SDK version

### facebook.deferred_deep_link
*Type:* FUNCTION
Allows receiving deferred deep link URL and parameters.
[More info about Referred Deep Links](https://developers.facebook.com/docs/app-ads/deep-linking/)

**Parameters**

- `callback` (function) - Callback function that is called when information is ready.
  - `self` (object) - The context of the calling script
  - `result` (table) - table with a deferred deep link information
    - `ref` (string) - ref for this App Link.
    - `extras` (table) - the full set of arguments for this app link. Properties like target uri & ref are typically picked out of this set of arguments.
    - `target_url` (string) - target uri for this App Link.
  - `error` (table) - Error message. If there is no error, `error` is `nil`.

**Examples**

Show a dialog allowing the user to share a post to their timeline
```
local function deferred_deep_link_callback(self, result, error)
  if error then
    print(error.error)
  else
    pprint(result)
  end
end

function init(self)
  facebook.deferred_deep_link(deferred_deep_link_callback)
end

```

### STATE_OPEN
*Type:* VARIABLE
The Facebook login session is open

### STATE_CLOSED_LOGIN_FAILED
*Type:* VARIABLE
The Facebook login session has closed because login failed

### GAMEREQUEST_ACTIONTYPE_NONE
*Type:* VARIABLE
Game request action type "none" for "apprequests" dialog

### GAMEREQUEST_ACTIONTYPE_SEND
*Type:* VARIABLE
Game request action type "send" for "apprequests" dialog

### GAMEREQUEST_ACTIONTYPE_ASKFOR
*Type:* VARIABLE
Game request action type "askfor" for "apprequests" dialog

### GAMEREQUEST_ACTIONTYPE_TURN
*Type:* VARIABLE
Game request action type "turn" for "apprequests" dialog

### GAMEREQUEST_FILTER_NONE
*Type:* VARIABLE
Game request filter type "none" for "apprequests" dialog

### GAMEREQUEST_FILTER_APPUSERS
*Type:* VARIABLE
Game request filter type "app_users" for "apprequests" dialog

### GAMEREQUEST_FILTER_APPNONUSERS
*Type:* VARIABLE
Game request filter type "app_non_users" for "apprequests" dialog

### EVENT_ACHIEVED_LEVEL
*Type:* VARIABLE
Log this event when the user has achieved a level

### EVENT_ADDED_PAYMENT_INFO
*Type:* VARIABLE
Log this event when the user has entered their payment info

### EVENT_ADDED_TO_CART
*Type:* VARIABLE
Log this event when the user has added an item to their cart The value_to_sum passed to facebook.post_event should be the item's price.

### EVENT_ADDED_TO_WISHLIST
*Type:* VARIABLE
Log this event when the user has added an item to their wish list The value_to_sum passed to facebook.post_event should be the item's price.

### EVENT_COMPLETED_REGISTRATION
*Type:* VARIABLE
Log this event when a user has completed registration with the app

### EVENT_COMPLETED_TUTORIAL
*Type:* VARIABLE
Log this event when the user has completed a tutorial in the app

### EVENT_INITIATED_CHECKOUT
*Type:* VARIABLE
Log this event when the user has entered the checkout process The value_to_sum passed to facebook.post_event should be the total price in the cart.

### EVENT_PURCHASED
*Type:* VARIABLE
Log this event when the user has completed a purchase. The value_to_sum passed to facebook.post_event should be the numeric rating.

### EVENT_RATED
*Type:* VARIABLE
Log this event when the user has rated an item in the app

### EVENT_SEARCHED
*Type:* VARIABLE
Log this event when a user has performed a search within the app

### EVENT_SPENT_CREDITS
*Type:* VARIABLE
Log this event when the user has spent app credits The value_to_sum passed to facebook.post_event should be the number of credits spent.

### EVENT_TIME_BETWEEN_SESSIONS
*Type:* VARIABLE
Log this event when measuring the time between user sessions

### EVENT_UNLOCKED_ACHIEVEMENT
*Type:* VARIABLE
Log this event when the user has unlocked an achievement in the app

### EVENT_VIEWED_CONTENT
*Type:* VARIABLE
Log this event when a user has viewed a form of content in the app

### PARAM_CONTENT_ID
*Type:* VARIABLE
Parameter key used to specify an ID for the content being logged about
The parameter key could be an EAN, article identifier, etc., depending on the nature of the app.

### PARAM_CONTENT_TYPE
*Type:* VARIABLE
Parameter key used to specify a generic content type/family for the logged event
The key is an arbitrary type/family (e.g. "music", "photo", "video") depending on the nature of the app.

### PARAM_CURRENCY
*Type:* VARIABLE
Parameter key used to specify currency used with logged event
Use a currency value key, e.g. "USD", "EUR", "GBP" etc. See See ISO-4217 for specific values.

### PARAM_DESCRIPTION
*Type:* VARIABLE
Parameter key used to specify a description appropriate to the event being logged
Use this for app specific event description, for instance the name of the achievement unlocked in the facebook.EVENT_UNLOCKED_ACHIEVEMENT event.

### PARAM_LEVEL
*Type:* VARIABLE
Parameter key used to specify the level achieved

### PARAM_MAX_RATING_VALUE
*Type:* VARIABLE
Parameter key used to specify the maximum rating available
Set to specify the max rating available for the facebook.EVENT_RATED event. E.g., "5" or "10".

### PARAM_NUM_ITEMS
*Type:* VARIABLE
Parameter key used to specify how many items are being processed
Set to specify the number of items being processed for an facebook.EVENT_INITIATED_CHECKOUT or facebook.EVENT_PURCHASED event.

### PARAM_PAYMENT_INFO_AVAILABLE
*Type:* VARIABLE
Parameter key used to specify whether payment info is available
Set to specify if payment info is available for the facebook.EVENT_INITIATED_CHECKOUT event.

### PARAM_REGISTRATION_METHOD
*Type:* VARIABLE
Parameter key used to specify method user has used to register for the app
Set to specify what registation method a user used for the app, e.g. "Facebook", "email", "Twitter", etc.

### PARAM_SEARCH_STRING
*Type:* VARIABLE
Parameter key used to specify user search string
Set this to the the string that the user provided for a search operation.

### PARAM_SOURCE_APPLICATION
*Type:* VARIABLE
Parameter key used to specify source application package

### PARAM_SUCCESS
*Type:* VARIABLE
Parameter key used to specify activity success
Set this key to indicate whether the activity being logged about was successful or not.

### AUDIENCE_NONE
*Type:* VARIABLE
Publish permission to reach no audience

### AUDIENCE_ONLYME
*Type:* VARIABLE
Publish permission to reach only me (private to current user)

### AUDIENCE_FRIENDS
*Type:* VARIABLE
Publish permission to reach user friends

### AUDIENCE_EVERYONE
*Type:* VARIABLE
Publish permission to reach everyone

### LOGIN_TRACKING_LIMITED
*Type:* VARIABLE
Login tracking Limited

### LOGIN_TRACKING_ENABLED
*Type:* VARIABLE
Login tracking enabled

<!-- extension-firebase-analytics_firebase -->

# extension-firebase-analytics {#apis:extension-firebase-analytics_firebase}

**Namespace:** `firebase`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with Firebase

## API

### firebase.analytics.initialize
*Type:* FUNCTION
Initialise analytics

### firebase.analytics.set_callback
*Type:* FUNCTION
Sets a callback function for receiving events from the SDK. Call `firebase.analytics.set_callback(nil)` to remove callback

**Parameters**

- `callback` (function) - Callback function that is executed on any event in the SDK.
  - `self` (object) - The calling script instance
  - `message_id` (number) - One of message types: `firebase.analytics.MSG_ERROR` `firebase.analytics.MSG_INSTANCE_ID`
  - `message` (table) - A table holding the data
    - `error` (string) - The error message (if an error occurred or `nil` otherwise)
    - `instance_id` (string) - For message_id MSG_INSTANCE_ID or `nil` otherwise.

### firebase.analytics.log
*Type:* FUNCTION
Log an event without parameters.

**Parameters**

- `name` (string) - Event name

### firebase.analytics.log_string
*Type:* FUNCTION
Log an event with one string parameter.

**Parameters**

- `name` (string) - Event name
- `PARAMeter_name` (string) - Parameter name
- `PARAMeter_value` (string) - Parameter value

### firebase.analytics.log_int
*Type:* FUNCTION
Log an event with one integer parameter.

**Parameters**

- `name` (string) - Event name
- `PARAMeter_name` (string) - Parameter name
- `PARAMeter_value` (number) - Parameter value

### firebase.analytics.log_number
*Type:* FUNCTION
Log an event with one float parameter.

**Parameters**

- `name` (string) - Event name
- `PARAMeter_name` (string) - Parameter name
- `PARAMeter_value` (number) - Parameter value

### firebase.analytics.log_table
*Type:* FUNCTION
Log an event with table parameters.

**Parameters**

- `name` (string) - Event name
- `parameters_table` (table) - Table with parameters (key-value pairs)

### firebase.analytics.set_default_event_params
*Type:* FUNCTION
Log an event with table parameters.

**Parameters**

- `default_params` (table) - Table with default parameters (key-value pairs)

### firebase.analytics.set_user_id
*Type:* FUNCTION
Sets the user ID property.

**Parameters**

- `user_id` (string) - User ID property

### firebase.analytics.set_user_property
*Type:* FUNCTION
Set a user property to the given value.

**Parameters**

- `name` (string) - User property name
- `property` (string) - User property value

### firebase.analytics.reset
*Type:* FUNCTION
Clears all data for this app from the device and resets the app instance id.

### firebase.analytics.get_id
*Type:* FUNCTION
Get the instance ID from the service. Returned in callback with MSG_INSTANCE_ID message_id.

### firebase.analytics.set_enabled
*Type:* FUNCTION
Sets whether analytics collection is enabled for this app on this device.

**Parameters**

- `key` (boolean) - The value

### MSG_ERROR
*Type:* VARIABLE
Event generated when an error occurred.

### MSG_INSTANCE_ID
*Type:* VARIABLE
Event generated when instance_id ready after `firebase.analytics.get_id()` call

### EVENT_ADIMPRESSION
*Type:* STRING
Predefined event

### EVENT_ADDPAYMENTINFO
*Type:* STRING
Predefined event

### EVENT_ADDSHIPPINGINFO
*Type:* STRING
Predefined event

### EVENT_ADDTOCART
*Type:* STRING
Predefined event

### EVENT_ADDTOWISHLIST
*Type:* STRING
Predefined event

### EVENT_APPOPEN
*Type:* STRING
Predefined event

### EVENT_BEGINCHECKOUT
*Type:* STRING
Predefined event

### EVENT_CAMPAIGNDETAILS
*Type:* STRING
Predefined event

### EVENT_EARNVIRTUALCURRENCY
*Type:* STRING
Predefined event

### EVENT_GENERATELEAD
*Type:* STRING
Predefined event

### EVENT_JOINGROUP
*Type:* STRING
Predefined event

### EVENT_LEVELEND
*Type:* STRING
Predefined event

### EVENT_LEVELSTART
*Type:* STRING
Predefined event

### EVENT_LEVELUP
*Type:* STRING
Predefined event

### EVENT_LOGIN
*Type:* STRING
Predefined event

### EVENT_POSTSCORE
*Type:* STRING
Predefined event

### EVENT_PURCHASE
*Type:* STRING
Predefined event

### EVENT_REFUND
*Type:* STRING
Predefined event

### EVENT_REMOVEFROMCART
*Type:* STRING
Predefined event

### EVENT_SCREENVIEW
*Type:* STRING
Predefined event

### EVENT_SEARCH
*Type:* STRING
Predefined event

### EVENT_SELECTCONTENT
*Type:* STRING
Predefined event

### EVENT_SELECTITEM
*Type:* STRING
Predefined event

### EVENT_SELECTPROMOTION
*Type:* STRING
Predefined event

### EVENT_SHARE
*Type:* STRING
Predefined event

### EVENT_SIGNUP
*Type:* STRING
Predefined event

### EVENT_SPENDVIRTUALCURRENCY
*Type:* STRING
Predefined event

### EVENT_TUTORIALBEGIN
*Type:* STRING
Predefined event

### EVENT_TUTORIALCOMPLETE
*Type:* STRING
Predefined event

### EVENT_UNLOCKACHIEVEMENT
*Type:* STRING
Predefined event

### EVENT_VIEWCART
*Type:* STRING
Predefined event

### EVENT_VIEWITEM
*Type:* STRING
Predefined event

### EVENT_VIEWITEMLIST
*Type:* STRING
Predefined event

### EVENT_VIEWPROMOTION
*Type:* STRING
Predefined event

### EVENT_VIEWSEARCHRESULTS
*Type:* STRING
Predefined event

### PARAM_ADFORMAT
*Type:* STRING
Predefined parameter

### PARAM_ADNETWORKCLICKID
*Type:* STRING
Predefined parameter

### PARAM_ADPLATFORM
*Type:* STRING
Predefined parameter

### PARAM_ADSOURCE
*Type:* STRING
Predefined parameter

### PARAM_ADUNITNAME
*Type:* STRING
Predefined parameter

### PARAM_AFFILIATION
*Type:* STRING
Predefined parameter

### PARAM_CP1
*Type:* STRING
Predefined parameter

### PARAM_CAMPAIGN
*Type:* STRING
Predefined parameter

### PARAM_CAMPAIGNID
*Type:* STRING
Predefined parameter

### PARAM_CHARACTER
*Type:* STRING
Predefined parameter

### PARAM_CONTENT
*Type:* STRING
Predefined parameter

### PARAM_CONTENTTYPE
*Type:* STRING
Predefined parameter

### PARAM_COUPON
*Type:* STRING
Predefined parameter

### PARAM_CREATIVEFORMAT
*Type:* STRING
Predefined parameter

### PARAM_CREATIVENAME
*Type:* STRING
Predefined parameter

### PARAM_CREATIVESLOT
*Type:* STRING
Predefined parameter

### PARAM_CURRENCY
*Type:* STRING
Predefined parameter

### PARAM_DESTINATION
*Type:* STRING
Predefined parameter

### PARAM_DISCOUNT
*Type:* STRING
Predefined parameter

### PARAM_ENDDATE
*Type:* STRING
Predefined parameter

### PARAM_EXTENDSESSION
*Type:* STRING
Predefined parameter

### PARAM_FLIGHTNUMBER
*Type:* STRING
Predefined parameter

### PARAM_GROUPID
*Type:* STRING
Predefined parameter

### PARAM_INDEX
*Type:* STRING
Predefined parameter

### PARAM_ITEMBRAND
*Type:* STRING
Predefined parameter

### PARAM_ITEMCATEGORY
*Type:* STRING
Predefined parameter

### PARAM_ITEMCATEGORY2
*Type:* STRING
Predefined parameter

### PARAM_ITEMCATEGORY3
*Type:* STRING
Predefined parameter

### PARAM_ITEMCATEGORY4
*Type:* STRING
Predefined parameter

### PARAM_ITEMCATEGORY5
*Type:* STRING
Predefined parameter

### PARAM_ITEMID
*Type:* STRING
Predefined parameter

### PARAM_ITEMLISTID
*Type:* STRING
Predefined parameter

### PARAM_ITEMLISTNAME
*Type:* STRING
Predefined parameter

### PARAM_ITEMNAME
*Type:* STRING
Predefined parameter

### PARAM_ITEMVARIANT
*Type:* STRING
Predefined parameter

### PARAM_ITEMS
*Type:* STRING
Predefined parameter

### PARAM_LEVEL
*Type:* STRING
Predefined parameter

### PARAM_LEVELNAME
*Type:* STRING
Predefined parameter

### PARAM_LOCATION
*Type:* STRING
Predefined parameter

### PARAM_LOCATIONID
*Type:* STRING
Predefined parameter

### PARAM_MARKETINGTACTIC
*Type:* STRING
Predefined parameter

### PARAM_MEDIUM
*Type:* STRING
Predefined parameter

### PARAM_METHOD
*Type:* STRING
Predefined parameter

### PARAM_NUMBEROFNIGHTS
*Type:* STRING
Predefined parameter

### PARAM_NUMBEROFPASSENGERS
*Type:* STRING
Predefined parameter

### PARAM_NUMBEROFROOMS
*Type:* STRING
Predefined parameter

### PARAM_ORIGIN
*Type:* STRING
Predefined parameter

### PARAM_PAYMENTTYPE
*Type:* STRING
Predefined parameter

### PARAM_PRICE
*Type:* STRING
Predefined parameter

### PARAM_PROMOTIONID
*Type:* STRING
Predefined parameter

### PARAM_PROMOTIONNAME
*Type:* STRING
Predefined parameter

### PARAM_QUANTITY
*Type:* STRING
Predefined parameter

### PARAM_SCORE
*Type:* STRING
Predefined parameter

### PARAM_SCREENCLASS
*Type:* STRING
Predefined parameter

### PARAM_SCREENNAME
*Type:* STRING
Predefined parameter

### PARAM_SEARCHTERM
*Type:* STRING
Predefined parameter

### PARAM_SHIPPING
*Type:* STRING
Predefined parameter

### PARAM_SHIPPINGTIER
*Type:* STRING
Predefined parameter

### PARAM_SOURCE
*Type:* STRING
Predefined parameter

### PARAM_SOURCEPLATFORM
*Type:* STRING
Predefined parameter

### PARAM_STARTDATE
*Type:* STRING
Predefined parameter

### PARAM_SUCCESS
*Type:* STRING
Predefined parameter

### PARAM_TAX
*Type:* STRING
Predefined parameter

### PARAM_TERM
*Type:* STRING
Predefined parameter

### PARAM_TRANSACTIONID
*Type:* STRING
Predefined parameter

### PARAM_TRAVELCLASS
*Type:* STRING
Predefined parameter

### PARAM_VALUE
*Type:* STRING
Predefined parameter

### PARAM_VIRTUALCURRENCYNAME
*Type:* STRING
Predefined parameter

### PROP_ALLOWADPERSONALIZATIONSIGNALS
*Type:* STRING
Predefined property

### PROP_SIGNUPMETHOD
*Type:* STRING
Predefined property

###
*Type:* TABLE
Functions and constants for interacting with Firebase Analytics

<!-- extension-firebase-remoteconfig_firebase -->

# extension-firebase-remoteconfig {#apis:extension-firebase-remoteconfig_firebase}

**Namespace:** `firebase`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with Firebase

## API

### firebase.remoteconfig.initialize
*Type:* FUNCTION
Initialise Firebase Remote Config. Generates MSG_INITIALIZED or MSG_ERROR

### firebase.remoteconfig.set_callback
*Type:* FUNCTION
Sets a callback function for receiving events from the SDK. Call `firebase.set_callback(nil)` to remove callback

**Parameters**

- `callback` (function) - Callback function that is executed on any event in the SDK.
  - `self` (object) - The calling script instance
  - `message_id` (number) - One of message types: `firebase.remoteconfig.MSG_INITIALIZED` `firebase.remoteconfig.MSG_INSTALLATION_AUTH_TOKEN` `firebase.remoteconfig.MSG_INSTALLATION_ID` `firebase.remoteconfig.MSG_DEFAULTS_SET` `firebase.remoteconfig.MSG_FETCHED` `firebase.remoteconfig.MSG_ACTIVATED` `firebase.remoteconfig.MSG_SETTINGS_UPDATED` `firebase.remoteconfig.MSG_ERROR`
  - `message` (table) - A table holding the data
    - `error` (string) - The error message (if an error occurred or `nil` otherwise)

### firebase.remoteconfig.fetch
*Type:* FUNCTION
Fetches config data from the server. Generates MSG_FETCHED or MSG_ERROR

### firebase.remoteconfig.activate
*Type:* FUNCTION
Asynchronously activates the most recently fetched configs, so that the fetched key value pairs take effect. Generates MSG_ACTIVATED or MSG_ERROR

### firebase.remoteconfig.fetch_and_activate
*Type:* FUNCTION
Asynchronously fetches and then activates the fetched configs. Generates MSG_FETCHED and MSG_ACTIVATED or MSG_ERROR

### firebase.remoteconfig.get_boolean
*Type:* FUNCTION
Returns the value associated with a key, converted to a bool.

**Parameters**

- `key` (string) - Key of the value to be retrieved

### firebase.remoteconfig.get_data
*Type:* FUNCTION
Returns the value associated with a key, as a vector of raw byte-data.

**Parameters**

- `key` (string) - Key of the value to be retrieved

### firebase.remoteconfig.get_number
*Type:* FUNCTION
Returns the value associated with a key, converted to a double.

**Parameters**

- `key` (string) - Key of the value to be retrieved

### firebase.remoteconfig.get_string
*Type:* FUNCTION
Returns the value associated with a key, converted to a string.

**Parameters**

- `key` (string) - Key of the value to be retrieved

### firebase.remoteconfig.get_keys
*Type:* FUNCTION
Gets the set of all keys.

### firebase.remoteconfig.set_defaults
*Type:* FUNCTION
Sets the default values.

**Parameters**

- `defaults` (table) - Key-value pairs representing the default values. Generates MSG_DEFAULTS_SET or MSG_ERROR

### firebase.remoteconfig.set_minimum_fetch_interval
*Type:* FUNCTION
Sets the minimum fetch interval.

**Parameters**

- `minimum_fetch_interval` (int) - The minimum interval in milliseconds between successive fetch calls. Generates MSG_SETTINGS_UPDATED or MSG_ERROR

### firebase.remoteconfig.set_timeout
*Type:* FUNCTION
Sets the timeout that specifies how long the client should wait for a connection to the Firebase Remote Config servers

**Parameters**

- `minimum_fetch_interval` (int) - The timeout interval in milliseconds. Generates MSG_SETTINGS_UPDATED or MSG_ERROR

### MSG_INITIALIZED
*Type:* VARIABLE
Event generated when remote config has been initialized and is ready for use

### MSG_ERROR
*Type:* VARIABLE
Event generated when an error occurred.

### MSG_DEFAULTS_SET
*Type:* VARIABLE
Event generated when the default values have been set

### MSG_FETCHED
*Type:* VARIABLE
Event generated when the remote config has been fetched

### MSG_ACTIVATED
*Type:* VARIABLE
Event generated when the remote config has been activated

### MSG_SETTINGS_UPDATED
*Type:* VARIABLE
Event generated when remote config settings have been updated

###
*Type:* TABLE
Functions and constants for interacting with Firebase Remote Config

<!-- extension-firebase_firebase -->

# extension-firebase {#apis:extension-firebase_firebase}

**Namespace:** `firebase`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with Firebase

## API

### firebase.initialize
*Type:* FUNCTION
Initialise Firebase

**Parameters**

- `options` (table) - Optional table with initialisation parameters to use instead of those specified in google-services.xml/plist When passing this, disable creation of the default Firebase App by specifying firebase.no_auto_init in game.project Valid keys in the table are api_key, app_id, database_url, messaging_sender_id, project_id, storage_bucket. All values are strings.

### firebase.get_installation_auth_token
*Type:* FUNCTION
Get the Firebase Installation auth token

### firebase.set_callback
*Type:* FUNCTION
Sets a callback function for receiving events from the SDK. Call `firebase.set_callback(nil)` to remove callback

**Parameters**

- `callback` (function) - Callback function that is executed on any event in the SDK.
  - `self` (object) - The calling script instance
  - `message_id` (number) - One of message types: `firebase.MSG_INITIALIZED` `firebase.MSG_INSTALLATION_AUTH_TOKEN` `firebase.MSG_INSTALLATION_ID` `firebase.MSG_ERROR`
  - `message` (table) - A table holding the data
    - `token` (number) - for MSG_INSTALLATION_AUTH_TOKEN
    - `id` (number) - for MSG_INSTALLATION_ID
    - `error` (string) - The error message (if an error occurred or `nil` otherwise)

### firebase.get_installation_id
*Type:* FUNCTION
Get the Firebase Installation id

### MSG_ERROR
*Type:* VARIABLE

### MSG_INITIALIZED
*Type:* VARIABLE

### MSG_INSTALLATION_AUTH_TOKEN
*Type:* VARIABLE

### MSG_INSTALLATION_ID
*Type:* VARIABLE

<!-- extension-fmod_fmod -->

# extension-fmod {#apis:extension-fmod_fmod}

**Namespace:** `fmod`
**Language:** Lua
**Type:** Extension

FMOD Low Level API for audio playback and manipulation.

This module provides access to FMOD's low-level audio engine, allowing you to:
- Create and play sounds
- Control audio channels and channel groups
- Apply DSP effects
- Handle 3D audio positioning

For more information, see the [FMOD documentation](https://www.fmod.com/docs).

## API

### THREAD_TYPE_MIXER
*Type:* VARIABLE

### THREAD_TYPE_FEEDER
*Type:* VARIABLE

### THREAD_TYPE_STREAM
*Type:* VARIABLE

### THREAD_TYPE_FILE
*Type:* VARIABLE

### THREAD_TYPE_NONBLOCKING
*Type:* VARIABLE

### THREAD_TYPE_RECORD
*Type:* VARIABLE

### THREAD_TYPE_GEOMETRY
*Type:* VARIABLE

### THREAD_TYPE_PROFILER
*Type:* VARIABLE

### THREAD_TYPE_STUDIO_UPDATE
*Type:* VARIABLE

### THREAD_TYPE_STUDIO_LOAD_BANK
*Type:* VARIABLE

### THREAD_TYPE_STUDIO_LOAD_SAMPLE
*Type:* VARIABLE

### THREAD_TYPE_CONVOLUTION1
*Type:* VARIABLE

### THREAD_TYPE_CONVOLUTION2
*Type:* VARIABLE

### THREAD_TYPE_MAX
*Type:* VARIABLE

### OK
*Type:* VARIABLE

### ERR_BADCOMMAND
*Type:* VARIABLE

### ERR_CHANNEL_ALLOC
*Type:* VARIABLE

### ERR_CHANNEL_STOLEN
*Type:* VARIABLE

### ERR_DMA
*Type:* VARIABLE

### ERR_DSP_CONNECTION
*Type:* VARIABLE

### ERR_DSP_DONTPROCESS
*Type:* VARIABLE

### ERR_DSP_FORMAT
*Type:* VARIABLE

### ERR_DSP_INUSE
*Type:* VARIABLE

### ERR_DSP_NOTFOUND
*Type:* VARIABLE

### ERR_DSP_RESERVED
*Type:* VARIABLE

### ERR_DSP_SILENCE
*Type:* VARIABLE

### ERR_DSP_TYPE
*Type:* VARIABLE

### ERR_FILE_BAD
*Type:* VARIABLE

### ERR_FILE_COULDNOTSEEK
*Type:* VARIABLE

### ERR_FILE_DISKEJECTED
*Type:* VARIABLE

### ERR_FILE_EOF
*Type:* VARIABLE

### ERR_FILE_ENDOFDATA
*Type:* VARIABLE

### ERR_FILE_NOTFOUND
*Type:* VARIABLE

### ERR_FORMAT
*Type:* VARIABLE

### ERR_HEADER_MISMATCH
*Type:* VARIABLE

### ERR_HTTP
*Type:* VARIABLE

### ERR_HTTP_ACCESS
*Type:* VARIABLE

### ERR_HTTP_PROXY_AUTH
*Type:* VARIABLE

### ERR_HTTP_SERVER_ERROR
*Type:* VARIABLE

### ERR_HTTP_TIMEOUT
*Type:* VARIABLE

### ERR_INITIALIZATION
*Type:* VARIABLE

### ERR_INITIALIZED
*Type:* VARIABLE

### ERR_INTERNAL
*Type:* VARIABLE

### ERR_INVALID_FLOAT
*Type:* VARIABLE

### ERR_INVALID_HANDLE
*Type:* VARIABLE

### ERR_INVALID_PARAM
*Type:* VARIABLE

### ERR_INVALID_POSITION
*Type:* VARIABLE

### ERR_INVALID_SPEAKER
*Type:* VARIABLE

### ERR_INVALID_SYNCPOINT
*Type:* VARIABLE

### ERR_INVALID_THREAD
*Type:* VARIABLE

### ERR_INVALID_VECTOR
*Type:* VARIABLE

### ERR_MAXAUDIBLE
*Type:* VARIABLE

### ERR_MEMORY
*Type:* VARIABLE

### ERR_MEMORY_CANTPOINT
*Type:* VARIABLE

### ERR_NEEDS3D
*Type:* VARIABLE

### ERR_NEEDSHARDWARE
*Type:* VARIABLE

### ERR_NET_CONNECT
*Type:* VARIABLE

### ERR_NET_SOCKET_ERROR
*Type:* VARIABLE

### ERR_NET_URL
*Type:* VARIABLE

### ERR_NET_WOULD_BLOCK
*Type:* VARIABLE

### ERR_NOTREADY
*Type:* VARIABLE

### ERR_OUTPUT_ALLOCATED
*Type:* VARIABLE

### ERR_OUTPUT_CREATEBUFFER
*Type:* VARIABLE

### ERR_OUTPUT_DRIVERCALL
*Type:* VARIABLE

### ERR_OUTPUT_FORMAT
*Type:* VARIABLE

### ERR_OUTPUT_INIT
*Type:* VARIABLE

### ERR_OUTPUT_NODRIVERS
*Type:* VARIABLE

### ERR_PLUGIN
*Type:* VARIABLE

### ERR_PLUGIN_MISSING
*Type:* VARIABLE

### ERR_PLUGIN_RESOURCE
*Type:* VARIABLE

### ERR_PLUGIN_VERSION
*Type:* VARIABLE

### ERR_RECORD
*Type:* VARIABLE

### ERR_REVERB_CHANNELGROUP
*Type:* VARIABLE

### ERR_REVERB_INSTANCE
*Type:* VARIABLE

### ERR_SUBSOUNDS
*Type:* VARIABLE

### ERR_SUBSOUND_ALLOCATED
*Type:* VARIABLE

### ERR_SUBSOUND_CANTMOVE
*Type:* VARIABLE

### ERR_TAGNOTFOUND
*Type:* VARIABLE

### ERR_TOOMANYCHANNELS
*Type:* VARIABLE

### ERR_TRUNCATED
*Type:* VARIABLE

### ERR_UNIMPLEMENTED
*Type:* VARIABLE

### ERR_UNINITIALIZED
*Type:* VARIABLE

### ERR_UNSUPPORTED
*Type:* VARIABLE

### ERR_VERSION
*Type:* VARIABLE

### ERR_EVENT_ALREADY_LOADED
*Type:* VARIABLE

### ERR_EVENT_LIVEUPDATE_BUSY
*Type:* VARIABLE

### ERR_EVENT_LIVEUPDATE_MISMATCH
*Type:* VARIABLE

### ERR_EVENT_LIVEUPDATE_TIMEOUT
*Type:* VARIABLE

### ERR_EVENT_NOTFOUND
*Type:* VARIABLE

### ERR_STUDIO_UNINITIALIZED
*Type:* VARIABLE

### ERR_STUDIO_NOT_LOADED
*Type:* VARIABLE

### ERR_INVALID_STRING
*Type:* VARIABLE

### ERR_ALREADY_LOCKED
*Type:* VARIABLE

### ERR_NOT_LOCKED
*Type:* VARIABLE

### ERR_RECORD_DISCONNECTED
*Type:* VARIABLE

### ERR_TOOMANYSAMPLES
*Type:* VARIABLE

### CHANNELCONTROL_CHANNEL
*Type:* VARIABLE

### CHANNELCONTROL_CHANNELGROUP
*Type:* VARIABLE

### CHANNELCONTROL_MAX
*Type:* VARIABLE

### OUTPUTTYPE_AUTODETECT
*Type:* VARIABLE

### OUTPUTTYPE_UNKNOWN
*Type:* VARIABLE

### OUTPUTTYPE_NOSOUND
*Type:* VARIABLE

### OUTPUTTYPE_WAVWRITER
*Type:* VARIABLE

### OUTPUTTYPE_NOSOUND_NRT
*Type:* VARIABLE

### OUTPUTTYPE_WAVWRITER_NRT
*Type:* VARIABLE

### OUTPUTTYPE_WASAPI
*Type:* VARIABLE

### OUTPUTTYPE_ASIO
*Type:* VARIABLE

### OUTPUTTYPE_PULSEAUDIO
*Type:* VARIABLE

### OUTPUTTYPE_ALSA
*Type:* VARIABLE

### OUTPUTTYPE_COREAUDIO
*Type:* VARIABLE

### OUTPUTTYPE_AUDIOTRACK
*Type:* VARIABLE

### OUTPUTTYPE_OPENSL
*Type:* VARIABLE

### OUTPUTTYPE_AUDIOOUT
*Type:* VARIABLE

### OUTPUTTYPE_AUDIO3D
*Type:* VARIABLE

### OUTPUTTYPE_WEBAUDIO
*Type:* VARIABLE

### OUTPUTTYPE_NNAUDIO
*Type:* VARIABLE

### OUTPUTTYPE_WINSONIC
*Type:* VARIABLE

### OUTPUTTYPE_AAUDIO
*Type:* VARIABLE

### OUTPUTTYPE_AUDIOWORKLET
*Type:* VARIABLE

### OUTPUTTYPE_PHASE
*Type:* VARIABLE

### OUTPUTTYPE_OHAUDIO
*Type:* VARIABLE

### OUTPUTTYPE_MAX
*Type:* VARIABLE

### DEBUG_MODE_TTY
*Type:* VARIABLE

### DEBUG_MODE_FILE
*Type:* VARIABLE

### DEBUG_MODE_CALLBACK
*Type:* VARIABLE

### SPEAKERMODE_DEFAULT
*Type:* VARIABLE

### SPEAKERMODE_RAW
*Type:* VARIABLE

### SPEAKERMODE_MONO
*Type:* VARIABLE

### SPEAKERMODE_STEREO
*Type:* VARIABLE

### SPEAKERMODE_QUAD
*Type:* VARIABLE

### SPEAKERMODE_SURROUND
*Type:* VARIABLE

### SPEAKERMODE_5POINT1
*Type:* VARIABLE

### SPEAKERMODE_7POINT1
*Type:* VARIABLE

### SPEAKERMODE_7POINT1POINT4
*Type:* VARIABLE

### SPEAKERMODE_MAX
*Type:* VARIABLE

### SPEAKER_NONE
*Type:* VARIABLE

### SPEAKER_FRONT_LEFT
*Type:* VARIABLE

### SPEAKER_FRONT_RIGHT
*Type:* VARIABLE

### SPEAKER_FRONT_CENTER
*Type:* VARIABLE

### SPEAKER_LOW_FREQUENCY
*Type:* VARIABLE

### SPEAKER_SURROUND_LEFT
*Type:* VARIABLE

### SPEAKER_SURROUND_RIGHT
*Type:* VARIABLE

### SPEAKER_BACK_LEFT
*Type:* VARIABLE

### SPEAKER_BACK_RIGHT
*Type:* VARIABLE

### SPEAKER_TOP_FRONT_LEFT
*Type:* VARIABLE

### SPEAKER_TOP_FRONT_RIGHT
*Type:* VARIABLE

### SPEAKER_TOP_BACK_LEFT
*Type:* VARIABLE

### SPEAKER_TOP_BACK_RIGHT
*Type:* VARIABLE

### SPEAKER_MAX
*Type:* VARIABLE

### CHANNELORDER_DEFAULT
*Type:* VARIABLE

### CHANNELORDER_WAVEFORMAT
*Type:* VARIABLE

### CHANNELORDER_PROTOOLS
*Type:* VARIABLE

### CHANNELORDER_ALLMONO
*Type:* VARIABLE

### CHANNELORDER_ALLSTEREO
*Type:* VARIABLE

### CHANNELORDER_ALSA
*Type:* VARIABLE

### CHANNELORDER_MAX
*Type:* VARIABLE

### PLUGINTYPE_OUTPUT
*Type:* VARIABLE

### PLUGINTYPE_CODEC
*Type:* VARIABLE

### PLUGINTYPE_DSP
*Type:* VARIABLE

### PLUGINTYPE_MAX
*Type:* VARIABLE

### SOUND_TYPE_UNKNOWN
*Type:* VARIABLE

### SOUND_TYPE_AIFF
*Type:* VARIABLE

### SOUND_TYPE_ASF
*Type:* VARIABLE

### SOUND_TYPE_DLS
*Type:* VARIABLE

### SOUND_TYPE_FLAC
*Type:* VARIABLE

### SOUND_TYPE_FSB
*Type:* VARIABLE

### SOUND_TYPE_IT
*Type:* VARIABLE

### SOUND_TYPE_MIDI
*Type:* VARIABLE

### SOUND_TYPE_MOD
*Type:* VARIABLE

### SOUND_TYPE_MPEG
*Type:* VARIABLE

### SOUND_TYPE_OGGVORBIS
*Type:* VARIABLE

### SOUND_TYPE_PLAYLIST
*Type:* VARIABLE

### SOUND_TYPE_RAW
*Type:* VARIABLE

### SOUND_TYPE_S3M
*Type:* VARIABLE

### SOUND_TYPE_USER
*Type:* VARIABLE

### SOUND_TYPE_WAV
*Type:* VARIABLE

### SOUND_TYPE_XM
*Type:* VARIABLE

### SOUND_TYPE_XMA
*Type:* VARIABLE

### SOUND_TYPE_AUDIOQUEUE
*Type:* VARIABLE

### SOUND_TYPE_AT9
*Type:* VARIABLE

### SOUND_TYPE_VORBIS
*Type:* VARIABLE

### SOUND_TYPE_MEDIA_FOUNDATION
*Type:* VARIABLE

### SOUND_TYPE_MEDIACODEC
*Type:* VARIABLE

### SOUND_TYPE_FADPCM
*Type:* VARIABLE

### SOUND_TYPE_OPUS
*Type:* VARIABLE

### SOUND_TYPE_MAX
*Type:* VARIABLE

### SOUND_FORMAT_NONE
*Type:* VARIABLE

### SOUND_FORMAT_PCM8
*Type:* VARIABLE

### SOUND_FORMAT_PCM16
*Type:* VARIABLE

### SOUND_FORMAT_PCM24
*Type:* VARIABLE

### SOUND_FORMAT_PCM32
*Type:* VARIABLE

### SOUND_FORMAT_PCMFLOAT
*Type:* VARIABLE

### SOUND_FORMAT_BITSTREAM
*Type:* VARIABLE

### SOUND_FORMAT_MAX
*Type:* VARIABLE

### OPENSTATE_READY
*Type:* VARIABLE

### OPENSTATE_LOADING
*Type:* VARIABLE

### OPENSTATE_ERROR
*Type:* VARIABLE

### OPENSTATE_CONNECTING
*Type:* VARIABLE

### OPENSTATE_BUFFERING
*Type:* VARIABLE

### OPENSTATE_SEEKING
*Type:* VARIABLE

### OPENSTATE_PLAYING
*Type:* VARIABLE

### OPENSTATE_SETPOSITION
*Type:* VARIABLE

### OPENSTATE_MAX
*Type:* VARIABLE

### SOUNDGROUP_BEHAVIOR_FAIL
*Type:* VARIABLE

### SOUNDGROUP_BEHAVIOR_MUTE
*Type:* VARIABLE

### SOUNDGROUP_BEHAVIOR_STEALLOWEST
*Type:* VARIABLE

### SOUNDGROUP_BEHAVIOR_MAX
*Type:* VARIABLE

### CHANNELCONTROL_CALLBACK_END
*Type:* VARIABLE

### CHANNELCONTROL_CALLBACK_VIRTUALVOICE
*Type:* VARIABLE

### CHANNELCONTROL_CALLBACK_SYNCPOINT
*Type:* VARIABLE

### CHANNELCONTROL_CALLBACK_OCCLUSION
*Type:* VARIABLE

### CHANNELCONTROL_CALLBACK_MAX
*Type:* VARIABLE

### CHANNELCONTROL_DSP_HEAD
*Type:* VARIABLE

### CHANNELCONTROL_DSP_FADER
*Type:* VARIABLE

### CHANNELCONTROL_DSP_TAIL
*Type:* VARIABLE

### ERRORCALLBACK_INSTANCETYPE_NONE
*Type:* VARIABLE

### ERRORCALLBACK_INSTANCETYPE_SYSTEM
*Type:* VARIABLE

### ERRORCALLBACK_INSTANCETYPE_CHANNEL
*Type:* VARIABLE

### ERRORCALLBACK_INSTANCETYPE_CHANNELGROUP
*Type:* VARIABLE

### ERRORCALLBACK_INSTANCETYPE_CHANNELCONTROL
*Type:* VARIABLE

### ERRORCALLBACK_INSTANCETYPE_SOUND
*Type:* VARIABLE

### ERRORCALLBACK_INSTANCETYPE_SOUNDGROUP
*Type:* VARIABLE

### ERRORCALLBACK_INSTANCETYPE_DSP
*Type:* VARIABLE

### ERRORCALLBACK_INSTANCETYPE_DSPCONNECTION
*Type:* VARIABLE

### ERRORCALLBACK_INSTANCETYPE_GEOMETRY
*Type:* VARIABLE

### ERRORCALLBACK_INSTANCETYPE_REVERB3D
*Type:* VARIABLE

### ERRORCALLBACK_INSTANCETYPE_STUDIO_SYSTEM
*Type:* VARIABLE

### ERRORCALLBACK_INSTANCETYPE_STUDIO_EVENTDESCRIPTION
*Type:* VARIABLE

### ERRORCALLBACK_INSTANCETYPE_STUDIO_EVENTINSTANCE
*Type:* VARIABLE

### ERRORCALLBACK_INSTANCETYPE_STUDIO_PARAMETERINSTANCE
*Type:* VARIABLE

### ERRORCALLBACK_INSTANCETYPE_STUDIO_BUS
*Type:* VARIABLE

### ERRORCALLBACK_INSTANCETYPE_STUDIO_VCA
*Type:* VARIABLE

### ERRORCALLBACK_INSTANCETYPE_STUDIO_BANK
*Type:* VARIABLE

### ERRORCALLBACK_INSTANCETYPE_STUDIO_COMMANDREPLAY
*Type:* VARIABLE

### DSP_RESAMPLER_DEFAULT
*Type:* VARIABLE

### DSP_RESAMPLER_NOINTERP
*Type:* VARIABLE

### DSP_RESAMPLER_LINEAR
*Type:* VARIABLE

### DSP_RESAMPLER_CUBIC
*Type:* VARIABLE

### DSP_RESAMPLER_SPLINE
*Type:* VARIABLE

### DSP_RESAMPLER_MAX
*Type:* VARIABLE

### DSP_CALLBACK_DATAPARAMETERRELEASE
*Type:* VARIABLE

### DSP_CALLBACK_MAX
*Type:* VARIABLE

### DSPCONNECTION_TYPE_STANDARD
*Type:* VARIABLE

### DSPCONNECTION_TYPE_SIDECHAIN
*Type:* VARIABLE

### DSPCONNECTION_TYPE_SEND
*Type:* VARIABLE

### DSPCONNECTION_TYPE_SEND_SIDECHAIN
*Type:* VARIABLE

### DSPCONNECTION_TYPE_PREALLOCATED
*Type:* VARIABLE

### DSPCONNECTION_TYPE_MAX
*Type:* VARIABLE

### TAGTYPE_UNKNOWN
*Type:* VARIABLE

### TAGTYPE_ID3V1
*Type:* VARIABLE

### TAGTYPE_ID3V2
*Type:* VARIABLE

### TAGTYPE_VORBISCOMMENT
*Type:* VARIABLE

### TAGTYPE_SHOUTCAST
*Type:* VARIABLE

### TAGTYPE_ICECAST
*Type:* VARIABLE

### TAGTYPE_ASF
*Type:* VARIABLE

### TAGTYPE_MIDI
*Type:* VARIABLE

### TAGTYPE_PLAYLIST
*Type:* VARIABLE

### TAGTYPE_FMOD
*Type:* VARIABLE

### TAGTYPE_USER
*Type:* VARIABLE

### TAGTYPE_MAX
*Type:* VARIABLE

### TAGDATATYPE_BINARY
*Type:* VARIABLE

### TAGDATATYPE_INT
*Type:* VARIABLE

### TAGDATATYPE_FLOAT
*Type:* VARIABLE

### TAGDATATYPE_STRING
*Type:* VARIABLE

### TAGDATATYPE_STRING_UTF16
*Type:* VARIABLE

### TAGDATATYPE_STRING_UTF16BE
*Type:* VARIABLE

### TAGDATATYPE_STRING_UTF8
*Type:* VARIABLE

### TAGDATATYPE_MAX
*Type:* VARIABLE

### PORT_TYPE_MUSIC
*Type:* VARIABLE

### PORT_TYPE_COPYRIGHT_MUSIC
*Type:* VARIABLE

### PORT_TYPE_VOICE
*Type:* VARIABLE

### PORT_TYPE_CONTROLLER
*Type:* VARIABLE

### PORT_TYPE_PERSONAL
*Type:* VARIABLE

### PORT_TYPE_VIBRATION
*Type:* VARIABLE

### PORT_TYPE_AUX
*Type:* VARIABLE

### PORT_TYPE_PASSTHROUGH
*Type:* VARIABLE

### PORT_TYPE_VR_VIBRATION
*Type:* VARIABLE

### PORT_TYPE_MAX
*Type:* VARIABLE

### DSP_TYPE_UNKNOWN
*Type:* VARIABLE

### DSP_TYPE_MIXER
*Type:* VARIABLE

### DSP_TYPE_OSCILLATOR
*Type:* VARIABLE

### DSP_TYPE_LOWPASS
*Type:* VARIABLE

### DSP_TYPE_ITLOWPASS
*Type:* VARIABLE

### DSP_TYPE_HIGHPASS
*Type:* VARIABLE

### DSP_TYPE_ECHO
*Type:* VARIABLE

### DSP_TYPE_FADER
*Type:* VARIABLE

### DSP_TYPE_FLANGE
*Type:* VARIABLE

### DSP_TYPE_DISTORTION
*Type:* VARIABLE

### DSP_TYPE_NORMALIZE
*Type:* VARIABLE

### DSP_TYPE_LIMITER
*Type:* VARIABLE

### DSP_TYPE_PARAMEQ
*Type:* VARIABLE

### DSP_TYPE_PITCHSHIFT
*Type:* VARIABLE

### DSP_TYPE_CHORUS
*Type:* VARIABLE

### DSP_TYPE_ITECHO
*Type:* VARIABLE

### DSP_TYPE_COMPRESSOR
*Type:* VARIABLE

### DSP_TYPE_SFXREVERB
*Type:* VARIABLE

### DSP_TYPE_LOWPASS_SIMPLE
*Type:* VARIABLE

### DSP_TYPE_DELAY
*Type:* VARIABLE

### DSP_TYPE_TREMOLO
*Type:* VARIABLE

### DSP_TYPE_SEND
*Type:* VARIABLE

### DSP_TYPE_RETURN
*Type:* VARIABLE

### DSP_TYPE_HIGHPASS_SIMPLE
*Type:* VARIABLE

### DSP_TYPE_PAN
*Type:* VARIABLE

### DSP_TYPE_THREE_EQ
*Type:* VARIABLE

### DSP_TYPE_FFT
*Type:* VARIABLE

### DSP_TYPE_LOUDNESS_METER
*Type:* VARIABLE

### DSP_TYPE_CONVOLUTIONREVERB
*Type:* VARIABLE

### DSP_TYPE_CHANNELMIX
*Type:* VARIABLE

### DSP_TYPE_TRANSCEIVER
*Type:* VARIABLE

### DSP_TYPE_OBJECTPAN
*Type:* VARIABLE

### DSP_TYPE_MULTIBAND_EQ
*Type:* VARIABLE

### DSP_TYPE_MULTIBAND_DYNAMICS
*Type:* VARIABLE

### DSP_TYPE_MAX
*Type:* VARIABLE

### DSP_OSCILLATOR_TYPE
*Type:* VARIABLE

### DSP_OSCILLATOR_RATE
*Type:* VARIABLE

### DSP_LOWPASS_CUTOFF
*Type:* VARIABLE

### DSP_LOWPASS_RESONANCE
*Type:* VARIABLE

### DSP_ITLOWPASS_CUTOFF
*Type:* VARIABLE

### DSP_ITLOWPASS_RESONANCE
*Type:* VARIABLE

### DSP_HIGHPASS_CUTOFF
*Type:* VARIABLE

### DSP_HIGHPASS_RESONANCE
*Type:* VARIABLE

### DSP_ECHO_DELAY
*Type:* VARIABLE

### DSP_ECHO_FEEDBACK
*Type:* VARIABLE

### DSP_ECHO_DRYLEVEL
*Type:* VARIABLE

### DSP_ECHO_WETLEVEL
*Type:* VARIABLE

### DSP_ECHO_DELAYCHANGEMODE
*Type:* VARIABLE

### DSP_ECHO_DELAYCHANGEMODE_FADE
*Type:* VARIABLE

### DSP_ECHO_DELAYCHANGEMODE_LERP
*Type:* VARIABLE

### DSP_ECHO_DELAYCHANGEMODE_NONE
*Type:* VARIABLE

### DSP_FADER_GAIN
*Type:* VARIABLE

### DSP_FADER_OVERALL_GAIN
*Type:* VARIABLE

### DSP_FLANGE_MIX
*Type:* VARIABLE

### DSP_FLANGE_DEPTH
*Type:* VARIABLE

### DSP_FLANGE_RATE
*Type:* VARIABLE

### DSP_DISTORTION_LEVEL
*Type:* VARIABLE

### DSP_NORMALIZE_FADETIME
*Type:* VARIABLE

### DSP_NORMALIZE_THRESHOLD
*Type:* VARIABLE

### DSP_NORMALIZE_MAXAMP
*Type:* VARIABLE

### DSP_LIMITER_RELEASETIME
*Type:* VARIABLE

### DSP_LIMITER_CEILING
*Type:* VARIABLE

### DSP_LIMITER_MAXIMIZERGAIN
*Type:* VARIABLE

### DSP_LIMITER_MODE
*Type:* VARIABLE

### DSP_PARAMEQ_CENTER
*Type:* VARIABLE

### DSP_PARAMEQ_BANDWIDTH
*Type:* VARIABLE

### DSP_PARAMEQ_GAIN
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_A_FILTER
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_A_FREQUENCY
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_A_Q
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_A_GAIN
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_B_FILTER
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_B_FREQUENCY
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_B_Q
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_B_GAIN
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_C_FILTER
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_C_FREQUENCY
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_C_Q
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_C_GAIN
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_D_FILTER
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_D_FREQUENCY
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_D_Q
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_D_GAIN
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_E_FILTER
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_E_FREQUENCY
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_E_Q
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_E_GAIN
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_FILTER_DISABLED
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_FILTER_LOWPASS_12DB
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_FILTER_LOWPASS_24DB
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_FILTER_LOWPASS_48DB
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_FILTER_HIGHPASS_12DB
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_FILTER_HIGHPASS_24DB
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_FILTER_HIGHPASS_48DB
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_FILTER_LOWSHELF
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_FILTER_HIGHSHELF
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_FILTER_PEAKING
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_FILTER_BANDPASS
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_FILTER_NOTCH
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_FILTER_ALLPASS
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_FILTER_LOWPASS_6DB
*Type:* VARIABLE

### DSP_MULTIBAND_EQ_FILTER_HIGHPASS_6DB
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_LOWER_FREQUENCY
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_UPPER_FREQUENCY
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_LINKED
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_USE_SIDECHAIN
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_A_MODE
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_A_GAIN
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_A_THRESHOLD
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_A_RATIO
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_A_ATTACK
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_A_RELEASE
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_A_GAIN_MAKEUP
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_A_RESPONSE_DATA
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_B_MODE
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_B_GAIN
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_B_THRESHOLD
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_B_RATIO
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_B_ATTACK
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_B_RELEASE
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_B_GAIN_MAKEUP
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_B_RESPONSE_DATA
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_C_MODE
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_C_GAIN
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_C_THRESHOLD
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_C_RATIO
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_C_ATTACK
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_C_RELEASE
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_C_GAIN_MAKEUP
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_C_RESPONSE_DATA
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_MODE_DISABLED
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_MODE_COMPRESS_UP
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_MODE_COMPRESS_DOWN
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_MODE_EXPAND_UP
*Type:* VARIABLE

### DSP_MULTIBAND_DYNAMICS_MODE_EXPAND_DOWN
*Type:* VARIABLE

### DSP_PITCHSHIFT_PITCH
*Type:* VARIABLE

### DSP_PITCHSHIFT_FFTSIZE
*Type:* VARIABLE

### DSP_PITCHSHIFT_OVERLAP
*Type:* VARIABLE

### DSP_PITCHSHIFT_MAXCHANNELS
*Type:* VARIABLE

### DSP_CHORUS_MIX
*Type:* VARIABLE

### DSP_CHORUS_RATE
*Type:* VARIABLE

### DSP_CHORUS_DEPTH
*Type:* VARIABLE

### DSP_ITECHO_WETDRYMIX
*Type:* VARIABLE

### DSP_ITECHO_FEEDBACK
*Type:* VARIABLE

### DSP_ITECHO_LEFTDELAY
*Type:* VARIABLE

### DSP_ITECHO_RIGHTDELAY
*Type:* VARIABLE

### DSP_ITECHO_PANDELAY
*Type:* VARIABLE

### DSP_COMPRESSOR_THRESHOLD
*Type:* VARIABLE

### DSP_COMPRESSOR_RATIO
*Type:* VARIABLE

### DSP_COMPRESSOR_ATTACK
*Type:* VARIABLE

### DSP_COMPRESSOR_RELEASE
*Type:* VARIABLE

### DSP_COMPRESSOR_GAINMAKEUP
*Type:* VARIABLE

### DSP_COMPRESSOR_USESIDECHAIN
*Type:* VARIABLE

### DSP_COMPRESSOR_LINKED
*Type:* VARIABLE

### DSP_SFXREVERB_DECAYTIME
*Type:* VARIABLE

### DSP_SFXREVERB_EARLYDELAY
*Type:* VARIABLE

### DSP_SFXREVERB_LATEDELAY
*Type:* VARIABLE

### DSP_SFXREVERB_HFREFERENCE
*Type:* VARIABLE

### DSP_SFXREVERB_HFDECAYRATIO
*Type:* VARIABLE

### DSP_SFXREVERB_DIFFUSION
*Type:* VARIABLE

### DSP_SFXREVERB_DENSITY
*Type:* VARIABLE

### DSP_SFXREVERB_LOWSHELFFREQUENCY
*Type:* VARIABLE

### DSP_SFXREVERB_LOWSHELFGAIN
*Type:* VARIABLE

### DSP_SFXREVERB_HIGHCUT
*Type:* VARIABLE

### DSP_SFXREVERB_EARLYLATEMIX
*Type:* VARIABLE

### DSP_SFXREVERB_WETLEVEL
*Type:* VARIABLE

### DSP_SFXREVERB_DRYLEVEL
*Type:* VARIABLE

### DSP_LOWPASS_SIMPLE_CUTOFF
*Type:* VARIABLE

### DSP_DELAY_CH0
*Type:* VARIABLE

### DSP_DELAY_CH1
*Type:* VARIABLE

### DSP_DELAY_CH2
*Type:* VARIABLE

### DSP_DELAY_CH3
*Type:* VARIABLE

### DSP_DELAY_CH4
*Type:* VARIABLE

### DSP_DELAY_CH5
*Type:* VARIABLE

### DSP_DELAY_CH6
*Type:* VARIABLE

### DSP_DELAY_CH7
*Type:* VARIABLE

### DSP_DELAY_CH8
*Type:* VARIABLE

### DSP_DELAY_CH9
*Type:* VARIABLE

### DSP_DELAY_CH10
*Type:* VARIABLE

### DSP_DELAY_CH11
*Type:* VARIABLE

### DSP_DELAY_CH12
*Type:* VARIABLE

### DSP_DELAY_CH13
*Type:* VARIABLE

### DSP_DELAY_CH14
*Type:* VARIABLE

### DSP_DELAY_CH15
*Type:* VARIABLE

### DSP_DELAY_MAXDELAY
*Type:* VARIABLE

### DSP_TREMOLO_FREQUENCY
*Type:* VARIABLE

### DSP_TREMOLO_DEPTH
*Type:* VARIABLE

### DSP_TREMOLO_SHAPE
*Type:* VARIABLE

### DSP_TREMOLO_SKEW
*Type:* VARIABLE

### DSP_TREMOLO_DUTY
*Type:* VARIABLE

### DSP_TREMOLO_SQUARE
*Type:* VARIABLE

### DSP_TREMOLO_PHASE
*Type:* VARIABLE

### DSP_TREMOLO_SPREAD
*Type:* VARIABLE

### DSP_SEND_RETURNID
*Type:* VARIABLE

### DSP_SEND_LEVEL
*Type:* VARIABLE

### DSP_RETURN_ID
*Type:* VARIABLE

### DSP_RETURN_INPUT_SPEAKER_MODE
*Type:* VARIABLE

### DSP_HIGHPASS_SIMPLE_CUTOFF
*Type:* VARIABLE

### DSP_PAN_2D_STEREO_MODE_DISTRIBUTED
*Type:* VARIABLE

### DSP_PAN_2D_STEREO_MODE_DISCRETE
*Type:* VARIABLE

### DSP_PAN_MODE_MONO
*Type:* VARIABLE

### DSP_PAN_MODE_STEREO
*Type:* VARIABLE

### DSP_PAN_MODE_SURROUND
*Type:* VARIABLE

### DSP_PAN_3D_ROLLOFF_LINEARSQUARED
*Type:* VARIABLE

### DSP_PAN_3D_ROLLOFF_LINEAR
*Type:* VARIABLE

### DSP_PAN_3D_ROLLOFF_INVERSE
*Type:* VARIABLE

### DSP_PAN_3D_ROLLOFF_INVERSETAPERED
*Type:* VARIABLE

### DSP_PAN_3D_ROLLOFF_CUSTOM
*Type:* VARIABLE

### DSP_PAN_3D_EXTENT_MODE_AUTO
*Type:* VARIABLE

### DSP_PAN_3D_EXTENT_MODE_USER
*Type:* VARIABLE

### DSP_PAN_3D_EXTENT_MODE_OFF
*Type:* VARIABLE

### DSP_PAN_MODE
*Type:* VARIABLE

### DSP_PAN_2D_STEREO_POSITION
*Type:* VARIABLE

### DSP_PAN_2D_DIRECTION
*Type:* VARIABLE

### DSP_PAN_2D_EXTENT
*Type:* VARIABLE

### DSP_PAN_2D_ROTATION
*Type:* VARIABLE

### DSP_PAN_2D_LFE_LEVEL
*Type:* VARIABLE

### DSP_PAN_2D_STEREO_MODE
*Type:* VARIABLE

### DSP_PAN_2D_STEREO_SEPARATION
*Type:* VARIABLE

### DSP_PAN_2D_STEREO_AXIS
*Type:* VARIABLE

### DSP_PAN_ENABLED_SPEAKERS
*Type:* VARIABLE

### DSP_PAN_3D_POSITION
*Type:* VARIABLE

### DSP_PAN_3D_ROLLOFF
*Type:* VARIABLE

### DSP_PAN_3D_MIN_DISTANCE
*Type:* VARIABLE

### DSP_PAN_3D_MAX_DISTANCE
*Type:* VARIABLE

### DSP_PAN_3D_EXTENT_MODE
*Type:* VARIABLE

### DSP_PAN_3D_SOUND_SIZE
*Type:* VARIABLE

### DSP_PAN_3D_MIN_EXTENT
*Type:* VARIABLE

### DSP_PAN_3D_PAN_BLEND
*Type:* VARIABLE

### DSP_PAN_LFE_UPMIX_ENABLED
*Type:* VARIABLE

### DSP_PAN_OVERALL_GAIN
*Type:* VARIABLE

### DSP_PAN_SURROUND_SPEAKER_MODE
*Type:* VARIABLE

### DSP_PAN_2D_HEIGHT_BLEND
*Type:* VARIABLE

### DSP_PAN_ATTENUATION_RANGE
*Type:* VARIABLE

### DSP_PAN_OVERRIDE_RANGE
*Type:* VARIABLE

### DSP_THREE_EQ_CROSSOVERSLOPE_12DB
*Type:* VARIABLE

### DSP_THREE_EQ_CROSSOVERSLOPE_24DB
*Type:* VARIABLE

### DSP_THREE_EQ_CROSSOVERSLOPE_48DB
*Type:* VARIABLE

### DSP_THREE_EQ_LOWGAIN
*Type:* VARIABLE

### DSP_THREE_EQ_MIDGAIN
*Type:* VARIABLE

### DSP_THREE_EQ_HIGHGAIN
*Type:* VARIABLE

### DSP_THREE_EQ_LOWCROSSOVER
*Type:* VARIABLE

### DSP_THREE_EQ_HIGHCROSSOVER
*Type:* VARIABLE

### DSP_THREE_EQ_CROSSOVERSLOPE
*Type:* VARIABLE

### DSP_FFT_WINDOW_RECT
*Type:* VARIABLE

### DSP_FFT_WINDOW_TRIANGLE
*Type:* VARIABLE

### DSP_FFT_WINDOW_HAMMING
*Type:* VARIABLE

### DSP_FFT_WINDOW_HANNING
*Type:* VARIABLE

### DSP_FFT_WINDOW_BLACKMAN
*Type:* VARIABLE

### DSP_FFT_WINDOW_BLACKMANHARRIS
*Type:* VARIABLE

### DSP_FFT_DOWNMIX_NONE
*Type:* VARIABLE

### DSP_FFT_DOWNMIX_MONO
*Type:* VARIABLE

### DSP_FFT_WINDOWSIZE
*Type:* VARIABLE

### DSP_FFT_WINDOW
*Type:* VARIABLE

### DSP_FFT_BAND_START_FREQ
*Type:* VARIABLE

### DSP_FFT_BAND_STOP_FREQ
*Type:* VARIABLE

### DSP_FFT_SPECTRUMDATA
*Type:* VARIABLE

### DSP_FFT_RMS
*Type:* VARIABLE

### DSP_FFT_SPECTRAL_CENTROID
*Type:* VARIABLE

### DSP_FFT_IMMEDIATE_MODE
*Type:* VARIABLE

### DSP_FFT_DOWNMIX
*Type:* VARIABLE

### DSP_FFT_CHANNEL
*Type:* VARIABLE

### DSP_LOUDNESS_METER_STATE
*Type:* VARIABLE

### DSP_LOUDNESS_METER_WEIGHTING
*Type:* VARIABLE

### DSP_LOUDNESS_METER_INFO
*Type:* VARIABLE

### DSP_LOUDNESS_METER_STATE_RESET_INTEGRATED
*Type:* VARIABLE

### DSP_LOUDNESS_METER_STATE_RESET_MAXPEAK
*Type:* VARIABLE

### DSP_LOUDNESS_METER_STATE_RESET_ALL
*Type:* VARIABLE

### DSP_LOUDNESS_METER_STATE_PAUSED
*Type:* VARIABLE

### DSP_LOUDNESS_METER_STATE_ANALYZING
*Type:* VARIABLE

### DSP_CONVOLUTION_REVERB_PARAM_IR
*Type:* VARIABLE

### DSP_CONVOLUTION_REVERB_PARAM_WET
*Type:* VARIABLE

### DSP_CONVOLUTION_REVERB_PARAM_DRY
*Type:* VARIABLE

### DSP_CONVOLUTION_REVERB_PARAM_LINKED
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_DEFAULT
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_ALLMONO
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_ALLSTEREO
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_ALLQUAD
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_ALL5POINT1
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_ALL7POINT1
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_ALLLFE
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_ALL7POINT1POINT4
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUTGROUPING
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH0
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH1
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH2
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH3
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH4
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH5
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH6
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH7
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH8
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH9
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH10
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH11
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH12
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH13
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH14
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH15
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH16
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH17
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH18
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH19
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH20
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH21
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH22
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH23
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH24
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH25
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH26
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH27
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH28
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH29
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH30
*Type:* VARIABLE

### DSP_CHANNELMIX_GAIN_CH31
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH0
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH1
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH2
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH3
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH4
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH5
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH6
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH7
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH8
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH9
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH10
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH11
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH12
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH13
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH14
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH15
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH16
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH17
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH18
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH19
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH20
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH21
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH22
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH23
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH24
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH25
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH26
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH27
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH28
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH29
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH30
*Type:* VARIABLE

### DSP_CHANNELMIX_OUTPUT_CH31
*Type:* VARIABLE

### DSP_TRANSCEIVER_SPEAKERMODE_AUTO
*Type:* VARIABLE

### DSP_TRANSCEIVER_SPEAKERMODE_MONO
*Type:* VARIABLE

### DSP_TRANSCEIVER_SPEAKERMODE_STEREO
*Type:* VARIABLE

### DSP_TRANSCEIVER_SPEAKERMODE_SURROUND
*Type:* VARIABLE

### DSP_TRANSCEIVER_TRANSMIT
*Type:* VARIABLE

### DSP_TRANSCEIVER_GAIN
*Type:* VARIABLE

### DSP_TRANSCEIVER_CHANNEL
*Type:* VARIABLE

### DSP_TRANSCEIVER_TRANSMITSPEAKERMODE
*Type:* VARIABLE

### DSP_OBJECTPAN_3D_POSITION
*Type:* VARIABLE

### DSP_OBJECTPAN_3D_ROLLOFF
*Type:* VARIABLE

### DSP_OBJECTPAN_3D_MIN_DISTANCE
*Type:* VARIABLE

### DSP_OBJECTPAN_3D_MAX_DISTANCE
*Type:* VARIABLE

### DSP_OBJECTPAN_3D_EXTENT_MODE
*Type:* VARIABLE

### DSP_OBJECTPAN_3D_SOUND_SIZE
*Type:* VARIABLE

### DSP_OBJECTPAN_3D_MIN_EXTENT
*Type:* VARIABLE

### DSP_OBJECTPAN_OVERALL_GAIN
*Type:* VARIABLE

### DSP_OBJECTPAN_OUTPUTGAIN
*Type:* VARIABLE

### DSP_OBJECTPAN_ATTENUATION_RANGE
*Type:* VARIABLE

### DSP_OBJECTPAN_OVERRIDE_RANGE
*Type:* VARIABLE

### DSP_PROCESS_PERFORM
*Type:* VARIABLE

### DSP_PROCESS_QUERY
*Type:* VARIABLE

### DSP_PAN_SURROUND_DEFAULT
*Type:* VARIABLE

### DSP_PAN_SURROUND_ROTATION_NOT_BIASED
*Type:* VARIABLE

### DSP_PARAMETER_TYPE_FLOAT
*Type:* VARIABLE

### DSP_PARAMETER_TYPE_INT
*Type:* VARIABLE

### DSP_PARAMETER_TYPE_BOOL
*Type:* VARIABLE

### DSP_PARAMETER_TYPE_DATA
*Type:* VARIABLE

### DSP_PARAMETER_TYPE_MAX
*Type:* VARIABLE

### DSP_PARAMETER_FLOAT_MAPPING_TYPE_LINEAR
*Type:* VARIABLE

### DSP_PARAMETER_FLOAT_MAPPING_TYPE_AUTO
*Type:* VARIABLE

### DSP_PARAMETER_FLOAT_MAPPING_TYPE_PIECEWISE_LINEAR
*Type:* VARIABLE

### DSP_PARAMETER_DATA_TYPE_USER
*Type:* VARIABLE

### DSP_PARAMETER_DATA_TYPE_OVERALLGAIN
*Type:* VARIABLE

### DSP_PARAMETER_DATA_TYPE_3DATTRIBUTES
*Type:* VARIABLE

### DSP_PARAMETER_DATA_TYPE_SIDECHAIN
*Type:* VARIABLE

### DSP_PARAMETER_DATA_TYPE_FFT
*Type:* VARIABLE

### DSP_PARAMETER_DATA_TYPE_3DATTRIBUTES_MULTI
*Type:* VARIABLE

### DSP_PARAMETER_DATA_TYPE_ATTENUATION_RANGE
*Type:* VARIABLE

### DSP_PARAMETER_DATA_TYPE_DYNAMIC_RESPONSE
*Type:* VARIABLE

### STUDIO_LOADING_STATE_UNLOADING
*Type:* VARIABLE

### STUDIO_LOADING_STATE_UNLOADED
*Type:* VARIABLE

### STUDIO_LOADING_STATE_LOADING
*Type:* VARIABLE

### STUDIO_LOADING_STATE_LOADED
*Type:* VARIABLE

### STUDIO_LOADING_STATE_ERROR
*Type:* VARIABLE

### STUDIO_LOAD_MEMORY
*Type:* VARIABLE

### STUDIO_LOAD_MEMORY_POINT
*Type:* VARIABLE

### STUDIO_PARAMETER_GAME_CONTROLLED
*Type:* VARIABLE

### STUDIO_PARAMETER_AUTOMATIC_DISTANCE
*Type:* VARIABLE

### STUDIO_PARAMETER_AUTOMATIC_EVENT_CONE_ANGLE
*Type:* VARIABLE

### STUDIO_PARAMETER_AUTOMATIC_EVENT_ORIENTATION
*Type:* VARIABLE

### STUDIO_PARAMETER_AUTOMATIC_DIRECTION
*Type:* VARIABLE

### STUDIO_PARAMETER_AUTOMATIC_ELEVATION
*Type:* VARIABLE

### STUDIO_PARAMETER_AUTOMATIC_LISTENER_ORIENTATION
*Type:* VARIABLE

### STUDIO_PARAMETER_AUTOMATIC_SPEED
*Type:* VARIABLE

### STUDIO_PARAMETER_AUTOMATIC_SPEED_ABSOLUTE
*Type:* VARIABLE

### STUDIO_PARAMETER_AUTOMATIC_DISTANCE_NORMALIZED
*Type:* VARIABLE

### STUDIO_PARAMETER_MAX
*Type:* VARIABLE

### STUDIO_USER_PROPERTY_TYPE_INTEGER
*Type:* VARIABLE

### STUDIO_USER_PROPERTY_TYPE_BOOLEAN
*Type:* VARIABLE

### STUDIO_USER_PROPERTY_TYPE_FLOAT
*Type:* VARIABLE

### STUDIO_USER_PROPERTY_TYPE_STRING
*Type:* VARIABLE

### STUDIO_EVENT_PROPERTY_CHANNELPRIORITY
*Type:* VARIABLE

### STUDIO_EVENT_PROPERTY_SCHEDULE_DELAY
*Type:* VARIABLE

### STUDIO_EVENT_PROPERTY_SCHEDULE_LOOKAHEAD
*Type:* VARIABLE

### STUDIO_EVENT_PROPERTY_MINIMUM_DISTANCE
*Type:* VARIABLE

### STUDIO_EVENT_PROPERTY_MAXIMUM_DISTANCE
*Type:* VARIABLE

### STUDIO_EVENT_PROPERTY_COOLDOWN
*Type:* VARIABLE

### STUDIO_EVENT_PROPERTY_MAX
*Type:* VARIABLE

### STUDIO_PLAYBACK_PLAYING
*Type:* VARIABLE

### STUDIO_PLAYBACK_SUSTAINING
*Type:* VARIABLE

### STUDIO_PLAYBACK_STOPPED
*Type:* VARIABLE

### STUDIO_PLAYBACK_STARTING
*Type:* VARIABLE

### STUDIO_PLAYBACK_STOPPING
*Type:* VARIABLE

### STUDIO_STOP_ALLOWFADEOUT
*Type:* VARIABLE

### STUDIO_STOP_IMMEDIATE
*Type:* VARIABLE

### STUDIO_INSTANCETYPE_NONE
*Type:* VARIABLE

### STUDIO_INSTANCETYPE_SYSTEM
*Type:* VARIABLE

### STUDIO_INSTANCETYPE_EVENTDESCRIPTION
*Type:* VARIABLE

### STUDIO_INSTANCETYPE_EVENTINSTANCE
*Type:* VARIABLE

### STUDIO_INSTANCETYPE_PARAMETERINSTANCE
*Type:* VARIABLE

### STUDIO_INSTANCETYPE_BUS
*Type:* VARIABLE

### STUDIO_INSTANCETYPE_VCA
*Type:* VARIABLE

### STUDIO_INSTANCETYPE_BANK
*Type:* VARIABLE

### STUDIO_INSTANCETYPE_COMMANDREPLAY
*Type:* VARIABLE

### VERSION
*Type:* VARIABLE

### BUILDNUMBER
*Type:* VARIABLE

### DEBUG_LEVEL_NONE
*Type:* VARIABLE

### DEBUG_LEVEL_ERROR
*Type:* VARIABLE

### DEBUG_LEVEL_WARNING
*Type:* VARIABLE

### DEBUG_LEVEL_LOG
*Type:* VARIABLE

### DEBUG_TYPE_MEMORY
*Type:* VARIABLE

### DEBUG_TYPE_FILE
*Type:* VARIABLE

### DEBUG_TYPE_CODEC
*Type:* VARIABLE

### DEBUG_TYPE_TRACE
*Type:* VARIABLE

### DEBUG_TYPE_VIRTUAL
*Type:* VARIABLE

### DEBUG_DISPLAY_TIMESTAMPS
*Type:* VARIABLE

### DEBUG_DISPLAY_LINENUMBERS
*Type:* VARIABLE

### DEBUG_DISPLAY_THREAD
*Type:* VARIABLE

### MEMORY_NORMAL
*Type:* VARIABLE

### MEMORY_STREAM_FILE
*Type:* VARIABLE

### MEMORY_STREAM_DECODE
*Type:* VARIABLE

### MEMORY_SAMPLEDATA
*Type:* VARIABLE

### MEMORY_DSP_BUFFER
*Type:* VARIABLE

### MEMORY_PLUGIN
*Type:* VARIABLE

### MEMORY_PERSISTENT
*Type:* VARIABLE

### MEMORY_ALL
*Type:* VARIABLE

### INIT_NORMAL
*Type:* VARIABLE

### INIT_STREAM_FROM_UPDATE
*Type:* VARIABLE

### INIT_MIX_FROM_UPDATE
*Type:* VARIABLE

### INIT_3D_RIGHTHANDED
*Type:* VARIABLE

### INIT_CLIP_OUTPUT
*Type:* VARIABLE

### INIT_CHANNEL_LOWPASS
*Type:* VARIABLE

### INIT_CHANNEL_DISTANCEFILTER
*Type:* VARIABLE

### INIT_PROFILE_ENABLE
*Type:* VARIABLE

### INIT_VOL0_BECOMES_VIRTUAL
*Type:* VARIABLE

### INIT_GEOMETRY_USECLOSEST
*Type:* VARIABLE

### INIT_PREFER_DOLBY_DOWNMIX
*Type:* VARIABLE

### INIT_THREAD_UNSAFE
*Type:* VARIABLE

### INIT_PROFILE_METER_ALL
*Type:* VARIABLE

### INIT_MEMORY_TRACKING
*Type:* VARIABLE

### DRIVER_STATE_CONNECTED
*Type:* VARIABLE

### DRIVER_STATE_DEFAULT
*Type:* VARIABLE

### TIMEUNIT_MS
*Type:* VARIABLE

### TIMEUNIT_PCM
*Type:* VARIABLE

### TIMEUNIT_PCMBYTES
*Type:* VARIABLE

### TIMEUNIT_RAWBYTES
*Type:* VARIABLE

### TIMEUNIT_PCMFRACTION
*Type:* VARIABLE

### TIMEUNIT_MODORDER
*Type:* VARIABLE

### TIMEUNIT_MODROW
*Type:* VARIABLE

### TIMEUNIT_MODPATTERN
*Type:* VARIABLE

### SYSTEM_CALLBACK_DEVICELISTCHANGED
*Type:* VARIABLE

### SYSTEM_CALLBACK_DEVICELOST
*Type:* VARIABLE

### SYSTEM_CALLBACK_MEMORYALLOCATIONFAILED
*Type:* VARIABLE

### SYSTEM_CALLBACK_THREADCREATED
*Type:* VARIABLE

### SYSTEM_CALLBACK_BADDSPCONNECTION
*Type:* VARIABLE

### SYSTEM_CALLBACK_PREMIX
*Type:* VARIABLE

### SYSTEM_CALLBACK_POSTMIX
*Type:* VARIABLE

### SYSTEM_CALLBACK_ERROR
*Type:* VARIABLE

### SYSTEM_CALLBACK_THREADDESTROYED
*Type:* VARIABLE

### SYSTEM_CALLBACK_PREUPDATE
*Type:* VARIABLE

### SYSTEM_CALLBACK_POSTUPDATE
*Type:* VARIABLE

### SYSTEM_CALLBACK_RECORDLISTCHANGED
*Type:* VARIABLE

### SYSTEM_CALLBACK_BUFFEREDNOMIX
*Type:* VARIABLE

### SYSTEM_CALLBACK_DEVICEREINITIALIZE
*Type:* VARIABLE

### SYSTEM_CALLBACK_OUTPUTUNDERRUN
*Type:* VARIABLE

### SYSTEM_CALLBACK_RECORDPOSITIONCHANGED
*Type:* VARIABLE

### SYSTEM_CALLBACK_ALL
*Type:* VARIABLE

### DEFAULT
*Type:* VARIABLE

### LOOP_OFF
*Type:* VARIABLE

### LOOP_NORMAL
*Type:* VARIABLE

### LOOP_BIDI
*Type:* VARIABLE

### 2D
*Type:* VARIABLE

### 3D
*Type:* VARIABLE

### CREATESTREAM
*Type:* VARIABLE

### CREATESAMPLE
*Type:* VARIABLE

### CREATECOMPRESSEDSAMPLE
*Type:* VARIABLE

### OPENUSER
*Type:* VARIABLE

### OPENMEMORY
*Type:* VARIABLE

### OPENMEMORY_POINT
*Type:* VARIABLE

### OPENRAW
*Type:* VARIABLE

### OPENONLY
*Type:* VARIABLE

### ACCURATETIME
*Type:* VARIABLE

### MPEGSEARCH
*Type:* VARIABLE

### NONBLOCKING
*Type:* VARIABLE

### UNIQUE
*Type:* VARIABLE

### 3D_HEADRELATIVE
*Type:* VARIABLE

### 3D_WORLDRELATIVE
*Type:* VARIABLE

### 3D_INVERSEROLLOFF
*Type:* VARIABLE

### 3D_LINEARROLLOFF
*Type:* VARIABLE

### 3D_LINEARSQUAREROLLOFF
*Type:* VARIABLE

### 3D_INVERSETAPEREDROLLOFF
*Type:* VARIABLE

### 3D_CUSTOMROLLOFF
*Type:* VARIABLE

### 3D_IGNOREGEOMETRY
*Type:* VARIABLE

### IGNORETAGS
*Type:* VARIABLE

### LOWMEM
*Type:* VARIABLE

### VIRTUAL_PLAYFROMSTART
*Type:* VARIABLE

### CHANNELMASK_FRONT_LEFT
*Type:* VARIABLE

### CHANNELMASK_FRONT_RIGHT
*Type:* VARIABLE

### CHANNELMASK_FRONT_CENTER
*Type:* VARIABLE

### CHANNELMASK_LOW_FREQUENCY
*Type:* VARIABLE

### CHANNELMASK_SURROUND_LEFT
*Type:* VARIABLE

### CHANNELMASK_SURROUND_RIGHT
*Type:* VARIABLE

### CHANNELMASK_BACK_LEFT
*Type:* VARIABLE

### CHANNELMASK_BACK_RIGHT
*Type:* VARIABLE

### CHANNELMASK_BACK_CENTER
*Type:* VARIABLE

### CHANNELMASK_MONO
*Type:* VARIABLE

### CHANNELMASK_STEREO
*Type:* VARIABLE

### CHANNELMASK_LRC
*Type:* VARIABLE

### CHANNELMASK_QUAD
*Type:* VARIABLE

### CHANNELMASK_SURROUND
*Type:* VARIABLE

### CHANNELMASK_5POINT1
*Type:* VARIABLE

### CHANNELMASK_5POINT1_REARS
*Type:* VARIABLE

### CHANNELMASK_7POINT0
*Type:* VARIABLE

### CHANNELMASK_7POINT1
*Type:* VARIABLE

### PORT_INDEX_NONE
*Type:* VARIABLE

### THREAD_PRIORITY_PLATFORM_MIN
*Type:* VARIABLE

### THREAD_PRIORITY_PLATFORM_MAX
*Type:* VARIABLE

### THREAD_PRIORITY_DEFAULT
*Type:* VARIABLE

### THREAD_PRIORITY_LOW
*Type:* VARIABLE

### THREAD_PRIORITY_MEDIUM
*Type:* VARIABLE

### THREAD_PRIORITY_HIGH
*Type:* VARIABLE

### THREAD_PRIORITY_VERY_HIGH
*Type:* VARIABLE

### THREAD_PRIORITY_EXTREME
*Type:* VARIABLE

### THREAD_PRIORITY_CRITICAL
*Type:* VARIABLE

### THREAD_PRIORITY_MIXER
*Type:* VARIABLE

### THREAD_PRIORITY_FEEDER
*Type:* VARIABLE

### THREAD_PRIORITY_STREAM
*Type:* VARIABLE

### THREAD_PRIORITY_FILE
*Type:* VARIABLE

### THREAD_PRIORITY_NONBLOCKING
*Type:* VARIABLE

### THREAD_PRIORITY_RECORD
*Type:* VARIABLE

### THREAD_PRIORITY_GEOMETRY
*Type:* VARIABLE

### THREAD_PRIORITY_PROFILER
*Type:* VARIABLE

### THREAD_PRIORITY_STUDIO_UPDATE
*Type:* VARIABLE

### THREAD_PRIORITY_STUDIO_LOAD_BANK
*Type:* VARIABLE

### THREAD_PRIORITY_STUDIO_LOAD_SAMPLE
*Type:* VARIABLE

### THREAD_PRIORITY_CONVOLUTION1
*Type:* VARIABLE

### THREAD_PRIORITY_CONVOLUTION2
*Type:* VARIABLE

### THREAD_STACK_SIZE_DEFAULT
*Type:* VARIABLE

### THREAD_STACK_SIZE_MIXER
*Type:* VARIABLE

### THREAD_STACK_SIZE_FEEDER
*Type:* VARIABLE

### THREAD_STACK_SIZE_STREAM
*Type:* VARIABLE

### THREAD_STACK_SIZE_FILE
*Type:* VARIABLE

### THREAD_STACK_SIZE_NONBLOCKING
*Type:* VARIABLE

### THREAD_STACK_SIZE_RECORD
*Type:* VARIABLE

### THREAD_STACK_SIZE_GEOMETRY
*Type:* VARIABLE

### THREAD_STACK_SIZE_PROFILER
*Type:* VARIABLE

### THREAD_STACK_SIZE_STUDIO_UPDATE
*Type:* VARIABLE

### THREAD_STACK_SIZE_STUDIO_LOAD_BANK
*Type:* VARIABLE

### THREAD_STACK_SIZE_STUDIO_LOAD_SAMPLE
*Type:* VARIABLE

### THREAD_STACK_SIZE_CONVOLUTION1
*Type:* VARIABLE

### THREAD_STACK_SIZE_CONVOLUTION2
*Type:* VARIABLE

### THREAD_AFFINITY_GROUP_DEFAULT
*Type:* VARIABLE

### THREAD_AFFINITY_GROUP_A
*Type:* VARIABLE

### THREAD_AFFINITY_GROUP_B
*Type:* VARIABLE

### THREAD_AFFINITY_GROUP_C
*Type:* VARIABLE

### THREAD_AFFINITY_MIXER
*Type:* VARIABLE

### THREAD_AFFINITY_FEEDER
*Type:* VARIABLE

### THREAD_AFFINITY_STREAM
*Type:* VARIABLE

### THREAD_AFFINITY_FILE
*Type:* VARIABLE

### THREAD_AFFINITY_NONBLOCKING
*Type:* VARIABLE

### THREAD_AFFINITY_RECORD
*Type:* VARIABLE

### THREAD_AFFINITY_GEOMETRY
*Type:* VARIABLE

### THREAD_AFFINITY_PROFILER
*Type:* VARIABLE

### THREAD_AFFINITY_STUDIO_UPDATE
*Type:* VARIABLE

### THREAD_AFFINITY_STUDIO_LOAD_BANK
*Type:* VARIABLE

### THREAD_AFFINITY_STUDIO_LOAD_SAMPLE
*Type:* VARIABLE

### THREAD_AFFINITY_CONVOLUTION1
*Type:* VARIABLE

### THREAD_AFFINITY_CONVOLUTION2
*Type:* VARIABLE

### THREAD_AFFINITY_CORE_ALL
*Type:* VARIABLE

### THREAD_AFFINITY_CORE_0
*Type:* VARIABLE

### THREAD_AFFINITY_CORE_1
*Type:* VARIABLE

### THREAD_AFFINITY_CORE_2
*Type:* VARIABLE

### THREAD_AFFINITY_CORE_3
*Type:* VARIABLE

### THREAD_AFFINITY_CORE_4
*Type:* VARIABLE

### THREAD_AFFINITY_CORE_5
*Type:* VARIABLE

### THREAD_AFFINITY_CORE_6
*Type:* VARIABLE

### THREAD_AFFINITY_CORE_7
*Type:* VARIABLE

### THREAD_AFFINITY_CORE_8
*Type:* VARIABLE

### THREAD_AFFINITY_CORE_9
*Type:* VARIABLE

### THREAD_AFFINITY_CORE_10
*Type:* VARIABLE

### THREAD_AFFINITY_CORE_11
*Type:* VARIABLE

### THREAD_AFFINITY_CORE_12
*Type:* VARIABLE

### THREAD_AFFINITY_CORE_13
*Type:* VARIABLE

### THREAD_AFFINITY_CORE_14
*Type:* VARIABLE

### THREAD_AFFINITY_CORE_15
*Type:* VARIABLE

### MAX_CHANNEL_WIDTH
*Type:* VARIABLE

### MAX_SYSTEMS
*Type:* VARIABLE

### MAX_LISTENERS
*Type:* VARIABLE

### REVERB_MAXINSTANCES
*Type:* VARIABLE

### STUDIO_LOAD_MEMORY_ALIGNMENT
*Type:* VARIABLE

### STUDIO_INIT_NORMAL
*Type:* VARIABLE

### STUDIO_INIT_LIVEUPDATE
*Type:* VARIABLE

### STUDIO_INIT_ALLOW_MISSING_PLUGINS
*Type:* VARIABLE

### STUDIO_INIT_SYNCHRONOUS_UPDATE
*Type:* VARIABLE

### STUDIO_INIT_DEFERRED_CALLBACKS
*Type:* VARIABLE

### STUDIO_INIT_LOAD_FROM_UPDATE
*Type:* VARIABLE

### STUDIO_INIT_MEMORY_TRACKING
*Type:* VARIABLE

### STUDIO_PARAMETER_READONLY
*Type:* VARIABLE

### STUDIO_PARAMETER_AUTOMATIC
*Type:* VARIABLE

### STUDIO_PARAMETER_GLOBAL
*Type:* VARIABLE

### STUDIO_PARAMETER_DISCRETE
*Type:* VARIABLE

### STUDIO_PARAMETER_LABELED
*Type:* VARIABLE

### STUDIO_SYSTEM_CALLBACK_PREUPDATE
*Type:* VARIABLE

### STUDIO_SYSTEM_CALLBACK_POSTUPDATE
*Type:* VARIABLE

### STUDIO_SYSTEM_CALLBACK_BANK_UNLOAD
*Type:* VARIABLE

### STUDIO_SYSTEM_CALLBACK_LIVEUPDATE_CONNECTED
*Type:* VARIABLE

### STUDIO_SYSTEM_CALLBACK_LIVEUPDATE_DISCONNECTED
*Type:* VARIABLE

### STUDIO_SYSTEM_CALLBACK_ALL
*Type:* VARIABLE

### STUDIO_EVENT_CALLBACK_CREATED
*Type:* VARIABLE

### STUDIO_EVENT_CALLBACK_DESTROYED
*Type:* VARIABLE

### STUDIO_EVENT_CALLBACK_STARTING
*Type:* VARIABLE

### STUDIO_EVENT_CALLBACK_STARTED
*Type:* VARIABLE

### STUDIO_EVENT_CALLBACK_RESTARTED
*Type:* VARIABLE

### STUDIO_EVENT_CALLBACK_STOPPED
*Type:* VARIABLE

### STUDIO_EVENT_CALLBACK_START_FAILED
*Type:* VARIABLE

### STUDIO_EVENT_CALLBACK_CREATE_PROGRAMMER_SOUND
*Type:* VARIABLE

### STUDIO_EVENT_CALLBACK_DESTROY_PROGRAMMER_SOUND
*Type:* VARIABLE

### STUDIO_EVENT_CALLBACK_PLUGIN_CREATED
*Type:* VARIABLE

### STUDIO_EVENT_CALLBACK_PLUGIN_DESTROYED
*Type:* VARIABLE

### STUDIO_EVENT_CALLBACK_TIMELINE_MARKER
*Type:* VARIABLE

### STUDIO_EVENT_CALLBACK_TIMELINE_BEAT
*Type:* VARIABLE

### STUDIO_EVENT_CALLBACK_SOUND_PLAYED
*Type:* VARIABLE

### STUDIO_EVENT_CALLBACK_SOUND_STOPPED
*Type:* VARIABLE

### STUDIO_EVENT_CALLBACK_REAL_TO_VIRTUAL
*Type:* VARIABLE

### STUDIO_EVENT_CALLBACK_VIRTUAL_TO_REAL
*Type:* VARIABLE

### STUDIO_EVENT_CALLBACK_START_EVENT_COMMAND
*Type:* VARIABLE

### STUDIO_EVENT_CALLBACK_NESTED_TIMELINE_BEAT
*Type:* VARIABLE

### STUDIO_EVENT_CALLBACK_ALL
*Type:* VARIABLE

### STUDIO_LOAD_BANK_NORMAL
*Type:* VARIABLE

### STUDIO_LOAD_BANK_NONBLOCKING
*Type:* VARIABLE

### STUDIO_LOAD_BANK_DECOMPRESS_SAMPLES
*Type:* VARIABLE

### STUDIO_LOAD_BANK_UNENCRYPTED
*Type:* VARIABLE

### STUDIO_COMMANDCAPTURE_NORMAL
*Type:* VARIABLE

### STUDIO_COMMANDCAPTURE_FILEFLUSH
*Type:* VARIABLE

### STUDIO_COMMANDCAPTURE_SKIP_INITIAL_STATE
*Type:* VARIABLE

### STUDIO_COMMANDREPLAY_NORMAL
*Type:* VARIABLE

### STUDIO_COMMANDREPLAY_SKIP_CLEANUP
*Type:* VARIABLE

### STUDIO_COMMANDREPLAY_FAST_FORWARD
*Type:* VARIABLE

### STUDIO_COMMANDREPLAY_SKIP_BANK_LOAD
*Type:* VARIABLE

### fmod.ASYNCREADINFO
*Type:* FUNCTION
Creates a new FMOD_ASYNCREADINFO struct

**Returns**

- `fmod.asyncreadinfo` - The created struct instance

### fmod._3D_ATTRIBUTES
*Type:* FUNCTION
Creates a new FMOD_3D_ATTRIBUTES struct

**Returns**

- `fmod.3d_attributes` - The created struct instance

### fmod.GUID
*Type:* FUNCTION
Creates a new FMOD_GUID struct

**Returns**

- `fmod.guid` - The created struct instance

### fmod.PLUGINLIST
*Type:* FUNCTION
Creates a new FMOD_PLUGINLIST struct

**Returns**

- `fmod.pluginlist` - The created struct instance

### fmod.ADVANCEDSETTINGS
*Type:* FUNCTION
Creates a new FMOD_ADVANCEDSETTINGS struct

**Returns**

- `fmod.advancedsettings` - The created struct instance

### fmod.TAG
*Type:* FUNCTION
Creates a new FMOD_TAG struct

**Returns**

- `fmod.tag` - The created struct instance

### fmod.CREATESOUNDEXINFO
*Type:* FUNCTION
Creates a new FMOD_CREATESOUNDEXINFO struct

**Returns**

- `fmod.createsoundexinfo` - The created struct instance

### fmod.REVERB_PROPERTIES
*Type:* FUNCTION
Creates a new FMOD_REVERB_PROPERTIES struct

**Returns**

- `fmod.reverb_properties` - The created struct instance

### fmod.ERRORCALLBACK_INFO
*Type:* FUNCTION
Creates a new FMOD_ERRORCALLBACK_INFO struct

**Returns**

- `fmod.errorcallback_info` - The created struct instance

### fmod.CPU_USAGE
*Type:* FUNCTION
Creates a new FMOD_CPU_USAGE struct

**Returns**

- `fmod.cpu_usage` - The created struct instance

### fmod.DSP_DATA_PARAMETER_INFO
*Type:* FUNCTION
Creates a new FMOD_DSP_DATA_PARAMETER_INFO struct

**Returns**

- `fmod.dsp_data_parameter_info` - The created struct instance

### fmod.CODEC_STATE
*Type:* FUNCTION
Creates a new FMOD_CODEC_STATE struct

**Returns**

- `fmod.codec_state` - The created struct instance

### fmod.CODEC_WAVEFORMAT
*Type:* FUNCTION
Creates a new FMOD_CODEC_WAVEFORMAT struct

**Returns**

- `fmod.codec_waveformat` - The created struct instance

### fmod.CODEC_DESCRIPTION
*Type:* FUNCTION
Creates a new FMOD_CODEC_DESCRIPTION struct

**Returns**

- `fmod.codec_description` - The created struct instance

### fmod.CODEC_STATE_FUNCTIONS
*Type:* FUNCTION
Creates a new FMOD_CODEC_STATE_FUNCTIONS struct

**Returns**

- `fmod.codec_state_functions` - The created struct instance

### fmod.DSP_LOUDNESS_METER_INFO_TYPE
*Type:* FUNCTION
Creates a new FMOD_DSP_LOUDNESS_METER_INFO_TYPE struct

**Returns**

- `fmod.dsp_loudness_meter_info_type` - The created struct instance

### fmod.DSP_LOUDNESS_METER_WEIGHTING_TYPE
*Type:* FUNCTION
Creates a new FMOD_DSP_LOUDNESS_METER_WEIGHTING_TYPE struct

**Returns**

- `fmod.dsp_loudness_meter_weighting_type` - The created struct instance

### fmod.DSP_STATE
*Type:* FUNCTION
Creates a new FMOD_DSP_STATE struct

**Returns**

- `fmod.dsp_state` - The created struct instance

### fmod.DSP_BUFFER_ARRAY
*Type:* FUNCTION
Creates a new FMOD_DSP_BUFFER_ARRAY struct

**Returns**

- `fmod.dsp_buffer_array` - The created struct instance

### fmod.COMPLEX
*Type:* FUNCTION
Creates a new FMOD_COMPLEX struct

**Returns**

- `fmod.complex` - The created struct instance

### fmod.DSP_PARAMETER_FLOAT_MAPPING_PIECEWISE_LINEAR
*Type:* FUNCTION
Creates a new FMOD_DSP_PARAMETER_FLOAT_MAPPING_PIECEWISE_LINEAR struct

**Returns**

- `fmod.dsp_parameter_float_mapping_piecewise_linear` - The created struct instance

### fmod.DSP_PARAMETER_FLOAT_MAPPING
*Type:* FUNCTION
Creates a new FMOD_DSP_PARAMETER_FLOAT_MAPPING struct

**Returns**

- `fmod.dsp_parameter_float_mapping` - The created struct instance

### fmod.DSP_PARAMETER_DESC_FLOAT
*Type:* FUNCTION
Creates a new FMOD_DSP_PARAMETER_DESC_FLOAT struct

**Returns**

- `fmod.dsp_parameter_desc_float` - The created struct instance

### fmod.DSP_PARAMETER_DESC_INT
*Type:* FUNCTION
Creates a new FMOD_DSP_PARAMETER_DESC_INT struct

**Returns**

- `fmod.dsp_parameter_desc_int` - The created struct instance

### fmod.DSP_PARAMETER_DESC_BOOL
*Type:* FUNCTION
Creates a new FMOD_DSP_PARAMETER_DESC_BOOL struct

**Returns**

- `fmod.dsp_parameter_desc_bool` - The created struct instance

### fmod.DSP_PARAMETER_DESC_DATA
*Type:* FUNCTION
Creates a new FMOD_DSP_PARAMETER_DESC_DATA struct

**Returns**

- `fmod.dsp_parameter_desc_data` - The created struct instance

### fmod.DSP_PARAMETER_DESC
*Type:* FUNCTION
Creates a new FMOD_DSP_PARAMETER_DESC struct

**Returns**

- `fmod.dsp_parameter_desc` - The created struct instance

### fmod.DSP_PARAMETER_OVERALLGAIN
*Type:* FUNCTION
Creates a new FMOD_DSP_PARAMETER_OVERALLGAIN struct

**Returns**

- `fmod.dsp_parameter_overallgain` - The created struct instance

### fmod.DSP_PARAMETER_3DATTRIBUTES
*Type:* FUNCTION
Creates a new FMOD_DSP_PARAMETER_3DATTRIBUTES struct

**Returns**

- `fmod.dsp_parameter_3dattributes` - The created struct instance

### fmod.DSP_PARAMETER_3DATTRIBUTES_MULTI
*Type:* FUNCTION
Creates a new FMOD_DSP_PARAMETER_3DATTRIBUTES_MULTI struct

**Returns**

- `fmod.dsp_parameter_3dattributes_multi` - The created struct instance

### fmod.DSP_PARAMETER_ATTENUATION_RANGE
*Type:* FUNCTION
Creates a new FMOD_DSP_PARAMETER_ATTENUATION_RANGE struct

**Returns**

- `fmod.dsp_parameter_attenuation_range` - The created struct instance

### fmod.DSP_PARAMETER_SIDECHAIN
*Type:* FUNCTION
Creates a new FMOD_DSP_PARAMETER_SIDECHAIN struct

**Returns**

- `fmod.dsp_parameter_sidechain` - The created struct instance

### fmod.DSP_PARAMETER_FFT
*Type:* FUNCTION
Creates a new FMOD_DSP_PARAMETER_FFT struct

**Returns**

- `fmod.dsp_parameter_fft` - The created struct instance

### fmod.DSP_PARAMETER_DYNAMIC_RESPONSE
*Type:* FUNCTION
Creates a new FMOD_DSP_PARAMETER_DYNAMIC_RESPONSE struct

**Returns**

- `fmod.dsp_parameter_dynamic_response` - The created struct instance

### fmod.DSP_DESCRIPTION
*Type:* FUNCTION
Creates a new FMOD_DSP_DESCRIPTION struct

**Returns**

- `fmod.dsp_description` - The created struct instance

### fmod.DSP_STATE_DFT_FUNCTIONS
*Type:* FUNCTION
Creates a new FMOD_DSP_STATE_DFT_FUNCTIONS struct

**Returns**

- `fmod.dsp_state_dft_functions` - The created struct instance

### fmod.DSP_STATE_PAN_FUNCTIONS
*Type:* FUNCTION
Creates a new FMOD_DSP_STATE_PAN_FUNCTIONS struct

**Returns**

- `fmod.dsp_state_pan_functions` - The created struct instance

### fmod.DSP_STATE_FUNCTIONS
*Type:* FUNCTION
Creates a new FMOD_DSP_STATE_FUNCTIONS struct

**Returns**

- `fmod.dsp_state_functions` - The created struct instance

### fmod.DSP_METERING_INFO
*Type:* FUNCTION
Creates a new FMOD_DSP_METERING_INFO struct

**Returns**

- `fmod.dsp_metering_info` - The created struct instance

### fmod.OUTPUT_STATE
*Type:* FUNCTION
Creates a new FMOD_OUTPUT_STATE struct

**Returns**

- `fmod.output_state` - The created struct instance

### fmod.OUTPUT_OBJECT3DINFO
*Type:* FUNCTION
Creates a new FMOD_OUTPUT_OBJECT3DINFO struct

**Returns**

- `fmod.output_object3dinfo` - The created struct instance

### fmod.OUTPUT_DESCRIPTION
*Type:* FUNCTION
Creates a new FMOD_OUTPUT_DESCRIPTION struct

**Returns**

- `fmod.output_description` - The created struct instance

### fmod.memory_initialize
*Type:* FUNCTION
FMOD_Memory_Initialize

### fmod.memory_get_stats
*Type:* FUNCTION
FMOD_Memory_GetStats

**Parameters**

- `blocking` (boolean) - blocking

**Returns**

- `userdata`
- `userdata`

### fmod.debug_initialize
*Type:* FUNCTION
FMOD_Debug_Initialize

### fmod.file_set_disk_busy
*Type:* FUNCTION
FMOD_File_SetDiskBusy

**Parameters**

- `busy` (number) - busy

### fmod.file_get_disk_busy
*Type:* FUNCTION
FMOD_File_GetDiskBusy

**Returns**

- `userdata`

### fmod.thread_set_attributes
*Type:* FUNCTION
FMOD_Thread_SetAttributes

**Parameters**

- `type` (number) - type
- `affinity` (number) - affinity
- `priority` (number) - priority
- `stacksize` (number) - Length or size value

### fmod.system_create
*Type:* FUNCTION
FMOD_System_Create

**Parameters**

- `headerversion` (number) - headerversion

**Returns**

- `userdata`

### system
*Type:* FMOD.SYSTEM
The FMOD low-level system instance

###
*Type:* TABLE
Table mapping error messages to error codes

### fmod.s64
*Type:* FUNCTION
Creates a signed 64-bit integer value

**Parameters**

- `value` (number) - The value (or low 32 bits if high is provided)
- `high` (number) - The high 32 bits (optional)

**Returns**

- `userdata` - The 64-bit integer value

### fmod.u64
*Type:* FUNCTION
Creates an unsigned 64-bit integer value

**Parameters**

- `value` (number) - The value (or low 32 bits if high is provided)
- `high` (number) - The high 32 bits (optional)

**Returns**

- `userdata` - The 64-bit integer value

<!-- extension-fontgen_fontgen -->

# extension-fontgen {#apis:extension-fontgen_fontgen}

**Namespace:** `fontgen`
**Language:** Lua
**Type:** Extension

Functions to generate glyphs for fonts at runtime.

## API

### fontgen.load_font
*Type:* FUNCTION
Creates a mapping between a .fontc file and a .ttf file. Increases the ref count for both resources.

**Parameters**

- `fontc_path` (string) - Path to a .fontc file in the project
- `ttf_path` (string) - Path to a .ttf file in the project
- `options` (table) - Options for generating the glyphs
  - `sdf_padding` (number) - The number of padding pixels [0-255]
  - `sdf_edge` (number) - Where the edge is decided to be [0-255]
- `complete_function` (function) - function to call when the animation has completed
  - `self` (object) - The context of the calling script
  - `fontc_hash` (hash) - The path hash of the .fontc resource

### fontgen.unload_font
*Type:* FUNCTION
Removes the generator mapping between the .fontc and .ttf file. Decreases the ref count for both resources. Does not remove the previously generated glyphs!

**Parameters**

- `fontc_path_hash` (hash) - Path hash of the .fontc file in the project

### fontgen.add_glyphs
*Type:* FUNCTION
Asynchronoously sdds glyphs to the .fontc resource.

**Parameters**

- `fontc_path_hash` (hash) - Path hash of the .fontc file in the project
- `text` (string) - Utf-8 string containing glyphs to add to the .fontc *Note* No checks for duplicate glyphs is done.
- `callback` (function) - Function to be called after the last glyph was processed. May be nil.
  - `self` (object) - The script instance that called `add_glyphs`
  - `request` (int) - The request id returned by `add_glyphs`
  - `result` (bool) - True if all glyphs were added successfully
  - `errmsg` (string) - Error string if a glyph wasn't generated or added successfully

**Returns**

- `integer` - Returns a request id, used in the callback

### fontgen.remove_glyphs
*Type:* FUNCTION
Removes glyphs from the .fontc resource

**Parameters**

- `fontc_path_hash` (hash) - Path hash of the .fontc file in the project
- `text` (string) - Utf-8 string containing glyphs to remove from the .fontc

<!-- extension-googleplayinstant_instantapp -->

# extension-googleplayinstant {#apis:extension-googleplayinstant_instantapp}

**Namespace:** `instantapp`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with InstantApp APIs

## API

### instantapp.show_install_prompt
*Type:* FUNCTION
Shows a dialog that allows the user to install the current instant app.

### instantapp.is_instant_app
*Type:* FUNCTION
Checks if application loaded as instant experience.

**Returns**

- `boolean` - Returns true if this application is an instant app.

### instantapp.get_cookie_max_size
*Type:* FUNCTION
Gets the maximum size in bytes of the cookie data an instant app can store on the device.

**Returns**

- `number` - The maximum size in bytes of the cookie data an instant app can store on the device.

### instantapp.get_cookie
*Type:* FUNCTION
Load byte array from cookies that were saved in instant application.

**Returns**

- `string` - The byte array data of cookies saved in instant application.

### instantapp.set_cookie
*Type:* FUNCTION
Save byte array in cookies to be able get access to this data in installable application.

**Parameters**

- `bytes` (string) - The byte array data will be saved in cookies for access in installable application.

<!-- extension-gpgs_gpgs -->

# extension-gpgs {#apis:extension-gpgs_gpgs}

**Namespace:** `gpgs`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with Google Play Game Services (GPGS) APIs

## API

### gpgs.is_supported
*Type:* FUNCTION
Check if Google Play Services are available & ready on the device.

**Returns**

- `boolean` - Status of Google Play Services on the device.

**Examples**

```
if gpgs then
  local is_supported = gpgs.is_supported()
end

```

### gpgs.login
*Type:* FUNCTION
Login to GPGS using a button.

**Examples**

Log in to GPGS using a button:
```
if gpgs then
  gpgs.login()
end

```

### gpgs.silent_login
*Type:* FUNCTION
Silent login to GPGS.
This function is trying to retrieve the currently signed-in players account.

**Examples**

```
function init(self)
  if gpgs then
    gpgs.silent_login()
  end
end

```

### gpgs.get_display_name
*Type:* FUNCTION
Get the current GPGS player display name.

**Returns**

- `string` - The player's display name.

**Examples**

```
if gpgs then
  local name = gpgs.get_display_name()
end

```

### gpgs.get_id
*Type:* FUNCTION
Get the current GPGS player id.

**Returns**

- `string` - The player ID.

**Examples**

```
if gpgs then
  local id = gpgs.get_id()
end

```

### gpgs.get_server_auth_code
*Type:* FUNCTION
Returns a one-time server auth code to send to your web server which can be exchanged for access token
Token can be retrieved only if `gpgs.request_server_auth_code` set to 1 and `gpgs.client` is set.

**Returns**

- `string` - The server auth code for logged in account. Can be nil if operation is not completed yet.
Auth token is avaliable after receiving message with id `gpgs.MSG_GET_SERVER_TOKEN` in callback set via `gpgs.set_callback`.

**Examples**

```
if gpgs then
  local server_auth_code = gpgs.get_server_auth_code()
end

```

### gpgs.is_logged_in
*Type:* FUNCTION
Check if a user is logged in currently.

**Returns**

- `boolean` - Current login state.

**Examples**

```
if gpgs then
  local is_loggedin = gpgs.is_logged_in()
end

```

### gpgs.set_callback
*Type:* FUNCTION
Set callback for receiving messages from GPGS.

**Parameters**

- `callback` (function) - A callback taking the following parameters
  - `self` (object) - The calling script
  - `message_id` (number) - An message_id can be one of the predefined constants below
- `gpgs.MSG_SIGN_IN`
- `gpgs.MSG_SILENT_SIGN_IN`
- `gpgs.MSG_SHOW_SNAPSHOTS`
- `gpgs.MSG_LOAD_SNAPSHOT`
- `gpgs.MSG_SAVE_SNAPSHOT`
  - `message` (table) - Contains information that depends on message_id.
    - `status` (number) - Status of the current operation. It can be one of the predefined constants below
- `gpgs.STATUS_SUCCESS`
- `gpgs.STATUS_FAILED`
- `gpgs.STATUS_CREATE_NEW_SAVE`
- `gpgs.STATUS_CONFLICT`
    - `error` (string) - The error message. Available only if `status` is `gpgs.STATUS_FAILED`.
    - `error_status` (number) - The error code. Available only if `status` is `gpgs.STATUS_FAILED` and GPGS provide this code. It can be one of the predefined constants below
- `gpgs.ERROR_STATUS_SNAPSHOT_COMMIT_FAILED`
- `gpgs.ERROR_STATUS_SNAPSHOT_CONFLICT_MISSING`
- `gpgs.ERROR_STATUS_SNAPSHOT_CONTENTS_UNAVAILABLE`
- `gpgs.ERROR_STATUS_SNAPSHOT_CREATION_FAILED`
- `gpgs.ERROR_STATUS_SNAPSHOT_FOLDER_UNAVAILABLE`
- `gpgs.ERROR_STATUS_SNAPSHOT_NOT_FOUND`
Or it can be ApiException.getStatusCode() (if ApiException was thrown)
    - `metadata` (table) - Metadata of the loaded save. Available only if `message_id` is `gpgs.MSG_LOAD_SNAPSHOT`.
    - `conflictId` (string) - The conflict id. Available only if `status` is `gpgs.STATUS_CONFLICT`.
    - `conflictMetadata` (table) - The conflicting metadata. Available only if `status` is `gpgs.STATUS_CONFLICT`.

**Examples**

```
function callback(self, message_id, message)
  if message_id == gpgs.MSG_SIGN_IN or message_id == gpgs.MSG_SILENT_SIGN_IN then
    if message.status == gpgs.STATUS_SUCCESS then
    -- do something after login
    end
  elseif message_id == gpgs.MSG_LOAD_SNAPSHOT then
  -- do something when a save was loaded
  end
end

function init(self)
  gpgs.set_callback(callback)
end

function init(self)
  gpgs.set_callback(nil) -- remove callback
end

```

### gpgs.snapshot_display_saves
*Type:* FUNCTION
Provides a default saved games selection user interface.

**Parameters**

- `popupTitle` (string) - The title to display in the action bar. By default "Game Saves".
- `allowAddButton` (boolean) - Whether or not to display a "create new snapshot" option in the selection UI. By default `true`.
- `allowDelete` (boolean) - Whether or not to provide a delete overflow menu option for each snapshot in the selection UI. By default `true`.
- `maxNumberOfSavedGamesToShow` (number) - The maximum number of snapshots to display in the UI. By default 5.

**Examples**

```
if gpgs then
  gpgs.snapshot_display_saves("Choose the save of the game", false, true, 10)
end

```

### gpgs.snapshot_open
*Type:* FUNCTION
Opens a snapshot with the given `saveName`. If `createIfNotFound` is set to `true`, the specified snapshot will be created if it does not already exist.

**Parameters**

- `saveName` (string) - The name of the snapshot file to open. Must be between 1 and 100 non-URL-reserved characters (a-z, A-Z, 0-9, or the symbols "-", ".", "_", or "~").
- `createIfNotFound` (boolean) - If `true`, the snapshot will be created if one cannot be found.
- `conflictPolicy` (number) - The conflict resolution policy to use for this snapshot that can be one of the predefined constants below
- `gpgs.RESOLUTION_POLICY_MANUAL`
- `gpgs.RESOLUTION_POLICY_LONGEST_PLAYTIME`
- `gpgs.RESOLUTION_POLICY_LAST_KNOWN_GOOD`
- `gpgs.RESOLUTION_POLICY_MOST_RECENTLY_MODIFIED`
- `gpgs.RESOLUTION_POLICY_HIGHEST_PROGRESS`

Default value is `gpgs.RESOLUTION_POLICY_LAST_KNOWN_GOOD`

**Examples**

```
if gpgs then
  gpgs.snapshot_open("my_save_1", true, gpgs.RESOLUTION_POLICY_LONGEST_PLAYTIME)
end

```

### gpgs.snapshot_commit_and_close
*Type:* FUNCTION
Save the currently opened save on the server and close it.

**Parameters**

- `metadata` (table) - A table with metadata for a save. It contains the fields below
  - `playedTime` (number) - The new played time to set for the snapshot in ms.
  - `progressValue` (number) - The new progress value to set for the snapshot.
  - `description` (string) - The new description to set for the snapshot.
  - `coverImage` (object) - The new cover image to set for the snapshot in `png`.

**Examples**

```
if gpgs then
  local png_img, w, h = screenshot.png()
  gpgs.snapshot_commit_and_close({
      coverImage = png_img,
      description = "LEVEL 31, CAVE",
      playedTime = 12345667,
      progressValue = 657
  })
end

```

### gpgs.snapshot_get_data
*Type:* FUNCTION
Returns the currently opened snapshot data.

**Returns**

- `string` - The byte array data of the currently opened snapshot. `nil` if something goes wrong.
- `string` - An error message if something goes wrong.

**Examples**

```
if gpgs then
  local bytes, error_message = gpgs.snapshot_get_data()
  if not bytes then
      print("snapshot_get_data ERROR:", error_message)
  else
      print("snapshot_get_data",bytes)
      -- Do something with your data
  end
end

```

### gpgs.snapshot_set_data
*Type:* FUNCTION
Sets the data for the currently opened snapshot.

**Parameters**

- `data` (string) - The data to set.

**Returns**

- `boolean` - True if data was set for the currently opened snapshot.
- `string` - An error message if something goes wrong.

**Examples**

```
  if gpgs then
    local success, error_message = gpgs.snapshot_set_data(my_data)
    if not success then
        print("snapshot_set_data ERROR:", error_message)
    end
  end

```

### gpgs.snapshot_is_opened
*Type:* FUNCTION
Check if a snapshot was opened.

**Returns**

- `boolean` - A current snapshot state.

**Examples**

```
if gpgs then
  local is_opened = gpgs.snapshot_is_opened()
end

```

### gpgs.snapshot_get_max_image_size
*Type:* FUNCTION
Returns the maximum data size per snapshot cover image in bytes.

**Returns**

- `number` - The maximum data size per snapshot cover image in bytes.

**Examples**

```
if gpgs then
  local image_size = gpgs.snapshot_get_max_image_size()
end

```

### gpgs.snapshot_get_max_save_size
*Type:* FUNCTION
Returns the maximum data size per snapshot in bytes.

**Returns**

- `number` - The maximum data size per snapshot in bytes.

**Examples**

```
if gpgs then
  local data_size = gpgs.snapshot_get_max_save_size()
end

```

### gpgs.snapshot_get_conflicting_data
*Type:* FUNCTION
Returns the conflicting snapshot data.

**Returns**

- `string` - The byte array data of the conflicting snapshot. `nil` if something goes wrong.
- `boolean` - An error message if something goes wrong.

**Examples**

```
if gpgs then
  local bytes, error_message = gpgs.snapshot_get_conflicting_data()
  if not bytes then
      print("snapshot_get_conflicting_data ERROR:", error_message)
  else
      print("snapshot_get_conflicting_data:",bytes)
      -- Do something with conflicting data data
  end
end

```

### gpgs.snapshot_resolve_conflict
*Type:* FUNCTION
Resolves a conflict using the data from the provided snapshot.

**Parameters**

- `conflictId` (string) - The conflict id that you want to resolve. Provided in `message` table with `STATUS_CONFLICT` message type.
- `snapshotId` (number) - Type of the snapshot you want to use for conflict solving that can be one of the predefined constants below
- `gpgs.SNAPSHOT_CURRENT`
- `gpgs.SNAPSHOT_CONFLICTING`

**Examples**

```
if gpgs then
  gpgs.snapshot_resolve_conflict(self.conflictId, gpgs.SNAPSHOT_CONFLICTING)
end

```

### gpgs.leaderboard_submit_score
*Type:* FUNCTION
Submit a score to a leaderboard for the currently signed-in player.

**Parameters**

- `leaderboardId` (string)
- `score` (number)

### gpgs.leaderboard_get_top_scores
*Type:* FUNCTION
Asynchronously gets the top page of scores for a leaderboard.

**Parameters**

- `leaderboardId` (string)
- `time_span` (number) - One of the gpgs.TIME_SPAN_ constants
- `collection` (number) - One of the gpgs.COLLECTION_ constants
- `max_results` (number) - Between 1-25

### gpgs.leaderboard_get_player_centered_scores
*Type:* FUNCTION
Asynchronously gets a player-centered page of scores for a leaderboard.

**Parameters**

- `leaderboardId` (string)
- `time_span` (number) - One of the gpgs.TIME_SPAN_ constants
- `collection` (number) - One of the gpgs.COLLECTION_ constants
- `max_results` (number) - Between 1-25
- `force_reload` (boolean) - If true, this call will clear any locally cached data and attempt to fetch the latest data from the server

### gpgs.leaderboard_show
*Type:* FUNCTION
Show a leaderboard for a game specified by a leaderboardId.

**Parameters**

- `leaderboardId` (string)
- `time_span` (number) - One of the gpgs.TIME_SPAN_ constants
- `collection` (number) - One of the gpgs.COLLECTION_ constants

### gpgs.leaderboard_list
*Type:* FUNCTION
Show the list of leaderboards.

### gpgs.leaderboard_get_player_score
*Type:* FUNCTION
Asynchronously gets a player-centered page of scores for a leaderboard.

**Parameters**

- `leaderboardId` (string)
- `time_span` (number) - One of the gpgs.TIME_SPAN_ constants
- `collection` (number) - One of the gpgs.COLLECTION_ constants

### gpgs.achievement_reveal
*Type:* FUNCTION
Reveals a hidden achievement to the current player.

**Parameters**

- `achievementId` (string) - Achievement id (from GP console)

### gpgs.achievement_unlock
*Type:* FUNCTION
Unlocks an achievement for the current player.

**Parameters**

- `achievementId` (string) - Achievement id (from GP console)

### gpgs.achievement_set
*Type:* FUNCTION
Sets an achievement to have at least the given number of steps completed.

**Parameters**

- `achievementId` (string) - Achievement id (from GP console)
- `steps` (number) - The number of steps to set the achievement to. Must be greater than 0.

### gpgs.achievement_increment
*Type:* FUNCTION
Increments an achievement by the given number of steps.

**Parameters**

- `achievementId` (string) - Achievement id (from GP console)
- `steps` (number) - The number of steps to increment by. Must be greater than 0.

### gpgs.achievement_show
*Type:* FUNCTION
Show achivements

### gpgs.achievement_get
*Type:* FUNCTION
Get information about all achievement's state asynchronously. Result return to callback previously set by `gpgs.set_callback` with `message_id == gpgs.MSG_ACHIEVEMENTS`. Result is array of tables which contain following fields
- `id` - achievement id (from GP console)
- `name` - achievement name
- `description` - achievement description
- `xp` - how much experience points will be added when achievement will be unlocked
- `steps` - current step of incremental achievement
- `total_steps` - total amount of steps of incremental achievement
- `unlocked` - set to `true` if achievement is unlocked. Otherwise field is missed.
- `hidden` - set to `true if achievement is hidden. Otherwise field is missed.
- `revealed` - set to `true` if achievement is revealed. Otherwise field is missed.

### gpgs.event_increment
*Type:* FUNCTION
Increments an event specified by `eventId` by the given number of steps

**Parameters**

- `eventId` (string) - Event id (from GP console)
- `amount` (number) - The amount increment by. Must be greater than or equal to 0

### gpgs.event_get
*Type:* FUNCTION
Get information about all events asynchronously. Result returns to callback previously set by `gpgs.set_callback` with `message_id == gpgs.MSG_GET_EVENTS`. Result is array of tables which contain following fields
- `id` - event id
- `formatted_value` - sum of all increments have been made to this event
- `value` - the number of increments this user has made to this event
- `description` - event's description
- `image` - URI that can be used to load the event's image icon
- `name` - event's name
- `visible` - whether the event should be displayed to the user in any event related UIs

### RESOLUTION_POLICY_MANUAL
*Type:* VARIABLE
Official [GPGS documentation](https://developers.google.com/android/reference/com/google/android/gms/games/SnapshotsClient.html#RESOLUTION_POLICY_MANUAL) for this constant

### RESOLUTION_POLICY_LONGEST_PLAYTIME
*Type:* VARIABLE
Official [GPGS documentation](https://developers.google.com/android/reference/com/google/android/gms/games/SnapshotsClient.html#RESOLUTION_POLICY_LONGEST_PLAYTIME) for this constant

### RESOLUTION_POLICY_LAST_KNOWN_GOOD
*Type:* VARIABLE
Official [GPGS documentation](https://developers.google.com/android/reference/com/google/android/gms/games/SnapshotsClient.html#RESOLUTION_POLICY_LAST_KNOWN_GOOD) for this constant

### RESOLUTION_POLICY_MOST_RECENTLY_MODIFIED
*Type:* VARIABLE
Official [GPGS documentation](https://developers.google.com/android/reference/com/google/android/gms/games/SnapshotsClient.html#RESOLUTION_POLICY_MOST_RECENTLY_MODIFIED) for this constant

### RESOLUTION_POLICY_HIGHEST_PROGRESS
*Type:* VARIABLE
Official [GPGS documentation](https://developers.google.com/android/reference/com/google/android/gms/games/SnapshotsClient.html#RESOLUTION_POLICY_HIGHEST_PROGRESS) for this constant

### MSG_SIGN_IN
*Type:* VARIABLE
The message type that GPGS sends when finishing the asynchronous operation after calling `gpgs.login()`

### MSG_SILENT_SIGN_IN
*Type:* VARIABLE
The message type that GPGS sends when finishing the asynchronous operation after calling `gpgs.silent_login()`

### MSG_SHOW_SNAPSHOTS
*Type:* VARIABLE
The message type that GPGS sends when finishing the asynchronous operation after calling `gpgs.snapshot_display_saves()`

### MSG_LOAD_SNAPSHOT
*Type:* VARIABLE
The message type that GPGS sends when finishing the asynchronous operation after calling `gpgs.snapshot_open()`

### MSG_SAVE_SNAPSHOT
*Type:* VARIABLE
The message type that GPGS sends when finishing the asynchronous operation after calling `gpgs.snapshot_commit_and_close()`

### MSG_GET_SERVER_TOKEN
*Type:* VARIABLE
The message type that GPGS sends when finishing the asynchronous operation of server token retrieval

### STATUS_SUCCESS
*Type:* VARIABLE
An operation success.

### STATUS_FAILED
*Type:* VARIABLE
An operation failed. Check the error field in the massage table.

### STATUS_CREATE_NEW_SAVE
*Type:* VARIABLE
A user wants to create new save as a result of `gpgs.snapshot_display_saves()` method. Turn off this button in `gpgs.snapshot_display_saves()` if you don't want to have this functionality.

### STATUS_CONFLICT
*Type:* VARIABLE
The result of the calling `gpgs.snapshot_open()` or 'gpgs.snapshot_resolve_conflict()' is a conflict. You need to make decision on how to solve this conflict using 'gpgs.snapshot_resolve_conflict()'.

### SNAPSHOT_CURRENT
*Type:* VARIABLE
The second parameter for 'gpgs.snapshot_resolve_conflict()' method, which means that you want to choose the current snapshot as a snapshot for conflict solving.

### SNAPSHOT_CONFLICTING
*Type:* VARIABLE
The second parameter for 'gpgs.snapshot_resolve_conflict()' method, which means that you want to choose the conflicting snapshot as a snapshot for conflict solving.

### ERROR_STATUS_SNAPSHOT_NOT_FOUND
*Type:* VARIABLE
This constant is used in `message.error_status` table when `MSG_LOAD_SNAPSHOT` is `STATUS_FAILED`. [Official GPGS documentation](https://developers.google.com/android/reference/com/google/android/gms/games/GamesStatusCodes.html#STATUS_SNAPSHOT_NOT_FOUND) for this constant

### ERROR_STATUS_SNAPSHOT_CREATION_FAILED
*Type:* VARIABLE
This constant is used in `message.error_status` table when `MSG_LOAD_SNAPSHOT` is `STATUS_FAILED`. [Official GPGS documentation](https://developers.google.com/android/reference/com/google/android/gms/games/GamesStatusCodes.html#STATUS_SNAPSHOT_CREATION_FAILED) for this constant

### ERROR_STATUS_SNAPSHOT_CONTENTS_UNAVAILABLE
*Type:* VARIABLE
This constant is used in `message.error_status` table when `MSG_LOAD_SNAPSHOT` is `STATUS_FAILED`. [Official GPGS documentation](https://developers.google.com/android/reference/com/google/android/gms/games/GamesStatusCodes.html#STATUS_SNAPSHOT_CONTENTS_UNAVAILABLE) for this constant

### ERROR_STATUS_SNAPSHOT_COMMIT_FAILED
*Type:* VARIABLE
This constant is used in `message.error_status` table when `MSG_LOAD_SNAPSHOT` is `STATUS_FAILED`. [Official GPGS documentation](https://developers.google.com/android/reference/com/google/android/gms/games/GamesStatusCodes.html#STATUS_SNAPSHOT_COMMIT_FAILED) for this constant

### ERROR_STATUS_SNAPSHOT_FOLDER_UNAVAILABLE
*Type:* VARIABLE
This constant is used in `message.error_status` table when `MSG_LOAD_SNAPSHOT` is `STATUS_FAILED`. [Official GPGS documentation](https://developers.google.com/android/reference/com/google/android/gms/games/GamesStatusCodes.html#STATUS_SNAPSHOT_FOLDER_UNAVAILABLE) for this constant

### ERROR_STATUS_SNAPSHOT_CONFLICT_MISSING
*Type:* VARIABLE
This constant is used in `message.error_status` table when `MSG_LOAD_SNAPSHOT` is `STATUS_FAILED`. [Official GPGS documentation](https://developers.google.com/android/reference/com/google/android/gms/games/GamesStatusCodes.html#STATUS_SNAPSHOT_CONFLICT_MISSING) for this constant

<!-- extension-iac_iac -->

# extension-iac {#apis:extension-iac_iac}

**Namespace:** `iac`
**Language:** Lua
**Type:** Extension

Functions and constants for doing inter-app communication. Supported on iOS and Android. [icon:ios] [icon:android]

## API

### iac.set_listener
*Type:* FUNCTION
Sets the listener function for inter-app communication events.

**Parameters**

- `self` (object) - The current object.
- `payload` (table) - The iac payload.
- `type` (number) - The type of iac, an iac.TYPE_ enumeration. It can be one of the predefined constants below
- `iac.TYPE_INVOCATION`

**Examples**

```
  local function iac_listener(self, payload, type)
       if type == iac.TYPE_INVOCATION then
           -- This was an invocation
           print(payload.origin) -- origin may be empty string if it could not be resolved
           print(payload.url)
       end
  end

  function init(self)
       iac.set_listener(iac_listener)
  end

```

### TYPE_INVOCATION
*Type:* VARIABLE
iac type

<!-- extension-iap_iap -->

# extension-iap {#apis:extension-iap_iap}

**Namespace:** `iap`
**Language:** Lua
**Type:** Extension

Functions and constants for doing in-app purchases. Supported on iOS, Android (Google Play and Amazon) and Facebook Canvas platforms. [icon:ios] [icon:googleplay] [icon:amazon] [icon:facebook]

## API

### iap.buy
*Type:* FUNCTION
Purchase a product.

**Parameters**

- `id` (string) - product to buy
- `options` (table) - optional parameters as properties. The following parameters can be set
  - `request_id` (string) - Facebook only [icon:facebook]. Optional custom unique request id to set for this transaction. The id becomes attached to the payment within the Graph API.
  - `token` (string) - Google Play only [icon:googleplay]. Which subscription offer to use when buying a subscription. The token can be retrieved from the subscriptions table returned when calling iap.list()

**Examples**

```
  local function iap_listener(self, transaction, error)
    if error == nil then
      -- purchase is successful.
      print(transaction.date)
      -- required if auto finish transactions is disabled in project settings
      if (transaction.state == iap.TRANS_STATE_PURCHASED) then
        -- do server-side verification of purchase here..
        iap.finish(transaction)
      end
    else
      print(error.error, error.reason)
    end
  end

  function init(self)
      iap.set_listener(iap_listener)
      iap.buy("my_iap")
  end

```

### iap.finish
*Type:* FUNCTION
Explicitly finish a product transaction. [icon:attention] Calling iap.finish is required on a successful transaction if `auto_finish_transactions` is disabled in project settings. Calling this function with `auto_finish_transactions` set will be ignored and a warning is printed. The `transaction.state` field must equal `iap.TRANS_STATE_PURCHASED`.

**Parameters**

- `transaction` (table) - transaction table parameter as supplied in listener callback

### iap.acknowledge
*Type:* FUNCTION
Acknowledge a transaction. [icon:attention] Calling iap.acknowledge is required on a successful transaction on Google Play unless iap.finish is called. The transaction.state field must equal iap.TRANS_STATE_PURCHASED.

**Parameters**

- `transaction` (table) - transaction table parameter as supplied in listener callback

### iap.get_provider_id
*Type:* FUNCTION
Get current iap provider

**Returns**

- `constant` - one of the following values
- `iap.PROVIDER_ID_GOOGLE`
- `iap.PROVIDER_ID_AMAZON`
- `iap.PROVIDER_ID_APPLE`
- `iap.PROVIDER_ID_FACEBOOK`

### iap.list
*Type:* FUNCTION
Get a list of all avaliable iap products.

**Parameters**

- `ids` (table) - table (array) of identifiers to get products from
- `callback` (function) - result callback taking the following parameters
  - `self` (object) - The current object.
  - `products` (table) - a table describing the available iap products.
    - `ident` (string) - The product identifier.
    - `title` (string) - The product title.
    - `description` (string) - The product description.
    - `price` (number) - The price of the product. For Google Play [icon:googleplay] this is used only for in-app products
    - `price_string` (string) - The price of the product, as a formatted string (amount and currency symbol). For Google Play [icon:googleplay] this is used only for in-app products
    - `currency_code` (string) - The currency code. For Google Play [icon:googleplay] this is the merchant's locale, instead of the user's. For Google Play [icon:googleplay] this is used only for in-app products
    - `subscriptions` (table) - Only available for Google Play [icon:googleplay]. List of subscription offers. Each offer contains a token and a list of price and billing options. See https://developer.android.com/reference/com/android/billingclient/api/ProductDetails.PricingPhase
      - `token` (string) - The token associated with the pricing phases for the subscription.
      - `pricing` (table) - The pricing phases for the subscription.
        - `price_string` (string) - Formatted price for the payment cycle, including currency sign.
        - `price` (number) - Price of the payment cycle in micro-units.
        - `currency_code` (string) - ISO 4217 currency code
        - `billing_period` (string) - Billing period of the payment cycle, specified in ISO 8601 format
        - `billing_cycle_count` (number) - Number of cycles for which the billing period is applied.
        - `recurrence_mode` (string) - FINITE, INFINITE or NONE
  - `error` (table) - a table containing error information. `nil` if there is no error. - `error` (the error message)

**Examples**

```
  local function iap_callback(self, products, error)
    if error == nil then
      for k,p in pairs(products) do
        -- present the product
        print(p.title)
        print(p.description)
      end
    else
      print(error.error)
    end
  end

  function init(self)
      iap.list({"my_iap"}, iap_callback)
  end

```

### iap.restore
*Type:* FUNCTION
Restore previously purchased products.

**Returns**

- `boolean` - value is `true` if current store supports handling restored transactions, otherwise `false`.

### iap.set_listener
*Type:* FUNCTION
Set the callback function to receive purchase transaction events.

**Parameters**

- `listener` (function) - listener callback function. Pass an empty function if you no longer wish to receive callbacks.
  - `self` (object) - The current object.
  - `transaction` (table) - a table describing the transaction.
    - `ident` (string) - The product identifier.
    - `state` (string) - The transaction state. One of the following
- `iap.TRANS_STATE_FAILED`
- `iap.TRANS_STATE_PURCHASED`
- `iap.TRANS_STATE_PURCHASING`
- `iap.TRANS_STATE_RESTORED`
- `iap.TRANS_STATE_UNVERIFIED`
    - `date` (string) - The date and time for the transaction.
    - `trans_ident` (string) - The transaction identifier. This field is only set when `state` is `TRANS_STATE_RESTORED`, `TRANS_STATE_UNVERIFIED` or `TRANS_STATE_PURCHASED`.
    - `receipt` (string) - The transaction receipt. This field is only set when `state` is `TRANS_STATE_PURCHASED` or `TRANS_STATE_UNVERIFIED`.
    - `original_trans` (string) - Apple only [icon:apple]. The original transaction. This field is only set when `state` is `TRANS_STATE_RESTORED`.
    - `original_json` (string) - Android only [icon:android]. The purchase order details in JSON format.
    - `signature` (string) - Google Play only [icon:googleplay]. A string containing the signature of the purchase data that was signed with the private key of the developer.
    - `request_id` (string) - Facebook only [icon:facebook]. This field is set to the optional custom unique request id `request_id` if set in the `iap.buy()` call parameters.
    - `user_id` (string) - Amazon Pay only [icon:amazon]. The user ID.
    - `is_sandbox_mode` (boolean) - Amazon Pay only [icon:amazon]. If `true`, the SDK is running in Sandbox mode. This only allows interactions with the Amazon AppTester. Use this mode only for testing locally.
    - `cancel_date` (string) - Amazon Pay only [icon:amazon]. The cancel date for the purchase. This field is only set if the purchase is canceled.
    - `canceled` (string) - Amazon Pay only [icon:amazon]. Is set to `true` if the receipt was canceled or has expired; otherwise `false`.
  - `error` (table) - a table containing error information. `nil` if there is no error. `error` - the error message. `reason` - the reason for the error, value can be one of the following constants
- `iap.REASON_UNSPECIFIED`
- `iap.REASON_USER_CANCELED`

### PROVIDER_ID_AMAZON
*Type:* VARIABLE
provider id for Amazon

### PROVIDER_ID_APPLE
*Type:* VARIABLE
provider id for Apple

### PROVIDER_ID_FACEBOOK
*Type:* VARIABLE
provider id for Facebook

### PROVIDER_ID_GOOGLE
*Type:* VARIABLE
iap provider id for Google

### REASON_UNSPECIFIED
*Type:* VARIABLE
unspecified error reason

### REASON_USER_CANCELED
*Type:* VARIABLE
user canceled reason

### TRANS_STATE_FAILED
*Type:* VARIABLE
transaction failed state

### TRANS_STATE_PURCHASED
*Type:* VARIABLE
transaction purchased state

### TRANS_STATE_PURCHASING
*Type:* VARIABLE
transaction purchasing state This is an intermediate mode followed by TRANS_STATE_PURCHASED. Store provider support dependent.

### TRANS_STATE_RESTORED
*Type:* VARIABLE
transaction restored state This is only available on store providers supporting restoring purchases.

### TRANS_STATE_UNVERIFIED
*Type:* VARIABLE
transaction unverified state, requires verification of purchase

<!-- extension-ironsource_ironsource -->

# extension-ironsource {#apis:extension-ironsource_ironsource}

**Namespace:** `ironsource`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with IronSource API

## API

### ironsource.init
*Type:* FUNCTION
Initialize the IronSource SDK

**Parameters**

- `app_key` (string) - App key you can get in the IronSource dashboard

### ironsource.set_callback
*Type:* FUNCTION
Sets a callback function for receiving events from the SDK. Call `ironsource.set_callback(nil)` to remove callback

**Parameters**

- `callback` (function) - Callback function that is executed on any event in the SDK.
  - `self` (object) - The calling script instance
  - `message_id` (number) - One of message types: `ironsource.MSG_INIT` initialization, `ironsource.MSG_INTERSTITIAL` message from Interstitial ad unit, `ironsource.MSG_REWARDED` message from Rewarded ad unit
  - `message` (table) - A table holding the data. It always contains `event`, and also some other values depends on a message
    - `event` (number) - One of event types: `ironsource.EVENT_AD_AVAILABLE`, `ironsource.EVENT_AD_UNAVAILABLE`, `ironsource.EVENT_AD_OPENED`, `ironsource.EVENT_AD_CLOSED`, `ironsource.EVENT_AD_REWARDED`, `ironsource.EVENT_AD_CLICKED`, `ironsource.EVENT_AD_SHOW_FAILED`, `ironsource.EVENT_AD_READY`, `ironsource.EVENT_AD_SHOW_SUCCEEDED`, `ironsource.EVENT_AD_LOAD_FAILED` `ironsource.EVENT_JSON_ERROR` `ironsource.EVENT_INIT_COMPLETE` `ironsource.EVENT_CONSENT_LOADED` `ironsource.EVENT_CONSENT_SHOWN` `ironsource.EVENT_CONSENT_LOAD_FAILED` `ironsource.EVENT_CONSENT_SHOW_FAILED` `ironsource.EVENT_CONSENT_ACCEPTED` `ironsource.EVENT_CONSENT_DISMISSED` `ironsource.EVENT_STATUS_AUTHORIZED` `ironsource.EVENT_STATUS_DENIED` `ironsource.EVENT_STATUS_NOT_DETERMINED` `ironsource.EVENT_STATUS_RESTRICTED`

**Examples**

```
local function ironsource_callback(self, message_id, message)
  callback_logger(self, message_id, message)
  if message_id == ironsource.MSG_INIT then
      if message.event == ironsource.EVENT_INIT_COMPLETE then
          -- ironSource SDK is initialized
          -- massage{}
      end
  elseif message_id == ironsource.MSG_REWARDED then
      if message.event == ironsource.EVENT_AD_AVAILABLE then
          -- Indicates that there's an available ad.
          -- The adInfo object includes information about the ad that was loaded successfully
          -- massage{AdInfo}
      elseif message.event == ironsource.EVENT_AD_UNAVAILABLE then
          -- Indicates that no ads are available to be displayed
          -- massage{}
      elseif message.event == ironsource.EVENT_AD_OPENED then
          -- The Rewarded Video ad view has opened. Your activity will loose focus
          -- massage{AdInfo}
      elseif message.event == ironsource.EVENT_AD_CLOSED then
          -- The Rewarded Video ad view is about to be closed. Your activity will regain its focus
          -- massage{AdInfo}
      elseif message.event == ironsource.EVENT_AD_REWARDED then
          -- The user completed to watch the video, and should be rewarded.
          -- The placement parameter will include the reward data.
          -- When using server-to-server callbacks, you may ignore this event and wait for the ironSource server callback
          -- massage{AdInfo, Placement}
      elseif message.event == ironsource.EVENT_AD_SHOW_FAILED then
          -- The rewarded video ad was failed to show
          -- massage{AdInfo, IronSourceError}
      elseif message.event == ironsource.EVENT_AD_CLICKED then
          -- Invoked when the video ad was clicked.
          -- This callback is not supported by all networks, and we recommend using it
          -- only if it's supported by all networks you included in your build
          -- massage{AdInfo, Placement}
      end
  elseif message_id == ironsource.MSG_INTERSTITIAL then
      if message.event == ironsource.EVENT_AD_READY then
          -- Invoked when the interstitial ad was loaded successfully.
          -- AdInfo parameter includes information about the loaded ad
          -- massage{AdInfo}
      elseif message.event == ironsource.EVENT_AD_LOAD_FAILED then
          -- Indicates that the ad failed to be loaded
          -- massage{IronSourceError}
      elseif message.event == ironsource.EVENT_AD_OPENED then
          -- Invoked when the Interstitial Ad Unit has opened, and user left the application screen.
          -- This is the impression indication.
          -- massage{AdInfo}
      elseif message.event == ironsource.EVENT_AD_CLOSED then
          -- Invoked when the interstitial ad closed and the user went back to the application screen.
          -- massage{AdInfo}
      elseif message.event == ironsource.EVENT_AD_SHOW_FAILED then
          -- Invoked when the ad failed to show
          -- massage{AdInfo, IronSourceError}
      elseif message.event == ironsource.EVENT_AD_CLICKED then
          -- Invoked when end user clicked on the interstitial ad
          -- massage{AdInfo}
      elseif message.event == ironsource.EVENT_AD_SHOW_SUCCEEDED then
          -- Invoked before the interstitial ad was opened, and before the InterstitialOnAdOpenedEvent is reported.
          -- This callback is not supported by all networks, and we recommend using it only if
          -- it's supported by all networks you included in your build.
          -- massage{AdInfo}
      end
  elseif message_id == ironsource.MSG_CONSENT then
      if message.event == ironsource.EVENT_CONSENT_LOADED then
          -- Consent View was loaded successfully
          -- massage.consent_view_type
      elseif message.event == ironsource.EVENT_CONSENT_SHOWN then
          -- Consent view was displayed successfully
          -- massage.consent_view_type
      elseif message.event == ironsource.EVENT_CONSENT_LOAD_FAILED then
          -- Consent view was failed to load
          -- massage.consent_view_type, massage.error_code, massage.error_message
      elseif message.event == ironsource.EVENT_CONSENT_SHOW_FAILED then
          -- Consent view was not displayed, due to error
          -- massage.consent_view_type, massage.error_code, massage.error_message
      elseif message.event == ironsource.EVENT_CONSENT_ACCEPTED then
          -- The user pressed the Settings or Next buttons
          -- massage.consent_view_type
      elseif message.event == ironsource.EVENT_CONSENT_DISMISSED then
          -- The user dismiss consent
          -- massage.consent_view_type
      end
  elseif message_id == ironsource.MSG_IDFA then
      if message.event == ironsource.EVENT_STATUS_AUTHORIZED then
          -- ATTrackingManagerAuthorizationStatusAuthorized
      elseif message.event == ironsource.EVENT_STATUS_DENIED then
          -- ATTrackingManagerAuthorizationStatusDenied
      elseif message.event == ironsource.EVENT_STATUS_NOT_DETERMINED then
          -- ATTrackingManagerAuthorizationStatusNotDetermined
      elseif message.event == ironsource.EVENT_STATUS_RESTRICTED then
          -- ATTrackingManagerAuthorizationStatusRestricted
      end
  end
end

```

### ironsource.set_consent
*Type:* FUNCTION
If the user provided consent, set the following flag to true (must be called before `ironsource.init()`). [Original docs](https://developers.is.com/ironsource-mobile/general/making-sure-youre-compliant-post-gdpr/#step-2) [Android](https://developers.is.com/ironsource-mobile/android/regulation-advanced-settings/), [iOS](https://developers.is.com/ironsource-mobile/ios/regulation-advanced-settings/)

**Parameters**

- `is_consent_provided` (boolean)

### ironsource.validate_integration
*Type:* FUNCTION
The ironSource SDK provides an easy way to verify that youve successfully integrated the ironSource SDK and any additional adapters; it also makes sure all required dependencies and frameworks were added for the various mediated ad networks. The Integration Helper will now also portray the compatibility between the SDK and adapter versions. Original docs [Android](https://developers.is.com/ironsource-mobile-android/integration-helper-android/), [iOS](https://developers.is.com/ironsource-mobile/ios/integration-helper-ios/)

### ironsource.set_metadata
*Type:* FUNCTION
Function used for setting different parameterd for adapters and the SDK itself.

**Parameters**

- `key` (String)
- `value` (String)

### ironsource.set_user_id
*Type:* FUNCTION
If youre serving the offerwall ad unit or using server-to-server callbacks to reward your users with ironSource SDK rewarded ad units, you must define a unique identifier for each user (UserID), using the setUserID method.
Set the UserID before the init request, to make sure you avoid any data loses, related to the user. Use a unique identifier, with up to 64 alphanumeric characters.
Original docs [Android](https://developers.is.com/ironsource-mobile/android/advanced-settings/), [iOS](https://developers.is.com/ironsource-mobile/ios/advanced-settings-2/)

**Parameters**

- `user_id` (string)

### ironsource.launch_test_suite
*Type:* FUNCTION
The LevelPlay integration test suite enables you to quickly and easily test your apps integration, verify platform setup and review ads related to your configured networks. Original docs [Android](https://developers.is.com/ironsource-mobile/android/unity-levelplay-test-suite/#step-1), [iOS](https://developers.is.com/ironsource-mobile/ios/unity-levelplay-test-suite/)

### ironsource.request_idfa
*Type:* FUNCTION
iOS Only. Display the App Tracking Transparency authorization request for accessing the IDFA. Original docs [iOS](https://developer.apple.com/documentation/apptrackingtransparency/attrackingmanager/3547037-requesttrackingauthorization)

### ironsource.get_idfa_status
*Type:* FUNCTION
iOS Only. Returns current authorization status for the IDFA One of event types: `ironsource.EVENT_STATUS_AUTHORIZED` `ironsource.EVENT_STATUS_DENIED` `ironsource.EVENT_STATUS_NOT_DETERMINED` `ironsource.EVENT_STATUS_RESTRICTED` or nil if not supported Original docs [iOS](https://developer.apple.com/documentation/apptrackingtransparency/attrackingmanager/3547037-requesttrackingauthorization)

### ironsource.set_adapters_debug
*Type:* FUNCTION
Manage the debug logs for your integrated mediation ad networks with this boolean. When set to TRUE it enables debug logs to help you troubleshoot issues with all of the mediation ad networks that permit to do so. Remove this code before your app goes live with our ad units!

**Returns**

- `boolean`

### ironsource.load_consent_view
*Type:* FUNCTION
iOS Only. Load the IronSource permission pop-up. [iOS](https://developers.is.com/ironsource-mobile/ios/permission-popup-ios/#step-1)

**Returns**

- `string` - one of the folowing values "pre" or "post"

### ironsource.show_consent_view
*Type:* FUNCTION
iOS Only. Display the IronSource permission pop-up. [iOS](https://developers.is.com/ironsource-mobile/ios/permission-popup-ios/#step-1)

**Returns**

- `string` - one of the folowing values "pre" or "post"

### ironsource.should_track_network_state
*Type:* FUNCTION
You can determine and monitor the internet connection on the users device through the ironSource Network Change Status function. This enables the SDK to change its availability according to network modifications, i.e. in the case of no network connection, the availability will turn to FALSE. The default of this function is false; if youd like to listen to it for changes in connectivity, activate it in the SDK initialization [Android shouldTrackNetworkState](https://developers.is.com/ironsource-mobile/android/rewarded-video-integration-android/#step-1), [iOS shouldTrackReachability](https://developers.is.com/ironsource-mobile/ios/rewarded-video-integration-ios/#step-1)

**Parameters**

- `should_track` (boolean)

### ironsource.is_rewarded_video_available
*Type:* FUNCTION
You can receive the availability status of the AD Unit through the callback. Alternatively, ask for ad availability directly by calling this function. [Android](https://developers.is.com/ironsource-mobile/android/rewarded-video-integration-android/#step-1), [iOS](https://developers.is.com/ironsource-mobile/ios/rewarded-video-integration-ios/#step-1)

**Returns**

- `boolean`

### ironsource.show_rewarded_video
*Type:* FUNCTION
You can show a video ad to your users and define the exact Placement you want to show an ad. The Reward settings of this Placement will be pulled from the ironSource server. Original docs [Android](https://developers.is.com/ironsource-mobile/android/rewarded-video-integration-android/#step-1), [iOS](https://developers.is.com/ironsource-mobile/ios/rewarded-video-integration-ios/#step-1)

**Parameters**

- `placement_name` (String) - maybe nil - then default placement used

### ironsource.get_rewarded_video_placement_info
*Type:* FUNCTION
Get details about the specific Reward associated with each Ad Placement. Original docs [Android](https://developers.is.com/ironsource-mobile/android/rewarded-video-integration-android/#step-1), [iOS](https://developers.is.com/ironsource-mobile/ios/rewarded-video-integration-ios/#step-1)

**Parameters**

- `placement_name` (String)

### ironsource.get_rewarded_video_placement_info
*Type:* FUNCTION
Get details about the specific Reward associated with each Ad Placement. Original docs [Android](https://developers.is.com/ironsource-mobile/android/rewarded-video-integration-android/#step-1), [iOS](https://developers.is.com/ironsource-mobile/ios/rewarded-video-integration-ios/#step-1)

**Parameters**

- `placement_name` (String)

**Returns**

- `table` - contains the following fields `placement_id`, `placement_name`, `is_default`, `reward_name`, `reward_amount`

### ironsource.is_rewarded_video_placement_capped
*Type:* FUNCTION
To ensure you dont show the traffic driver (Rewarded Video button) to prompt the user to watch an ad when the placement is capped, you must call the below method to verify if a specific placement has reached its ad limit. When requesting availability, you might receive a TRUE response but in the case your placement has reached its capping limit, the ad will not be served to the user. Original docs [Android isRewardedVideoPlacementCapped](https://developers.is.com/ironsource-mobile/android/rewarded-video-integration-android/#step-2), [iOS isRewardedVideoCappedForPlacement](https://developers.is.com/ironsource-mobile/ios/rewarded-video-integration-ios/#step-2)

**Parameters**

- `placement_name` (String)

**Returns**

- `boolean`

### ironsource.set_dynamic_user_id
*Type:* FUNCTION
The Dynamic UserID is a parameter to verify AdRewarded transactions and can be changed throughout the session. To receive this parameter through the server to server callbacks, it must be set before calling showRewardedVideo. You will receive a dynamicUserId parameter in the callback URL with the reward details. [Android](https://developers.is.com/ironsource-mobile/android/rewarded-video-integration-android/#step-2), [iOS](https://developers.is.com/ironsource-mobile/ios/rewarded-video-integration-ios/#step-2)

**Parameters**

- `dynamic_user_id` (String)

### ironsource.load_interstitial
*Type:* FUNCTION
We recommend requesting an Interstitial Ad a short while before you plan on showing it to your users as the loading process can take time. [Android](https://developers.is.com/ironsource-mobile/android/interstitial-mediation-integration-android/#step-2), [iOS](https://developers.is.com/ironsource-mobile/ios/interstitial-integration-ios/#step-2)

### ironsource.is_interstitial_ready
*Type:* FUNCTION
You can receive the availability status of the AD Unit through the callback. Alternatively, ask for ad availability directly by calling this function. [Android](https://developers.is.com/ironsource-mobile/android/interstitial-mediation-integration-android/#step-2), [iOS](https://developers.is.com/ironsource-mobile/ios/interstitial-integration-ios/#step-2)

**Returns**

- `boolean`

### ironsource.get_interstitial_placement_info
*Type:* FUNCTION
Android Only. Get details about the specific Ad Placement. Original docs [Android](https://developers.is.com/ironsource-mobile/android/interstitial-mediation-integration-android/#step-3), [iOS](https://developers.is.com/ironsource-mobile/ios/interstitial-integration-ios/#step-3)

**Parameters**

- `placement_name` (String)

**Returns**

- `table` - contains the following fields `placement_id`, `placement_name`, `is_default`

### ironsource.is_interstitial_placement_capped
*Type:* FUNCTION
In addition to LevelPlays Ad Placements, you can now configure capping and pacing settings for selected placements. Capping and pacing improve the user experience in your app by limiting the number of ads served within a defined timeframe. Original docs [Android](https://developers.is.com/ironsource-mobile/android/interstitial-mediation-integration-android/#step-3), [iOS](https://developers.is.com/ironsource-mobile/ios/interstitial-integration-ios/#step-3)

**Parameters**

- `placement_name` (String)

**Returns**

- `boolean`

### ironsource.show_interstitial
*Type:* FUNCTION
Serve an Interstitial ad to your users. Call it once you receive the ironsource.EVENT_AD_READY callback, you are ready to show an Interstitial Ad to your users. To provide the best experience for your users, make sure to pause any game action, including audio, during the time the ad is displayed. Original docs [Android](https://developers.is.com/ironsource-mobile/android/rewarded-video-integration-android/#step-1), [iOS](https://developers.is.com/ironsource-mobile/ios/rewarded-video-integration-ios/#step-1)

**Parameters**

- `placement_name` (String) - maybe nil - then default placement used

### MSG_INTERSTITIAL
*Type:* VARIABLE

### MSG_REWARDED
*Type:* VARIABLE

### MSG_CONSENT
*Type:* VARIABLE

### MSG_INIT
*Type:* VARIABLE

### MSG_IDFA
*Type:* VARIABLE

### EVENT_AD_AVAILABLE
*Type:* VARIABLE

### EVENT_AD_UNAVAILABLE
*Type:* VARIABLE

### EVENT_AD_OPENED
*Type:* VARIABLE

### EVENT_AD_CLOSED
*Type:* VARIABLE

### EVENT_AD_REWARDED
*Type:* VARIABLE

### EVENT_AD_CLICKED
*Type:* VARIABLE

### EVENT_AD_SHOW_FAILED
*Type:* VARIABLE

### EVENT_AD_READY
*Type:* VARIABLE

### EVENT_AD_SHOW_SUCCEEDED
*Type:* VARIABLE

### EVENT_AD_LOAD_FAILED
*Type:* VARIABLE

### EVENT_JSON_ERROR
*Type:* VARIABLE

### EVENT_INIT_COMPLETE
*Type:* VARIABLE

### EVENT_CONSENT_LOADED
*Type:* VARIABLE

### EVENT_CONSENT_SHOWN
*Type:* VARIABLE

### EVENT_CONSENT_LOAD_FAILED
*Type:* VARIABLE

### EVENT_CONSENT_SHOW_FAILED
*Type:* VARIABLE

### EVENT_CONSENT_ACCEPTED
*Type:* VARIABLE

### EVENT_CONSENT_DISMISSED
*Type:* VARIABLE

### EVENT_STATUS_AUTHORIZED
*Type:* VARIABLE

### EVENT_STATUS_DENIED
*Type:* VARIABLE

### EVENT_STATUS_NOT_DETERMINED
*Type:* VARIABLE

### EVENT_STATUS_RESTRICTED
*Type:* VARIABLE

<!-- extension-network-info_networkinfo -->

# extension-network-info {#apis:extension-network-info_networkinfo}

**Namespace:** `networkinfo`
**Language:** Lua
**Type:** Extension

Functions to get information about the network configuration of the device.

## API

### networkinfo.get_proxy_info
*Type:* FUNCTION
Get information about proxies for a specific url.

**Parameters**

- `url` (string) - The url to get proxy configurations for

**Returns**

- `table` - A list of proxies to try in order. Each proxy has three values
  type: direct (no proxy), http, socks
  host: proxy url
  port: proxy port number

<!-- extension-odin_odin -->

# extension-odin {#apis:extension-odin_odin}

**Namespace:** `odin`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with ODIN Voice

## API

### odin.init
*Type:* FUNCTION
Initialize ODIN Voice

**Parameters**

- `listener` (function)

**Returns**

- `boolean`

### odin.create_room
*Type:* FUNCTION
Create or join a room.

**Parameters**

- `room_id` (string) - Id of the room to join
- `user_id` (string) - Id of the user
- `access_key` (string) - The access key used when generating a token for room access. Will use odin.access_key if none is provided.

**Returns**

- `boolean`

### odin.close_room
*Type:* FUNCTION
Close/leave a previously created/joined room.

**Returns**

- `boolean`

### odin.send
*Type:* FUNCTION
Send a message to the current room.

**Parameters**

- `data` (string) - Data to send.
- `target_peer_ids` (table) - Optional table with peers to send message to. Nil to send to all.
- `msgid` (number) - Optional message id to identify message by. The id will be used in the response.

**Returns**

- `boolean`

<!-- extension-pad_pad -->

# extension-pad {#apis:extension-pad_pad}

**Namespace:** `pad`
**Language:** Lua
**Type:** Extension

Functionality to work with Play Asset Delivery and the AssetPackManager

## API

### pad.cancel
*Type:* FUNCTION
Requests to cancel the download of the specified asset packs.

**Parameters**

- `pack_name` (string)

### pad.fetch
*Type:* FUNCTION
Requests to download the specified asset pack.

**Parameters**

- `pack_name` (string)

### pad.remove_pack
*Type:* FUNCTION
Deletes the specified asset pack from the internal storage of the app.

**Parameters**

- `pack_name` (string)

### pad.get_pack_state
*Type:* FUNCTION
Requests download state and details for the specified asset pack. This is an asynchronous function and will send a `PACK_STATE_UPDATED` event once the new state is available.

**Parameters**

- `pack_name` (string)

### pad.get_pack_location
*Type:* FUNCTION
Returns the location of the specified asset pack on the device or an empty string if this pack is not downloaded.

**Parameters**

- `pack_name` (string)

**Returns**

- `strin`

### pad.get_pack_bytes_downloaded
*Type:* FUNCTION
Returns the total number of bytes already downloaded for the pack. Note that you must have called the `get_pack_state()` function first and wait for a `PACK_STATE_UPDATED` event before calling this function.

**Parameters**

- `pack_name` (string)

**Returns**

- `bytes_downloade`

### pad.get_pack_error_code
*Type:* FUNCTION
Returns the error code for the pack, if Play has failed to download the pack. Note that you must have called the `get_pack_state()` function first and wait for a `PACK_STATE_UPDATED` event before calling this function.

**Parameters**

- `pack_name` (string)

**Returns**

- `error_cod`

### pad.get_pack_status
*Type:* FUNCTION
Returns the download status of the pack. Note that you must have called the `get_pack_state()` function first and wait for a `PACK_STATE_UPDATED` event before calling this function.

**Parameters**

- `pack_name` (string)

**Returns**

- `statu`

### pad.get_pack_total_bytes_to_download
*Type:* FUNCTION
Returns the total size of the pack in bytes. Note that you must have called the `get_pack_state()` function first and wait for a `PACK_STATE_UPDATED` event before calling this function.

**Parameters**

- `pack_name` (string)

**Returns**

- `bytes_to_downloa`

### pad.get_pack_transfer_progress_percentage
*Type:* FUNCTION
Returns the percentage of the asset pack already transferred to the app. Note that you must have called the `get_pack_state()` function first and wait for a `PACK_STATE_UPDATED` event before calling this function.

**Parameters**

- `pack_name` (string)

**Returns**

- `numbe`

### pad.show_confirmation_dialog
*Type:* FUNCTION
Shows a dialog that asks the user for consent to download packs Shows a dialog that asks the user for consent to download packs that are currently in either the AssetPackStatus.REQUIRES_USER_CONFIRMATION state or the AssetPackStatus.WAITING_FOR_WIFI state. Will return result in event listener.

**Parameters**

- `pack_name` (string)

### pad.set_listener
*Type:* FUNCTION
Set listener to receive events

**Parameters**

- `listener` (function) - The function to call (self, event)

### EVENT_PACK_STATE_UPDATED
*Type:* VARIABLE

### EVENT_PACK_STATE_ERROR
*Type:* VARIABLE

### EVENT_REMOVE_PACK_COMPLETED
*Type:* VARIABLE

### EVENT_REMOVE_PACK_CANCELED
*Type:* VARIABLE

### EVENT_REMOVE_PACK_ERROR
*Type:* VARIABLE

### EVENT_DIALOG_CONFIRMED
*Type:* VARIABLE

### EVENT_DIALOG_DECLINED
*Type:* VARIABLE

### EVENT_DIALOG_CANCELED
*Type:* VARIABLE

### EVENT_DIALOG_ERROR
*Type:* VARIABLE

### STATUS_UNKNOWN
*Type:* VARIABLE

### STATUS_PENDING
*Type:* VARIABLE

### STATUS_DOWNLOADING
*Type:* VARIABLE

### STATUS_TRANSFERRING
*Type:* VARIABLE

### STATUS_COMPLETED
*Type:* VARIABLE

### STATUS_FAILED
*Type:* VARIABLE

### STATUS_CANCELED
*Type:* VARIABLE

### STATUS_WAITING_FOR_WIFI
*Type:* VARIABLE

### STATUS_NOT_INSTALLED
*Type:* VARIABLE

### STATUS_REQUIRES_USER_CONFIRMATION
*Type:* VARIABLE

### ERRORCODE_ACCESS_DENIED
*Type:* VARIABLE
Download not permitted under the current device circumstances

### ERRORCODE_API_NOT_AVAILABLE
*Type:* VARIABLE
The Asset Delivery API isn't available.

### ERRORCODE_APP_NOT_OWNED
*Type:* VARIABLE
The app isn't owned by any user on this device.

### ERRORCODE_APP_UNAVAILABLE
*Type:* VARIABLE
The requesting app is unavailable.

### ERRORCODE_CONFIRMATION_NOT_REQUIRED
*Type:* VARIABLE
Returned if AssetPackManager.showConfirmationDialog(Activity) is called but no asset packs require user confirmation.

### ERRORCODE_DOWNLOAD_NOT_FOUND
*Type:* VARIABLE
The requested download isn't found.

### ERRORCODE_INSUFFICIENT_STORAGE
*Type:* VARIABLE
Asset pack download failed due to insufficient storage.

### ERRORCODE_INTERNAL_ERROR
*Type:* VARIABLE
Unknown error downloading an asset pack.

### ERRORCODE_INVALID_REQUEST
*Type:* VARIABLE
The request is invalid.

### ERRORCODE_NETWORK_ERROR
*Type:* VARIABLE
Network error.

### ERRORCODE_NETWORK_UNRESTRICTED
*Type:* VARIABLE
Returned if AssetPackManager.showCellularDataConfirmation(Activity) is called but no asset packs are waiting for Wi-Fi.

### ERRORCODE_NO_ERROR
*Type:* VARIABLE

### ERRORCODE_PACK_UNAVAILABLE
*Type:* VARIABLE
The requested asset pack isn't available.

### ERRORCODE_PLAY_STORE_NOT_FOUND
*Type:* VARIABLE
The Play Store app is either not installed or not the official version.

### ERRORCODE_UNRECOGNIZED_INSTALLATION
*Type:* VARIABLE
The installed app version is not recognized by Play.

<!-- extension-permissions_permissions -->

# extension-permissions {#apis:extension-permissions_permissions}

**Namespace:** `permissions`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with permissions related APIs

## API

### permissions.check
*Type:* FUNCTION
Determine whether you have been granted a particular permission.

**Parameters**

- `permission` (string) - A constant that represent permission, for example `android.permission.ACCESS_NETWORK_STATE`

**Returns**

- `number` - A result can be one of the predefined constants below
- `permissions.PERMISSION_GRANTED`
- `permissions.PERMISSION_DENIED`
- `permissions.PERMISSION_SHOW_RATIONALE`

**Examples**

```
local result = permissions.check("android.permission.ACCESS_NETWORK_STATE")
if result == permissions.PERMISSION_DENIED then
    -- You can directly ask for the permission.
elseif result == permissions.PERMISSION_GRANTED then
    -- You can use the API that requires the permission.
elseif result == permissions.PERMISSION_SHOW_RATIONALE then
    -- In an educational UI, explain to the user why your app requires this
    -- permission for a specific feature to behave as expected, and what
    -- features are disabled if it's declined. In this UI, include a
    -- "cancel" or "no thanks" button that lets the user continue
    -- using your app without granting the permission.
end

```

### permissions.request
*Type:* FUNCTION
Requests permissions to be granted to this application.

**Parameters**

- `request_tbl` (table) - An array with constants that represent permissions.
- `callback` (function) - A callback taking the following parameters
  - `self` (object) - The calling script
  - `result` (table) - A table where key is permission string and key is one of the following constants
- `permissions.PERMISSION_GRANTED`
- `permissions.PERMISSION_DENIED`

**Examples**

```
local permissions_table = {"android.permission.WRITE_EXTERNAL_STORAGE", "android.permission.READ_CONTACTS"}
permissions.request(permissions_table,
    function(self, result)
        for permission, result in pairs(result) do
          if result == permissions.PERMISSION_DENIED then
              -- You can directly ask for the permission.
          elseif result == permissions.PERMISSION_GRANTED then
              -- You can use the API that requires the permission.
          elseif result == permissions.PERMISSION_SHOW_RATIONALE then
              -- In an educational UI, explain to the user why your app requires this
              -- permission for a specific feature to behave as expected, and what
              -- features are disabled if it's declined. In this UI, include a
              -- "cancel" or "no thanks" button that lets the user continue
              -- using your app without granting the permission.
          end
        end
    end)

```

### PERMISSION_GRANTED
*Type:* VARIABLE
The permission has been granted to the given package.

### PERMISSION_DENIED
*Type:* VARIABLE
The permission has not been granted to the given package.

### PERMISSION_SHOW_RATIONALE
*Type:* VARIABLE
Explain why your app needs the permission [Android doc](https://developer.android.com/training/permissions/requesting#explain)

<!-- extension-photon-realtime_realtime -->

# extension-photon-realtime {#apis:extension-photon-realtime_realtime}

**Namespace:** `realtime`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with Photon Realtime

## API

### realtime.init
*Type:* FUNCTION
Initialize Realtime by creating a load balanced client

**Parameters**

- `app_id` (string)
- `app_version` (string)
- `listener` (function)

### realtime.connect
*Type:* FUNCTION
Connect to the server.

**Parameters**

- `options` (table) - Table with connection options
  - `username` (string)
  - `use_datagram_encryption` (boolean)
  - `server_type` (number) - See SERVER_TYPE_* enums
  - `server_address` (string) - The IP address or domain name and optionally the port number to connect to. IP addresses can be in IPv4 or IPv6 format
  - `auth_data` (string) - Sets the HTTP POST data, that will be forwarded to the authentication service, to the provided data.
  - `auth_parameters` (string) - The HTTP GET parameters that will be forwarded to the authentication service to the provided parameters.
  - `auth_type` (number) - The type of the &quot;Custom Authentication&quot; service that will be used. See AUTH_* enums

### realtime.update
*Type:* FUNCTION
Update Realtime. Call this from a script component.

### realtime.disconnect
*Type:* FUNCTION
Disconnect from server.

### realtime.join_lobby
*Type:* FUNCTION
Join lobby.

**Parameters**

- `lobby_name` (string)
- `lobby_type` (number)

### realtime.leave_lobby
*Type:* FUNCTION
Leave lobby.

### realtime.create_room
*Type:* FUNCTION
Create room.

**Parameters**

- `game_id` (string) - The name to create a room with. Must be unique and not in use or the room can't be created. If this is an empty string, then the server will assign a GUID as name.
- `room_options` (table)
  - `is_visible` (boolean)
  - `is_open` (boolean)
  - `supress_room_events` (boolean)
  - `max_players` (number)
  - `player_ttl` (number)
  - `empty_room_ttl` (number)
  - `lobby_type` (number) - Realtime.LOBBYTYPE_* enum
  - `lobby_name` (string)
  - `publish_user_id` (string)
  - `direct_mode` (numbmer) - Realtime.DIRECTMODE_* enum
  - `props_listed_in_lobby` (table)
  - `custom_room_properties` (table)
- `expected_users` (table)

### realtime.join_room
*Type:* FUNCTION
Join room.

**Parameters**

- `game_id` (string) - The name to create a room with. Must be unique and not in use or the room can't be created. If this is an empty string, then the server will assign a GUID as name.
- `join_options` (table)
  - `rejoin` (boolean)
  - `cache_slice_index` (number)
  - `expected_users` (table)

### realtime.join_or_create_room
*Type:* FUNCTION
Join or create room.

**Parameters**

- `game_id` (string) - The name to create a room with. Must be unique and not in use or the room can't be created. If this is an empty string, then the server will assign a GUID as name.
- `room_options` (table)
  - `is_visible` (boolean)
  - `is_open` (boolean)
  - `supress_room_events` (boolean)
  - `max_players` (number)
  - `player_ttl` (number)
  - `empty_room_ttl` (number)
  - `lobby_type` (number) - Realtime.LOBBYTYPE_* enum
  - `lobby_name` (string)
  - `publish_user_id` (string)
  - `direct_mode` (numbmer) - Realtime.DIRECTMODE_* enum
  - `props_listed_in_lobby` (table)
  - `custom_room_properties` (table)
- `join_options` (table)
  - `custom_room_properties` (table)
  - `max_players` (number)
  - `matchmaking_mode` (number) - Realtime.MATCHMAKINGMODE_* enum
  - `lobby_name` (string)
  - `lobby_type` (number) - Realtime.LOBBYTYPE_* enum
  - `sql_lobby_filter` (string)
  - `expected_users` (table)

### realtime.join_or_create_random_room
*Type:* FUNCTION
Join or create random room.

**Parameters**

- `game_id` (string) - The name to create a room with. Must be unique and not in use or the room can't be created. If this is an empty string, then the server will assign a GUID as name.
- `room_options` (table)
  - `is_visible` (boolean)
  - `is_open` (boolean)
  - `supress_room_events` (boolean)
  - `max_players` (number)
  - `player_ttl` (number)
  - `empty_room_ttl` (number)
  - `lobby_type` (number) - Realtime.LOBBYTYPE_* enum
  - `lobby_name` (string)
  - `publish_user_id` (string)
  - `direct_mode` (numbmer) - Realtime.DIRECTMODE_* enum
  - `props_listed_in_lobby` (table)
  - `custom_room_properties` (table)
- `join_options` (table)
  - `custom_room_properties` (table)
  - `max_players` (number)
  - `matchmaking_mode` (number) - Realtime.MATCHMAKINGMODE_* enum
  - `lobby_name` (string)
  - `lobby_type` (number) - Realtime.LOBBYTYPE_* enum
  - `sql_lobby_filter` (string)
  - `expected_users` (table)

### realtime.join_random_room
*Type:* FUNCTION
Join random room.

**Parameters**

- `join_options` (table)
  - `custom_room_properties` (table)
  - `max_players` (number)
  - `matchmaking_mode` (number) - Realtime.MATCHMAKINGMODE_* enum
  - `lobby_name` (string)
  - `lobby_type` (number) - Realtime.LOBBYTYPE_* enum
  - `sql_lobby_filter` (string)
  - `expected_users` (table)

### realtime.leave_room
*Type:* FUNCTION
Leave room.

**Parameters**

- `will_come_back` (boolean)
- `send_auth_cookie` (boolean)

### realtime.get_room_list
*Type:* FUNCTION
Get room list.

### realtime.raise_event
*Type:* FUNCTION
Sends in-game data to other players in the game.

**Parameters**

- `reliable` (boolean)
- `parameter` (number)
- `event_code` (number)
- `options` (table) - (channel_id, event_caching, receiver_group, interest_group, cache_slice_index, target_players, web_flags, encrypt)
  - `channel_id` (number)
  - `event_caching` (number)
  - `receiver_group` (number)
  - `interest_group` (number)
  - `cache_slice_index` (number)
  - `target_players` (number)
  - `web_flags` (number)
  - `encrypt` (boolean)

**Returns**

- `boolea`

### realtime.set_auto_join_lobby
*Type:* FUNCTION
Set the auto join lobby flag. The value of the autoJoinLobby flag determines if the client will automatically join the default lobby whenever it has successfully connected and whenever it leaves a game room.

**Parameters**

- `auto_join` (boolean)

### EVENT_CONNECTIONERRORRETURN
*Type:* VARIABLE
EVENT_CONNECTIONERRORRETURN

### EVENT_CLIENTERRORRETURN
*Type:* VARIABLE
EVENT_CLIENTERRORRETURN

### EVENT_WARNINGRETURN
*Type:* VARIABLE
EVENT_WARNINGRETURN

### EVENT_SERVERERRORRETURN
*Type:* VARIABLE
EVENT_SERVERERRORRETURN

### EVENT_JOINROOMEVENTACTION
*Type:* VARIABLE
EVENT_JOINROOMEVENTACTION

### EVENT_LEAVEROOMEVENTACTION
*Type:* VARIABLE
EVENT_LEAVEROOMEVENTACTION

### EVENT_CUSTOMEVENTACTION
*Type:* VARIABLE
EVENT_CUSTOMEVENTACTION

### EVENT_CONNECTRETURN
*Type:* VARIABLE
EVENT_CONNECTRETURN

### EVENT_DISCONNECTRETURN
*Type:* VARIABLE
EVENT_DISCONNECTRETURN

### EVENT_CREATEROOMRETURN
*Type:* VARIABLE
EVENT_CREATEROOMRETURN

### EVENT_JOINORCREATEROOMRETURN
*Type:* VARIABLE
EVENT_JOINORCREATEROOMRETURN

### EVENT_JOINRANDOMORCREATEROOMRETURN
*Type:* VARIABLE
EVENT_JOINRANDOMORCREATEROOMRETURN

### EVENT_JOINROOMRETURN
*Type:* VARIABLE
EVENT_JOINROOMRETURN

### EVENT_JOINRANDOMROOMRETURN
*Type:* VARIABLE
EVENT_JOINRANDOMROOMRETURN

### EVENT_LEAVEROOMRETURN
*Type:* VARIABLE
EVENT_LEAVEROOMRETURN

### EVENT_JOINLOBBYRETURN
*Type:* VARIABLE
EVENT_JOINLOBBYRETURN

### EVENT_LEAVELOBBYRETURN
*Type:* VARIABLE
EVENT_LEAVELOBBYRETURN

### EVENT_ONFINDFRIENDSRESPONSE
*Type:* VARIABLE
EVENT_ONFINDFRIENDSRESPONSE

### EVENT_ONLOBBYSTATSRESPONSE
*Type:* VARIABLE
EVENT_ONLOBBYSTATSRESPONSE

### EVENT_WEBRPCRETURN
*Type:* VARIABLE
EVENT_WEBRPCRETURN

### EVENT_ONROOMLISTUPDATE
*Type:* VARIABLE
EVENT_ONROOMLISTUPDATE

### EVENT_ONROOMPROPERTIESCHANGE
*Type:* VARIABLE
EVENT_ONROOMPROPERTIESCHANGE

### EVENT_ONPLAYERPROPERTIESCHANGE
*Type:* VARIABLE
EVENT_ONPLAYERPROPERTIESCHANGE

### EVENT_ONAPPSTATSUPDATE
*Type:* VARIABLE
EVENT_ONAPPSTATSUPDATE

### EVENT_ONLOBBYSTATSUPDATE
*Type:* VARIABLE
EVENT_ONLOBBYSTATSUPDATE

### EVENT_ONCACHESLICECHANGED
*Type:* VARIABLE
EVENT_ONCACHESLICECHANGED

### EVENT_ONMASTERCLIENTCHANGED
*Type:* VARIABLE
EVENT_ONMASTERCLIENTCHANGED

### EVENT_ONCUSTOMAUTHENTICATIONINTERMEDIATESTEP
*Type:* VARIABLE
EVENT_ONCUSTOMAUTHENTICATIONINTERMEDIATESTEP

### EVENT_ONAVAILABLEREGIONS
*Type:* VARIABLE
EVENT_ONAVAILABLEREGIONS

### EVENT_ONSECRETRECEIVAL
*Type:* VARIABLE
EVENT_ONSECRETRECEIVAL

### EVENT_ONDIRECTCONNECTIONESTABLISHED
*Type:* VARIABLE
EVENT_ONDIRECTCONNECTIONESTABLISHED

### EVENT_ONDIRECTCONNECTIONFAILEDTOESTABLISH
*Type:* VARIABLE
EVENT_ONDIRECTCONNECTIONFAILEDTOESTABLISH

### EVENT_ONDIRECTMESSAGE
*Type:* VARIABLE
EVENT_ONDIRECTMESSAGE

### EVENT_ONCUSTOMOPERATIONRESPONSE
*Type:* VARIABLE
EVENT_ONCUSTOMOPERATIONRESPONSE

### EVENT_ONGETROOMLISTRESPONSE
*Type:* VARIABLE
EVENT_ONGETROOMLISTRESPONSE

### AUTH_CUSTOM
*Type:* VARIABLE
Use a custom authentication service.

### AUTH_STEAM
*Type:* VARIABLE
Authenticates users by their Steam Account. Pass L"ticket=[ticket]" to setParameters().

### AUTH_FACEBOOK
*Type:* VARIABLE
Authenticates users by their Facebook Account. Pass L"token=[token]" to setParameters().

### AUTH_OCULUS
*Type:* VARIABLE
Authenticates users by their Oculus Account. Pass L"userid=[userid]&nonce=[nonce]" to setParameters().

### AUTH_PLAYSTATION_4
*Type:* VARIABLE
Authenticates users by their PSN Account. Pass L"token=[token]&env=[env]&userName=[userName]" to setParameters().

### AUTH_XBOX
*Type:* VARIABLE
Authenticates users by their XBox Network Account. Pass the XSTS token to setData().

### AUTH_VIVEPORT
*Type:* VARIABLE
Authenticates users by their HTC Viveport Account and user token. Pass L"userToken=[userToken]" to setParameters().

### AUTH_NINTENDO_SWITCH
*Type:* VARIABLE
Authenticates users by their Nintendo Account. Pass L"token=[token]&appversion=[appversion]" to setParameters(). The appversion is optional.

### AUTH_PLAYSTATION_5
*Type:* VARIABLE
Authenticates users by their PSN Account. Pass L"token=[token]&env=[env]&userName=[userName]" to setParameters().

### AUTH_EPIC
*Type:* VARIABLE
Authenticates users by their Epic Online Services (EOS) Account. Pass L"token=[token]&ownershipToken=[ownershipToken]" to setParameters(). The ownershipToken is optional.

### AUTH_FACEBOOK_GAMING
*Type:* VARIABLE
Authenticates users by their Facebook Account. Pass L"token=[token]" to setParameters().

### AUTH_NONE
*Type:* VARIABLE
Disables custom authentication.

### SERVER_TYPE_NAME_SERVER
*Type:* VARIABLE
Photon Cloud and for self-hosted Photon 5 or higher Server instances

### SERVER_TYPE_MASTER_SERVER
*Type:* VARIABLE
Self-hosted Photon 4 Server instances

### MATCHMAKINGMODE_FILL_ROOM
*Type:* VARIABLE
Fills up rooms (oldest first) to get players together as fast as possible. Default. Makes most sense with MaxPlayers > 0 and games that can only start with more players.

### MATCHMAKINGMODE_SERIAL_MATCHING
*Type:* VARIABLE
Distributes players across available rooms sequentially but takes filters into account. Without filters, rooms get players evenly distributed.

### MATCHMAKINGMODE_RANDOM_MATCHING
*Type:* VARIABLE
Joins a (fully) random room. Expected properties must match, but aside from this, any available room might be selected.

### LOBBYTYPE_DEFAULT
*Type:* VARIABLE
This lobby type is used unless another lobby type is specified. Room lists will be sent and Client::opJoinRandomRoom() can filter by matching properties.

### LOBBYTYPE_SQL_LOBBY
*Type:* VARIABLE
This lobby type lists rooms like type DEFAULT but  SQL-like "where" clauses for filtering can be used with Client::opJoinRandomRoom(). This allows 'bigger', 'less', 'or' and 'and' combinations.

### LOBBYTYPE_ASYNC_RANDOM_LOBBY
*Type:* VARIABLE
This lobby does not send room lists. It is only used for Client::opJoinRandomRoom(). It keeps rooms available for matchmaking for a while even when there are only inactive users left.

### DIRECTMODE_NONE
*Type:* VARIABLE
Do not create any 2p2 connections between the clients. This is the default.

### DIRECTMODE_ALL_TO_OTHERS
*Type:* VARIABLE
Each client establishes a direct connection with every other client inside the room.

### DIRECTMODE_MASTER_TO_OTHERS
*Type:* VARIABLE
The master client establishes a direct connection with every other client inside the room. All other clients only establish a direct connection with the master client but not with each other.

### DIRECTMODE_ALL_TO_ALL
*Type:* VARIABLE
Each client establishes a direct connection with every client inside the room, including itself.

### DIRECTMODE_MASTER_TO_ALL
*Type:* VARIABLE
The master client establishes a direct connection with every client inside the room, including itself. All other clients only establish a direct connection with the master client but not with each other.

<!-- extension-poki-sdk_poki_sdk -->

# extension-poki-sdk {#apis:extension-poki-sdk_poki_sdk}

**Namespace:** `poki_sdk`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with Poki SDK APIs

## API

### poki_sdk.gameplay_start
*Type:* FUNCTION

### poki_sdk.gameplay_stop
*Type:* FUNCTION

### poki_sdk.commercial_break
*Type:* FUNCTION

**Parameters**

- `callback` (function)

### poki_sdk.rewarded_break
*Type:* FUNCTION

**Parameters**

- `size` (string) - The size of the reward. Accepted values are small, medium and large. Optional. Default is small.
- `callback` (function)
  - `self` (object) - The calling script instance
  - `status` (number) - One of the statuses: `poki_sdk.REWARDED_BREAK_ERROR`, `poki_sdk.REWARDED_BREAK_START`, `poki_sdk.REWARDED_BREAK_SUCCESS`

### poki_sdk.set_debug
*Type:* FUNCTION

**Parameters**

- `is_debug` (boolean)

### poki_sdk.capture_error
*Type:* FUNCTION

**Parameters**

- `error` (string)

### poki_sdk.shareable_url
*Type:* FUNCTION

**Parameters**

- `params` (table)
- `callback` (function)

### poki_sdk.get_url_param
*Type:* FUNCTION

**Parameters**

- `key` (string)

### poki_sdk.measure
*Type:* FUNCTION

**Parameters**

- `category` (string)
- `what` (string)
- `action` (string)

### poki_sdk.move_pill
*Type:* FUNCTION

**Parameters**

- `topPercent` (number)
- `topPx` (number)

### REWARDED_BREAK_ERROR
*Type:* VARIABLE

### REWARDED_BREAK_SUCCESS
*Type:* VARIABLE

### REWARDED_BREAK_START
*Type:* VARIABLE

<!-- extension-push_push -->

# extension-push {#apis:extension-push_push}

**Namespace:** `push`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with local, as well as Apple''s and Google''s push notification services. These API's only exist on mobile platforms. [icon:ios] [icon:android]

## API

### push.register
*Type:* FUNCTION
Send a request for push notifications. Note that the notifications table parameter is iOS only and will be ignored on Android.

**Parameters**

- `notifications` (table) - The types of notifications to listen to. [icon:ios]
- `callback` (function) - Register callback function.
  - `self` (object) - The current object.
  - `token` (string) - The returned push token if registration is successful.
  - `error` (table) - A table containing eventual error information.

**Examples**

Register for push notifications on iOS. Note that the token needs to be converted on this platform.
```
local function push_listener(self, payload, origin)
     -- The payload arrives here.
end

function init(self)
     local alerts = {push.NOTIFICATION_BADGE, push.NOTIFICATION_SOUND, push.NOTIFICATION_ALERT}
     push.register(alerts, function (self, token, error)
     if token then
          -- NOTE: %02x to pad byte with leading zero
          local token_string = ""
          for i = 1,#token do
              token_string = token_string .. string.format("%02x", string.byte(token, i))
          end
          print(token_string)
          push.set_listener(push_listener)
     else
          -- Push registration failed.
          print(error.error)
     end
end

```

Register for push notifications on Android.
```
local function push_listener(self, payload, origin)
     -- The payload arrives here.
end

function init(self)
     push.register({}, function (self, token, error)
         if token then
              print(token)
              push.set_listener(push_listener)
         else
              -- Push registration failed.
              print(error.error)
         end
    end)
end

```

### push.set_listener
*Type:* FUNCTION
Sets a listener function to listen to push notifications.

**Parameters**

- `listener` (function) - Listener callback function.
  - `self` (object) - The current object.
  - `payload` (table) - The push payload
  - `origin` (constant) - Origin of the push that can be one of the predefined constants below
- `push.ORIGIN_LOCAL`
- `push.ORIGIN_REMOTE`
  - `activated` (boolean) - If the application was activated via the notification.

**Examples**

Set the push notification listener.
```
local function push_listener(self, payload, origin, activated)
     -- The payload arrives here.
     pprint(payload)
     if origin == push.ORIGIN_LOCAL then
         -- This was a local push
         ...
     end

     if origin == push.ORIGIN_REMOTE then
         -- This was a remote push
         ...
     end
end

local init(self)
     ...
     -- Assuming that push.register() has been successfully called earlier
     push.set_listener(push_listener)
end

```

### push.set_badge_count
*Type:* FUNCTION
Set the badge count for application icon. This function is only available on iOS. [icon:ios]

**Parameters**

- `count` (number) - Badge count

### push.schedule
*Type:* FUNCTION
Local push notifications are scheduled with this function.
The returned `id` value is uniquely identifying the scheduled notification and can be stored for later reference.

**Parameters**

- `time` (number) - Number of seconds into the future until the notification should be triggered.
- `title` (string) - Localized title to be displayed to the user if the application is not running.
- `alert` (string) - Localized body message of the notification to be displayed to the user if the application is not running.
- `payload` (string) - JSON string to be passed to the registered listener function.
- `notification_settings` (table) - Table with notification and platform specific fields
  - `action` (string) - The alert action string to be used as the title of the right button of the alert or the value of the unlock slider, where the value replaces "unlock" in "slide to unlock" text. [icon:ios]
  - `badge_count` (number) - The numeric value of the icon badge. [icon:ios]
  - `priority` (number) - The priority is a hint to the device UI about how the notification should be displayed. There are five priority levels, from -2 to 2 where -1 is the lowest priority and 2 the highest. Unless specified, a default priority level of 2 is used. [icon:android]

**Returns**

- `number` - Unique id that can be used to cancel or inspect the notification
- `string` - Error string if something went wrong, otherwise nil

**Examples**

This example demonstrates how to schedule a local notification:
```
-- Schedule a local push in 3 seconds
local payload = '{ "data" : { "field" : "Some value", "field2" : "Other value" } }'
id, err = push.schedule(3, "Update!", "There are new stuff in the app", payload, { action = "check it out" })
if err then
     -- Something went wrong
     ...
end

```

### push.cancel
*Type:* FUNCTION
Use this function to cancel a previously scheduled local push notification.
The notification is identified by a numeric id as returned by `push.schedule()`.

**Parameters**

- `id` (number) - The numeric id of the local push notification

### push.cancel_all_issued
*Type:* FUNCTION
Use this function to cancel a previously issued local push notifications.

### push.get_scheduled
*Type:* FUNCTION
Returns a table with all data associated with a specified local push notification.
The notification is identified by a numeric id as returned by `push.schedule()`.

**Parameters**

- `id` (number) - The numeric id of the local push notification.

**Returns**

- `table` - Table with all data associated with the notification.

### push.get_all_scheduled
*Type:* FUNCTION
Returns a table with all data associated with all scheduled local push notifications.
The table contains key, value pairs where the key is the push notification id and the value is a table with the notification data, corresponding to the data given by `push.get_scheduled(id)`.

**Returns**

- `table` - Table with all data associated with all scheduled notifications.

### NOTIFICATION_BADGE
*Type:* VARIABLE
Badge notification type.

### NOTIFICATION_SOUND
*Type:* VARIABLE
Sound notification type.

### NOTIFICATION_ALERT
*Type:* VARIABLE
Alert notification type.

### ORIGIN_LOCAL
*Type:* VARIABLE
Local push origin.

### ORIGIN_REMOTE
*Type:* VARIABLE
Remote push origin.

### PRIORITY_MIN
*Type:* VARIABLE
This priority is for items might not be shown to the user except under special circumstances, such as detailed notification logs. Only available on Android. [icon:android]

### PRIORITY_LOW
*Type:* VARIABLE
Priority for items that are less important. Only available on Android. [icon:android]

### PRIORITY_DEFAULT
*Type:* VARIABLE
The default notification priority. Only available on Android. [icon:android]

### PRIORITY_HIGH
*Type:* VARIABLE
Priority for more important notifications or alerts. Only available on Android. [icon:android]

### PRIORITY_MAX
*Type:* VARIABLE
Set this priority for your application's most important items that require the user's prompt attention or input. Only available on Android. [icon:android]

<!-- extension-review_review -->

# extension-review {#apis:extension-review_review}

**Namespace:** `review`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with review APIs

## API

### review.request_review
*Type:* FUNCTION
Open native review/rating popup

### review.is_supported
*Type:* FUNCTION
Available only on iOS 10.3+. Android 5.0+ (API 21+) and the Google Play Store has to be installed.

<!-- extension-rive_rive -->

# extension-rive {#apis:extension-rive_rive}

**Namespace:** `rive`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with Rive models

## API

### rive.play_anim
*Type:* FUNCTION
Plays the specified animation on a Rive model

**Parameters**

- `url` (url) - The Rive model component for which to play an animation
- `anim_id` (hash) - Id of the animation to play
- `playback` (number) - Playback mode of the animation (from go.PLAYBACK_*)
- `options` (table) - Playback options
  - `offset` (number) - The normalized initial value of the animation cursor when the animation starts playing
  - `playback_rate` (constant) - The rate with which the animation will be played. Must be positive.
- `complete_function` (function) - function to call when the animation has completed
  - `self` (object) - The context of the calling script
  - `message_id` (hash) - The name of the completion message ("rive_animation_done")
  - `message` (table) - A table that contains the response
    - `animation_id` (hash) - the animation that was completed
    - `playback` (constant) - the playback mode for the animation
  - `sender` (url) - The invoker of the callback - the Rive model component

### rive.play_state_machine
*Type:* FUNCTION
Plays the specified animation on a Rive model

**Parameters**

- `url` (url) - The Rive model component for which to play an animation
- `state_machine_id` (hash) - Id of the state machine to play
- `options` (table) - Playback options
  - `playback_rate` (constant) - The rate with which the animation will be played. Must be positive.
- `callback_function` (function) - function to call when a playback event occurs
  - `self` (object) - The context of the calling script
  - `message_id` (hash) - The name of the event
  - `message` (table) - A table that contains the event properties

### rive.cancel
*Type:* FUNCTION
Cancels all running animations on a specified spine model component

**Parameters**

- `url` (url) - The Rive model component for which to cancel the animation

### rive.get_go
*Type:* FUNCTION
Returns the id of the game object that corresponds to a specified skeleton bone.

**Parameters**

- `url` (url) - The Rive model component to query
- `bone_id` (hash) - Id of the corresponding bone

### rive.pointer_move
*Type:* FUNCTION
Forward mouse/touch movement to a component

**Parameters**

- `url` (url) - The Rive model component
- `x` (number) - Horizontal position
- `y` (number) - Vertical position

### rive.pointer_up
*Type:* FUNCTION
Forward mouse/touch release event to a component

**Parameters**

- `url` (url) - The Rive model component
- `x` (number) - Horizontal position
- `y` (number) - Vertical position

### rive.pointer_down
*Type:* FUNCTION
Forward mouse/touch press event to a component

**Parameters**

- `url` (url) - The Rive model component
- `x` (number) - Horizontal position
- `y` (number) - Vertical position

### rive.get_text_run
*Type:* FUNCTION
Gets the text run of a specified text component from within the Rive artboard assigned to the component.

**Parameters**

- `url` (url) - The Rive model component for which to get the text run from
- `name` (string) - The name of the text run from the Rive artboard.
- `nested_artboard` (string) - (OPTIONAL) If specified, the text run will be retrieved from the specified nested artboard

### rive.set_text_run
*Type:* FUNCTION
Set the text run of a specified text component from within the Rive artboard assigned to the component.

**Parameters**

- `url` (url) - The Rive model component for which to set the text run for
- `name` (string) - The name of the text run from the Rive artboard.
- `text_run` (string) - The text run contents to update with.
- `nested_artboard` (string) - (OPTIONAL) If specified, the text run will be set in the specified nested artboard

### rive.get_projection_matrix
*Type:* FUNCTION
Get an orthographic projection matrix that can be used to project regular Defold components into the same coordinate space as the rive model when using the 'fullscreen' coordinate space.

### rive.get_state_machine_input
*Type:* FUNCTION
Get the input values from a state machine input, either from the current top-level artboard, or from a nested artboard inside the Rive model artboard. Note that trigger inputs will not generate a value!

**Parameters**

- `url` (url) - The Rive model component
- `name` (string) - The name of the input
- `nested_artboard` (string) - (OPTIONAL) If specified, the input will be queried for the specified nested artboard

### rive.set_state_machine_input
*Type:* FUNCTION
Set the input values from a state machine input, either from the current top-level artboard, or from a nested artboard inside the Rive model artboard. Note - To set input for a trigger, use a bool value.

**Parameters**

- `url` (url) - The Rive model component
- `name` (string) - The name of the input
- `value` (number | bool) - The value of the input to set
- `nested_artboard` (string) - (OPTIONAL) If specified, the input will be queried for the specified nested artboard

### rive.riv_swap_asset
*Type:* FUNCTION
Replace an asset in runtime.

**Parameters**

- `riv_path` (string,hash) - The Rive (.rivc) path. E.g. "/path/to/file.rivc"
- `asset_name` (string) - The name of the FileAsset inside the .riv file
- `options` (table) - A table of options containing
  - `path` (string) - The path of the asset file to replace with. E.g. "/path/to/file.png"
  - `payload` (string) - The payload of the asset file to replace with. E.g. a .png binary file. Takes precedence over the `path` option.

### rive.set_font_fallback_path
*Type:* FUNCTION
Register a fallback font from a file path. This font will be used if glyphs are missing in the current font. Note that only one font fallback can be active at any time.

**Parameters**

- `path` (string) - The resource path to the font file.

### rive.set_font_fallback_memory
*Type:* FUNCTION
Register a fallback font from a memory payload. This font will be used if glyphs are missing in the current font. Note that only one font fallback can be active at any time.

**Parameters**

- `payload` (string) - The font file contents.

### rive.clear_font_fallback
*Type:* FUNCTION
Clear any registered fallback font.

### rive.databind.create_view_model_instance_runtime
*Type:* FUNCTION
Creates a ViewModelInstanceRuntime

**Parameters**

- `url` (url) - The Rive model component
- `name` (string, hash) - The name of the view model to instantiate

### rive.databind.destroy_view_model_instance_runtime
*Type:* FUNCTION
Releases the previously created ViewModelInstanceRuntime

**Parameters**

- `url` (url) - The Rive model component
- `handle` (integer) - The handle to the ViewModelInstanceRuntime instance

### rive.databind.set_view_model_instance_runtime
*Type:* FUNCTION
Sets the current ViewModelInstanceRuntime

**Parameters**

- `url` (url) - The Rive model component
- `handle` (integer) - The handle to the ViewModelInstanceRuntime instance

### rive.databind.get_view_model_instance_runtime
*Type:* FUNCTION
Gets the current ViewModelInstanceRuntime

**Parameters**

- `url` (url) - The Rive model component

### rive.databind.set_properties
*Type:* FUNCTION
Sets properties to the ViewModelInstanceRuntime instance

**Parameters**

- `url` (url) - The Rive model component
- `handle` (integer) - The handle to the ViewModelInstanceRuntime instance
- `properties` (table) - A table of properties, where each key is a Rive "path", and the values are mapped to the corresponding property value type.

### rive.databind.get_property
*Type:* FUNCTION
Gets a property from the ViewModelInstanceRuntime instance

**Parameters**

- `url` (url) - The Rive model component
- `handle` (integer) - The handle to the ViewModelInstanceRuntime instance
- `path` (string) - The path to the property

### rive.databind.list_add_instance
*Type:* FUNCTION
Add a ViewModelInstanceRuntime instance to a list property

**Parameters**

- `url` (url) - The Rive model component
- `handle` (integer) - The handle to the ViewModelInstanceRuntime instance
- `path` (string) - The path to the list property
- `instance_handle` (integer) - The handle to the ViewModelInstanceRuntime instance to add to the list

### rive.databind.list_remove_instance
*Type:* FUNCTION
Remove a ViewModelInstanceRuntime instance from a list property

**Parameters**

- `url` (url) - The Rive model component
- `handle` (integer) - The handle to the ViewModelInstanceRuntime instance
- `path` (string) - The path to the list property
- `instance_handle` (integer) - The handle to the ViewModelInstanceRuntime instance to add to the list

###
*Type:* TABLE
Functions and constants for interacting with Rive data bindings

<!-- extension-safearea_safearea -->

# extension-safearea {#apis:extension-safearea_safearea}

**Namespace:** `safearea`
**Language:** Lua
**Type:** Extension

Defold native extension that will change the view/render of a game to fit into the safe area on iPhones and Android(API 28+) with notch.

## API

### safearea.set_background_color
*Type:* FUNCTION
set background color in runtime

**Parameters**

- `color` (vector4) - Color will be used as background color.

### safearea.get_insets
*Type:* FUNCTION
returns table with top, left, right, bottom values of insets and status

**Returns**

- `table`

### safearea.get_corners_radius
*Type:* FUNCTION
returns a table with `top_left`, `top_right`, `bottom_left`, and `bottom_right` values of rounded corners and status.

**Returns**

- `table`

### STATUS_OK
*Type:* VARIABLE

### STATUS_NOT_AVAILABLE
*Type:* VARIABLE

### STATUS_NOT_READY_YET
*Type:* VARIABLE

<!-- extension-siwa_siwa -->

# extension-siwa {#apis:extension-siwa_siwa}

**Namespace:** `siwa`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting Sign in with Apple. [icon:ios]

## API

### siwa.is_supported
*Type:* FUNCTION
Check if Sign in with Apple is available (iOS 13+).

### siwa.get_credential_state
*Type:* FUNCTION
Get the credential state of a user.

**Parameters**

- `user_id` (string) - User id to get credential state for.
- `callback` (function) - Credential state callback function.
  - `self` (object) - The current object.
  - `state` (table) - The credential state (user_id, credential_state)

**Examples**

```
siwa.get_credential_state(id, function(self, data)
    if data.credential_state == siwa.STATE_AUTHORIZED then
        print("User has still authorized the application", data.user_id)
    elseif data.credential_state == siwa.STATE_REVOKED then
        print("User has revoked authorization for the application", data.user_id)
    end
end)

```

### siwa.authenticate
*Type:* FUNCTION
Show the Sign in with Apple UI

**Parameters**

- `callback` (function) - Authentication callback function.
  - `self` (object) - The current object.
  - `state` (table) - The authentication result data (user_id, identity_token, email, first_name, family_name, status, result)

**Examples**

```
siwa.authenticate(function(self, data)
    print(data.identity_token)
    print(data.user_id)
    print(data.first_name, data.family_name)
    print(data.email)
    if data.user_status == siwa.STATUS_LIKELY_REAL then
        print("Likely a real person")
    end
end)

```

### STATE_NOT_FOUND
*Type:* VARIABLE
The user cant be found.

### STATE_UNKNOWN
*Type:* VARIABLE
Unknown credential state.

### STATE_AUTHORIZED
*Type:* VARIABLE
The user is authorized.

### STATE_REVOKED
*Type:* VARIABLE
Authorization for the given user has been revoked.

### STATUS_UNKNOWN
*Type:* VARIABLE
The system hasnt determined whether the user might be a real person.

### STATUS_UNSUPPORTED
*Type:* VARIABLE
The system cant determine this users status as a real person.

### STATUS_LIKELY_REAL
*Type:* VARIABLE
The user appears to be a real person.

<!-- extension-spine_gui -->

# extension-spine {#apis:extension-spine_gui}

**Namespace:** `gui`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with Spine models in GUI

## API

### gui.new_spine_node
*Type:* FUNCTION
Dynamically create a new spine node.

**Parameters**

- `pos` (vector3 | vector4) - node position
- `spine_scene` (string | hash) - spine scene id

### gui.play_spine_anim
*Type:* FUNCTION
Starts a spine animation.

**Parameters**

- `node` (node) - spine node that should play the animation
- `animation_id` (string | hash) - id of the animation to play
- `playback` (constant) - playback mode - `gui.PLAYBACK_ONCE_FORWARD` - `gui.PLAYBACK_ONCE_BACKWARD` - `gui.PLAYBACK_ONCE_PINGPONG` - `gui.PLAYBACK_LOOP_FORWARD` - `gui.PLAYBACK_LOOP_BACKWARD` - `gui.PLAYBACK_LOOP_PINGPONG`
- `play_properties` (table) - optional table with properties
  - `blend_duration` (number) - The duration of a linear blend between the current and new animation
  - `offset` (number) - The normalized initial value of the animation cursor when the animation starts playing
  - `playback_rate` (number) - The rate with which the animation will be played. Must be positive
- `complete_function` (function(self, node)) - function to call when the animation has completed

### gui.cancel_spine
*Type:* FUNCTION
cancel a spine animation

**Parameters**

- `node` (node) - spine node that should cancel its animation

### gui.get_spine_bone
*Type:* FUNCTION
The returned node can be used for parenting and transform queries. This function has complexity O(n), where n is the number of bones in the spine model skeleton.

**Parameters**

- `node` (node) - spine node to query for bone node
- `bone_id` (string | hash) - id of the corresponding bone

### gui.set_spine_scene
*Type:* FUNCTION
Set the spine scene on a spine node. The spine scene must be mapped to the gui scene in the gui editor.

**Parameters**

- `node` (node) - node to set spine scene for
- `spine_scene` (string | hash) - spine scene id

### gui.get_spine_scene
*Type:* FUNCTION
Returns the spine scene id of the supplied node. This is currently only useful for spine nodes. The returned spine scene must be mapped to the gui scene in the gui editor.

**Parameters**

- `node` (node) - node to get texture from

### gui.set_spine_skin
*Type:* FUNCTION
Sets the spine skin on a spine node.

**Parameters**

- `node` (node) - node to set the spine skin on
- `spine_skin` (string | hash) - spine skin id

**Examples**

Change skin of a Spine node
```
function init(self)
  gui.set_spine_skin(gui.get_node("spine_node"), "monster")
end

```

### gui.add_spine_skin
*Type:* FUNCTION
Add a spine skin on a spine node to another skin on the same node.

**Parameters**

- `node` (node) - node having both skins
- `spine_skin_a` (string | hash) - spine skin id that recieves other skin
- `spine_skin_b` (string | hash) - spine skin id that will be added

**Examples**

Add skin of a Spine node to another skin
```
function init(self)
  gui.add_spine_skin(gui.get_node("spine_node"), "monster_head", "monster_body")
end

```

### gui.copy_spine_skin
*Type:* FUNCTION
Copy a spine skin on a spine node to another skin on the same node.

**Parameters**

- `node` (node) - node having both skins
- `spine_skin_a` (string | hash) - spine skin id that copies other skin
- `spine_skin_b` (string | hash) - spine skin id that will be copied

**Examples**

Copy skin of a Spine node to another skin
```
function init(self)
  gui.copy_spine_skin(gui.get_node("spine_node"), "monster_head", "monster_body")
end

```

### gui.clear_spine_skin
*Type:* FUNCTION
Clear a spine skin on a spine node of all attachments and constraints

**Parameters**

- `node` (node) - node having both skins
- `spine_skin` (string | hash) - spine skin id

**Examples**

Clear skin of a Spine node
```
function init(self)
  gui.clear_spine_skin(gui.get_node("spine_node"), "monster")
end

```

### gui.get_spine_skin
*Type:* FUNCTION
Gets the spine skin of a spine node

**Parameters**

- `node` (node) - node to get spine skin from

### gui.get_spine_animation
*Type:* FUNCTION
Gets the playing animation on a spine node

**Parameters**

- `node` (node) - node to get spine skin from

### gui.set_spine_cursor
*Type:* FUNCTION
This is only useful for spine nodes. The cursor is normalized.

**Parameters**

- `node` (node) - spine node to set the cursor for
- `cursor` (number) - cursor value

### gui.get_spine_cursor
*Type:* FUNCTION
This is only useful for spine nodes. Gets the normalized cursor of the animation on a spine node.

**Parameters**

- `node` (node) - spine node to get the cursor for (node)

### gui.set_spine_playback_rate
*Type:* FUNCTION
This is only useful for spine nodes. Sets the playback rate of the animation on a spine node. Must be positive.

**Parameters**

- `node` (node) - spine node to set the cursor for
- `playback_rate` (number) - playback rate

### gui.get_spine_playback_rate
*Type:* FUNCTION
This is only useful for spine nodes. Gets the playback rate of the animation on a spine node.

**Parameters**

- `node` (node) - spine node to set the cursor for

### gui.set_spine_attachment
*Type:* FUNCTION
This is only useful for spine nodes. Sets an attachment to a slot on a spine node.

**Parameters**

- `node` (node) - spine node to set the slot for
- `slot` (string | hash) - slot name
- `attachment` (string | hash) - attachment name. May be nil.

### gui.set_spine_slot_color
*Type:* FUNCTION
This is only useful for spine nodes. Sets a tint for all attachments on a slot

**Parameters**

- `node` (node) - spine node to set the slot for
- `slot` (string | hash) - slot name
- `color` (vector4) - target color.

### gui.spine_physics_translate
*Type:* FUNCTION
Apply a physics-based translation to the Spine GUI node.

**Parameters**

- `node` (node) - The Spine GUI node to translate.
- `translation` (vector3) - The translation vector to apply to the Spine GUI node.

### gui.spine_physics_rotate
*Type:* FUNCTION
Apply a physics-based rotation to the Spine GUI node.

**Parameters**

- `node` (node) - The Spine GUI node to rotate.
- `center` (vector3) - The center point around which to rotate.
- `degrees` (number) - The rotation angle in degrees.

### gui.set_spine_ik_target_position
*Type:* FUNCTION
Sets a static (vector3) target position of an inverse kinematic (IK) object.

**Parameters**

- `node` (node) - the Spine GUI node containing the object
- `ik_constraint_id` (string | hash) - id of the corresponding IK constraint object
- `position` (vector3) - target position

**Examples**

The following example assumes that the Spine GUI node has id "spine_node".
How to set the target IK position of the right_hand_constraint constraint object of the player object
```
function init(self)
  local pos = vmath.vector3(1, 2, 0)
  gui.set_spine_ik_target_position(gui.get_node("spine_node"), "right_hand_constraint", pos)
end

```

### gui.set_spine_ik_target
*Type:* FUNCTION
Sets a GUI node as target position of an inverse kinematic (IK) object. As the target GUI node's position is updated, the constraint object is updated with the new position.

**Parameters**

- `node` (node) - the Spine GUI node containing the object
- `ik_constraint_id` (string | hash) - id of the corresponding IK constraint object
- `target_node` (node) - target GUI node

**Examples**

The following example assumes that the Spine GUI node has id "spine_node".
How to set the target IK position of the right_hand_constraint constraint object to follow the position of GUI node with id "target_node"
```
function init(self)
  local spine_node = gui.get_node("spine_node")
  local target_node = gui.get_node("target_node")
  gui.set_spine_ik_target(spine_node, "right_hand_constraint", target_node)
end

```

### gui.reset_spine_ik_target
*Type:* FUNCTION
Resets any previously set IK target of a Spine GUI node, the position will be reset to the original position from the spine scene.

**Parameters**

- `node` (node) - the Spine GUI node containing the object
- `ik_constraint_id` (string | hash) - id of the corresponding IK constraint object

**Examples**

The following example assumes that the Spine GUI node has id "spine_node".
A player no longer has an item in hand, that previously was controlled through IK, let's reset the IK of the right hand.
```
function player_lost_item(self)
  gui.reset_spine_ik_target(gui.get_node("spine_node"), "right_hand_constraint")
end

```

<!-- extension-spine_spine -->

# extension-spine {#apis:extension-spine_spine}

**Namespace:** `spine`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with Spine models

## API

### spine.play_anim
*Type:* FUNCTION
Plays the specified animation on a Spine model. A [ref:spine_animation_done] message is sent to the callback (or message handler). Any spine events will also be handled in the same way. [icon:attention] The callback is not called (or message sent) if the animation is cancelled with [ref:spine.cancel]. The callback is called (or message sent) only for animations that play with the following playback modes * `go.PLAYBACK_ONCE_FORWARD` * `go.PLAYBACK_ONCE_BACKWARD` * `go.PLAYBACK_ONCE_PINGPONG`

**Parameters**

- `url` (string | hash | url) - The Spine model for which to play an animation
- `anim_id` (string | hash) - Id of the animation to play
- `playback` (number) - Playback mode of the animation (from go.PLAYBACK_*)
- `options` (table) - Playback options
  - `blend_duration` (number) - Duration of a linear blend between the current and new animation.
  - `offset` (number) - The normalized initial value of the animation cursor when the animation starts playing.
  - `playback_rate` (constant) - The rate with which the animation will be played. Must be positive.
  - `track` (number) - The track index of the animation. Defaults to 1. Animations on different tracks play in parallel.
  - `mix_blend` (constant) - The mix blend mode for the animation (from spine.MIX_BLEND_*). Defaults to `spine.MIX_BLEND_REPLACE`. Ignored for animations on the first track.
- `callback_function` (function) - function to call when the animation has completed or a Spine event occured
  - `self` (object) - The context of the calling script
  - `message_id` (hash) - The name of the message ("spine_animation_done" or "spine_event")
  - `message` (table) - A table that contains the response
    - `animation_id` (hash) - The animation that was completed
    - `track` (number) - The track index of the animation
    - `playback` (constant) - (spine_animation_done only!) The playback mode for the animation
    - `event_id` (hash) - (spine_event only!) the event that was triggered.
    - `t` (float) - (spine_event only!) the time at which the event occurred (seconds)
    - `integer` (int) - (spine_event only!) a custom integer associated with the event (0 by default).
    - `float` (float) - (spine_event only!) a custom float associated with the event (0 by default)
    - `string` (hash) - (spine_event only!) a custom string associated with the event (hash("") by default)
  - `sender` (url) - The invoker of the callback - the Spine model component

### spine.cancel
*Type:* FUNCTION
Cancels all running animations on a specified spine model component

**Parameters**

- `url` (string | hash | url) - The Spine model for which to cancel the animation
- `options` (table) - Cancel options
  - `track` (number) - The index of the track which to cancel the animation on. Defaults to all animations on all tracks.

### spine.get_go
*Type:* FUNCTION
Returns the id of the game object that corresponds to a specified skeleton bone.

**Parameters**

- `url` (string | hash | url) - The Spine model to query
- `bone_id` (hash) - Id of the corresponding bone

### spine.set_skin
*Type:* FUNCTION
Sets the spine skin on a spine model.

**Parameters**

- `url` (string | hash | url) - The Spine model to query
- `skin` (string | hash) - Id of the corresponding skin

### spine.add_skin
*Type:* FUNCTION
Adds one spine skin on a spine model to another on the same model.

**Parameters**

- `url` (string | hash | url) - The Spine model to query
- `skin_a` (string | hash) - Id of the corresponding skin that will recieve the added skin
- `skin_b` (string | hash) - Id of the corresponding skin to add

### spine.copy_skin
*Type:* FUNCTION
Copies one spine skin on a spine model to another on the same model.

**Parameters**

- `url` (string | hash | url) - The Spine model to query
- `skin_a` (string | hash) - Id of the corresponding skin that will recieve the copied skin
- `skin_b` (string | hash) - Id of the corresponding skin to copy.

### spine.clear_skin
*Type:* FUNCTION
Clear all attachments and constraints from a skin on a spine model

**Parameters**

- `url` (string | hash | url) - The Spine model to query
- `skin` (string | hash) - Id of the corresponding skin

### spine.set_attachment
*Type:* FUNCTION
Set the attachment of a slot on a spine model.

**Parameters**

- `url` (string | hash | url) - The Spine model to query
- `slot` (string | hash) - Id of the slot
- `attachment` (string | hash | nil) - Id of the attachment. May be nil to reset to default attachment.

### spine.set_slot_color
*Type:* FUNCTION
Set the color a slot will tint its attachments on a spine model.

**Parameters**

- `url` (string | hash | url) - The Spine model to query
- `slot` (string | hash) - Id of the slot
- `color` (vector4) - Tint applied to attachments in a slot

### spine.reset_constant
*Type:* FUNCTION
Resets a shader constant for a spine model component. (Previously set with `go.set()`)

**Parameters**

- `url` (string | hash | url) - The Spine model to query
- `constant` (string | hash) - name of the constant

### spine.reset_ik_target
*Type:* FUNCTION
reset the IK constraint target position to default of a spinemodel.

**Parameters**

- `url` (string | hash | url) - The Spine model
- `ik_constraint_id` (string | hash) - id of the corresponding IK constraint

### spine.set_ik_target_position
*Type:* FUNCTION
set the target position of an IK constraint object.

**Parameters**

- `url` (string | hash | url) - The Spine model
- `ik_constraint_id` (string | hash) - id of the corresponding IK constraint
- `position` (vector3) - target position

### spine.set_ik_target
*Type:* FUNCTION
set the IK constraint object target position to follow position.

**Parameters**

- `url` (string | hash | url) - The Spine model to query
- `ik_constraint_id` (string | hash) - id of the corresponding IK constraint
- `target_url` (string | hash | url) - target game object

### spine.physics_translate
*Type:* FUNCTION
Apply a physics-based translation to the Spine model.

**Parameters**

- `url` (string | hash | url) - The Spine model component to translate.
- `translation` (vector3) - The translation vector to apply to the Spine model.

### spine.physics_rotate
*Type:* FUNCTION
Apply a physics-based rotation to the Spine model.

**Parameters**

- `url` (string | hash | url) - The Spine model component to rotate.
- `center` (vector3) - The center point around which to rotate.
- `degrees` (number) - The rotation angle in degrees.

<!-- extension-steam_steam -->

# extension-steam {#apis:extension-steam_steam}

**Namespace:** `steam`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with Steamworks.

## API

### steam.init
*Type:* FUNCTION
Initialize Steamworks.

**Returns**

- `boolean` - True if successful

- `string` - Error message if unsuccessful.

### steam.update
*Type:* FUNCTION
Update Steamworks. Call this from a script component.

### steam.restart
*Type:* FUNCTION
Restart Steamworks.

**Parameters**

- `appid` (number)

### steam.final
*Type:* FUNCTION
Finalize Steamworks.

### EFloatingGamepadTextInputModeModeSingleLine
*Type:* VARIABLE
Enter dismisses the keyboard

### EFloatingGamepadTextInputModeModeMultipleLines
*Type:* VARIABLE
User needs to explicitly dismiss the keyboard

### EFloatingGamepadTextInputModeModeEmail
*Type:* VARIABLE
Keyboard is displayed in a special mode that makes it easier to enter emails

### EFloatingGamepadTextInputModeModeNumeric
*Type:* VARIABLE
Numeric keypad is shown

### EGamepadTextInputModeNormal
*Type:* VARIABLE
Normal text input

### EGamepadTextInputModePassword
*Type:* VARIABLE
Password text input

### EGamepadTextInputLineModeSingleLine
*Type:* VARIABLE
Single line text

### EGamepadTextInputLineModeMultipleLines
*Type:* VARIABLE
Multi line text

### ELeaderboardDataRequestGlobal
*Type:* VARIABLE
Requests rows in the leaderboard from the full table.

### ELeaderboardDataRequestGlobalAroundUser
*Type:* VARIABLE
Requests rows in the leaderboard from rows around the user.

### ELeaderboardDataRequestFriends
*Type:* VARIABLE
Requests all the rows for friends of the current user.

### ELeaderboardSortMethodNone
*Type:* VARIABLE

### ELeaderboardSortMethodAscending
*Type:* VARIABLE
Top-score is lowest number.

### ELeaderboardSortMethodDescending
*Type:* VARIABLE
Top-score is highest number.

### ELeaderboardUploadScoreMethodNone
*Type:* VARIABLE

### ELeaderboardUploadScoreMethodKeepBest
*Type:* VARIABLE
Leaderboard will keep user's best score.

### ELeaderboardUploadScoreMethodForceUpdate
*Type:* VARIABLE
Leaderboard will always replace score with specified.

### ELeaderboardDisplayTypeNone
*Type:* VARIABLE

### ELeaderboardDisplayTypeNumeric
*Type:* VARIABLE
Simple numerical score.

### ELeaderboardDisplayTypeTimeSeconds
*Type:* VARIABLE
The score represents a time, in seconds.

### ELeaderboardDisplayTypeTimeMilliSeconds
*Type:* VARIABLE
The score represents a time, in milliseconds.

### EOverlayToStoreFlag_None
*Type:* VARIABLE
Passed as parameter to the store.

### EOverlayToStoreFlag_AddToCart
*Type:* VARIABLE
Passed as parameter to the store.

### EOverlayToStoreFlag_AddToCartAndShow
*Type:* VARIABLE
Passed as parameter to the store.

### EActivateGameOverlayToWebPageMode_Default
*Type:* VARIABLE
Passed as parameter to ActivateGameOverlayToWebPage.

### EActivateGameOverlayToWebPageMode_Modal
*Type:* VARIABLE
Passed as parameter to ActivateGameOverlayToWebPage.

### EPersonaStateOffline
*Type:* VARIABLE
Friend is not currently logged on.

### EPersonaStateOnline
*Type:* VARIABLE
Friend is logged on.

### EPersonaStateBusy
*Type:* VARIABLE
User is on, but busy.

### EPersonaStateAway
*Type:* VARIABLE
Auto-away feature.

### EPersonaStateSnooze
*Type:* VARIABLE
Auto-away for a long time.

### EPersonaStateLookingToTrade
*Type:* VARIABLE
Online, trading.

### EPersonaStateLookingToPlay
*Type:* VARIABLE
Online, wanting to play.

### EPersonaStateInvisible
*Type:* VARIABLE
Online, but appears offline to friends.  This status is never published to clients.

### EFriendFlagNone
*Type:* VARIABLE
EFriendFlagNone

### EFriendFlagBlocked
*Type:* VARIABLE
EFriendFlagBlocked

### EFriendFlagFriendshipRequested
*Type:* VARIABLE
EFriendFlagFriendshipRequested

### EFriendFlagImmediate
*Type:* VARIABLE
EFriendFlagImmediate

### EFriendFlagClanMember
*Type:* VARIABLE
EFriendFlagClanMember

### EFriendFlagOnGameServer
*Type:* VARIABLE
EFriendFlagOnGameServer

### EFriendFlagRequestingFriendship
*Type:* VARIABLE
EFriendFlagRequestingFriendship

### EFriendFlagRequestingInfo
*Type:* VARIABLE
EFriendFlagRequestingInfo

### EFriendFlagIgnored
*Type:* VARIABLE
EFriendFlagIgnored

### EFriendFlagIgnoredFriend
*Type:* VARIABLE
EFriendFlagIgnoredFriend

### EFriendFlagChatMember
*Type:* VARIABLE
EFriendFlagChatMember

### EFriendFlagAll
*Type:* VARIABLE
EFriendFlagAll

### SteamNetworkingSend_Unreliable
*Type:* VARIABLE
SteamNetworkingSend_Unreliable

### SteamNetworkingSend_NoNagle
*Type:* VARIABLE
SteamNetworkingSend_NoNagle

### SteamNetworkingSend_UnreliableNoNagle
*Type:* VARIABLE
SteamNetworkingSend_UnreliableNoNagle

### SteamNetworkingSend_NoDelay
*Type:* VARIABLE
SteamNetworkingSend_NoDelay

### SteamNetworkingSend_UnreliableNoDelay
*Type:* VARIABLE
SteamNetworkingSend_UnreliableNoDelay

### SteamNetworkingSend_Reliable
*Type:* VARIABLE
SteamNetworkingSend_Reliable

### SteamNetworkingSend_ReliableNoNagle
*Type:* VARIABLE
SteamNetworkingSend_ReliableNoNagle

### SteamNetworkingSend_UseCurrentThread
*Type:* VARIABLE
SteamNetworkingSend_UseCurrentThread

### SteamNetworkingSend_AutoRestartBrokenSession
*Type:* VARIABLE
SteamNetworkingSend_AutoRestartBrokenSession

### ESteamNetConnectionEnd_Invalid
*Type:* VARIABLE
ESteamNetConnectionEnd_Invalid

### ESteamNetConnectionEnd_App_Generic
*Type:* VARIABLE
ESteamNetConnectionEnd_App_Generic

### ESteamNetConnectionEnd_AppException_Generic
*Type:* VARIABLE
ESteamNetConnectionEnd_AppException_Generic

### ESteamNetConnectionEnd_Local_OfflineMode
*Type:* VARIABLE
ESteamNetConnectionEnd_Local_OfflineMode

### ESteamNetConnectionEnd_Local_ManyRelayConnectivity
*Type:* VARIABLE
ESteamNetConnectionEnd_Local_ManyRelayConnectivity

### ESteamNetConnectionEnd_Local_HostedServerPrimaryRelay
*Type:* VARIABLE
ESteamNetConnectionEnd_Local_HostedServerPrimaryRelay

### ESteamNetConnectionEnd_Local_NetworkConfig
*Type:* VARIABLE
ESteamNetConnectionEnd_Local_NetworkConfig

### ESteamNetConnectionEnd_Local_Rights
*Type:* VARIABLE
ESteamNetConnectionEnd_Local_Rights

### ESteamNetConnectionEnd_Local_P2P_ICE_NoPublicAddresses
*Type:* VARIABLE
ESteamNetConnectionEnd_Local_P2P_ICE_NoPublicAddresses

### ESteamNetConnectionEnd_Remote_Timeout
*Type:* VARIABLE
ESteamNetConnectionEnd_Remote_Timeout

### ESteamNetConnectionEnd_Remote_BadCrypt
*Type:* VARIABLE
ESteamNetConnectionEnd_Remote_BadCrypt

### ESteamNetConnectionEnd_Remote_BadCert
*Type:* VARIABLE
ESteamNetConnectionEnd_Remote_BadCert

### ESteamNetConnectionEnd_Remote_BadProtocolVersion
*Type:* VARIABLE
ESteamNetConnectionEnd_Remote_BadProtocolVersion

### ESteamNetConnectionEnd_Remote_P2P_ICE_NoPublicAddresses
*Type:* VARIABLE
ESteamNetConnectionEnd_Remote_P2P_ICE_NoPublicAddresses

### ESteamNetConnectionEnd_Misc_Generic
*Type:* VARIABLE
ESteamNetConnectionEnd_Misc_Generic

### ESteamNetConnectionEnd_Misc_InternalError
*Type:* VARIABLE
ESteamNetConnectionEnd_Misc_InternalError

### ESteamNetConnectionEnd_Misc_Timeout
*Type:* VARIABLE
ESteamNetConnectionEnd_Misc_Timeout

### ESteamNetConnectionEnd_Misc_SteamConnectivity
*Type:* VARIABLE
ESteamNetConnectionEnd_Misc_SteamConnectivity

### ESteamNetConnectionEnd_Misc_NoRelaySessionsToClient
*Type:* VARIABLE
ESteamNetConnectionEnd_Misc_NoRelaySessionsToClient

### ESteamNetConnectionEnd_Misc_P2P_Rendezvous
*Type:* VARIABLE
ESteamNetConnectionEnd_Misc_P2P_Rendezvous

### ESteamNetConnectionEnd_Misc_P2P_NAT_Firewall
*Type:* VARIABLE
ESteamNetConnectionEnd_Misc_P2P_NAT_Firewall

### ESteamNetConnectionEnd_Misc_PeerSentNoConnection
*Type:* VARIABLE
ESteamNetConnectionEnd_Misc_PeerSentNoConnection

### ESteamNetworkingConnectionState_None
*Type:* VARIABLE
ESteamNetworkingConnectionState_None

### ESteamNetworkingConnectionState_Connecting
*Type:* VARIABLE
ESteamNetworkingConnectionState_Connecting

### ESteamNetworkingConnectionState_FindingRoute
*Type:* VARIABLE
ESteamNetworkingConnectionState_FindingRoute

### ESteamNetworkingConnectionState_Connected
*Type:* VARIABLE
ESteamNetworkingConnectionState_Connected

### ESteamNetworkingConnectionState_ClosedByPeer
*Type:* VARIABLE
ESteamNetworkingConnectionState_ClosedByPeer

### ESteamNetworkingConnectionState_ProblemDetectedLocally
*Type:* VARIABLE
ESteamNetworkingConnectionState_ProblemDetectedLocally

### ELobbyTypePrivate
*Type:* VARIABLE
ELobbyTypePrivate only way to join the lobby is to invite to someone else

### ELobbyTypeFriendsOnly
*Type:* VARIABLE
ELobbyTypeFriendsOnly shows for friends or invitees, but not in lobby list

### ELobbyTypePublic
*Type:* VARIABLE
ELobbyTypePublic visible for friends and in lobby list

### ELobbyTypeInvisible
*Type:* VARIABLE
ELobbyTypeInvisible returned by search, but not visible to other friends

### ELobbyTypePrivateUnique
*Type:* VARIABLE
ELobbyTypePrivateUnique private, unique and does not delete when empty

### EAuthSessionResponseOK
*Type:* VARIABLE
EAuthSessionResponseOK Steam has verified the user is online, the ticket is valid and ticket has not been reused.

### EAuthSessionResponseUserNotConnectedToSteam
*Type:* VARIABLE
EAuthSessionResponseUserNotConnectedToSteam The user in question is not connected to steam.

### EAuthSessionResponseNoLicenseOrExpired
*Type:* VARIABLE
EAuthSessionResponseNoLicenseOrExpired The user doesn't have a license for this App ID or the ticket has expired.

### EAuthSessionResponseVACBanned
*Type:* VARIABLE
EAuthSessionResponseVACBanned The user is VAC banned for this game.

### EAuthSessionResponseLoggedInElseWhere
*Type:* VARIABLE
EAuthSessionResponseLoggedInElseWhere The user account has logged in elsewhere and the session containing the game instance has been disconnected.

### EAuthSessionResponseVACCheckTimedOut
*Type:* VARIABLE
EAuthSessionResponseVACCheckTimedOut VAC has been unable to perform anti-cheat checks on this user.

### EAuthSessionResponseAuthTicketCanceled
*Type:* VARIABLE
EAuthSessionResponseAuthTicketCanceled The ticket has been canceled by the issuer.

### EAuthSessionResponseAuthTicketInvalidAlreadyUsed
*Type:* VARIABLE
EAuthSessionResponseAuthTicketInvalidAlreadyUsed This ticket has already been used, it is not valid.

### EAuthSessionResponseAuthTicketInvalid
*Type:* VARIABLE
EAuthSessionResponseAuthTicketInvalid This ticket is not from a user instance currently connected to steam.

### EAuthSessionResponsePublisherIssuedBan
*Type:* VARIABLE
EAuthSessionResponsePublisherIssuedBan The user is banned for this game. The ban came via the web api and not VAC.

### EAuthSessionResponseAuthTicketNetworkIdentityFailure
*Type:* VARIABLE
EAuthSessionResponseAuthTicketNetworkIdentityFailure The network identity in the ticket does not match the server authenticating the ticket.

### steam.apps_is_dlc_installed
*Type:* FUNCTION
Takes AppID of DLC and checks if the user owns the DLC & if the DLC is installed.

**Parameters**

- `app_id` (number)

**Returns**

- `boolean`

### steam.friends_get_friend_persona_name
*Type:* FUNCTION
Returns the name of another user. Same rules as GetFriendPersonaState() apply as to whether or not the user knowns the name of the other user note that on first joining a lobby, chat room or game server the local user will not known the name of the other users automatically; that information will arrive asyncronously.

**Parameters**

- `CSteamID` (friendId)

**Returns**

- `string` - Name of user

### steam.friends_get_persona_name
*Type:* FUNCTION
Returns the local players name - guaranteed to not be NULL. This is the same name as on the users community profile page. This is stored in UTF-8 format.

**Returns**

- `string` - Name of user

### steam.friends_get_persona_state
*Type:* FUNCTION
Gets the status of the current user. Returned as EPersonaState.

**Returns**

- `number` - Status of user.

### steam.friends_get_friend_count
*Type:* FUNCTION
Friend iteration. Takes a set of EFriendFlags, and returns the number of users the client knows about who meet that criteria. Then GetFriendByIndex() can then be used to return the id's of each of those users.

**Parameters**

- `iFriendFlags` (number) - Set of friend flags to match friends against.

**Returns**

- `number` - Number of users matching search.

### steam.friends_get_friend_by_index
*Type:* FUNCTION
Returns the steamID of a user. The returned CSteamID can then be used by all the functions below to access details about the user.

**Parameters**

- `iFriend` (number) - Is a index of range [0, GetFriendCount())

- `iFriendsFlags` (number) - Must be the same value as used in GetFriendCount()

**Returns**

- `number` - Steam id of the user

### steam.friends_get_friend_persona_state
*Type:* FUNCTION
Returns the current status of the specified user. This will only be known by the local user if steamIDFriend is in their friends list; on the same game server; in a chat room or lobby; or in a small group with the local user.

**Parameters**

- `steamIDFriend` (number) - Id of friend

**Returns**

- `number` - State of friend

### steam.friends_get_friend_steam_level
*Type:* FUNCTION
Get friends steam level.

**Parameters**

- `steamIDFriend` (number) - Id of friend

**Returns**

- `number` - Steam level of friend

### steam.friends_get_friend_relationship
*Type:* FUNCTION
Returns a relationship to a user.

**Parameters**

- `steamIDFriend` (number) - Id of friend

**Returns**

- `number` - Relationship to the user.

### steam.friends_get_small_friend_avatar
*Type:* FUNCTION
Gets a handle to the small (32*32px) avatar for the specified user. This is a handle to be used in IClientUtils::GetImageRGBA(), or 0 if none set

**Parameters**

- `steamIDFriend` (number) - Id of friend

**Returns**

- `number` - Image handle.

### steam.friends_get_medium_friend_avatar
*Type:* FUNCTION
Gets a handle to the medium (64*64px) avatar for the specified user. This is a handle to be used in IClientUtils::GetImageRGBA(), or 0 if none set

**Parameters**

- `steamIDFriend` (number) - Id of friend

**Returns**

- `number` - Image handle.

### steam.friends_get_large_friend_avatar
*Type:* FUNCTION
Gets a handle to the large (128*128px) avatar for the specified user. This is a handle to be used in IClientUtils::GetImageRGBA(), or 0 if none set

**Parameters**

- `steamIDFriend` (number) - Id of friend

**Returns**

- `number` - Image handle.

### steam.friends_activate_game_overlay_to_store
*Type:* FUNCTION
Activates game overlay to store page for app.

**Parameters**

- `app_id` (number)
- `flag` (number) - EOverlayToStoreFlag

### steam.friends_activate_game_overlay_to_web_page
*Type:* FUNCTION
Activates game overlay web browser directly to the specified URL. Full address with protocol type is required, e.g. http://www.steamgames.com/

**Parameters**

- `url` (string)
- `mode` (number) - EActivateGameOverlayToWebPageMode

### steam.friends_set_rich_presence
*Type:* FUNCTION
Sets a Rich Presence key/value for the current user.

**Parameters**

- `key` (string)
- `value` (string)

**Returns**

- `boolean` - True if the rich presence was set successfully, otherwise False.

### steam.friends_clear_rich_presence
*Type:* FUNCTION
Clears all of the current user's Rich Presence key/values.

### steam.friends_invite_user_to_game
*Type:* FUNCTION
Invites a friend or clan member to the current game using a special invite string. If the target accepts the invite, a GameRichPresenceJoinRequested_t callback is posted containing the connect string.

**Parameters**

- `steamIDFriend` (number) - Id of friend

- `connect` (string) - String

**Returns**

- `boolean`

### steam.set_listener
*Type:* FUNCTION
Set a listener.

**Parameters**

- `listener` (function) - Listener function to call

### steam.matchmaking_add_request_lobby_list_string_filter
*Type:* FUNCTION
Adds a string comparison filter to the next RequestLobbyList call.

**Parameters**

- `key` (string)
- `value` (number)
- `cmp` (number)

### steam.matchmaking_add_request_lobby_list_numerical_filter
*Type:* FUNCTION
Adds a numerical comparison filter to the next RequestLobbyList call.

**Parameters**

- `key` (string)
- `value` (number)
- `cmp` (number)

### steam.matchmaking_add_request_lobby_list_near_value_filter
*Type:* FUNCTION
Sorts the results closest to the specified value.

**Parameters**

- `key` (string)
- `value` (number)

### steam.matchmaking_add_request_lobby_list_filter_slots_available
*Type:* FUNCTION
Filters to only return lobbies with the specified number of open slots. Available.

**Parameters**

- `slots` (number)

### steam.matchmaking_add_request_lobby_list_distance_filter
*Type:* FUNCTION
Sets the physical distance for which we should search for lobbies, this is. Based on the users IP address and a IP location map on the Steam backed.

**Parameters**

- `dist` (number)

### steam.matchmaking_add_request_lobby_list_result_count_filter
*Type:* FUNCTION
Sets the maximum number of lobbies to return. The lower the count the faster. It is to download the lobby results & details to the client.

**Parameters**

- `max_count` (number)

### steam.matchmaking_add_request_lobby_list_compatible_members_filter
*Type:* FUNCTION
Unused - Checks the player compatibility based on the frenemy system.

**Parameters**

- `steam_id` (string)

### steam.matchmaking_request_lobby_list
*Type:* FUNCTION
Get a filtered list of relevant lobbies. Will return results as a LobbyMatchList_t event

**Returns**

- `string` - Callback id

### steam.matchmaking_get_lobby_by_index
*Type:* FUNCTION
Gets the Steam ID of the lobby at the specified index. This should only be called after a LobbyMatchList_t call result is received

**Parameters**

- `index` (number) - The index of the lobby to get the Steam ID of, from 0 to
LobbyMatchList_t.m_nLobbiesMatching

**Returns**

- `string` - Id of lobby

### steam.matchmaking_create_lobby
*Type:* FUNCTION
Create a new matchmaking lobby. Will generate a LobbyCreated_t, LobbyEnter_t and LobbyDataUpdate_t event

**Parameters**

- `lobby_type` (number) - The type and visibility of this lobby.

- `max_members` (number) - The maximum number of players that can join this lobby.

**Returns**

- `string` - Callback id

### steam.matchmaking_join_lobby
*Type:* FUNCTION
Joins an existing lobby. Will generate a LobbyEnter_t event

**Parameters**

- `lobby_id` (string) - The Steam ID of the lobby to join.

**Returns**

- `string` - Callback id

### steam.matchmaking_leave_lobby
*Type:* FUNCTION
Leave a lobby that the user is currently in. Leave a lobby that the user is currently in; this will take effect immediately on the client side, other users in the lobby will be notified by a LobbyChatUpdate_t callback.

**Parameters**

- `lobby_id` (string) - The lobby to leave

### steam.matchmaking_get_lobby_owner
*Type:* FUNCTION
Returns the current lobby owner. There always one lobby owner - if the current owner leaves, another user in the lobby will become the owner automatically. It is possible (but rare) to join a lobby just as the owner is leaving, thus entering a lobby with self as the owner. You must be a member of the lobby to access this.

**Parameters**

- `lobby_id` (string) - The Steam ID of the lobby to get the owner of.

**Returns**

- `string` - Id of owner

### steam.matchmaking_set_lobby_owner
*Type:* FUNCTION
Changes who the lobby owner is. This can only be set by the owner of the lobby. This will trigger a LobbyDataUpdate_t for all of the users in the lobby, each user should update their local state to reflect the new owner. This is typically accomplished by displaying a crown icon next to the owners name.

**Parameters**

- `lobby_id` (string) - The Steam ID of the lobby to get the owner of.

- `new_owner` (string) - The new owner

### steam.matchmaking_set_lobby_type
*Type:* FUNCTION
Updates what type of lobby this is. This is also set when you create the lobby with CreateLobby. This can only be set by the owner of the lobby.

**Parameters**

- `lobby_id` (string) - The Steam ID of the lobby

- `type` (number) - The lobby type

### steam.matchmaking_set_lobby_joinable
*Type:* FUNCTION
Sets whether or not a lobby is joinable by other players. This always defaults to enabled for a new lobby. If joining is disabled, then no players can join, even if they are a friend or have been invited. Lobbies with joining disabled will not be returned from a lobby search.

**Parameters**

- `lobby_id` (string) - The Steam ID of the lobby

- `joinable` (boolean) - Enable or disable allowing users to join this lobby?

**Returns**

- `boolean` - Success

### steam.matchmaking_set_lobby_member_limit
*Type:* FUNCTION
Set the maximum number of players that can join the lobby. This is also set when you create the lobby with CreateLobby. This can only be set by the owner of the lobby.

**Parameters**

- `lobby_id` (string) - The Steam ID of the lobby to set the member limit for.

- `max_members` (number) - The maximum number of players allowed in this lobby. This
can not be above 250.

**Returns**

- `boolean` - Success

### steam.matchmaking_get_lobby_member_limit
*Type:* FUNCTION
The current limit on the

**Parameters**

- `lobby_id` (string) - The Steam ID of the lobby to get the member limit of.

**Returns**

- `number` - The current limit

### steam.matchmaking_get_num_lobby_members
*Type:* FUNCTION
Gets the number of users in a lobby. This is used for iteration, after calling this then GetLobbyMemberByIndex can be used to get the Steam ID of each person in the lobby. Persona information for other lobby members (name, avatar, etc.) is automatically received and accessible via the ISteamFriends interface. The current user must be in the lobby to retrieve the Steam IDs of other users in that lobby.

**Parameters**

- `lobby_id` (string) - The Steam ID of the lobby to get the owner of.

**Returns**

- `number` - Number of users in the lobby

### steam.matchmaking_get_lobby_member_by_index
*Type:* FUNCTION
Gets the Steam ID of the lobby member at the given index. You must call matchmaking_get_num_lobby_members before calling this. The current user must be in the lobby to retrieve the Steam IDs of other users in that lobby.

**Parameters**

- `lobby_id` (string)
- `index` (number)

**Returns**

- `string` - Id of member

### steam.matchmaking_set_lobby_data
*Type:* FUNCTION
Sets a key/value pair in the lobby metadata.

**Parameters**

- `lobby_id` (string)
- `key` (string)
- `data` (string)

**Returns**

- `boolean`

### steam.matchmaking_set_lobby_member_data
*Type:* FUNCTION
Sets per-user metadata for the local user.

**Parameters**

- `lobby_id` (string)
- `key` (string)
- `data` (string)

### steam.matchmaking_get_lobby_data
*Type:* FUNCTION
Get data associated with this lobby.

**Parameters**

- `lobby_id` (string)
- `key` (string)

**Returns**

- `string` - Data

### steam.matchmaking_get_lobby_member_data
*Type:* FUNCTION
Gets per-user metadata from another player in the specified lobby.

**Parameters**

- `lobby_id` (string)
- `user_id` (string)
- `key` (string)

**Returns**

- `string` - Data

### steam.matchmaking_get_lobby_data_count
*Type:* FUNCTION
Returns the number of metadata keys set on the specified lobby.

**Parameters**

- `lobby_id` (string)

**Returns**

- `number` - Number of keys

### steam.matchmaking_get_lobby_data_by_index
*Type:* FUNCTION
Returns a lobby metadata key/values pair by index.

**Parameters**

- `lobby_id` (string)
- `index` (number)

**Returns**

- `boolean`
- `string`
- `string`

### steam.matchmaking_send_lobby_chat_message
*Type:* FUNCTION
Broadcasts a chat message to the all the users in the lobby.

**Parameters**

- `lobby_id` (string)
- `body` (string)

**Returns**

- `boolean`

### steam.matchmaking_get_lobby_chat_entry
*Type:* FUNCTION
Get a chat message as specified in a LobbyChatMsg_t callback.

**Parameters**

- `lobby_id` (string)
- `index` (number)

**Returns**

- `string`
- `string`
- `number`

### steam.networking_send_message_to_user
*Type:* FUNCTION
Send message.

**Parameters**

- `identity_remote` (string)
- `data` (string)
- `send_flags` (number) - A bitmask of k_nSteamNetworkingSend_xxx options

- `remote_channel` (number) - A routing number you can use to help route message to different systems

### steam.networking_receive_messages_on_channel
*Type:* FUNCTION
Receive message.

**Parameters**

- `localChannel` (number)

**Returns**

- `table`

### steam.networking_accept_session_with_user
*Type:* FUNCTION
Accept session. Call this in response to a SteamNetworkingMessagesSessionRequest_t callback.

**Parameters**

- `identity_remote` (string)

**Returns**

- `boolean` - Returns false if there is no session with the user
pending or otherwise. If there is an existing active session, this function
will return true, even if it is not pending.

### steam.networking_close_session_with_user
*Type:* FUNCTION
Close sesssion. Call this when you're done talking to a user to immediately free up resources under-the-hood

**Parameters**

- `identity_remote` (string)

**Returns**

- `boolean`

### steam.networking_close_channel_with_user
*Type:* FUNCTION
Close channel. Call this when you're done talking to a user on a specific channel.

**Parameters**

- `identity_remote` (string)
- `local_channel` (number)

**Returns**

- `boolean`

### steam.networking_get_session_connection_info
*Type:* FUNCTION
Get connection info. Returns information about the latest state of a connection, if any, with the given peer.

**Parameters**

- `identity_remote` (string)

**Returns**

- `table` - Connection info (state, info, status)

### steam.remote_storage_file_share
*Type:* FUNCTION
Share a file.

**Parameters**

- `filename` (string) - Name of file to share

**Returns**

- `string`

### steam.remote_storage_get_file_count
*Type:* FUNCTION
Get number of uploaded files.

**Returns**

- `number` - File count

### steam.remote_storage_get_file_name_and_size
*Type:* FUNCTION
Get file information.

**Returns**

- `number` - File count

### steam.remote_storage_get_quota
*Type:* FUNCTION
Get storage quota.

**Returns**

- `number` - Available bytes

- `number` - Total bytes

### steam.remote_storage_file_write
*Type:* FUNCTION
Creates a new file, writes the bytes to the file, and then closes the file. If the target file already exists, it is overwritten.

**Parameters**

- `filename` (string) - The name of the file to write to.

- `data` (string)

**Returns**

- `boolean` - Success

### steam.remote_storage_file_read
*Type:* FUNCTION
Opens a binary file, reads the contents of the file into a byte array,. And then closes the file.

**Parameters**

- `filename` (string) - Name of the file to read from

**Returns**

- `string`

### steam.user_get_steam_id
*Type:* FUNCTION
Returns the CSteamID of the account currently logged into the Steam client. A CSteamID is a unique identifier for an account, and used to differentiate users in all parts of the Steamworks API.

**Returns**

- `CSteamID`

### steam.user_get_player_steam_level
*Type:* FUNCTION
Gets the Steam Level of the user, as shown on their profile.

**Returns**

- `number`

### steam.user_get_game_badge_level
*Type:* FUNCTION
Trading Card badges data access. If you only have one set of cards, the series will be 1. The user has can have two different badges for a series; the regular (max level 5) and the foil (max level 1).

**Returns**

- `number`
- `boolean`

### steam.user_logged_on
*Type:* FUNCTION
Returns true if the Steam client current has a live connection to the Steam. Servers.

**Returns**

- `boolean`

### steam.user_is_behind_nat
*Type:* FUNCTION
Returns true if this users looks like they are behind a NAT device. Only valid once the user has connected to steam .

**Returns**

- `boolean`

### steam.user_is_phone_verified
*Type:* FUNCTION
Gets whether the users phone number is verified.

**Returns**

- `boolean`

### steam.user_is_phone_identifying
*Type:* FUNCTION
Gets whether the users phone number is identifying.

**Returns**

- `boolean`

### steam.user_is_phone_requiring_verification
*Type:* FUNCTION
Gets whether the users phone number is awaiting (re)verification.

**Returns**

- `boolean`

### steam.user_is_two_factor_enabled
*Type:* FUNCTION
Gets whether the user has two factor enabled on their account.

**Returns**

- `boolean`

### steam.user_get_auth_session_ticket
*Type:* FUNCTION
Get an authentication ticket. Retrieve an authentication ticket to be sent to the entity who wishes to authenticate you.

**Returns**

- `string` - Auth ticket or null

- `number` - Ticket handle or null

- `string` - Error message or null

### steam.user_begin_auth_session
*Type:* FUNCTION
Validate an authentication ticket. Authenticate the ticket from the entity Steam ID to be sure it is valid and isn't reused. Note that identity is not confirmed until the callback ValidateAuthTicketResponse_t is received and the return value in that callback is checked for success.

**Parameters**

- `ticket` (string) - The auth ticket to validate

- `steamId` (string) - The entity's Steam ID that sent this ticket.

**Returns**

- `number`

### steam.user_cancel_auth_ticket
*Type:* FUNCTION
Cancels an auth ticket. Cancels an auth ticket received from GetAuthSessionTicket or GetAuthTicketForWebApi. This should be called when no longer playing with the specified entity.

**Parameters**

- `ticket` (number) - The active auth ticket to cancel.

### steam.user_end_auth_session
*Type:* FUNCTION
Ends an auth session. Ends an auth session that was started with BeginAuthSession. This should be called when no longer playing with the specified entity.

**Parameters**

- `steamId` (string) - The entity to end the active auth session with.

### steam.user_get_auth_ticket_for_web_api
*Type:* FUNCTION
Get an authentication ticket for web API. Request an authentication ticket suitable to authenticated in a web backend. Will trigger a GetTicketForWebApiResponse_t callback when the ticket is ready.

**Parameters**

- `identity` (string) - Optional identity string to associate with the ticket

**Returns**

- `number` - The handle of the requested ticket

- `string` - Error message or null

### steam.user_stats_get_stat_int
*Type:* FUNCTION
Get user stat as an integer. Https://partner.steamgames.com/doc/api/ISteamUserStats#GetStat

**Parameters**

- `id` (string) - Id of the stat to get

**Returns**

- `boolean`
- `number` - The stat or nil

### steam.user_stats_set_stat_int
*Type:* FUNCTION
Set user stat. Https://partner.steamgames.com/doc/api/ISteamUserStats#SetStat

**Parameters**

- `id` (string) - Id of the stat to set

- `stat` (number) - Number to set

**Returns**

- `boolean`

### steam.user_stats_get_stat_float
*Type:* FUNCTION
Get user stat as a floating point number. Https://partner.steamgames.com/doc/api/ISteamUserStats#GetStat

**Parameters**

- `id` (string) - Id of the stat to get

**Returns**

- `boolean`
- `number` - The stat

### steam.user_stats_set_stat_float
*Type:* FUNCTION
Set user stat. Https://partner.steamgames.com/doc/api/ISteamUserStats#SetStat

**Parameters**

- `id` (string) - Id of the stat to set

- `stat` (number) - Number to set

**Returns**

- `boolean`

### steam.user_stats_request_global_stats
*Type:* FUNCTION
Requests global stats data, which is available for stats marked as "aggregated". This call is asynchronous, with the results returned in GlobalStatsReceived_t. nHistoryDays specifies how many days of day-by-day history to retrieve in addition to the overall totals. The limit is 60. https://partner.steamgames.com/doc/api/ISteamUserStats#RequestGlobalStats

**Parameters**

- `history_days` (number)

**Returns**

- `boolean`

### steam.user_stats_store_stats
*Type:* FUNCTION
Store the current data on the server. Will get a callback when set and one callback for every new achievement  If the callback has a result of k_EResultInvalidParam, one or more stats uploaded has been rejected, either because they broke constraints or were out of date. In this case the server sends back updated values. The stats should be re-iterated to keep in sync. https://partner.steamgames.com/doc/api/ISteamUserStats#StoreStats

**Returns**

- `boolean`

### steam.user_stats_reset_all_stats
*Type:* FUNCTION
Reset stats. Https://partner.steamgames.com/doc/api/ISteamUserStats#ResetAllStats

**Parameters**

- `achievements` (boolean) - True if achievements should be reset as well.

**Returns**

- `boolean`

### steam.user_stats_set_achievement
*Type:* FUNCTION
Set achievement. Https://partner.steamgames.com/doc/api/ISteamUserStats#SetAchievement

**Parameters**

- `name` (string)

**Returns**

- `boolean`

### steam.user_stats_get_achievement
*Type:* FUNCTION
Get achievement. Https://partner.steamgames.com/doc/api/ISteamUserStats#GetAchievement

**Parameters**

- `name` (string)

**Returns**

- `boolean`
- `boolean`

### steam.user_stats_clear_achievement
*Type:* FUNCTION
Clear achievement. Https://partner.steamgames.com/doc/api/ISteamUserStats#ClearAchievement

**Parameters**

- `name` (string)

**Returns**

- `boolean`

### steam.user_stats_get_num_achievements
*Type:* FUNCTION
Used for iterating achievements. In general games should not need these functions because they should have a list of existing achievements compiled into them. https://partner.steamgames.com/doc/api/ISteamUserStats#GetNumAchievements

**Returns**

- `number` - Number of achievements.

### steam.user_stats_get_achievement_name
*Type:* FUNCTION
Get achievement name iAchievement in [0,GetNumAchievements). Https://partner.steamgames.com/doc/api/ISteamUserStats#GetAchievementName

**Parameters**

- `index` (number)

**Returns**

- `string`

### steam.user_stats_get_achievement_display_attribute
*Type:* FUNCTION
Get general attributes for an achievement. Accepts the following keys * "name" and "desc" for retrieving the localized achievement name and description (returned in UTF8) * "hidden" for retrieving if an achievement is hidden (returns "0" when not hidden, "1" when hidden) https://partner.steamgames.com/doc/api/ISteamUserStats#GetAchievementDisplayAttribute

**Parameters**

- `name` (string)
- `key` (string) - Either "name", "desc" or "hidden"

**Returns**

- `string`

### steam.user_stats_get_achievement_achieved_percent
*Type:* FUNCTION
Returns the percentage of users who have achieved the specified achievement. Https://partner.steamgames.com/doc/api/ISteamUserStats#GetAchievementAchievedPercent

**Returns**

- `boolean`
- `number`

### steam.user_stats_find_leaderboard
*Type:* FUNCTION
Find a leaderboard. Will return leaderboard asynchronously. https://partner.steamgames.com/doc/api/ISteamUserStats#FindLeaderboard

**Parameters**

- `name` (string)

### steam.user_stats_find_or_create_leaderboard
*Type:* FUNCTION
Gets a leaderboard by name, it will create it if it's not yet created. This call is asynchronous, with the result returned in a listener callback with event set to LeaderboardFindResult_t. https://partner.steamgames.com/doc/api/ISteamUserStats#FindOrCreateLeaderboard

**Parameters**

- `leaderboard_name` (string) - The name of the leaderboard to find or create.

- `eLeaderboardSortMethod` (ELeaderboardSortMethod) - The sort order of the new leaderboard if it's created.

- `eLeaderboardDisplayType` (ELeaderboardDisplayType) - The display type (used by the Steam Community web site) of the new leaderboard if it's created.

### steam.user_stats_get_leaderboard_name
*Type:* FUNCTION
Get the name of a leaderboard. Https://partner.steamgames.com/doc/api/ISteamUserStats#GetLeaderboardName

**Parameters**

- `leaderboard` (string)

**Returns**

- `string`

### steam.user_stats_get_leaderboard_entry_count
*Type:* FUNCTION
Get the total number of entries in a leaderboard, as of the last request. Https://partner.steamgames.com/doc/api/ISteamUserStats#GetLeaderboardEntryCount

**Parameters**

- `leaderboard` (string)

**Returns**

- `number`

### steam.user_stats_get_leaderboard_sort_method
*Type:* FUNCTION
Returns the sort method of the leaderboard. Https://partner.steamgames.com/doc/api/ISteamUserStats#GetLeaderboardSortMethod

**Parameters**

- `leaderboard` (string)

**Returns**

- `number`

### steam.user_stats_get_leaderboard_display_type
*Type:* FUNCTION
Returns the display type of a leaderboard handle. Https://partner.steamgames.com/doc/api/ISteamUserStats#GetLeaderboardDisplayType

**Parameters**

- `leaderboard` (string)

**Returns**

- `number`

### steam.user_stats_download_leaderboard_entries
*Type:* FUNCTION
Asks the Steam back-end for a set of rows in the leaderboard. This call is asynchronous, with the result returned in a listener callback with event set to LeaderboardScoresDownloaded_t. LeaderboardScoresDownloaded_t will contain a handle to pull the results from GetDownloadedLeaderboardEntries(). You can ask for more entries than exist, and it will return as many as do exist. * k_ELeaderboardDataRequestGlobal requests rows in the leaderboard from the full table, with nRangeStart & nRangeEnd in the range [1, TotalEntries] * k_ELeaderboardDataRequestGlobalAroundUser requests rows around the current user, nRangeStart being negate e.g. DownloadLeaderboardEntries( hLeaderboard, k_ELeaderboardDataRequestGlobalAroundUser, -3, 3 ) will return 7 rows, 3 before the user, 3 after * k_ELeaderboardDataRequestFriends requests all the rows for friends of the current user https://partner.steamgames.com/doc/api/ISteamUserStats#DownloadLeaderboardEntries

**Parameters**

- `leaderboard` (string)
- `request` (ELeaderboardDataRequest)
- `start` (number)
- `end` (number)

### steam.user_stats_get_downloaded_leaderboard_entry
*Type:* FUNCTION
Returns data about a single leaderboard entry. Https://partner.steamgames.com/doc/api/ISteamUserStats#GetDownloadedLeaderboardEntry

**Parameters**

- `hSteamLeaderboardEntries` (string) - Leaderboard entries handle

- `index` (number) - Which entry to get

**Returns**

- `boolean`
- `table` - The requested leaderboard entry.

### steam.user_stats_upload_leaderboard_score
*Type:* FUNCTION
Uploads a user score to a specified leaderboard. This call is asynchronous, with the result returned in a listener callback with event set to LeaderboardScoreUploaded_t. https://partner.steamgames.com/doc/api/ISteamUserStats#UploadLeaderboardScore

**Parameters**

- `leaderboard` (string)
- `eLeaderboardUploadScoreMethod` (ELeaderboardUploadScoreMethod)
- `nScore` (number)

### steam.user_stats_attach_leadboard_ugc
*Type:* FUNCTION
Attaches a piece of user generated content the current user's entry on a. Leaderboard. https://partner.steamgames.com/doc/api/ISteamUserStats#AttachLeaderboardUGC

**Parameters**

- `leaderboard` (string)
- `ugc_handle` (string)

**Returns**

- `string` - API call id

### steam.utils_get_app_id
*Type:* FUNCTION
Returns the appID of the current process.

**Returns**

- `number`

### steam.utils_get_seconds_since_app_active
*Type:* FUNCTION
Return the number of seconds since the user.

**Returns**

- `number`

### steam.utils_is_steam_running_on_steam_deck
*Type:* FUNCTION
Returns true if currently running on the Steam Deck device.

**Returns**

- `boolean`

### steam.utils_is_steam_overlay_available
*Type:* FUNCTION
Returns true if the Steam Overlay is running and the user can access it.

**Returns**

- `boolean`

### steam.utils_get_image_size
*Type:* FUNCTION
Get size of image.

**Parameters**

- `image` (number) - Image handle

**Returns**

- `boolean` - True if size of image was read successfully

- `number` - Image width or nil

- `number` - Image height or nil

### steam.utils_get_image_rgba
*Type:* FUNCTION
Get image in RGBA format.

**Parameters**

- `image` (number) - Image handle

- `size` (number) - Size of image

**Returns**

- `boolean` - True if size of image was read successfully

- `string`

### steam.utils_get_server_real_time
*Type:* FUNCTION
Returns the Steam server time in Unix epoch format. (Number of seconds since Jan 1, 1970 UTC).

**Returns**

- `number` - Time

### steam.utils_show_floating_gamepad_text_input
*Type:* FUNCTION
Opens a floating keyboard over the game content and sends OS keyboard keys directly to the game.

**Parameters**

- `mode` (number) - EFloatingGamepadTextInputMode

- `x` (number) - Text field x position

- `y` (number) - Text field y position

- `width` (number) - Text field width

- `height` (number) - Text field height

**Returns**

- `boolean` - True if the floating keyboard was shown, otherwise, false.

### steam.utils_show_gamepad_text_input
*Type:* FUNCTION
Activates the Big Picture text input dialog which only supports gamepad input.

**Parameters**

- `input_mode` (number) - EGamepadTextInputMode

- `line_input_mode` (number) - EGamepadTextInputLineMode

- `description` (string) - Sets the description that should inform the user what the input dialog is for

- `existing_text` (string) - Sets the preexisting text which the user can edit.

**Returns**

- `boolean` - True if the big picture overlay is running; otherwise, false

<!-- extension-websocket_websocket -->

# extension-websocket {#apis:extension-websocket_websocket}

**Namespace:** `websocket`
**Language:** Lua
**Type:** Extension

Functions and constants for using websockets. Supported on all platforms.

## API

### websocket.connect
*Type:* FUNCTION
Connects to a remote address

**Parameters**

- `url` (string) - url of the remote connection
- `params` (table) - optional parameters as properties. The following parameters can be set
  - `timeout` (number) - Timeout for the connection sequence (milliseconds). Not used on HTML5. (Default is 3000)
  - `protocol` (string) - the protocol to use (e.g. 'chat'). If not set, no `Sec-WebSocket-Protocol` header is sent.
  - `headers` (string) - list of http headers. Each pair is separated with "\r\n". Not used on HTML5.
- `callback` (function) - callback that receives all messages from the connection
  - `self` (object) - The script instance that was used to register the callback
  - `connection` (object) - the connection
  - `data` (table) - the event payload
    - `event` (number) - The current event. One of the following
- `websocket.EVENT_CONNECTED`
- `websocket.EVENT_DISCONNECTED`
- `websocket.EVENT_ERROR`
- `websocket.EVENT_MESSAGE`
    - `message` (string) - The received data if event is `websocket.EVENT_MESSAGE`. Error message otherwise
    - `handshake_response` (table) - Handshake response information (status, headers etc)
    - `code` (number) - Status code received from the server if the server closed the connection. Only present if event is `EVENT_DISCONNECTED`.

**Returns**

- `object` - the connection

**Examples**

```
  local function websocket_callback(self, conn, data)
    if data.event == websocket.EVENT_DISCONNECTED then
      log("Disconnected: " .. tostring(conn))
      self.connection = nil
      update_gui(self)
    elseif data.event == websocket.EVENT_CONNECTED then
      update_gui(self)
      log("Connected: " .. tostring(conn))
    elseif data.event == websocket.EVENT_ERROR then
      log("Error: '" .. data.message .. "'")
    elseif data.event == websocket.EVENT_MESSAGE then
      log("Receiving: '" .. tostring(data.message) .. "'")
    end
  end

  function init(self)
    self.url = "ws://echo.websocket.events"
    local params = {
      timeout = 3000,
      headers = "Sec-WebSocket-Protocol: chat\r\nOrigin: mydomain.com\r\n"
    }
    self.connection = websocket.connect(self.url, params, websocket_callback)
  end

  function finalize(self)
      if self.connection ~= nil then
        websocket.disconnect(self.connection)
      end
  end

```

### websocket.disconnect
*Type:* FUNCTION
Explicitly close a websocket

**Parameters**

- `connection` (object) - the websocket connection

### websocket.send
*Type:* FUNCTION
Send data on a websocket

**Parameters**

- `connection` (object) - the websocket connection
- `message` (string) - the message to send
- `options` (table) - options for this particular message. May be `nil`
  - `type` (number) - The data type of the message
- `websocket.DATA_TYPE_BINARY` (default)
- `websocket.DATA_TYPE_TEXT`

**Examples**

```
  local function websocket_callback(self, conn, data)
    if data.event == websocket.EVENT_CONNECTED then
      websocket.send(conn, "Hello from the other side")
    end
  end

  function init(self)
    self.url = "ws://echo.websocket.org"
    local params = {}
    self.connection = websocket.connect(self.url, params, websocket_callback)
  end

```

### EVENT_CONNECTED
*Type:* VARIABLE
The websocket was connected

### EVENT_DISCONNECTED
*Type:* VARIABLE
The websocket disconnected

### EVENT_MESSAGE
*Type:* VARIABLE
The websocket received data

### EVENT_ERROR
*Type:* VARIABLE
The websocket encountered an error

<!-- extension-webview_webview -->

# extension-webview {#apis:extension-webview_webview}

**Namespace:** `webview`
**Language:** Lua
**Type:** Extension

Functions and constants for interacting with webview APIs

## API

### webview.create
*Type:* FUNCTION
Creates a webview instance. It can show HTML pages as well as evaluate Javascript. The view remains hidden until the first call. There can exist a maximum of 4 webviews at the same time.
On iOS, the callback will never get a `webview.CALLBACK_RESULT_EVAL_ERROR`, due to the iOS SDK implementation."

**Parameters**

- `callback` (function) - A callback which receives info about finished requests taking the following parameters:
  - `self` (object) - The calling script
  - `webview_id` (number) - The webview id
  - `request_id` (number) - The request id
  - `type` (enum) - The type of callback
- `webview.CALLBACK_RESULT_URL_OK`
- `webview.CALLBACK_RESULT_URL_ERROR`
- `webview.CALLBACK_RESULT_URL_LOADING`
- `webview.CALLBACK_RESULT_EVAL_OK`
- `webview.CALLBACK_RESULT_EVAL_ERROR`
  - `data` (table) - A table holding the data
    - `url` (string) - The url used in the `webview.open()` call. `nil` otherwise.
    - `result` (string) - Holds the result of either: a failed url open, a successful eval request or a failed eval. `nil` otherwise.

**Examples**

```
local function webview_callback(self, webview_id, request_id, type, data)
    if type == webview.CALLBACK_RESULT_URL_OK then
        -- the page is now loaded, let's show it
        webview.set_visible(webview_id, 1)
    elseif type == webview.CALLBACK_RESULT_URL_ERROR then
        print("Failed to load url: " .. data["url"])
        print("Error: " .. data["error"])
    elseif type == webview.CALLBACK_RESULT_URL_LOADING then
        -- a page is loading
        -- return false to prevent it from loading
        -- return true or nil to continue loading the page
        if data.url ~= "https://www.defold.com/" then
            return false
        end
    elseif type == webview.CALLBACK_RESULT_EVAL_OK then
        print("Eval ok. Result: " .. data['result'])
    elseif type == webview.CALLBACK_RESULT_EVAL_ERROR then
        print("Eval not ok. Request # " .. request_id)
    end
end
local webview_id = webview.create(webview_callback)

```

### webview.destroy
*Type:* FUNCTION
Destroys an instance of a webview.

**Parameters**

- `webview_id` (number) - The webview id (returned by the `webview.create()` call)

### webview.open
*Type:* FUNCTION
Opens a web page in the webview, using an URL. Once the request is done, the callback (registered in `webview.create()`) is invoked.

**Parameters**

- `webview_id` (number) - The webview id
- `url` (string) - The URL to open
- `options` (table) - A table of options for the request. Currently it holds these options:
  - `hidden` (boolean) - If true, the webview will stay hidden (default=false)
  - `headers` (table) - A table of header keys and values
  - `transparent` (boolean) - If true, the webview background will be transparent (default=false)

**Examples**

```
local request_id = webview.open(webview_id, "http://www.defold.com", {hidden = true})

```

### webview.open_raw
*Type:* FUNCTION
Opens a web page in the webview, using HTML data. Once the request is done, the callback (registered in `webview.create()`) is invoked.

**Parameters**

- `webview_id` (number) - The webview id
- `html` (string) - The HTML data to display
- `options` (table) - A table of options for the request. See `webview.open()`

**Examples**

```
local html = sys.load_resource("/main/data/test.html")
local request_id = webview.open_raw(webview_id, html, {hidden = true})

```

### webview.eval
*Type:* FUNCTION
Evaluates JavaScript within the context of the currently loaded page (if any). Once the request is done, the callback (registered in `webview.create()`) is invoked. The callback will get the result in the `data["result"]` field.

**Parameters**

- `webview_id` (number) - The webview id
- `code` (string) - The JavaScript code to evaluate

**Examples**

```
local request_id = webview.eval(webview_id, "GetMyFormData()")

```

### webview.set_transparent
*Type:* FUNCTION
Set transparency of webview background

**Parameters**

- `webview_id` (number) - The webview id
- `transparent` (boolean) - If `true`, the webview background becomes transparent, otherwise opaque.

### webview.set_visible
*Type:* FUNCTION
Shows or hides a webview

**Parameters**

- `webview_id` (number) - The webview id
- `visible` (number) - If `0`, hides the webview. If non zero, shows the view

### webview.is_visible
*Type:* FUNCTION
Returns the visibility state of the webview.

**Parameters**

- `webview_id` (number) - The webview id

### webview.set_position
*Type:* FUNCTION
Sets the position and size of the webview

**Parameters**

- `webview_id` (number) - The webview id
- `x` (number) - The x position of the webview
- `y` (number) - The y position of the webview
- `width` (number) - The width of the webview (-1 to match screen width)
- `height` (number) - The height of the webview (-1 to match screen height)

### CALLBACK_RESULT_URL_OK
*Type:* VARIABLE

### CALLBACK_RESULT_URL_ERROR
*Type:* VARIABLE

### CALLBACK_RESULT_URL_LOADING
*Type:* VARIABLE

### CALLBACK_RESULT_EVAL_OK
*Type:* VARIABLE

### CALLBACK_RESULT_EVAL_ERROR
*Type:* VARIABLE

<!-- extension-xsolla_shop -->

# extension-xsolla {#apis:extension-xsolla_shop}

**Namespace:** `shop`
**Language:** Lua
**Type:** Extension

Functions to use the Xsolla Shop Builder API.

## API

### shop.cancel
*Type:* FUNCTION
Cancel a cancellation token

**Parameters**

- `token` (table) - The cancellation token

### shop.cancellation_token
*Type:* FUNCTION
Create a cancellation token

**Returns**

- `table` - A cancellation token

### shop.set_bearer_token
*Type:* FUNCTION
Set a bearer token

**Parameters**

- `token` (string) - The bearer token

### shop.set_username_password
*Type:* FUNCTION
Set a username and password for basic authentication

**Parameters**

- `username` (string) - The username
- `password` (string) - The password

### shop.set_merchant_auth
*Type:* FUNCTION
Set merchant id and api key for use with 'basicMerchantAuth' authentication

**Parameters**

- `merchant_id` (string) - The merchant id
- `api_key` (string) - The API key

### shop.set_auth_for_cart
*Type:* FUNCTION
Set authorization when using 'AuthForCart' authentication

**Parameters**

- `authorization_id` (string) - Unique authorization id
- `user` (string) - The user email

### shop.sync
*Type:* FUNCTION
Run code within a coroutine.

**Parameters**

- `fn` (function) - The function to run
- `cancellation_token` (table) - Optional cancellation token

### shop.get_payment_url
*Type:* FUNCTION
get the payment url for an order

**Parameters**

- `order` (table)
- `is_sandbox` (boolean)

**Returns**

- `string`

### shop.get_bundle_list
*Type:* FUNCTION
Get list of bundles

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `limit` (integer) - Limit for the number of elements on the page.
- `offset` (integer) - Number of the element from which the list is generated (the count starts from 0).
- `locale` (string) - Response language. Two-letter lowercase language code per ISO 639-1.
- `additional_fields` (array) - The list of additional fields. These fields will be in the response if you send them in your request.
- `country` (string) - Two-letter uppercase country code per [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2). Check the documentation for detailed information about [countries supported by Xsolla](https://developers.xsolla.com/doc/shop-builder/references/supported-countries/) and [the process of determining the country](https://developers.xsolla.com/doc/shop-builder/features/pricing-policy/#pricing_policy_country_determination).
- `promo_code` (string) - Unique case sensitive code. Contains letters and numbers.
- `show_inactive_time_limited_items` (integer) - Shows time-limited items that are not available to the user. The validity period of such items has not started or has already expired.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_bundle
*Type:* FUNCTION
Get specified bundle

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `sku (REQUIRED)` (string) - Bundle SKU.
- `promo_code` (string) - Unique case sensitive code. Contains letters and numbers.
- `show_inactive_time_limited_items` (integer) - Shows time-limited items that are not available to the user. The validity period of such items has not started or has already expired.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_bundle_list_in_group
*Type:* FUNCTION
Get list of bundles by specified group

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `external_id (REQUIRED)` (string) - Group external ID.
- `limit` (integer) - Limit for the number of elements on the page.
- `offset` (integer) - Number of the element from which the list is generated (the count starts from 0).
- `locale` (string) - Response language. Two-letter lowercase language code per ISO 639-1.
- `additional_fields` (array) - The list of additional fields. These fields will be in the response if you send them in your request.
- `country` (string) - Two-letter uppercase country code per [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2). Check the documentation for detailed information about [countries supported by Xsolla](https://developers.xsolla.com/doc/shop-builder/references/supported-countries/) and [the process of determining the country](https://developers.xsolla.com/doc/shop-builder/features/pricing-policy/#pricing_policy_country_determination).
- `promo_code` (string) - Unique case sensitive code. Contains letters and numbers.
- `show_inactive_time_limited_items` (integer) - Shows time-limited items that are not available to the user. The validity period of such items has not started or has already expired.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_cart_by_id
*Type:* FUNCTION
Get cart by cart ID

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `cart_id (REQUIRED)` (string) - Cart ID.
- `currency` (string) - The item price currency displayed in the cart. Three-letter currency code per [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217). Check the documentation for detailed information about [currencies supported by Xsolla](https://developers.xsolla.com/doc/pay-station/references/supported-currencies/).
- `locale` (string) - Response language. Two-letter lowercase language code per ISO 639-1.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_user_cart
*Type:* FUNCTION
Get current user's cart

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `currency` (string) - The item price currency displayed in the cart. Three-letter currency code per [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217). Check the documentation for detailed information about [currencies supported by Xsolla](https://developers.xsolla.com/doc/pay-station/references/supported-currencies/).
- `locale` (string) - Response language. Two-letter lowercase language code per ISO 639-1.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.cart_clear_by_id
*Type:* FUNCTION
Delete all cart items by cart ID

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `cart_id (REQUIRED)` (string) - Cart ID.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.cart_clear
*Type:* FUNCTION
Delete all cart items from current cart

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.cart_fill
*Type:* FUNCTION
Fill cart with items

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `body` (table)
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

**Examples**

```
{
  items =
  {
    {
      sku = "com.xsolla.booster_mega_1",
      quantity = 123,
    },
  },
}

```

### shop.cart_fill_by_id
*Type:* FUNCTION
Fill specific cart with items

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `cart_id (REQUIRED)` (string) - Cart ID.
- `body` (table)
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

**Examples**

```
{
  items =
  {
    {
      sku = "com.xsolla.booster_mega_1",
      quantity = 123,
    },
  },
}

```

### shop.put_item_by_cart_id
*Type:* FUNCTION
Update cart item by cart ID

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `cart_id (REQUIRED)` (string) - Cart ID.
- `item_sku (REQUIRED)` (string) - Item SKU.
- `body` (table)
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

**Examples**

```
{
  quantity = 123.456,
}

```

### shop.delete_item_by_cart_id
*Type:* FUNCTION
Delete cart item by cart ID

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `cart_id (REQUIRED)` (string) - Cart ID.
- `item_sku (REQUIRED)` (string) - Item SKU.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.put_item
*Type:* FUNCTION
Update cart item from current cart

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `item_sku (REQUIRED)` (string) - Item SKU.
- `body` (table)
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

**Examples**

```
{
  quantity = 123.456,
}

```

### shop.delete_item
*Type:* FUNCTION
Delete cart item from current cart

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `item_sku (REQUIRED)` (string) - Item SKU.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.create_order_by_cart_id
*Type:* FUNCTION
Create order with all items from particular cart

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `cart_id (REQUIRED)` (string) - Cart ID.
- `body` (table)
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

**Examples**

```
{
  currency = "Order price currency. Three-letter currency code per [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217). Check the documentation for detailed information about [currencies supported by Xsolla](https://developers.xsolla.com/doc/pay-station/references/supported-currencies/).",
  locale = "Response language.",
  sandbox = true,
  settings =
  {
    cart_payment_settings_ui =
    {
      theme = "Payment UI theme. Can be `63295a9a2e47fab76f7708e1` for the light theme (default) or `63295aab2e47fab76f7708e3` for the dark theme. You can also [create a custom theme](https://developers.xsolla.com/doc/pay-station/features/ui-theme-customization/#pay_station_ui_theme_customization_in_token) and pass its ID in this parameter.",
      desktop =
      {
        header =
        {
          is_visible = true,
          visible_logo = true,
          visible_name = true,
          visible_purchase = true,
          type = "How to show the header. Can be `compact` (hides project name and user ID) or `normal` (default).",
          close_button = true,
        },
      },
      mode = "Interface mode in payment UI. Can be `user_account` only. The header contains only the account navigation menu, and the user cannot select a product or make a payment. This mode is only available on the desktop.",
      user_account =
      {
        payment_accounts =
        {
          enable = true,
        },
        info =
        {
          enable = true,
          order = 123,
        },
        subscriptions =
        {
          enable = true,
          order = 123,
        },
      },
      header =
      {
        visible_virtual_currency_balance = true,
      },
      mobile =
      {
        header =
        {
          close_button = true,
        },
      },
      is_prevent_external_link_open = true,
      is_payment_methods_list_mode = true,
      is_independent_windows = true,
      currency_format = "Set to `code` to display a three-letter [ISO 4217](https://developers.xsolla.com/doc/pay-station/references/supported-currencies/) currency code in the payment UI. The currency symbol is displayed instead of the three-letter currency code by default.",
      is_show_close_widget_warning = true,
      layout = "Location of the main elements of the payment UI. You can open the payment UI inside your game and/or swap the columns with information about an order and payment methods. Refer to the [customization instructions](https://developers.xsolla.com/doc/pay-station/features/ui-theme-customization/#pay_station_ui_theme_customization_layout) for detailed information.",
      is_three_ds_independent_windows = true,
      is_cart_open_by_default = true,
    },
    cart_payment_settings_payment_method = 123,
    cart_payment_settings_return_url = "Page to redirect the user to after payment. Parameters `user_id`, `foreigninvoice`, `invoice_id` and `status` will be automatically added to the link.",
    cart_payment_redirect_policy =
    {
      redirect_conditions = "none",
      delay = 0,
      status_for_manual_redirection = "none",
      redirect_button_caption = "Text button",
    },
  },
  custom_parameters =
  {
  },
}

```

### shop.create_order
*Type:* FUNCTION
Create order with all items from current cart

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `body` (table)
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

**Examples**

```
{
  currency = "Order price currency. Three-letter currency code per [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217). Check the documentation for detailed information about [currencies supported by Xsolla](https://developers.xsolla.com/doc/pay-station/references/supported-currencies/).",
  locale = "Response language.",
  sandbox = true,
  settings =
  {
    cart_payment_settings_ui =
    {
      theme = "Payment UI theme. Can be `63295a9a2e47fab76f7708e1` for the light theme (default) or `63295aab2e47fab76f7708e3` for the dark theme. You can also [create a custom theme](https://developers.xsolla.com/doc/pay-station/features/ui-theme-customization/#pay_station_ui_theme_customization_in_token) and pass its ID in this parameter.",
      desktop =
      {
        header =
        {
          is_visible = true,
          visible_logo = true,
          visible_name = true,
          visible_purchase = true,
          type = "How to show the header. Can be `compact` (hides project name and user ID) or `normal` (default).",
          close_button = true,
        },
      },
      mode = "Interface mode in payment UI. Can be `user_account` only. The header contains only the account navigation menu, and the user cannot select a product or make a payment. This mode is only available on the desktop.",
      user_account =
      {
        payment_accounts =
        {
          enable = true,
        },
        info =
        {
          enable = true,
          order = 123,
        },
        subscriptions =
        {
          enable = true,
          order = 123,
        },
      },
      header =
      {
        visible_virtual_currency_balance = true,
      },
      mobile =
      {
        header =
        {
          close_button = true,
        },
      },
      is_prevent_external_link_open = true,
      is_payment_methods_list_mode = true,
      is_independent_windows = true,
      currency_format = "Set to `code` to display a three-letter [ISO 4217](https://developers.xsolla.com/doc/pay-station/references/supported-currencies/) currency code in the payment UI. The currency symbol is displayed instead of the three-letter currency code by default.",
      is_show_close_widget_warning = true,
      layout = "Location of the main elements of the payment UI. You can open the payment UI inside your game and/or swap the columns with information about an order and payment methods. Refer to the [customization instructions](https://developers.xsolla.com/doc/pay-station/features/ui-theme-customization/#pay_station_ui_theme_customization_layout) for detailed information.",
      is_three_ds_independent_windows = true,
      is_cart_open_by_default = true,
    },
    cart_payment_settings_payment_method = 123,
    cart_payment_settings_return_url = "Page to redirect the user to after payment. Parameters `user_id`, `foreigninvoice`, `invoice_id` and `status` will be automatically added to the link.",
    cart_payment_redirect_policy =
    {
      redirect_conditions = "none",
      delay = 0,
      status_for_manual_redirection = "none",
      redirect_button_caption = "Text button",
    },
  },
  custom_parameters =
  {
  },
}

```

### shop.create_order_with_item
*Type:* FUNCTION
Create order with specified item

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `item_sku (REQUIRED)` (string) - Item SKU.
- `body` (table)
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

**Examples**

```
{
  currency = "Order price currency. Three-letter currency code per [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217). Check the documentation for detailed information about [currencies supported by Xsolla](https://developers.xsolla.com/doc/pay-station/references/supported-currencies/).",
  locale = "Response language.",
  sandbox = true,
  quantity = 123,
  promo_code = "Redeems a code of a promo code promotion with payment.",
  settings =
  {
    cart_payment_settings_ui =
    {
      theme = "Payment UI theme. Can be `63295a9a2e47fab76f7708e1` for the light theme (default) or `63295aab2e47fab76f7708e3` for the dark theme. You can also [create a custom theme](https://developers.xsolla.com/doc/pay-station/features/ui-theme-customization/#pay_station_ui_theme_customization_in_token) and pass its ID in this parameter.",
      desktop =
      {
        header =
        {
          is_visible = true,
          visible_logo = true,
          visible_name = true,
          visible_purchase = true,
          type = "How to show the header. Can be `compact` (hides project name and user ID) or `normal` (default).",
          close_button = true,
        },
      },
      mode = "Interface mode in payment UI. Can be `user_account` only. The header contains only the account navigation menu, and the user cannot select a product or make a payment. This mode is only available on the desktop.",
      user_account =
      {
        payment_accounts =
        {
          enable = true,
        },
        info =
        {
          enable = true,
          order = 123,
        },
        subscriptions =
        {
          enable = true,
          order = 123,
        },
      },
      header =
      {
        visible_virtual_currency_balance = true,
      },
      mobile =
      {
        header =
        {
          close_button = true,
        },
      },
      is_prevent_external_link_open = true,
      is_payment_methods_list_mode = true,
      is_independent_windows = true,
      currency_format = "Set to `code` to display a three-letter [ISO 4217](https://developers.xsolla.com/doc/pay-station/references/supported-currencies/) currency code in the payment UI. The currency symbol is displayed instead of the three-letter currency code by default.",
      is_show_close_widget_warning = true,
      layout = "Location of the main elements of the payment UI. You can open the payment UI inside your game and/or swap the columns with information about an order and payment methods. Refer to the [customization instructions](https://developers.xsolla.com/doc/pay-station/features/ui-theme-customization/#pay_station_ui_theme_customization_layout) for detailed information.",
      is_three_ds_independent_windows = true,
      is_cart_open_by_default = true,
    },
    cart_payment_settings_payment_method = 123,
    cart_payment_settings_return_url = "Page to redirect the user to after payment. Parameters `user_id`, `foreigninvoice`, `invoice_id` and `status` will be automatically added to the link.",
    cart_payment_redirect_policy =
    {
      redirect_conditions = "none",
      delay = 0,
      status_for_manual_redirection = "none",
      redirect_button_caption = "Text button",
    },
  },
  custom_parameters =
  {
  },
}

```

### shop.create_free_order
*Type:* FUNCTION
Create order with free cart

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `body` (table)
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

**Examples**

```
{
  currency = "Order price currency. Three-letter currency code per [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217). Check the documentation for detailed information about [currencies supported by Xsolla](https://developers.xsolla.com/doc/pay-station/references/supported-currencies/).",
  locale = "Response language.",
  sandbox = true,
  settings =
  {
    cart_payment_settings_ui =
    {
      theme = "Payment UI theme. Can be `63295a9a2e47fab76f7708e1` for the light theme (default) or `63295aab2e47fab76f7708e3` for the dark theme. You can also [create a custom theme](https://developers.xsolla.com/doc/pay-station/features/ui-theme-customization/#pay_station_ui_theme_customization_in_token) and pass its ID in this parameter.",
      desktop =
      {
        header =
        {
          is_visible = true,
          visible_logo = true,
          visible_name = true,
          visible_purchase = true,
          type = "How to show the header. Can be `compact` (hides project name and user ID) or `normal` (default).",
          close_button = true,
        },
      },
      mode = "Interface mode in payment UI. Can be `user_account` only. The header contains only the account navigation menu, and the user cannot select a product or make a payment. This mode is only available on the desktop.",
      user_account =
      {
        payment_accounts =
        {
          enable = true,
        },
        info =
        {
          enable = true,
          order = 123,
        },
        subscriptions =
        {
          enable = true,
          order = 123,
        },
      },
      header =
      {
        visible_virtual_currency_balance = true,
      },
      mobile =
      {
        header =
        {
          close_button = true,
        },
      },
      is_prevent_external_link_open = true,
      is_payment_methods_list_mode = true,
      is_independent_windows = true,
      currency_format = "Set to `code` to display a three-letter [ISO 4217](https://developers.xsolla.com/doc/pay-station/references/supported-currencies/) currency code in the payment UI. The currency symbol is displayed instead of the three-letter currency code by default.",
      is_show_close_widget_warning = true,
      layout = "Location of the main elements of the payment UI. You can open the payment UI inside your game and/or swap the columns with information about an order and payment methods. Refer to the [customization instructions](https://developers.xsolla.com/doc/pay-station/features/ui-theme-customization/#pay_station_ui_theme_customization_layout) for detailed information.",
      is_three_ds_independent_windows = true,
      is_cart_open_by_default = true,
    },
    cart_payment_settings_payment_method = 123,
    cart_payment_settings_return_url = "Page to redirect the user to after payment. Parameters `user_id`, `foreigninvoice`, `invoice_id` and `status` will be automatically added to the link.",
    cart_payment_redirect_policy =
    {
      redirect_conditions = "none",
      delay = 0,
      status_for_manual_redirection = "none",
      redirect_button_caption = "Text button",
    },
  },
  custom_parameters =
  {
  },
}

```

### shop.create_free_order_by_cart_id
*Type:* FUNCTION
Create order with particular free cart

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `cart_id (REQUIRED)` (string) - Cart ID.
- `body` (table)
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

**Examples**

```
{
  currency = "Order price currency. Three-letter currency code per [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217). Check the documentation for detailed information about [currencies supported by Xsolla](https://developers.xsolla.com/doc/pay-station/references/supported-currencies/).",
  locale = "Response language.",
  sandbox = true,
  settings =
  {
    cart_payment_settings_ui =
    {
      theme = "Payment UI theme. Can be `63295a9a2e47fab76f7708e1` for the light theme (default) or `63295aab2e47fab76f7708e3` for the dark theme. You can also [create a custom theme](https://developers.xsolla.com/doc/pay-station/features/ui-theme-customization/#pay_station_ui_theme_customization_in_token) and pass its ID in this parameter.",
      desktop =
      {
        header =
        {
          is_visible = true,
          visible_logo = true,
          visible_name = true,
          visible_purchase = true,
          type = "How to show the header. Can be `compact` (hides project name and user ID) or `normal` (default).",
          close_button = true,
        },
      },
      mode = "Interface mode in payment UI. Can be `user_account` only. The header contains only the account navigation menu, and the user cannot select a product or make a payment. This mode is only available on the desktop.",
      user_account =
      {
        payment_accounts =
        {
          enable = true,
        },
        info =
        {
          enable = true,
          order = 123,
        },
        subscriptions =
        {
          enable = true,
          order = 123,
        },
      },
      header =
      {
        visible_virtual_currency_balance = true,
      },
      mobile =
      {
        header =
        {
          close_button = true,
        },
      },
      is_prevent_external_link_open = true,
      is_payment_methods_list_mode = true,
      is_independent_windows = true,
      currency_format = "Set to `code` to display a three-letter [ISO 4217](https://developers.xsolla.com/doc/pay-station/references/supported-currencies/) currency code in the payment UI. The currency symbol is displayed instead of the three-letter currency code by default.",
      is_show_close_widget_warning = true,
      layout = "Location of the main elements of the payment UI. You can open the payment UI inside your game and/or swap the columns with information about an order and payment methods. Refer to the [customization instructions](https://developers.xsolla.com/doc/pay-station/features/ui-theme-customization/#pay_station_ui_theme_customization_layout) for detailed information.",
      is_three_ds_independent_windows = true,
      is_cart_open_by_default = true,
    },
    cart_payment_settings_payment_method = 123,
    cart_payment_settings_return_url = "Page to redirect the user to after payment. Parameters `user_id`, `foreigninvoice`, `invoice_id` and `status` will be automatically added to the link.",
    cart_payment_redirect_policy =
    {
      redirect_conditions = "none",
      delay = 0,
      status_for_manual_redirection = "none",
      redirect_button_caption = "Text button",
    },
  },
  custom_parameters =
  {
  },
}

```

### shop.create_free_order_with_item
*Type:* FUNCTION
Create order with specified free item

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `item_sku (REQUIRED)` (string) - Item SKU.
- `body` (table)
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

**Examples**

```
{
  currency = "Order price currency. Three-letter currency code per [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217). Check the documentation for detailed information about [currencies supported by Xsolla](https://developers.xsolla.com/doc/pay-station/references/supported-currencies/).",
  locale = "Response language.",
  sandbox = true,
  quantity = 123,
  promo_code = "Redeems a code of a promo code promotion with payment.",
  settings =
  {
    cart_payment_settings_ui =
    {
      theme = "Payment UI theme. Can be `63295a9a2e47fab76f7708e1` for the light theme (default) or `63295aab2e47fab76f7708e3` for the dark theme. You can also [create a custom theme](https://developers.xsolla.com/doc/pay-station/features/ui-theme-customization/#pay_station_ui_theme_customization_in_token) and pass its ID in this parameter.",
      desktop =
      {
        header =
        {
          is_visible = true,
          visible_logo = true,
          visible_name = true,
          visible_purchase = true,
          type = "How to show the header. Can be `compact` (hides project name and user ID) or `normal` (default).",
          close_button = true,
        },
      },
      mode = "Interface mode in payment UI. Can be `user_account` only. The header contains only the account navigation menu, and the user cannot select a product or make a payment. This mode is only available on the desktop.",
      user_account =
      {
        payment_accounts =
        {
          enable = true,
        },
        info =
        {
          enable = true,
          order = 123,
        },
        subscriptions =
        {
          enable = true,
          order = 123,
        },
      },
      header =
      {
        visible_virtual_currency_balance = true,
      },
      mobile =
      {
        header =
        {
          close_button = true,
        },
      },
      is_prevent_external_link_open = true,
      is_payment_methods_list_mode = true,
      is_independent_windows = true,
      currency_format = "Set to `code` to display a three-letter [ISO 4217](https://developers.xsolla.com/doc/pay-station/references/supported-currencies/) currency code in the payment UI. The currency symbol is displayed instead of the three-letter currency code by default.",
      is_show_close_widget_warning = true,
      layout = "Location of the main elements of the payment UI. You can open the payment UI inside your game and/or swap the columns with information about an order and payment methods. Refer to the [customization instructions](https://developers.xsolla.com/doc/pay-station/features/ui-theme-customization/#pay_station_ui_theme_customization_layout) for detailed information.",
      is_three_ds_independent_windows = true,
      is_cart_open_by_default = true,
    },
    cart_payment_settings_payment_method = 123,
    cart_payment_settings_return_url = "Page to redirect the user to after payment. Parameters `user_id`, `foreigninvoice`, `invoice_id` and `status` will be automatically added to the link.",
    cart_payment_redirect_policy =
    {
      redirect_conditions = "none",
      delay = 0,
      status_for_manual_redirection = "none",
      redirect_button_caption = "Text button",
    },
  },
  custom_parameters =
  {
  },
}

```

### shop.get_order
*Type:* FUNCTION
Get order

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `order_id (REQUIRED)` (string) - Order ID.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_upsell_for_project_client
*Type:* FUNCTION
Get list of upsell items in project

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_games_list
*Type:* FUNCTION
Get games list

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `limit` (integer) - Limit for the number of elements on the page.
- `offset` (integer) - Number of the element from which the list is generated (the count starts from 0).
- `locale` (string) - Response language. Two-letter lowercase language code per ISO 639-1.
- `additional_fields` (array) - The list of additional fields. These fields will be in the response if you send them in your request.
- `country` (string) - Two-letter uppercase country code per [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2). Check the documentation for detailed information about [countries supported by Xsolla](https://developers.xsolla.com/doc/shop-builder/references/supported-countries/) and [the process of determining the country](https://developers.xsolla.com/doc/shop-builder/features/pricing-policy/#pricing_policy_country_determination).
- `promo_code` (string) - Unique case sensitive code. Contains letters and numbers.
- `show_inactive_time_limited_items` (integer) - Shows time-limited items that are not available to the user. The validity period of such items has not started or has already expired.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_games_group
*Type:* FUNCTION
Get games list by specified group

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `external_id (REQUIRED)` (string) - Group external ID.
- `limit` (integer) - Limit for the number of elements on the page.
- `offset` (integer) - Number of the element from which the list is generated (the count starts from 0).
- `locale` (string) - Response language. Two-letter lowercase language code per ISO 639-1.
- `additional_fields` (array) - The list of additional fields. These fields will be in the response if you send them in your request.
- `country` (string) - Two-letter uppercase country code per [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2). Check the documentation for detailed information about [countries supported by Xsolla](https://developers.xsolla.com/doc/shop-builder/references/supported-countries/) and [the process of determining the country](https://developers.xsolla.com/doc/shop-builder/features/pricing-policy/#pricing_policy_country_determination).
- `promo_code` (string) - Unique case sensitive code. Contains letters and numbers.
- `show_inactive_time_limited_items` (integer) - Shows time-limited items that are not available to the user. The validity period of such items has not started or has already expired.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_game_by_sku
*Type:* FUNCTION
Get game for catalog

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `item_sku (REQUIRED)` (string) - Item SKU.
- `locale` (string) - Response language. Two-letter lowercase language code per ISO 639-1.
- `additional_fields` (array) - The list of additional fields. These fields will be in the response if you send them in your request.
- `country` (string) - Two-letter uppercase country code per [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2). Check the documentation for detailed information about [countries supported by Xsolla](https://developers.xsolla.com/doc/shop-builder/references/supported-countries/) and [the process of determining the country](https://developers.xsolla.com/doc/shop-builder/features/pricing-policy/#pricing_policy_country_determination).
- `promo_code` (string) - Unique case sensitive code. Contains letters and numbers.
- `show_inactive_time_limited_items` (integer) - Shows time-limited items that are not available to the user. The validity period of such items has not started or has already expired.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_game_key_by_sku
*Type:* FUNCTION
Get game key for catalog

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `item_sku (REQUIRED)` (string) - Item SKU.
- `locale` (string) - Response language. Two-letter lowercase language code per ISO 639-1.
- `additional_fields` (array) - The list of additional fields. These fields will be in the response if you send them in your request.
- `country` (string) - Two-letter uppercase country code per [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2). Check the documentation for detailed information about [countries supported by Xsolla](https://developers.xsolla.com/doc/shop-builder/references/supported-countries/) and [the process of determining the country](https://developers.xsolla.com/doc/shop-builder/features/pricing-policy/#pricing_policy_country_determination).
- `promo_code` (string) - Unique case sensitive code. Contains letters and numbers.
- `show_inactive_time_limited_items` (integer) - Shows time-limited items that are not available to the user. The validity period of such items has not started or has already expired.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_game_keys_group
*Type:* FUNCTION
Get game keys list by specified group

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `external_id (REQUIRED)` (string) - Group external ID.
- `limit` (integer) - Limit for the number of elements on the page.
- `offset` (integer) - Number of the element from which the list is generated (the count starts from 0).
- `locale` (string) - Response language. Two-letter lowercase language code per ISO 639-1.
- `additional_fields` (array) - The list of additional fields. These fields will be in the response if you send them in your request.
- `country` (string) - Two-letter uppercase country code per [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2). Check the documentation for detailed information about [countries supported by Xsolla](https://developers.xsolla.com/doc/shop-builder/references/supported-countries/) and [the process of determining the country](https://developers.xsolla.com/doc/shop-builder/features/pricing-policy/#pricing_policy_country_determination).
- `promo_code` (string) - Unique case sensitive code. Contains letters and numbers.
- `show_inactive_time_limited_items` (integer) - Shows time-limited items that are not available to the user. The validity period of such items has not started or has already expired.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_drm_list
*Type:* FUNCTION
Get DRM list

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_user_games
*Type:* FUNCTION
Get list of games owned by user

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `limit` (integer) - Limit for the number of elements on the page.
- `offset` (integer) - Number of the element from which the list is generated (the count starts from 0).
- `sandbox` (integer) - What type of entitlements should be returned. If the parameter is set to 1, the entitlements received by the user in the sandbox mode only are returned. If the parameter isn&#x27;t passed or is set to 0, the entitlements received by the user in the live mode only are returned.
- `additional_fields` (array) - The list of additional fields. These fields will be in the response if you send them in your request. Available fields `attributes`.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.redeem_game_pin_code
*Type:* FUNCTION
Redeem game code by client

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `body` (table)
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

**Examples**

```
{
  code = "AAAA-BBBB-CCCC-DDDD",
  sandbox = false,
}

```

### shop.redeem_coupon
*Type:* FUNCTION
Redeem coupon code

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `body` (table)
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

**Examples**

```
{
  coupon_code = "WINTER2021",
  selected_unit_items =
  {
  },
}

```

### shop.get_coupon_rewards_by_code
*Type:* FUNCTION
Get coupon rewards

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `coupon_code (REQUIRED)` (string) - Unique case sensitive code. Contains letters and numbers.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.redeem_promo_code
*Type:* FUNCTION
Redeem promo code

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `body` (table)
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

**Examples**

```
{
  coupon_code = "SUMMER2021",
  cart =
  {
    id = "Cart ID.",
  },
  selected_unit_items =
  {
  },
}

```

### shop.remove_cart_promo_code
*Type:* FUNCTION
Remove promo code from cart

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `body` (table)
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

**Examples**

```
{
  cart =
  {
    id = "Cart ID.",
  },
}

```

### shop.get_promo_code_rewards_by_code
*Type:* FUNCTION
Get promo code rewards

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `promocode_code (REQUIRED)` (string) - Unique case sensitive code. Contains letters and numbers.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.verify_promotion_code
*Type:* FUNCTION
Verify promotion code

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `code (REQUIRED)` (string) - Unique case-sensitive code. Contains letters and numbers.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_virtual_items
*Type:* FUNCTION
Get virtual items list

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `limit` (integer) - Limit for the number of elements on the page.
- `offset` (integer) - Number of the element from which the list is generated (the count starts from 0).
- `locale` (string) - Response language. Two-letter lowercase language code per ISO 639-1.
- `additional_fields` (array) - The list of additional fields. These fields will be in the response if you send them in your request.
- `country` (string) - Two-letter uppercase country code per [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2). Check the documentation for detailed information about [countries supported by Xsolla](https://developers.xsolla.com/doc/shop-builder/references/supported-countries/) and [the process of determining the country](https://developers.xsolla.com/doc/shop-builder/features/pricing-policy/#pricing_policy_country_determination).
- `promo_code` (string) - Unique case sensitive code. Contains letters and numbers.
- `show_inactive_time_limited_items` (integer) - Shows time-limited items that are not available to the user. The validity period of such items has not started or has already expired.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_virtual_items_sku
*Type:* FUNCTION
Get virtual item by SKU

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `item_sku (REQUIRED)` (string) - Item SKU.
- `locale` (string) - Response language. Two-letter lowercase language code per ISO 639-1.
- `country` (string) - Two-letter uppercase country code per [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2). Check the documentation for detailed information about [countries supported by Xsolla](https://developers.xsolla.com/doc/shop-builder/references/supported-countries/) and [the process of determining the country](https://developers.xsolla.com/doc/shop-builder/features/pricing-policy/#pricing_policy_country_determination).
- `show_inactive_time_limited_items` (integer) - Shows time-limited items that are not available to the user. The validity period of such items has not started or has already expired.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_all_virtual_items
*Type:* FUNCTION
Get all virtual items list

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `locale` (string) - Response language. Two-letter lowercase language code per ISO 639-1.
- `promo_code` (string) - Unique case sensitive code. Contains letters and numbers.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_virtual_currency
*Type:* FUNCTION
Get virtual currency list

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `limit` (integer) - Limit for the number of elements on the page.
- `offset` (integer) - Number of the element from which the list is generated (the count starts from 0).
- `locale` (string) - Response language. Two-letter lowercase language code per ISO 639-1.
- `additional_fields` (array) - The list of additional fields. These fields will be in the response if you send them in your request.
- `country` (string) - Two-letter uppercase country code per [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2). Check the documentation for detailed information about [countries supported by Xsolla](https://developers.xsolla.com/doc/shop-builder/references/supported-countries/) and [the process of determining the country](https://developers.xsolla.com/doc/shop-builder/features/pricing-policy/#pricing_policy_country_determination).
- `promo_code` (string) - Unique case sensitive code. Contains letters and numbers.
- `show_inactive_time_limited_items` (integer) - Shows time-limited items that are not available to the user. The validity period of such items has not started or has already expired.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_virtual_currency_sku
*Type:* FUNCTION
Get virtual currency by SKU

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `virtual_currency_sku (REQUIRED)` (string) - Virtual currency SKU.
- `locale` (string) - Response language. Two-letter lowercase language code per ISO 639-1.
- `country` (string) - Two-letter uppercase country code per [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2). Check the documentation for detailed information about [countries supported by Xsolla](https://developers.xsolla.com/doc/shop-builder/references/supported-countries/) and [the process of determining the country](https://developers.xsolla.com/doc/shop-builder/features/pricing-policy/#pricing_policy_country_determination).
- `show_inactive_time_limited_items` (integer) - Shows time-limited items that are not available to the user. The validity period of such items has not started or has already expired.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_virtual_currency_package
*Type:* FUNCTION
Get virtual currency package list

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `limit` (integer) - Limit for the number of elements on the page.
- `offset` (integer) - Number of the element from which the list is generated (the count starts from 0).
- `locale` (string) - Response language. Two-letter lowercase language code per ISO 639-1.
- `additional_fields` (array) - The list of additional fields. These fields will be in the response if you send them in your request.
- `country` (string) - Two-letter uppercase country code per [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2). Check the documentation for detailed information about [countries supported by Xsolla](https://developers.xsolla.com/doc/shop-builder/references/supported-countries/) and [the process of determining the country](https://developers.xsolla.com/doc/shop-builder/features/pricing-policy/#pricing_policy_country_determination).
- `promo_code` (string) - Unique case sensitive code. Contains letters and numbers.
- `show_inactive_time_limited_items` (integer) - Shows time-limited items that are not available to the user. The validity period of such items has not started or has already expired.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_virtual_currency_package_sku
*Type:* FUNCTION
Get virtual currency package by SKU

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `virtual_currency_package_sku (REQUIRED)` (string) - Virtual currency package SKU.
- `locale` (string) - Response language. Two-letter lowercase language code per ISO 639-1.
- `country` (string) - Two-letter uppercase country code per [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2). Check the documentation for detailed information about [countries supported by Xsolla](https://developers.xsolla.com/doc/shop-builder/references/supported-countries/) and [the process of determining the country](https://developers.xsolla.com/doc/shop-builder/features/pricing-policy/#pricing_policy_country_determination).
- `show_inactive_time_limited_items` (integer) - Shows time-limited items that are not available to the user. The validity period of such items has not started or has already expired.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_virtual_items_group
*Type:* FUNCTION
Get items list by specified group

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `external_id (REQUIRED)` (string) - Group external ID.
- `limit` (integer) - Limit for the number of elements on the page.
- `offset` (integer) - Number of the element from which the list is generated (the count starts from 0).
- `locale` (string) - Response language. Two-letter lowercase language code per ISO 639-1.
- `additional_fields` (array) - The list of additional fields. These fields will be in the response if you send them in your request.
- `country` (string) - Two-letter uppercase country code per [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2). Check the documentation for detailed information about [countries supported by Xsolla](https://developers.xsolla.com/doc/shop-builder/references/supported-countries/) and [the process of determining the country](https://developers.xsolla.com/doc/shop-builder/features/pricing-policy/#pricing_policy_country_determination).
- `promo_code` (string) - Unique case sensitive code. Contains letters and numbers.
- `show_inactive_time_limited_items` (integer) - Shows time-limited items that are not available to the user. The validity period of such items has not started or has already expired.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_item_groups
*Type:* FUNCTION
Get item group list

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `promo_code` (string) - Unique case sensitive code. Contains letters and numbers.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.create_order_with_item_for_virtual_currency
*Type:* FUNCTION
Create order with specified item purchased by virtual currency

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `item_sku (REQUIRED)` (string) - Item SKU.
- `virtual_currency_sku (REQUIRED)` (string) - Virtual currency SKU.
- `platform` (string) - Publishing platform the user plays on `xsolla` (default), `playstation_network`, `xbox_live`, `pc_standalone`, `nintendo_shop`, `google_play`, `app_store_ios`, `android_standalone`, `ios_standalone`, `android_other`, `ios_other`, `pc_other`.
- `body` (table)
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

**Examples**

```
{
  custom_parameters =
  {
  },
}

```

### shop.get_sellable_items
*Type:* FUNCTION
Get sellable items list

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `limit` (integer) - Limit for the number of elements on the page.
- `offset` (integer) - Number of the element from which the list is generated (the count starts from 0).
- `locale` (string) - Response language. Two-letter lowercase language code per ISO 639-1.
- `additional_fields` (array) - The list of additional fields. These fields will be in the response if you send them in your request.
- `country` (string) - Two-letter uppercase country code per [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2). Check the documentation for detailed information about [countries supported by Xsolla](https://developers.xsolla.com/doc/shop-builder/references/supported-countries/) and [the process of determining the country](https://developers.xsolla.com/doc/shop-builder/features/pricing-policy/#pricing_policy_country_determination).
- `promo_code` (string) - Unique case sensitive code. Contains letters and numbers.
- `show_inactive_time_limited_items` (integer) - Shows time-limited items that are not available to the user. The validity period of such items has not started or has already expired.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_sellable_item_by_id
*Type:* FUNCTION
Get sellable item by ID

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `item_id (REQUIRED)` (string) - Item ID.
- `promo_code` (string) - Unique case sensitive code. Contains letters and numbers.
- `show_inactive_time_limited_items` (integer) - Shows time-limited items that are not available to the user. The validity period of such items has not started or has already expired.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_sellable_item_by_sku
*Type:* FUNCTION
Get sellable item by SKU

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `sku (REQUIRED)` (string) - Item SKU.
- `promo_code` (string) - Unique case sensitive code. Contains letters and numbers.
- `show_inactive_time_limited_items` (integer) - Shows time-limited items that are not available to the user. The validity period of such items has not started or has already expired.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_sellable_items_group
*Type:* FUNCTION
Get sellable items list by specified group

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `external_id (REQUIRED)` (string) - Group external ID.
- `limit` (integer) - Limit for the number of elements on the page.
- `offset` (integer) - Number of the element from which the list is generated (the count starts from 0).
- `locale` (string) - Response language. Two-letter lowercase language code per ISO 639-1.
- `additional_fields` (array) - The list of additional fields. These fields will be in the response if you send them in your request.
- `country` (string) - Two-letter uppercase country code per [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2). Check the documentation for detailed information about [countries supported by Xsolla](https://developers.xsolla.com/doc/shop-builder/references/supported-countries/) and [the process of determining the country](https://developers.xsolla.com/doc/shop-builder/features/pricing-policy/#pricing_policy_country_determination).
- `promo_code` (string) - Unique case sensitive code. Contains letters and numbers.
- `show_inactive_time_limited_items` (integer) - Shows time-limited items that are not available to the user. The validity period of such items has not started or has already expired.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_reward_chains_list
*Type:* FUNCTION
Get current user's reward chains

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `limit` (integer) - Limit for the number of elements on the page.
- `offset` (integer) - Number of the element from which the list is generated (the count starts from 0).
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_user_reward_chain_balance
*Type:* FUNCTION
Get current user's value point balance

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `reward_chain_id (REQUIRED)` (integer) - Reward chain ID.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.claim_user_reward_chain_step_reward
*Type:* FUNCTION
Claim step reward

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID. You can find this parameter in your [Publisher Account](https://publisher.xsolla.com/) next to the name of the project.
- `reward_chain_id (REQUIRED)` (integer) - Reward chain ID.
- `step_id (REQUIRED)` (integer) - Reward chain step ID.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.get_user_clan_top_contributors
*Type:* FUNCTION
Get top 10 contributors to reward chain under clan

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID.
- `reward_chain_id (REQUIRED)` (integer) - Reward chain ID.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

### shop.user_clan_update
*Type:* FUNCTION
Update current user's clan

**Parameters**

- `project_id (REQUIRED)` (integer) - Project ID.
- `callback` (function) - Optional callback function
- `retry_policy` (table) - Optional retry policy
- `cancellation_token` (table) - Optional cancellation token

<!-- extension-zendesk_zendesk -->

# extension-zendesk {#apis:extension-zendesk_zendesk}

**Namespace:** `zendesk`
**Language:** Lua
**Type:** Extension

Defold native extension to interact with the Zendesk SDK.

## API

### zendesk.initialize
*Type:* FUNCTION
Initialize the Zendesk SDK

### zendesk.set_callback
*Type:* FUNCTION
Set a callback for events from the Zendesk SDK

### zendesk.show_messaging
*Type:* FUNCTION
Show the conversation screen.

### zendesk.set_conversation_fields
*Type:* FUNCTION
Set conversation fields in the SDK to add contextual data about the conversation.

### zendesk.clear_conversation_fields
*Type:* FUNCTION
Clear conversation fields from the SDK storage when the client side context changes.

### zendesk.set_conversation_tags
*Type:* FUNCTION
Set custom conversation tags in the SDK to add contextual data about the conversation.

### zendesk.clear_conversation_tags
*Type:* FUNCTION
Clear conversation tags from SDK storage when the client side context changes.

### zendesk.login
*Type:* FUNCTION
Authenticate a user.

### zendesk.logout
*Type:* FUNCTION
Unauthenticate a user.

### MSG_INIT_ERROR
*Type:* VARIABLE
An error was detected while initializing the Zendesk SDK

### MSG_INIT_SUCCESS
*Type:* VARIABLE
The Zendesk SDK has been initialized successfully

### MSG_INTERNAL_ERROR
*Type:* VARIABLE
An internal error occured

### MSG_ERROR
*Type:* VARIABLE
An generic error occured

### MSG_UNREAD_MESSAGE_COUNT_CHANGED
*Type:* VARIABLE
The number of unread messages has changed

### MSG_AUTHENTICATION_FAILED
*Type:* VARIABLE
A REST call failed for authentication reasons

### MSG_FIELD_VALIDATION_FAILED
*Type:* VARIABLE
Validation checks failed for conversation fields

### MSG_LOGIN_SUCCESS
*Type:* VARIABLE
Login was successful

### MSG_LOGIN_FAILED
*Type:* VARIABLE
Login failed

### MSG_LOGOUT_SUCCESS
*Type:* VARIABLE
Logout was successful

### MSG_LOGOUT_FAILED
*Type:* VARIABLE
Logout failed
